<!--
  ~ Copyright © 2017 W3C® (MIT, ERCIM, Keio, Beihang). W3C liability, trademark and document use rules apply.
  -->
<!DOCTYPE html>
<!-- saved from url=(0045)https://www.w3.org/TR/xpath-functions-31/#toc -->
<html lang="EN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
      
      <title>XPath and XQuery Functions and Operators 3.1 </title>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style type="text/css">
/* from xsl:query.xsl (C) */          
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

div.issue
p.title        { margin-left: -2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }

li p           { margin-top: 0.3em;
                 margin-bottom: 0.3em; }

sup small      { font-style: italic;
                 color: #8F8F8F;
               }
    
/* from xsl:query.xsl (D) */          
div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
                       
pre.small { font-size: small }                       
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   padding: 4px; margin: 0em }
                   
div.exampleInner table { border: 0;
                         border-spacing: 0;
                       }
                   
div.exampleInner td { vertical-align: baseline;
                      padding: 0;
                    }
                   
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}
                    
div.proto { border: 0;
            border-spacing: 0; 
          }

div.issue { border-bottom-color: black;
            border-bottom-style: solid;
	    border-bottom-width: 1pt;
	    margin-bottom: 20pt;
}

th.issue-toc-head { border-bottom-color: black;
                    border-bottom-style: solid;
                    border-bottom-width: 1pt;
}

      
div.schemaComp  { border: 4px double gray;
                  margin: 0em 1em;
                  padding: 0em;
                }
div.compHeader  { margin: 4px;
                  font-weight: bold;
                }
span.schemaComp { background-color: white;
                  color: #A52A2A;
                }
div.compBody    { border-top-width: 4px;
                  border-top-style: double;
                  border-top-color: #d3d3d3;
                  padding: 4px;
                  margin: 0em;
                }

div.exampleInner { background-color: #d5dee3;
                   color: black;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px;
		   margin-bottom: 4px;
                 }

div.issueBody    { margin-left: 0.25in;
                 }

code.function    { font-weight: bold;
                 }
code.return-type { font-style: italic;
                 }
code.return-varies { font-weight: bold;
                   font-style: italic;
                 }
code.type        { font-style: italic;
                 }
code.as          { font-style: normal;
                 }
code.arg         {
                 }
code.strikeout   { text-decoration: line-through;
                 }
code.small       { font-size: small;
                 }
p.table.footnote { font-size: 8pt;
                 }

table.casting    { font-size: x-small;
                 }
table.hierarchy  { font-size: x-small;
                 }
table.proto      {
                  
                 }

td.castY         { background-color: #7FFF7F;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

td.castN         { background-color: #FF7F7F;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

td.castM         { background-color: white;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

td.castOther     { background-color: yellow;
                   color: black;
                   text-align: center;
                   vertical-align: middle;
                 }

span.cancast:hover { background-color: #ffa;
                   color: black;
                 }

div.protoref     { margin-left: 0.5in;
                   text-indent: -0.5in;
                 }

dd.indent        { margin-left: 2em;
                 }

p.element-syntax { border: solid thin; background-color: #ffccff
                 }

p.element-syntax-chg { border: solid thick yellow; background-color: #ffccff
                 }

div.proto        { 
    padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
		margin: 1em auto;
		border-color: #ff99ff;
		background: #ffe6ff;
		overflow: auto;
                 }


div.example-chg  { border: solid thick yellow; background-color: #40e0d0; padding: 1em
                 }
                 
div.ffheader     {  
			margin-top: .8rem;
			font-size: 140%;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: hsla(203, 20%, 40%, .7);
		}                  

span.verb        { font: small-caps 100% sans-serif
                 }

span.error       { font-size: small
                 }

span.definition  { font: small-caps 100% sans-serif
                 }

span.grayed      { color: gray
                 }
                 
table.scrap td {
	 vertical-align: baseline;
	 text-align: left;
	 padding-left: 30px;
}

table.data table.index {
 border-bottom:2px !important ;
}


/* from xsl-query.xsl (B) */    
table.small                             { 
                                          font-size: x-small; 
                                          border-collapse: collapse;
                                        }
table.small td                          { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                        }
table.small th                          { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                          text-align: center;
                                        }

table.medium                            { 
                                          font-size: smaller;
                                          border-collapse: collapse; 
                                        }
table.medium td                         { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                        }
table.medium th                         { 
                                          border: 1px solid #000000;
                                          padding: 5px;
                                          text-align: center;
                                        }
                                        
table.no-code-break code {
  white-space: nowrap;
}

table.longlastcol td {
  vertical-align: baseline;
  text-align: left;
}

a.judgment:visited, a.judgment:link     { font-family: sans-serif;
                              	          color: black; 
                              	          text-decoration: none }
a.processing:visited, a.processing:link { color: black; 
                              		        text-decoration: none }
a.env:visited, a.env:link               { color: black; 
                                          text-decoration: none }</style><link rel="stylesheet" type="text/css" href="./xquery31_files/W3C-PR.css"/>
   </head>
   <body class="toc-inline"><p id="toc-nav"><a id="toc-jump" href="https://www.w3.org/TR/xpath-functions-31/#toc"><span aria-hidden="true">↑</span> <span>Jump to Table of Contents</span></a><a id="toc-toggle" href="https://www.w3.org/TR/xpath-functions-31/#toc"><span aria-hidden="true">→</span> <span>Pop Out Sidebar</span></a></p>
      <div class="head">
         <p><a href="https://www.w3.org/"><img src="./xquery31_files/W3C" alt="W3C" height="48" width="72"/></a></p>
         
         <h1><a id="title"></a>XPath and XQuery Functions and Operators 3.1 
         </h1>
         
         <h2><a id="w3c-doctype"></a>W3C Proposed Recommendation 17 January 2017
         </h2>
         <dl>
            <dt>This version:</dt>
            <dd>
               <a href="https://www.w3.org/TR/2017/PR-xpath-functions-31-20170117/">https://www.w3.org/TR/2017/PR-xpath-functions-31-20170117/</a>
               
            </dd>
            <dt>Latest version of XPath and XQuery Functions and Operators 3.1:</dt>
            <dd>
               <a href="https://www.w3.org/TR/xpath-functions-31/">https://www.w3.org/TR/xpath-functions-31/</a>
               
            </dd>
            <dt>Previous versions of XPath and XQuery Functions and Operators 3.1:</dt>
            <dd><a href="https://www.w3.org/TR/2016/CR-xpath-functions-31-20161213/">https://www.w3.org/TR/2016/CR-xpath-functions-31-20161213/</a><br><a href="https://www.w3.org/TR/2014/CR-xpath-functions-31-20141218/">https://www.w3.org/TR/2014/CR-xpath-functions-31-20141218/</a><br><a href="https://www.w3.org/TR/2014/WD-xpath-functions-31-20141007/">https://www.w3.org/TR/2014/WD-xpath-functions-31-20141007/</a><br><a href="https://www.w3.org/TR/2014/WD-xpath-functions-31-20140424/">https://www.w3.org/TR/2014/WD-xpath-functions-31-20140424/</a></dd>
            <dt>Most recent version of XPath and XQuery Functions and Operators 3:</dt>
            <dd>
               <a href="https://www.w3.org/TR/xpath-functions-3/">https://www.w3.org/TR/xpath-functions-3/</a>
               
            </dd>
            <dt>Most recent version of XPath and XQuery Functions and Operators:</dt>
            <dd>
               <a href="https://www.w3.org/TR/xpath-functions/">https://www.w3.org/TR/xpath-functions/</a>
               
            </dd>
            <dt>Most recent Recommendation of XPath and XQuery Functions and Operators:</dt>
            <dd>
               <a href="https://www.w3.org/TR/2014/REC-xpath-functions-30-20140408/">https://www.w3.org/TR/2014/REC-xpath-functions-30-20140408/</a>
               
            </dd>
            <dt>Editor:</dt>
            <dd>Michael Kay (XSLT WG), Saxonica <a href="http://www.saxonica.com/">&lt;http://www.saxonica.com/&gt;</a></dd>
         </dl>
         <p>See also <a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=xpath-functions-31"><strong>translations</strong></a>.
         </p>
         <p>This document is also available in these non-normative formats: <a href="https://www.w3.org/TR/2017/PR-xpath-functions-31-20170117/xpath-functions-31.xml">Specification in XML format using HTML5 vocabulary</a>, <a href="https://www.w3.org/TR/2017/PR-xpath-functions-31-20170117/function-catalog.xml">XML function catalog</a>, and&nbsp;<a href="https://www.w3.org/TR/2017/PR-xpath-functions-31-20170117/xpath-functions-31-diff.html">HTML with change markings relative to version 3.0</a>.
         </p>
         <p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>&nbsp;©&nbsp;2017&nbsp;<a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.
         </p>
         <hr>
      </div>
      <div>
         
         <h2><a id="abstract"></a>Abstract
         </h2>
         <p>This document defines constructor functions, operators, and functions on the datatypes
            defined in
            <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> and the datatypes defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.  It also defines
            functions and operators on nodes and node sequences as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.  These functions and operators are defined for use in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and
            <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a> and other related XML standards.  The signatures and summaries of functions defined
            in this document are available at:
            <a href="http://www.w3.org/2005/xpath-functions/">http://www.w3.org/2005/xpath-functions/</a>.
         </p>
         <p><em>At the time of writing, XSLT 3.0 requires support for XPath 3.0, and therefore version
               3.0 of this function library;
               but it makes support for XPath 3.1 optional. It also replicates some of the functions
               defined herein, notably those
               concerned with processing of maps, so that these functions are available in XSLT 3.0
               whether or not the processor supports
               XPath 3.1.</em></p>
         <p>This is the fourth version of the specification of this function library. The first
            version was included as an intrinsic part of the
            <a href="https://www.w3.org/TR/xpath-functions-31/#xpath">[XML Path Language (XPath) Version 1.0]</a> specification published on 16 November 1999. The second version was published under
            the title
            <em>XQuery 1.0 and XPath 2.0 Functions and Operators</em> on 23 January 2007, 
            subsequently revised in a second edition published on 14 December 2010.
            The third version, published on 8 April 2014, was the first to carry its own version
            number, 3.0. This version 3.1 is a revision of 3.0 that adds additional functions
            and operators, notably to work with the
            new datatypes of maps and arrays.
         </p>
         <p>A summary of changes since version 3.0 is provided at <a href="https://www.w3.org/TR/xpath-functions-31/#changelog"><b>F Changes since version 3.0</b></a>.
         </p>
      </div>
      <div>
         
         <h2><a id="status"></a>Status of this Document
         </h2>
         <p><em>This section describes the status of this
               document at the time of its publication.
               Other documents may supersede this document.
               A list of current W3C publications and the latest
               revision of this technical report can be found in the
               <a href="https://www.w3.org/TR/">W3C technical reports index</a>
               at https://www.w3.org/TR/.</em></p>
         <p>This document is governed by the
            <a id="w3c_process_revision" href="https://www.w3.org/2015/Process-20150901/">1 September 2015 W3C Process Document</a>. </p>
         <p>This is a <a href="https://www.w3.org/2015/Process-20150901/#rec-pr">Proposed Recommendation</a> as described in the <a href="https://www.w3.org/2015/Process-20150901/">Process Document</a>.
            This document will remain a Proposed Recommendation until 28 February 2017. 
            Advisory Committee Representatives should consult their
            <a href="https://www.w3.org/2002/09/wbs/myQuestionnaires">WBS questionnaires</a>. 
	    </p>
	    <p>This document was published by the W3C <a href="https://www.w3.org/XML/Query/">XML Query Working Group</a> and the W3C <a href="https://www.w3.org/Style/XSL/">XSLT Working Group</a>, each of which is part of the <a href="https://www.w3.org/XML/Activity">XML Activity</a>.</p>
	    <p>The Working Groups expect to advance this specification to <a href="https://www.w3.org/2015/Process-20150901/#rec-publication">Recommendation</a> Status.
         </p>
         <p>This Proposed Recommendation specifies XSLT and XQuery Functions and Operators (F&amp;O)
            version 3.1, a fully compatible extension of <a href="https://www.w3.org/TR/xpath-functions-30/">F&amp;O version 3.0</a>.
            This publication differs from its version 3.0 primarily by the addition of maps and
            arrays.  There are numerous
            smaller differences as well, all documented in the change log. 
         </p>
         <p>This specification is designed to be referenced normatively from
            other specifications defining a host language for it; it is not
            intended to be implemented outside a host language.  The
            implementability of this specification has been tested in the context
            of its normative inclusion in host languages defined by the
            <a href="https://www.w3.org/TR/xquery-31/">XQuery 3.1</a>
            and
            XSLT 3.0 (expected in 2017) specifications;
            see the
            <a href="https://dev.w3.org/2011/QT3-test-suite/ReportingResults31/report.html">XQuery 3.1 implementation report</a>
            (and, in the future, the WGs expect that there will also be an
            XSLT 3.0 implementation report) for details.
         </p>
         <p>This document incorporates changes made against the <a href="https://www.w3.org/2015/Process-20150901/#candidate-rec">Candidate Recommendation</a> of 13 December 2016.
            Changes to this document since the <a href="https://www.w3.org/2015/Process-20150901/#candidate-rec">Candidate Recommendation</a> are detailed in
            <a href="https://www.w3.org/TR/xpath-functions-31/#changes-since-Dec-2016"><b>F.4 Changes since the Candidate Recommendation of 13 December 2016</b></a>.
         </p>
         <p>Please report errors in this document using W3C's
            <a href="https://www.w3.org/Bugs/Public/">public Bugzilla system</a>
            (instructions can be found at
            <a href="https://www.w3.org/XML/2005/04/qt-bugzilla">https://www.w3.org/XML/2005/04/qt-bugzilla</a>).
            If access to that system is not feasible, you may send your comments
            to the W3C XSLT/XPath/XQuery public comments mailing list,
            <a href="mailto:public-qt-comments@w3.org">public-qt-comments@w3.org</a>.
            It will be very helpful if you include the string 
            “[FO31]”
            in the subject line of your report, whether made in Bugzilla or in email.
            Please use multiple Bugzilla entries (or, if necessary, multiple email messages)
            if you have more than one comment to make.
            Archives of the comments and responses are available at
            <a href="https://lists.w3.org/Archives/Public/public-qt-comments/">https://lists.w3.org/Archives/Public/public-qt-comments/</a>. 
         </p>
         <p>Publication as a Proposed Recommendation
            does not imply endorsement by the W3C Membership. 
            This is a draft document and may be updated, replaced or obsoleted
            by other documents at any time. 
            It is inappropriate to cite this document as other than work in progress.
         </p>
         <p>This document was produced by groups operating under the
            <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
            W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/18797/status#disclosures" rel="disclosure">public list of any patent disclosures (W3C XML Query Working Group)</a> and a <a href="https://www.w3.org/2004/01/pp-impl/19552/status#disclosures" rel="disclosure">public list of any patent 
               disclosures (W3C XSLT Working Group)</a> made in connection with the deliverables of each group; these pages also include instructions for
            disclosing a patent.
            An individual who has actual knowledge of a patent which the individual believes contains
            <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a>
            must disclose the information in accordance with
            <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. 
         </p>
      </div>
      <nav id="toc">
         
         <div id="function-finder">
            <div class="ffheader">FUNCTION FINDER</div>
            <div style="height: 30px"><select onchange="document.getElementById(&#39;select-fn&#39;).style.display = &#39;none&#39;;document.getElementById(&#39;select-array&#39;).style.display = &#39;none&#39;;document.getElementById(&#39;select-map&#39;).style.display = &#39;none&#39;;document.getElementById(&#39;select-math&#39;).style.display = &#39;none&#39;;document.getElementById(&#39;select-op&#39;).style.display = &#39;none&#39;;document.getElementById(&#39;select-&#39; + this.value).style.display = &#39;inline&#39;;">
                  <option value="fn">fn</option>
                  <option value="array">array</option>
                  <option value="map">map</option>
                  <option value="math">math</option>
                  <option value="op">op</option></select><select id="select-fn" style="display: inline" onchange="location.hash = this.value">
                  <option value="func-abs">abs</option>
                  <option value="func-adjust-dateTime-to-timezone">adjust-dateTime-to-timezone</option>
                  <option value="func-adjust-date-to-timezone">adjust-date-to-timezone</option>
                  <option value="func-adjust-time-to-timezone">adjust-time-to-timezone</option>
                  <option value="func-analyze-string">analyze-string</option>
                  <option value="func-apply">apply</option>
                  <option value="func-available-environment-variables">available-environment-variables</option>
                  <option value="func-avg">avg</option>
                  <option value="func-base-uri">base-uri</option>
                  <option value="func-boolean">boolean</option>
                  <option value="func-ceiling">ceiling</option>
                  <option value="func-codepoint-equal">codepoint-equal</option>
                  <option value="func-codepoints-to-string">codepoints-to-string</option>
                  <option value="func-collation-key">collation-key</option>
                  <option value="func-collection">collection</option>
                  <option value="func-compare">compare</option>
                  <option value="func-concat">concat</option>
                  <option value="func-contains">contains</option>
                  <option value="func-contains-token">contains-token</option>
                  <option value="func-count">count</option>
                  <option value="func-current-date">current-date</option>
                  <option value="func-current-dateTime">current-dateTime</option>
                  <option value="func-current-time">current-time</option>
                  <option value="func-data">data</option>
                  <option value="func-dateTime">dateTime</option>
                  <option value="func-day-from-date">day-from-date</option>
                  <option value="func-day-from-dateTime">day-from-dateTime</option>
                  <option value="func-days-from-duration">days-from-duration</option>
                  <option value="func-deep-equal">deep-equal</option>
                  <option value="func-default-collation">default-collation</option>
                  <option value="func-default-language">default-language</option>
                  <option value="func-distinct-values">distinct-values</option>
                  <option value="func-doc">doc</option>
                  <option value="func-doc-available">doc-available</option>
                  <option value="func-document-uri">document-uri</option>
                  <option value="func-element-with-id">element-with-id</option>
                  <option value="func-empty">empty</option>
                  <option value="func-encode-for-uri">encode-for-uri</option>
                  <option value="func-ends-with">ends-with</option>
                  <option value="func-environment-variable">environment-variable</option>
                  <option value="func-error">error</option>
                  <option value="func-escape-html-uri">escape-html-uri</option>
                  <option value="func-exactly-one">exactly-one</option>
                  <option value="func-exists">exists</option>
                  <option value="func-false">false</option>
                  <option value="func-filter">filter</option>
                  <option value="func-floor">floor</option>
                  <option value="func-fold-left">fold-left</option>
                  <option value="func-fold-right">fold-right</option>
                  <option value="func-for-each">for-each</option>
                  <option value="func-for-each-pair">for-each-pair</option>
                  <option value="func-format-date">format-date</option>
                  <option value="func-format-dateTime">format-dateTime</option>
                  <option value="func-format-integer">format-integer</option>
                  <option value="func-format-number">format-number</option>
                  <option value="func-format-time">format-time</option>
                  <option value="func-function-arity">function-arity</option>
                  <option value="func-function-lookup">function-lookup</option>
                  <option value="func-function-name">function-name</option>
                  <option value="func-generate-id">generate-id</option>
                  <option value="func-has-children">has-children</option>
                  <option value="func-head">head</option>
                  <option value="func-hours-from-dateTime">hours-from-dateTime</option>
                  <option value="func-hours-from-duration">hours-from-duration</option>
                  <option value="func-hours-from-time">hours-from-time</option>
                  <option value="func-id">id</option>
                  <option value="func-idref">idref</option>
                  <option value="func-implicit-timezone">implicit-timezone</option>
                  <option value="func-index-of">index-of</option>
                  <option value="func-innermost">innermost</option>
                  <option value="func-in-scope-prefixes">in-scope-prefixes</option>
                  <option value="func-insert-before">insert-before</option>
                  <option value="func-iri-to-uri">iri-to-uri</option>
                  <option value="func-json-doc">json-doc</option>
                  <option value="func-json-to-xml">json-to-xml</option>
                  <option value="func-lang">lang</option>
                  <option value="func-last">last</option>
                  <option value="func-load-xquery-module">load-xquery-module</option>
                  <option value="func-local-name">local-name</option>
                  <option value="func-local-name-from-QName">local-name-from-QName</option>
                  <option value="func-lower-case">lower-case</option>
                  <option value="func-matches">matches</option>
                  <option value="func-max">max</option>
                  <option value="func-min">min</option>
                  <option value="func-minutes-from-dateTime">minutes-from-dateTime</option>
                  <option value="func-minutes-from-duration">minutes-from-duration</option>
                  <option value="func-minutes-from-time">minutes-from-time</option>
                  <option value="func-month-from-date">month-from-date</option>
                  <option value="func-month-from-dateTime">month-from-dateTime</option>
                  <option value="func-months-from-duration">months-from-duration</option>
                  <option value="func-name">name</option>
                  <option value="func-namespace-uri">namespace-uri</option>
                  <option value="func-namespace-uri-for-prefix">namespace-uri-for-prefix</option>
                  <option value="func-namespace-uri-from-QName">namespace-uri-from-QName</option>
                  <option value="func-nilled">nilled</option>
                  <option value="func-node-name">node-name</option>
                  <option value="func-normalize-space">normalize-space</option>
                  <option value="func-normalize-unicode">normalize-unicode</option>
                  <option value="func-not">not</option>
                  <option value="func-number">number</option>
                  <option value="func-one-or-more">one-or-more</option>
                  <option value="func-outermost">outermost</option>
                  <option value="func-parse-ietf-date">parse-ietf-date</option>
                  <option value="func-parse-json">parse-json</option>
                  <option value="func-parse-xml">parse-xml</option>
                  <option value="func-parse-xml-fragment">parse-xml-fragment</option>
                  <option value="func-path">path</option>
                  <option value="func-position">position</option>
                  <option value="func-prefix-from-QName">prefix-from-QName</option>
                  <option value="func-QName">QName</option>
                  <option value="func-random-number-generator">random-number-generator</option>
                  <option value="func-remove">remove</option>
                  <option value="func-replace">replace</option>
                  <option value="func-resolve-QName">resolve-QName</option>
                  <option value="func-resolve-uri">resolve-uri</option>
                  <option value="func-reverse">reverse</option>
                  <option value="func-root">root</option>
                  <option value="func-round">round</option>
                  <option value="func-round-half-to-even">round-half-to-even</option>
                  <option value="func-seconds-from-dateTime">seconds-from-dateTime</option>
                  <option value="func-seconds-from-duration">seconds-from-duration</option>
                  <option value="func-seconds-from-time">seconds-from-time</option>
                  <option value="func-serialize">serialize</option>
                  <option value="func-sort">sort</option>
                  <option value="func-starts-with">starts-with</option>
                  <option value="func-static-base-uri">static-base-uri</option>
                  <option value="func-string">string</option>
                  <option value="func-string-join">string-join</option>
                  <option value="func-string-length">string-length</option>
                  <option value="func-string-to-codepoints">string-to-codepoints</option>
                  <option value="func-subsequence">subsequence</option>
                  <option value="func-substring">substring</option>
                  <option value="func-substring-after">substring-after</option>
                  <option value="func-substring-before">substring-before</option>
                  <option value="func-sum">sum</option>
                  <option value="func-tail">tail</option>
                  <option value="func-timezone-from-date">timezone-from-date</option>
                  <option value="func-timezone-from-dateTime">timezone-from-dateTime</option>
                  <option value="func-timezone-from-time">timezone-from-time</option>
                  <option value="func-tokenize">tokenize</option>
                  <option value="func-trace">trace</option>
                  <option value="func-transform">transform</option>
                  <option value="func-translate">translate</option>
                  <option value="func-true">true</option>
                  <option value="func-unordered">unordered</option>
                  <option value="func-unparsed-text">unparsed-text</option>
                  <option value="func-unparsed-text-available">unparsed-text-available</option>
                  <option value="func-unparsed-text-lines">unparsed-text-lines</option>
                  <option value="func-upper-case">upper-case</option>
                  <option value="func-uri-collection">uri-collection</option>
                  <option value="func-xml-to-json">xml-to-json</option>
                  <option value="func-year-from-date">year-from-date</option>
                  <option value="func-year-from-dateTime">year-from-dateTime</option>
                  <option value="func-years-from-duration">years-from-duration</option>
                  <option value="func-zero-or-one">zero-or-one</option></select><select id="select-array" style="display: none" onchange="location.hash = this.value">
                  <option value="func-array-append">append</option>
                  <option value="func-array-filter">filter</option>
                  <option value="func-array-flatten">flatten</option>
                  <option value="func-array-fold-left">fold-left</option>
                  <option value="func-array-fold-right">fold-right</option>
                  <option value="func-array-for-each">for-each</option>
                  <option value="func-array-for-each-pair">for-each-pair</option>
                  <option value="func-array-get">get</option>
                  <option value="func-array-head">head</option>
                  <option value="func-array-insert-before">insert-before</option>
                  <option value="func-array-join">join</option>
                  <option value="func-array-put">put</option>
                  <option value="func-array-remove">remove</option>
                  <option value="func-array-reverse">reverse</option>
                  <option value="func-array-size">size</option>
                  <option value="func-array-sort">sort</option>
                  <option value="func-array-subarray">subarray</option>
                  <option value="func-array-tail">tail</option></select><select id="select-map" style="display: none" onchange="location.hash = this.value">
                  <option value="func-map-contains">contains</option>
                  <option value="func-map-entry">entry</option>
                  <option value="func-map-find">find</option>
                  <option value="func-map-for-each">for-each</option>
                  <option value="func-map-get">get</option>
                  <option value="func-map-keys">keys</option>
                  <option value="func-map-merge">merge</option>
                  <option value="func-map-put">put</option>
                  <option value="func-map-remove">remove</option>
                  <option value="func-map-size">size</option></select><select id="select-math" style="display: none" onchange="location.hash = this.value">
                  <option value="func-math-acos">acos</option>
                  <option value="func-math-asin">asin</option>
                  <option value="func-math-atan">atan</option>
                  <option value="func-math-atan2">atan2</option>
                  <option value="func-math-cos">cos</option>
                  <option value="func-math-exp">exp</option>
                  <option value="func-math-exp10">exp10</option>
                  <option value="func-math-log">log</option>
                  <option value="func-math-log10">log10</option>
                  <option value="func-math-pi">pi</option>
                  <option value="func-math-pow">pow</option>
                  <option value="func-math-sin">sin</option>
                  <option value="func-math-sqrt">sqrt</option>
                  <option value="func-math-tan">tan</option></select><select id="select-op" style="display: none" onchange="location.hash = this.value">
                  <option value="func-add-dayTimeDurations">add-dayTimeDurations</option>
                  <option value="func-add-dayTimeDuration-to-date">add-dayTimeDuration-to-date</option>
                  <option value="func-add-dayTimeDuration-to-dateTime">add-dayTimeDuration-to-dateTime</option>
                  <option value="func-add-dayTimeDuration-to-time">add-dayTimeDuration-to-time</option>
                  <option value="func-add-yearMonthDurations">add-yearMonthDurations</option>
                  <option value="func-add-yearMonthDuration-to-date">add-yearMonthDuration-to-date</option>
                  <option value="func-add-yearMonthDuration-to-dateTime">add-yearMonthDuration-to-dateTime</option>
                  <option value="func-base64Binary-equal">base64Binary-equal</option>
                  <option value="func-base64Binary-greater-than">base64Binary-greater-than</option>
                  <option value="func-base64Binary-less-than">base64Binary-less-than</option>
                  <option value="func-boolean-equal">boolean-equal</option>
                  <option value="func-boolean-greater-than">boolean-greater-than</option>
                  <option value="func-boolean-less-than">boolean-less-than</option>
                  <option value="func-date-equal">date-equal</option>
                  <option value="func-date-greater-than">date-greater-than</option>
                  <option value="func-date-less-than">date-less-than</option>
                  <option value="func-dateTime-equal">dateTime-equal</option>
                  <option value="func-dateTime-greater-than">dateTime-greater-than</option>
                  <option value="func-dateTime-less-than">dateTime-less-than</option>
                  <option value="func-dayTimeDuration-greater-than">dayTimeDuration-greater-than</option>
                  <option value="func-dayTimeDuration-less-than">dayTimeDuration-less-than</option>
                  <option value="func-divide-dayTimeDuration">divide-dayTimeDuration</option>
                  <option value="func-divide-dayTimeDuration-by-dayTimeDuration">divide-dayTimeDuration-by-dayTimeDuration</option>
                  <option value="func-divide-yearMonthDuration">divide-yearMonthDuration</option>
                  <option value="func-divide-yearMonthDuration-by-yearMonthDuration">divide-yearMonthDuration-by-yearMonthDuration</option>
                  <option value="func-duration-equal">duration-equal</option>
                  <option value="func-gDay-equal">gDay-equal</option>
                  <option value="func-gMonthDay-equal">gMonthDay-equal</option>
                  <option value="func-gMonth-equal">gMonth-equal</option>
                  <option value="func-gYear-equal">gYear-equal</option>
                  <option value="func-gYearMonth-equal">gYearMonth-equal</option>
                  <option value="func-hexBinary-equal">hexBinary-equal</option>
                  <option value="func-hexBinary-greater-than">hexBinary-greater-than</option>
                  <option value="func-hexBinary-less-than">hexBinary-less-than</option>
                  <option value="func-multiply-dayTimeDuration">multiply-dayTimeDuration</option>
                  <option value="func-multiply-yearMonthDuration">multiply-yearMonthDuration</option>
                  <option value="func-NOTATION-equal">NOTATION-equal</option>
                  <option value="func-numeric-add">numeric-add</option>
                  <option value="func-numeric-divide">numeric-divide</option>
                  <option value="func-numeric-equal">numeric-equal</option>
                  <option value="func-numeric-greater-than">numeric-greater-than</option>
                  <option value="func-numeric-integer-divide">numeric-integer-divide</option>
                  <option value="func-numeric-less-than">numeric-less-than</option>
                  <option value="func-numeric-mod">numeric-mod</option>
                  <option value="func-numeric-multiply">numeric-multiply</option>
                  <option value="func-numeric-subtract">numeric-subtract</option>
                  <option value="func-numeric-unary-minus">numeric-unary-minus</option>
                  <option value="func-numeric-unary-plus">numeric-unary-plus</option>
                  <option value="func-QName-equal">QName-equal</option>
                  <option value="func-same-key">same-key</option>
                  <option value="func-subtract-dates">subtract-dates</option>
                  <option value="func-subtract-dateTimes">subtract-dateTimes</option>
                  <option value="func-subtract-dayTimeDuration-from-date">subtract-dayTimeDuration-from-date</option>
                  <option value="func-subtract-dayTimeDuration-from-dateTime">subtract-dayTimeDuration-from-dateTime</option>
                  <option value="func-subtract-dayTimeDuration-from-time">subtract-dayTimeDuration-from-time</option>
                  <option value="func-subtract-dayTimeDurations">subtract-dayTimeDurations</option>
                  <option value="func-subtract-times">subtract-times</option>
                  <option value="func-subtract-yearMonthDuration-from-date">subtract-yearMonthDuration-from-date</option>
                  <option value="func-subtract-yearMonthDuration-from-dateTime">subtract-yearMonthDuration-from-dateTime</option>
                  <option value="func-subtract-yearMonthDurations">subtract-yearMonthDurations</option>
                  <option value="func-time-equal">time-equal</option>
                  <option value="func-time-greater-than">time-greater-than</option>
                  <option value="func-time-less-than">time-less-than</option>
                  <option value="func-yearMonthDuration-greater-than">yearMonthDuration-greater-than</option>
                  <option value="func-yearMonthDuration-less-than">yearMonthDuration-less-than</option></select></div>
         </div>
         <h2><a id="contents"></a>Table of Contents
         </h2>
         <ol class="toc">
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#intro"><span class="secno">1 </span><span class="content">Introduction</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#conformance"><span class="secno">1.1 </span><span class="content">Conformance</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#namespace-prefixes"><span class="secno">1.2 </span><span class="content">Namespaces and prefixes</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-overloading"><span class="secno">1.3 </span><span class="content">Function overloading</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-signatures"><span class="secno">1.4 </span><span class="content">Function signatures and descriptions</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#options"><span class="secno">1.5 </span><span class="content">Options</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#datatypes"><span class="secno">1.6 </span><span class="content">Type System</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#item-type-hierarchy"><span class="secno">1.6.1 </span><span class="content">Item Types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#schema-type-hierarchy"><span class="secno">1.6.2 </span><span class="content">Schema Type Hierarchy</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#atomic-type-hierarchy"><span class="secno">1.6.3 </span><span class="content">Atomic Type Hierarchy</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#terminology"><span class="secno">1.7 </span><span class="content">Terminology</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#character-terminology"><span class="secno">1.7.1 </span><span class="content">Strings, characters, and codepoints</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#namespace-terminology"><span class="secno">1.7.2 </span><span class="content">Namespaces and URIs</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#conformance-terminology"><span class="secno">1.7.3 </span><span class="content">Conformance terminology</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#properties-of-functions"><span class="secno">1.7.4 </span><span class="content">Properties of functions</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#accessors"><span class="secno">2 </span><span class="content">Accessors</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-node-name"><span class="secno">2.1 </span><span class="content">fn:node-name</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-nilled"><span class="secno">2.2 </span><span class="content">fn:nilled</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><span class="secno">2.3 </span><span class="content">fn:string</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><span class="secno">2.4 </span><span class="content">fn:data</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-base-uri"><span class="secno">2.5 </span><span class="content">fn:base-uri</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-document-uri"><span class="secno">2.6 </span><span class="content">fn:document-uri</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#errors-and-diagnostics"><span class="secno">3 </span><span class="content">Errors and diagnostics</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#errors"><span class="secno">3.1 </span><span class="content">Raising errors</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><span class="secno">3.1.1 </span><span class="content">fn:error</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#diagnostics"><span class="secno">3.2 </span><span class="content">Diagnostic tracing</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-trace"><span class="secno">3.2.1 </span><span class="content">fn:trace</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#numeric-functions"><span class="secno">4 </span><span class="content">Functions and operators on numerics</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#numeric-types"><span class="secno">4.1 </span><span class="content">Numeric types</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><span class="secno">4.2 </span><span class="content">Arithmetic operators on numeric values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-add"><span class="secno">4.2.1 </span><span class="content">op:numeric-add</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-subtract"><span class="secno">4.2.2 </span><span class="content">op:numeric-subtract</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-multiply"><span class="secno">4.2.3 </span><span class="content">op:numeric-multiply</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-divide"><span class="secno">4.2.4 </span><span class="content">op:numeric-divide</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-integer-divide"><span class="secno">4.2.5 </span><span class="content">op:numeric-integer-divide</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-mod"><span class="secno">4.2.6 </span><span class="content">op:numeric-mod</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-plus"><span class="secno">4.2.7 </span><span class="content">op:numeric-unary-plus</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-minus"><span class="secno">4.2.8 </span><span class="content">op:numeric-unary-minus</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#comp.numeric"><span class="secno">4.3 </span><span class="content">Comparison operators on numeric values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-equal"><span class="secno">4.3.1 </span><span class="content">op:numeric-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-less-than"><span class="secno">4.3.2 </span><span class="content">op:numeric-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-greater-than"><span class="secno">4.3.3 </span><span class="content">op:numeric-greater-than</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#numeric-value-functions"><span class="secno">4.4 </span><span class="content">Functions on numeric values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-abs"><span class="secno">4.4.1 </span><span class="content">fn:abs</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-ceiling"><span class="secno">4.4.2 </span><span class="content">fn:ceiling</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-floor"><span class="secno">4.4.3 </span><span class="content">fn:floor</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><span class="secno">4.4.4 </span><span class="content">fn:round</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-round-half-to-even"><span class="secno">4.4.5 </span><span class="content">fn:round-half-to-even</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#parsing-numbers"><span class="secno">4.5 </span><span class="content">Parsing numbers</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-number"><span class="secno">4.5.1 </span><span class="content">fn:number</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#formatting-integers"><span class="secno">4.6 </span><span class="content">Formatting integers</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><span class="secno">4.6.1 </span><span class="content">fn:format-integer</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#formatting-numbers"><span class="secno">4.7 </span><span class="content">Formatting numbers</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#defining-decimal-format"><span class="secno">4.7.1 </span><span class="content">Defining a decimal format</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><span class="secno">4.7.2 </span><span class="content">fn:format-number</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#syntax-of-picture-string"><span class="secno">4.7.3 </span><span class="content">Syntax of the picture string</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#analyzing-picture-string"><span class="secno">4.7.4 </span><span class="content">Analyzing the picture string</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#formatting-the-number"><span class="secno">4.7.5 </span><span class="content">Formatting the number</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#trigonometry"><span class="secno">4.8 </span><span class="content">Trigonometric and exponential functions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-pi"><span class="secno">4.8.1 </span><span class="content">math:pi</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-exp"><span class="secno">4.8.2 </span><span class="content">math:exp</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-exp10"><span class="secno">4.8.3 </span><span class="content">math:exp10</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-log"><span class="secno">4.8.4 </span><span class="content">math:log</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-log10"><span class="secno">4.8.5 </span><span class="content">math:log10</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-pow"><span class="secno">4.8.6 </span><span class="content">math:pow</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-sqrt"><span class="secno">4.8.7 </span><span class="content">math:sqrt</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-sin"><span class="secno">4.8.8 </span><span class="content">math:sin</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-cos"><span class="secno">4.8.9 </span><span class="content">math:cos</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-tan"><span class="secno">4.8.10 </span><span class="content">math:tan</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-asin"><span class="secno">4.8.11 </span><span class="content">math:asin</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-acos"><span class="secno">4.8.12 </span><span class="content">math:acos</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-atan"><span class="secno">4.8.13 </span><span class="content">math:atan</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-atan2"><span class="secno">4.8.14 </span><span class="content">math:atan2</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#random-numbers"><span class="secno">4.9 </span><span class="content">Random Numbers</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator"><span class="secno">4.9.1 </span><span class="content">fn:random-number-generator</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#string-functions"><span class="secno">5 </span><span class="content">Functions on strings</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#string-types"><span class="secno">5.1 </span><span class="content">String types</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-assemble-disassemble-string"><span class="secno">5.2 </span><span class="content">Functions to assemble and disassemble strings</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoints-to-string"><span class="secno">5.2.1 </span><span class="content">fn:codepoints-to-string</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-string-to-codepoints"><span class="secno">5.2.2 </span><span class="content">fn:string-to-codepoints</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#string-compare"><span class="secno">5.3 </span><span class="content">Comparison of strings</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#collations"><span class="secno">5.3.1 </span><span class="content">Collations</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#codepoint-collation"><span class="secno">5.3.2 </span><span class="content">The Unicode Codepoint Collation</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#uca-collations"><span class="secno">5.3.3 </span><span class="content">The Unicode Collation Algorithm</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#html-ascii-case-insensitive-collation"><span class="secno">5.3.4 </span><span class="content">The HTML ASCII Case-Insensitive Collation</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><span class="secno">5.3.5 </span><span class="content">Choosing a collation</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-compare"><span class="secno">5.3.6 </span><span class="content">fn:compare</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoint-equal"><span class="secno">5.3.7 </span><span class="content">fn:codepoint-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-collation-key"><span class="secno">5.3.8 </span><span class="content">fn:collation-key</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-contains-token"><span class="secno">5.3.9 </span><span class="content">fn:contains-token</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#string-value-functions"><span class="secno">5.4 </span><span class="content">Functions on string values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-concat"><span class="secno">5.4.1 </span><span class="content">fn:concat</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-string-join"><span class="secno">5.4.2 </span><span class="content">fn:string-join</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-substring"><span class="secno">5.4.3 </span><span class="content">fn:substring</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-string-length"><span class="secno">5.4.4 </span><span class="content">fn:string-length</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-space"><span class="secno">5.4.5 </span><span class="content">fn:normalize-space</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode"><span class="secno">5.4.6 </span><span class="content">fn:normalize-unicode</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-upper-case"><span class="secno">5.4.7 </span><span class="content">fn:upper-case</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-lower-case"><span class="secno">5.4.8 </span><span class="content">fn:lower-case</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-translate"><span class="secno">5.4.9 </span><span class="content">fn:translate</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#substring.functions"><span class="secno">5.5 </span><span class="content">Functions based on substring matching</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-contains"><span class="secno">5.5.1 </span><span class="content">fn:contains</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-starts-with"><span class="secno">5.5.2 </span><span class="content">fn:starts-with</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-ends-with"><span class="secno">5.5.3 </span><span class="content">fn:ends-with</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-substring-before"><span class="secno">5.5.4 </span><span class="content">fn:substring-before</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-substring-after"><span class="secno">5.5.5 </span><span class="content">fn:substring-after</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#string.match"><span class="secno">5.6 </span><span class="content">String functions that use regular expressions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#regex-syntax"><span class="secno">5.6.1 </span><span class="content">Regular expression syntax</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#flags"><span class="secno">5.6.2 </span><span class="content">Flags</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><span class="secno">5.6.3 </span><span class="content">fn:matches</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><span class="secno">5.6.4 </span><span class="content">fn:replace</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-tokenize"><span class="secno">5.6.5 </span><span class="content">fn:tokenize</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><span class="secno">5.6.6 </span><span class="content">fn:analyze-string</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#anyURI-functions"><span class="secno">6 </span><span class="content">Functions that manipulate URIs</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><span class="secno">6.1 </span><span class="content">fn:resolve-uri</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-encode-for-uri"><span class="secno">6.2 </span><span class="content">fn:encode-for-uri</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-iri-to-uri"><span class="secno">6.3 </span><span class="content">fn:iri-to-uri</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-escape-html-uri"><span class="secno">6.4 </span><span class="content">fn:escape-html-uri</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#boolean-functions"><span class="secno">7 </span><span class="content">Functions and operators on Boolean values</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#boolean-constructors"><span class="secno">7.1 </span><span class="content">Boolean constant functions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-true"><span class="secno">7.1.1 </span><span class="content">fn:true</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-false"><span class="secno">7.1.2 </span><span class="content">fn:false</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#op.boolean"><span class="secno">7.2 </span><span class="content">Operators on Boolean values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-equal"><span class="secno">7.2.1 </span><span class="content">op:boolean-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-less-than"><span class="secno">7.2.2 </span><span class="content">op:boolean-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-greater-than"><span class="secno">7.2.3 </span><span class="content">op:boolean-greater-than</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#boolean-value-functions"><span class="secno">7.3 </span><span class="content">Functions on Boolean values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean"><span class="secno">7.3.1 </span><span class="content">fn:boolean</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-not"><span class="secno">7.3.2 </span><span class="content">fn:not</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#durations"><span class="secno">8 </span><span class="content">Functions and operators on durations</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#duration-subtypes"><span class="secno">8.1 </span><span class="content">Two totally ordered subtypes of duration</span></a><ol class="toc"></ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#comp.duration"><span class="secno">8.2 </span><span class="content">Comparison operators on durations</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-yearMonthDuration-less-than"><span class="secno">8.2.1 </span><span class="content">op:yearMonthDuration-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-yearMonthDuration-greater-than"><span class="secno">8.2.2 </span><span class="content">op:yearMonthDuration-greater-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-dayTimeDuration-less-than"><span class="secno">8.2.3 </span><span class="content">op:dayTimeDuration-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-dayTimeDuration-greater-than"><span class="secno">8.2.4 </span><span class="content">op:dayTimeDuration-greater-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-duration-equal"><span class="secno">8.2.5 </span><span class="content">op:duration-equal</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#component-extraction-durations"><span class="secno">8.3 </span><span class="content">Component extraction functions on durations</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-years-from-duration"><span class="secno">8.3.1 </span><span class="content">fn:years-from-duration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-months-from-duration"><span class="secno">8.3.2 </span><span class="content">fn:months-from-duration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-days-from-duration"><span class="secno">8.3.3 </span><span class="content">fn:days-from-duration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-hours-from-duration"><span class="secno">8.3.4 </span><span class="content">fn:hours-from-duration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-duration"><span class="secno">8.3.5 </span><span class="content">fn:minutes-from-duration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-duration"><span class="secno">8.3.6 </span><span class="content">fn:seconds-from-duration</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#duration-arithmetic"><span class="secno">8.4 </span><span class="content">Arithmetic operators on durations</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDurations"><span class="secno">8.4.1 </span><span class="content">op:add-yearMonthDurations</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-yearMonthDurations"><span class="secno">8.4.2 </span><span class="content">op:subtract-yearMonthDurations</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-multiply-yearMonthDuration"><span class="secno">8.4.3 </span><span class="content">op:multiply-yearMonthDuration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-yearMonthDuration"><span class="secno">8.4.4 </span><span class="content">op:divide-yearMonthDuration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-yearMonthDuration-by-yearMonthDuration"><span class="secno">8.4.5 </span><span class="content">op:divide-yearMonthDuration-by-yearMonthDuration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDurations"><span class="secno">8.4.6 </span><span class="content">op:add-dayTimeDurations</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDurations"><span class="secno">8.4.7 </span><span class="content">op:subtract-dayTimeDurations</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-multiply-dayTimeDuration"><span class="secno">8.4.8 </span><span class="content">op:multiply-dayTimeDuration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-dayTimeDuration"><span class="secno">8.4.9 </span><span class="content">op:divide-dayTimeDuration</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-dayTimeDuration-by-dayTimeDuration"><span class="secno">8.4.10 </span><span class="content">op:divide-dayTimeDuration-by-dayTimeDuration</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#dates-times"><span class="secno">9 </span><span class="content">Functions and operators on dates and times</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#date-time-types"><span class="secno">9.1 </span><span class="content">Date and time types</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#date-time-duration-conformance"><span class="secno">9.1.1 </span><span class="content">Limits and precision</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#date-time-values"><span class="secno">9.2 </span><span class="content">Date/time datatype values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#date-time-lexical-mapping"><span class="secno">9.2.1 </span><span class="content">Examples</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructing-dateTime"><span class="secno">9.3 </span><span class="content">Constructing a dateTime</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime"><span class="secno">9.3.1 </span><span class="content">fn:dateTime</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#comp.datetime"><span class="secno">9.4 </span><span class="content">Comparison operators on duration, date and time values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><span class="secno">9.4.1 </span><span class="content">op:dateTime-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-less-than"><span class="secno">9.4.2 </span><span class="content">op:dateTime-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-greater-than"><span class="secno">9.4.3 </span><span class="content">op:dateTime-greater-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-date-equal"><span class="secno">9.4.4 </span><span class="content">op:date-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-date-less-than"><span class="secno">9.4.5 </span><span class="content">op:date-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-date-greater-than"><span class="secno">9.4.6 </span><span class="content">op:date-greater-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-time-equal"><span class="secno">9.4.7 </span><span class="content">op:time-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-time-less-than"><span class="secno">9.4.8 </span><span class="content">op:time-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-time-greater-than"><span class="secno">9.4.9 </span><span class="content">op:time-greater-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-gYearMonth-equal"><span class="secno">9.4.10 </span><span class="content">op:gYearMonth-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-gYear-equal"><span class="secno">9.4.11 </span><span class="content">op:gYear-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-gMonthDay-equal"><span class="secno">9.4.12 </span><span class="content">op:gMonthDay-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-gMonth-equal"><span class="secno">9.4.13 </span><span class="content">op:gMonth-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-gDay-equal"><span class="secno">9.4.14 </span><span class="content">op:gDay-equal</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#component-extraction-dateTime"><span class="secno">9.5 </span><span class="content">Component extraction functions on dates and times</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-year-from-dateTime"><span class="secno">9.5.1 </span><span class="content">fn:year-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-month-from-dateTime"><span class="secno">9.5.2 </span><span class="content">fn:month-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-day-from-dateTime"><span class="secno">9.5.3 </span><span class="content">fn:day-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-hours-from-dateTime"><span class="secno">9.5.4 </span><span class="content">fn:hours-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-dateTime"><span class="secno">9.5.5 </span><span class="content">fn:minutes-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-dateTime"><span class="secno">9.5.6 </span><span class="content">fn:seconds-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-dateTime"><span class="secno">9.5.7 </span><span class="content">fn:timezone-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-year-from-date"><span class="secno">9.5.8 </span><span class="content">fn:year-from-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-month-from-date"><span class="secno">9.5.9 </span><span class="content">fn:month-from-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-day-from-date"><span class="secno">9.5.10 </span><span class="content">fn:day-from-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-date"><span class="secno">9.5.11 </span><span class="content">fn:timezone-from-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-hours-from-time"><span class="secno">9.5.12 </span><span class="content">fn:hours-from-time</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-time"><span class="secno">9.5.13 </span><span class="content">fn:minutes-from-time</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-time"><span class="secno">9.5.14 </span><span class="content">fn:seconds-from-time</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-time"><span class="secno">9.5.15 </span><span class="content">fn:timezone-from-time</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#timezone.functions"><span class="secno">9.6 </span><span class="content">Timezone adjustment functions on dates and time values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-dateTime-to-timezone"><span class="secno">9.6.1 </span><span class="content">fn:adjust-dateTime-to-timezone</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-date-to-timezone"><span class="secno">9.6.2 </span><span class="content">fn:adjust-date-to-timezone</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-time-to-timezone"><span class="secno">9.6.3 </span><span class="content">fn:adjust-time-to-timezone</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#dateTime-arithmetic"><span class="secno">9.7 </span><span class="content">Arithmetic operators on durations, dates and times</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><span class="secno">9.7.1 </span><span class="content">Limits and precision</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dateTimes"><span class="secno">9.7.2 </span><span class="content">op:subtract-dateTimes</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dates"><span class="secno">9.7.3 </span><span class="content">op:subtract-dates</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-times"><span class="secno">9.7.4 </span><span class="content">op:subtract-times</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-dateTime"><span class="secno">9.7.5 </span><span class="content">op:add-yearMonthDuration-to-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-dateTime"><span class="secno">9.7.6 </span><span class="content">op:add-dayTimeDuration-to-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-yearMonthDuration-from-dateTime"><span class="secno">9.7.7 </span><span class="content">op:subtract-yearMonthDuration-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDuration-from-dateTime"><span class="secno">9.7.8 </span><span class="content">op:subtract-dayTimeDuration-from-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-date"><span class="secno">9.7.9 </span><span class="content">op:add-yearMonthDuration-to-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-date"><span class="secno">9.7.10 </span><span class="content">op:add-dayTimeDuration-to-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-yearMonthDuration-from-date"><span class="secno">9.7.11 </span><span class="content">op:subtract-yearMonthDuration-from-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDuration-from-date"><span class="secno">9.7.12 </span><span class="content">op:subtract-dayTimeDuration-from-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-time"><span class="secno">9.7.13 </span><span class="content">op:add-dayTimeDuration-to-time</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDuration-from-time"><span class="secno">9.7.14 </span><span class="content">op:subtract-dayTimeDuration-from-time</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#formatting-dates-and-times"><span class="secno">9.8 </span><span class="content">Formatting dates and times</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><span class="secno">9.8.1 </span><span class="content">fn:format-dateTime</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><span class="secno">9.8.2 </span><span class="content">fn:format-date</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><span class="secno">9.8.3 </span><span class="content">fn:format-time</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#rules-for-datetime-formatting"><span class="secno">9.8.4 </span><span class="content">The date/time formatting functions</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#date-time-examples"><span class="secno">9.8.5 </span><span class="content">Examples of date and time formatting</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#parsing-dates-and-times"><span class="secno">9.9 </span><span class="content">Parsing dates and times</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-ietf-date"><span class="secno">9.9.1 </span><span class="content">fn:parse-ietf-date</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#QName-funcs"><span class="secno">10 </span><span class="content">Functions related to QNames</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#QName-constructors"><span class="secno">10.1 </span><span class="content">Functions to create a QName</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-QName"><span class="secno">10.1.1 </span><span class="content">fn:resolve-QName</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-QName"><span class="secno">10.1.2 </span><span class="content">fn:QName</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#QName-functions"><span class="secno">10.2 </span><span class="content">Functions and operators related to QNames</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-QName-equal"><span class="secno">10.2.1 </span><span class="content">op:QName-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-prefix-from-QName"><span class="secno">10.2.2 </span><span class="content">fn:prefix-from-QName</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-local-name-from-QName"><span class="secno">10.2.3 </span><span class="content">fn:local-name-from-QName</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri-from-QName"><span class="secno">10.2.4 </span><span class="content">fn:namespace-uri-from-QName</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri-for-prefix"><span class="secno">10.2.5 </span><span class="content">fn:namespace-uri-for-prefix</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-in-scope-prefixes"><span class="secno">10.2.6 </span><span class="content">fn:in-scope-prefixes</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#binary-functions"><span class="secno">11 </span><span class="content">Operators on base64Binary and hexBinary</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#binary-value-comparisons"><span class="secno">11.1 </span><span class="content">Comparisons of base64Binary and hexBinary values</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-hexBinary-equal"><span class="secno">11.1.1 </span><span class="content">op:hexBinary-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-hexBinary-less-than"><span class="secno">11.1.2 </span><span class="content">op:hexBinary-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-hexBinary-greater-than"><span class="secno">11.1.3 </span><span class="content">op:hexBinary-greater-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-base64Binary-equal"><span class="secno">11.1.4 </span><span class="content">op:base64Binary-equal</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-base64Binary-less-than"><span class="secno">11.1.5 </span><span class="content">op:base64Binary-less-than</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-base64Binary-greater-than"><span class="secno">11.1.6 </span><span class="content">op:base64Binary-greater-than</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#NOTATION-functions"><span class="secno">12 </span><span class="content">Operators on NOTATION</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-NOTATION-equal"><span class="secno">12.1 </span><span class="content">op:NOTATION-equal</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#node-functions"><span class="secno">13 </span><span class="content">Functions and operators on nodes</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-name"><span class="secno">13.1 </span><span class="content">fn:name</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-local-name"><span class="secno">13.2 </span><span class="content">fn:local-name</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri"><span class="secno">13.3 </span><span class="content">fn:namespace-uri</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-lang"><span class="secno">13.4 </span><span class="content">fn:lang</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-root"><span class="secno">13.5 </span><span class="content">fn:root</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-path"><span class="secno">13.6 </span><span class="content">fn:path</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-has-children"><span class="secno">13.7 </span><span class="content">fn:has-children</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-innermost"><span class="secno">13.8 </span><span class="content">fn:innermost</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-outermost"><span class="secno">13.9 </span><span class="content">fn:outermost</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#sequence-functions"><span class="secno">14 </span><span class="content">Functions and operators on sequences</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#general-seq-funcs"><span class="secno">14.1 </span><span class="content">General functions and operators on sequences</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-empty"><span class="secno">14.1.1 </span><span class="content">fn:empty</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-exists"><span class="secno">14.1.2 </span><span class="content">fn:exists</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-head"><span class="secno">14.1.3 </span><span class="content">fn:head</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-tail"><span class="secno">14.1.4 </span><span class="content">fn:tail</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-insert-before"><span class="secno">14.1.5 </span><span class="content">fn:insert-before</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-remove"><span class="secno">14.1.6 </span><span class="content">fn:remove</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-reverse"><span class="secno">14.1.7 </span><span class="content">fn:reverse</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-subsequence"><span class="secno">14.1.8 </span><span class="content">fn:subsequence</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-unordered"><span class="secno">14.1.9 </span><span class="content">fn:unordered</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#comparing-sequences"><span class="secno">14.2 </span><span class="content">Functions that compare values in sequences</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-distinct-values"><span class="secno">14.2.1 </span><span class="content">fn:distinct-values</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-index-of"><span class="secno">14.2.2 </span><span class="content">fn:index-of</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-deep-equal"><span class="secno">14.2.3 </span><span class="content">fn:deep-equal</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#cardinality-functions"><span class="secno">14.3 </span><span class="content">Functions that test the cardinality of sequences</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-zero-or-one"><span class="secno">14.3.1 </span><span class="content">fn:zero-or-one</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-one-or-more"><span class="secno">14.3.2 </span><span class="content">fn:one-or-more</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-exactly-one"><span class="secno">14.3.3 </span><span class="content">fn:exactly-one</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#aggregate-functions"><span class="secno">14.4 </span><span class="content">Aggregate functions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-count"><span class="secno">14.4.1 </span><span class="content">fn:count</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-avg"><span class="secno">14.4.2 </span><span class="content">fn:avg</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><span class="secno">14.4.3 </span><span class="content">fn:max</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-min"><span class="secno">14.4.4 </span><span class="content">fn:min</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-sum"><span class="secno">14.4.5 </span><span class="content">fn:sum</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#fns-on-identifiers"><span class="secno">14.5 </span><span class="content">Functions on node identifiers</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><span class="secno">14.5.1 </span><span class="content">fn:id</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-element-with-id"><span class="secno">14.5.2 </span><span class="content">fn:element-with-id</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-idref"><span class="secno">14.5.3 </span><span class="content">fn:idref</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-generate-id"><span class="secno">14.5.4 </span><span class="content">fn:generate-id</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#fns-on-docs"><span class="secno">14.6 </span><span class="content">Functions giving access to external information</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><span class="secno">14.6.1 </span><span class="content">fn:doc</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-doc-available"><span class="secno">14.6.2 </span><span class="content">fn:doc-available</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><span class="secno">14.6.3 </span><span class="content">fn:collection</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><span class="secno">14.6.4 </span><span class="content">fn:uri-collection</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><span class="secno">14.6.5 </span><span class="content">fn:unparsed-text</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines"><span class="secno">14.6.6 </span><span class="content">fn:unparsed-text-lines</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-available"><span class="secno">14.6.7 </span><span class="content">fn:unparsed-text-available</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable"><span class="secno">14.6.8 </span><span class="content">fn:environment-variable</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-available-environment-variables"><span class="secno">14.6.9 </span><span class="content">fn:available-environment-variables</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#parsing-and-serializing"><span class="secno">14.7 </span><span class="content">Parsing and serializing</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><span class="secno">14.7.1 </span><span class="content">fn:parse-xml</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml-fragment"><span class="secno">14.7.2 </span><span class="content">fn:parse-xml-fragment</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><span class="secno">14.7.3 </span><span class="content">fn:serialize</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#context"><span class="secno">15 </span><span class="content">Context functions</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-position"><span class="secno">15.1 </span><span class="content">fn:position</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-last"><span class="secno">15.2 </span><span class="content">fn:last</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime"><span class="secno">15.3 </span><span class="content">fn:current-dateTime</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-current-date"><span class="secno">15.4 </span><span class="content">fn:current-date</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-current-time"><span class="secno">15.5 </span><span class="content">fn:current-time</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-implicit-timezone"><span class="secno">15.6 </span><span class="content">fn:implicit-timezone</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-default-collation"><span class="secno">15.7 </span><span class="content">fn:default-collation</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-default-language"><span class="secno">15.8 </span><span class="content">fn:default-language</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-static-base-uri"><span class="secno">15.9 </span><span class="content">fn:static-base-uri</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#higher-order-functions"><span class="secno">16 </span><span class="content">Higher-order functions</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#functions-on-functions"><span class="secno">16.1 </span><span class="content">Functions on functions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><span class="secno">16.1.1 </span><span class="content">fn:function-lookup</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-function-name"><span class="secno">16.1.2 </span><span class="content">fn:function-name</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-function-arity"><span class="secno">16.1.3 </span><span class="content">fn:function-arity</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#basic-hofs"><span class="secno">16.2 </span><span class="content">Basic higher-order functions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-for-each"><span class="secno">16.2.1 </span><span class="content">fn:for-each</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-filter"><span class="secno">16.2.2 </span><span class="content">fn:filter</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-fold-left"><span class="secno">16.2.3 </span><span class="content">fn:fold-left</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-fold-right"><span class="secno">16.2.4 </span><span class="content">fn:fold-right</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-for-each-pair"><span class="secno">16.2.5 </span><span class="content">fn:for-each-pair</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-sort"><span class="secno">16.2.6 </span><span class="content">fn:sort</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-apply"><span class="secno">16.2.7 </span><span class="content">fn:apply</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#dynamic-loading"><span class="secno">16.3 </span><span class="content">Dynamic Loading</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><span class="secno">16.3.1 </span><span class="content">fn:load-xquery-module</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><span class="secno">16.3.2 </span><span class="content">fn:transform</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#maps-and-arrays"><span class="secno">17 </span><span class="content">Maps and Arrays</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#map-functions"><span class="secno">17.1 </span><span class="content">Functions that Operate on Maps</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-same-key"><span class="secno">17.1.1 </span><span class="content">op:same-key</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-merge"><span class="secno">17.1.2 </span><span class="content">map:merge</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-size"><span class="secno">17.1.3 </span><span class="content">map:size</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-keys"><span class="secno">17.1.4 </span><span class="content">map:keys</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-contains"><span class="secno">17.1.5 </span><span class="content">map:contains</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-get"><span class="secno">17.1.6 </span><span class="content">map:get</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-find"><span class="secno">17.1.7 </span><span class="content">map:find</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-put"><span class="secno">17.1.8 </span><span class="content">map:put</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-entry"><span class="secno">17.1.9 </span><span class="content">map:entry</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-remove"><span class="secno">17.1.10 </span><span class="content">map:remove</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-for-each"><span class="secno">17.1.11 </span><span class="content">map:for-each</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#map-operations"><span class="secno">17.2 </span><span class="content">Other Operations on Maps </span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#array-functions"><span class="secno">17.3 </span><span class="content">Functions that Operate on Arrays</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-size"><span class="secno">17.3.1 </span><span class="content">array:size</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-get"><span class="secno">17.3.2 </span><span class="content">array:get</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-put"><span class="secno">17.3.3 </span><span class="content">array:put</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-append"><span class="secno">17.3.4 </span><span class="content">array:append</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-subarray"><span class="secno">17.3.5 </span><span class="content">array:subarray</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-remove"><span class="secno">17.3.6 </span><span class="content">array:remove</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-insert-before"><span class="secno">17.3.7 </span><span class="content">array:insert-before</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-head"><span class="secno">17.3.8 </span><span class="content">array:head</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-tail"><span class="secno">17.3.9 </span><span class="content">array:tail</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-reverse"><span class="secno">17.3.10 </span><span class="content">array:reverse</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-join"><span class="secno">17.3.11 </span><span class="content">array:join</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-for-each"><span class="secno">17.3.12 </span><span class="content">array:for-each</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-filter"><span class="secno">17.3.13 </span><span class="content">array:filter</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-fold-left"><span class="secno">17.3.14 </span><span class="content">array:fold-left</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-fold-right"><span class="secno">17.3.15 </span><span class="content">array:fold-right</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-for-each-pair"><span class="secno">17.3.16 </span><span class="content">array:for-each-pair</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-sort"><span class="secno">17.3.17 </span><span class="content">array:sort</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-flatten"><span class="secno">17.3.18 </span><span class="content">array:flatten</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#json"><span class="secno">17.4 </span><span class="content">Conversion to and from JSON</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#json-to-maps-and-arrays"><span class="secno">17.4.1 </span><span class="content">Representing JSON using maps and arrays</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#json-to-xml-mapping"><span class="secno">17.4.2 </span><span class="content">XML Representation of JSON</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#json-functions"><span class="secno">17.5 </span><span class="content">Functions on JSON Data</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><span class="secno">17.5.1 </span><span class="content">fn:parse-json</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><span class="secno">17.5.2 </span><span class="content">fn:json-doc</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><span class="secno">17.5.3 </span><span class="content">fn:json-to-xml</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><span class="secno">17.5.4 </span><span class="content">fn:xml-to-json</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions"><span class="secno">18 </span><span class="content">Constructor functions</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-xsd-types"><span class="secno">18.1 </span><span class="content">Constructor functions for XML Schema built-in atomic types</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructor-qname-notation"><span class="secno">18.2 </span><span class="content">Constructor functions for xs:QName and xs:NOTATION</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-xsd-list-types"><span class="secno">18.3 </span><span class="content">Constructor functions for XML Schema built-in list types</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-xsd-union-types"><span class="secno">18.4 </span><span class="content">Constructor functions for XML Schema built-in union types</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-user-defined-types"><span class="secno">18.5 </span><span class="content">Constructor functions for user-defined types</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting"><span class="secno">19 </span><span class="content">Casting</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-primitive-to-primitive"><span class="secno">19.1 </span><span class="content">Casting from primitive types to primitive types</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-string"><span class="secno">19.1.1 </span><span class="content">Casting to xs:string and xs:untypedAtomic</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-numerics"><span class="secno">19.1.2 </span><span class="content">Casting to numeric types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-durations"><span class="secno">19.1.3 </span><span class="content">Casting to duration types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-datetimes"><span class="secno">19.1.4 </span><span class="content">Casting to date and time types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-boolean"><span class="secno">19.1.5 </span><span class="content">Casting to xs:boolean </span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-binary"><span class="secno">19.1.6 </span><span class="content">Casting to xs:base64Binary and xs:hexBinary</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-anyuri"><span class="secno">19.1.7 </span><span class="content">Casting to xs:anyURI</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-qname-and-notation"><span class="secno">19.1.8 </span><span class="content">Casting to xs:QName and xs:NOTATION</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-ENTITY"><span class="secno">19.1.9 </span><span class="content">Casting to xs:ENTITY</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><span class="secno">19.2 </span><span class="content">Casting from xs:string and xs:untypedAtomic</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-non-primitive-types"><span class="secno">19.3 </span><span class="content">Casting involving non-primitive types</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-derived-types"><span class="secno">19.3.1 </span><span class="content">Casting to derived types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-derived-to-parent"><span class="secno">19.3.2 </span><span class="content">Casting from derived types to parent types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-within-branch"><span class="secno">19.3.3 </span><span class="content">Casting within a branch of the type hierarchy</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-across-hierarchy"><span class="secno">19.3.4 </span><span class="content">Casting across the type hierarchy</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-union"><span class="secno">19.3.5 </span><span class="content">Casting to union types</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-list"><span class="secno">19.3.6 </span><span class="content">Casting to list types</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#biblio"><span class="secno">A </span><span class="content">References</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#normative-biblio"><span class="secno">A.1 </span><span class="content">Normative references</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#non-normative-biblio"><span class="secno">A.2 </span><span class="content">Non-normative references</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#error-summary"><span class="secno">B </span><span class="content">Error summary</span></a>
               
               <ol class="toc"></ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#schemata"><span class="secno">C </span><span class="content">Schemas</span></a>
               
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-analyze-string"><span class="secno">C.1 </span><span class="content">Schema for the result of fn:analyze-string</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><span class="secno">C.2 </span><span class="content">Schema for the result of fn:json-to-xml</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#other-functions"><span class="secno">D </span><span class="content">Other Functions</span></a> (Non-Normative)
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#functions-in-other-w3c-specs"><span class="secno">D.1 </span><span class="content">XPath Functions Defined in Other W3C Recommendations</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#functions-defined-in-XSLT"><span class="secno">D.1.1 </span><span class="content">Functions Defined in XSLT</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#functions-defined-in-XForms"><span class="secno">D.1.2 </span><span class="content">Functions Defined in XForms</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#xquery-update"><span class="secno">D.1.3 </span><span class="content">Function Defined in XQuery Update 1.0</span></a></li>
                     </ol>
                  </li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#functions-defined-by-community-groups"><span class="secno">D.2 </span><span class="content">Functions Defined by Community Groups</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#functx-library"><span class="secno">D.3 </span><span class="content">The FunctX Library</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#examples"><span class="secno">D.4 </span><span class="content">Illustrative user-written functions</span></a><ol class="toc">
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#if-empty-or-absent"><span class="secno">D.4.1 </span><span class="content">eg:if-empty</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#union-intersect-except-on-values"><span class="secno">D.4.2 </span><span class="content">Union, intersection and difference on sequences of values</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#index-of-node"><span class="secno">D.4.3 </span><span class="content">eg:index-of-node</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#string-pad"><span class="secno">D.4.4 </span><span class="content">eg:string-pad</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#func-distinct-nodes-stable"><span class="secno">D.4.5 </span><span class="content">eg:distinct-nodes-stable</span></a></li>
                        <li><a href="https://www.w3.org/TR/xpath-functions-31/#highest-lowest"><span class="secno">D.4.6 </span><span class="content">Finding minima and maxima</span></a></li>
                     </ol>
                  </li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#impl-def"><span class="secno">E </span><span class="content">Checklist of implementation-defined features</span></a> (Non-Normative)
               <ol class="toc"></ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#changelog"><span class="secno">F </span><span class="content">Changes since version 3.0</span></a> (Non-Normative)
               <ol class="toc">
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#substantive-changes"><span class="secno">F.1 </span><span class="content">Substantive changes</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#editorial-changes"><span class="secno">F.2 </span><span class="content">Editorial and procedural changes</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#changes-since-Dec-2014"><span class="secno">F.3 </span><span class="content">Changes since the Candidate Recommendation of 18 December 2014</span></a></li>
                  <li><a href="https://www.w3.org/TR/xpath-functions-31/#changes-since-Dec-2016"><span class="secno">F.4 </span><span class="content">Changes since the Candidate Recommendation of 13 December 2016</span></a></li>
               </ol>
            </li>
            <li><a href="https://www.w3.org/TR/xpath-functions-31/#back-compatibility"><span class="secno">G </span><span class="content">Compatibility with Previous Versions</span></a> (Non-Normative)
               <ol class="toc"></ol>
            </li>
         </ol>
      </nav>
      <hr>
      <div class="body">
         <div class="div1">
            
            <h2><a id="intro"></a>1 Introduction
            </h2>
            <p>The purpose of this document is to catalog the functions and operators required for
               XPath 3.1, XQuery 3.1, and XSLT 3.0 (at the time of writing, XSLT 3.0 requires support
               for
               version 3.0 of this specification, and makes support for version 3.1 optional). 
               The exact syntax used to call these
               functions and operators is specified in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and 
               <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a>. 
            </p>
            <p>This document defines three classes of functions:</p>
            <ul>
               <li>
                  <p>General purpose functions, available for direct use in user-written queries, stylesheets,
                     and XPath expressions,
                     whose arguments and results are values defined by the <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.
                  </p>
               </li>
               <li>
                  <p>Constructor functions, used for creating instances of a datatype from values of (in
                     general) a different
                     datatype. These functions are also available for general use; they are named after
                     the datatype that they return,
                     and they always take a single argument.
                  </p>
               </li>
               <li>
                  <p>Functions that specify the semantics of operators defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a>.
                     These exist for specification purposes only, and are not intended for direct calling
                     from user-written code.
                  </p>
               </li>
            </ul>
            <p>
               <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> defines a number of primitive and derived datatypes,
               collectively known as built-in datatypes. This document defines functions and
               operations on these datatypes as well as the other types 
               (for example, nodes and sequences of nodes) defined in <a href="https://www.w3.org/TR/xpath-datamodel-31/#types">Section 
                  
                  2.7 Schema Information
                  </a><sup><small>DM31</small></sup> of 
               the <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.
               These functions and operations are available for use in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>,
               <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and any other host language that chooses to reference them.
               In particular, they may be referenced in future versions of XSLT and related XML standards.
               
            </p>
            <p><a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a> adds to the datatypes defined
               in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>. It introduces a new derived type <code>xs:dateTimeStamp</code>, and it
               incorporates as built-in types the two types <code>xs:yearMonthDuration</code> and <code>xs:dayTimeDuration</code>
               which were previously XDM additions to the type system. In addition, XSD 1.1 clarifies
               and updates many
               aspects of the definitions of the existing datatypes: for example, it extends the
               value space of
               <code>xs:double</code> to allow both positive and negative zero, and extends the lexical space to allow
               <code>+INF</code>;
               it modifies the value space of <code>xs:Name</code>
               to permit additional Unicode characters; it allows year zero and disallows leap seconds
               in <code>xs:dateTime</code>
               values; and it allows any character string to appear as the value of an <code>xs:anyURI</code> item.
               Implementations of this specification <span class="verb">may</span> support either XSD 1.0 or XSD 1.1 or both.
            </p>
            <p>References to specific sections of some of the above documents are indicated by
               cross-document links in this document. Each such link consists of a pointer to a
               specific section followed a superscript specifying the linked document. The
               superscripts have the following meanings: 'XQ' <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a>, 'XT' <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a>,
               'XP' <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>, and 'DM' <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.
            </p>
            <div class="div2">
               
               <h3><a id="conformance"></a>1.1 Conformance
               </h3>
               <p>
                  This recommendation contains a set of function specifications. 
                  It defines conformance at the level of individual functions. An implementation of
                  a function conforms to a function specification 
                  in this recommendation if all the following conditions are satisfied:
               </p>
               <ul>
                  <li>
                     <p>For all combinations of valid inputs to the function (both explicit arguments and
                        implicit context dependencies), 
                        the result of the function meets the mandatory requirements of this specification.
                        
                     </p>
                  </li>
                  <li>
                     <p>For all invalid inputs to the function, the implementation signals (in some way appropriate
                        to the calling environment) that a dynamic error has occurred.
                        
                     </p>
                  </li>
                  <li>
                     <p>For a sequence of calls within the same <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>, the requirements of this recommendation 
                        regarding the <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>determinism<span class="arrow">·</span></a> of results are satisfied (see <a href="https://www.w3.org/TR/xpath-functions-31/#properties-of-functions"><b>1.7.4 Properties of functions</b></a>).
                        
                     </p>
                  </li>
               </ul>
               <p>Other recommendations ("host languages") that reference this document may dictate:</p>
               <ul>
                  <li>
                     <p>Subsets or supersets of this set of functions to be available in particular environments;</p>
                  </li>
                  <li>
                     <p>Mechanisms for invoking functions, supplying arguments, initializing the static and
                        dynamic context, receiving results, and handling errors;
                        
                     </p>
                  </li>
                  <li>
                     <p>A concrete realization of concepts such as <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>;
                     </p>
                  </li>
                  <li>
                     <p>Which versions of other specifications referenced herein (for example, XML, XSD, or
                        Unicode) are to be used.
                     </p>
                  </li>
               </ul>
               <p>Any behavior that is discretionary (implementation-defined or implementation-dependent)
                  in this specification may be constrained by a host language.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>Adding such constraints in a host language, however, is discouraged because it makes
                     it difficult to re-use implementations of 
                     the function library across host languages.
                  </p>
               </div>
               <p>This specification allows flexibility in the choice of versions of specifications
                  on which it depends:
               </p>
               <ul>
                  <li>
                     <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which version of Unicode is supported, 
                        but it is recommended that the most recent version of Unicode be used.  
                     </p>
                  </li>
                  <li>
                     <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether the type system is based
                        on XML Schema 1.0 or XML Schema 1.1.  
                     </p>
                  </li>
                  <li>
                     <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether definitions that rely on
                        XML (for example, the set of valid XML characters) should use the definitions in XML
                        1.0 or XML 1.1.
                     </p>
                  </li>
               </ul>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>The XML Schema 1.1 recommendation
                     introduces one new concrete datatype: <code>xs:dateTimeStamp</code>; it also incorporates
                     the types <code>xs:dayTimeDuration</code>, <code>xs:yearMonthDuration</code>,
                     and <code>xs:anyAtomicType</code> which were previously defined in earlier versions of <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.
                     Furthermore, XSD 1.1
                     includes the option of supporting revised definitions of types such as <code>xs:NCName</code>
                     based on the rules in XML 1.1 rather than 1.0.
                  </p>
               </div>
               <p>In this document, text labeled as an example or as a Note is
                  provided for explanatory purposes and is not normative.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="namespace-prefixes"></a>1.2 Namespaces and prefixes
               </h3>
               <p>The functions and operators defined in this document are contained in one of
                  several namespaces (see <a href="https://www.w3.org/TR/xpath-functions-31/#xml-names">[Namespaces in XML]</a>) and referenced using an
                  <code>xs:QName</code>.
               </p>
               <p>This document uses conventional prefixes to refer to these namespaces. User-written
                  applications can choose a different prefix to refer to the namespace, so long as it
                  is
                  bound to the correct URI. The host language may also define a default namespace for
                  function calls, in which case function names in that namespace need not be prefixed
                  at all. In many cases the default namespace will be 
                  <code>http://www.w3.org/2005/xpath-functions</code>, allowing a call on the <a href="https://www.w3.org/TR/xpath-functions-31/#func-name"><code>fn:name</code></a>
                  function (for example) to be written as <code>name()</code> rather than <code>fn:name()</code>; 
                  in this document, however, all example function calls are explicitly prefixed.
               </p>
               <p>The URIs of the namespaces and the conventional prefixes associated with them are:</p>
               <ul>
                  <li>
                     <p><code>http://www.w3.org/2001/XMLSchema</code> for constructors —
                        associated with <code>xs</code>.
                        
                     </p>
                     <p>The section <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions"><b>18 Constructor functions</b></a> defines 
                        constructor functions for the built-in datatypes defined
                        in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> and in <a href="https://www.w3.org/TR/xpath-datamodel-31/#types">Section 
                           
                           2.7 Schema Information
                           </a><sup><small>DM31</small></sup>
                        of <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>. These datatypes and the corresponding constructor functions  
                        are in the XML Schema namespace, <code>http://www.w3.org/2001/XMLSchema</code>,
                        and are named in this document using the <code>xs</code> prefix. 
                     </p>
                  </li>
                  <li>
                     <p><code>http://www.w3.org/2005/xpath-functions</code>
                        for functions — associated with <code>fn</code>. 
                     </p>
                     <p>The namespace
                        prefix used in this document for most functions that are available to users is
                        <code>fn</code>.
                     </p>
                  </li>
                  <li>
                     <p><code>http://www.w3.org/2005/xpath-functions/math</code>
                        for functions — associated with <code>math</code>. 
                     </p>
                     <p>This namespace is used for some mathematical functions. The namespace
                        prefix used in this document for these functions is <code>math</code>.
                        These functions are available to users in exactly the same way as those in the
                        <code>fn</code> namespace.
                     </p>
                  </li>
                  <li>
                     <p><code>http://www.w3.org/2005/xpath-functions/map</code>
                        for functions — associated with <code>map</code>. 
                     </p>
                     <p>This namespace is used for some functions that manipulate maps (see
                        <a href="https://www.w3.org/TR/xpath-functions-31/#map-functions"><b>17.1 Functions that Operate on Maps</b></a>). The namespace
                        prefix used in this document for these functions is <code>map</code>.
                        These functions are available to users in exactly the same way as those in the
                        <code>fn</code> namespace.
                     </p>
                  </li>
                  <li>
                     <p><code>http://www.w3.org/2005/xpath-functions/array</code>
                        for functions — associated with <code>array</code>. 
                     </p>
                     <p>This namespace is used for some functions that manipulate maps (see
                        <a href="https://www.w3.org/TR/xpath-functions-31/#array-functions"><b>17.3 Functions that Operate on Arrays</b></a>). The namespace
                        prefix used in this document for these functions is <code>array</code>.
                        These functions are available to users in exactly the same way as those in the
                        <code>fn</code> namespace.
                     </p>
                  </li>
                  <li>
                     <p><code>http://www.w3.org/2005/xqt-errors</code> — associated with
                        <code>err</code>. 
                     </p>
                     <p>There are no functions in this namespace; it is used for error codes.</p>
                     <p>This document uses the prefix <code>err</code> to represent the namespace URI 
                        <code>http://www.w3.org/2005/xqt-errors</code>, which is the namespace for all XPath 
                        and XQuery error codes and messages. This namespace prefix is not predeclared and
                        
                        its use in this document is not normative.
                     </p>
                  </li>
                  <li>
                     <p><code>http://www.w3.org/2010/xslt-xquery-serialization</code> — associated with
                        <code>output</code>. 
                     </p>
                     <p>There are no functions in this namespace: it is
                        used for serialization parameters, as described in <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-xquery-serialization-31">[XSLT and XQuery Serialization 3.1]</a></p>
                  </li>
                  <li>
                     <p>
                        Functions defined with the <code>op</code> prefix are described here to
                        underpin the definitions of the operators in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>, <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> 
                        and <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a>. These functions are not available
                        directly to users, and there is no requirement that implementations should
                        actually provide these functions. For this reason, no namespace is associated
                        with the <code>op</code> prefix. For example, multiplication is generally
                        associated with the <code>*</code> operator, but it is described as a function
                        in this document:
                     </p>
                     <div class="proto"><code class="function">op:numeric-multiply</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                  </li>
               </ul>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>The above namespace URIs are not expected to change from one version of this 
                     document to another. The contents of these namespaces may be extended to allow 
                     additional functions (and errors, and serialization parameters) to be defined.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="func-overloading"></a>1.3 Function overloading
               </h3>
               <p>A function is uniquely defined by its name and arity (number of arguments); it is
                  therefore
                  not possible to have two different functions that have the same name and arity, but
                  different
                  types in their signature. That is, function overloading in this sense of the term
                  is not permitted.
                  Consequently, functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a> which accept arguments of many different
                  types have a signature that defines a very general argument type, in this case <code>item()?</code>
                  which accepts any single item; supplying an inappropriate item (such as a function
                  item) causes
                  a dynamic error.
               </p>
               <p>Some functions on numeric types include the type <code>xs:numeric</code> in their signature
                  as an argument or result type. In this version of the specification, <code>xs:numeric</code>
                  has been redefined as a built-in union type representing the union of 
                  <code>xs:decimal</code>, <code>xs:float</code>, <code>xs:double</code> (and thus automatically
                  accepting types derived from these, including <code>xs:integer</code>).
               </p>
               <p>Operators such as "+" may be overloaded: they map to different underlying functions
                  depending
                  on the dynamic types of the supplied operands.
               </p>
               <p>It is possible for two functions to have the same name provided they have different
                  arity (number of arguments).
                  For the functions defined in this specification, where two functions have the same
                  name and different arity,
                  they also have closely related behavior, so they are defined in the same section of
                  this document.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="func-signatures"></a>1.4 Function signatures and descriptions
               </h3>
               <p>Each function (or group of functions having the same name) is defined in this specification
                  using
                  a standard proforma.
               </p>
               <p>The function name is a <code>QName</code> as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                  and must adhere to its syntactic conventions. Following the precedent set by <a href="https://www.w3.org/TR/xpath-functions-31/#xpath">[XML Path Language (XPath) Version 1.0]</a>,
                  function names are generally composed of English words separated by hyphens ("-").
                  Abbreviations are
                  used only where there is a strong precedent in other programming languages (as with
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-math-sin"><code>math:sin</code></a> and 
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-math-cos"><code>math:cos</code></a> for sine and cosine). If a
                  function name contains a <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> datatype name, it may have
                  intercapitalized spelling and is used in the function name as such. An example is
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-dateTime"><code>fn:timezone-from-dateTime</code></a>.
               </p>
               <p>The first section in the proforma is a short summary of what the function does. This
                  is intended
                  to be informative rather than normative.
               </p>
               <p>Each function is then defined by specifying its signature, which defines the
                  types of the parameters and of the result value.
               </p>
               <p>Each function's signature is presented in a form like this:</p>
               <div class="proto"><code class="function">fn:function-name</code>(<code class="arg">$parameter-name</code><code class="as">&nbsp;as&nbsp;</code><code class="type">parameter-type</code>, <span class="varargs">...</span>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">return-type</code></div>
               <p>In this notation, <b>function-name</b>, in bold-face, is the name of the
                  function whose signature is being specified. If the function takes no
                  parameters, then the name is followed by an empty parameter list:
                  "<code>()</code>"; otherwise, the name is followed by a parenthesized list of
                  parameter declarations, in which each declaration specifies the static type of the
                  parameter, in italics, and a descriptive, but non-normative, name. If there are
                  two or more parameter declarations, they are separated by a comma. The <em>
                     <code>return-type</code></em>, also in italics, specifies the static type of the value returned by the
                  function. The dynamic type of the value returned by the function is the same as its
                  static
                  type or derived from the static type. All parameter types and return types are
                  specified using the SequenceType notation defined in <a href="https://www.w3.org/TR/xpath-31/#id-sequencetype-syntax">Section 
                     
                     2.5.4 SequenceType Syntax
                     </a><sup><small>XP31</small></sup>.
               </p>
               <p>One function, <a href="https://www.w3.org/TR/xpath-functions-31/#func-concat"><code>fn:concat</code></a>, has a variable number of arguments (two or more).
                  More strictly, there is an infinite set of functions having the name <a href="https://www.w3.org/TR/xpath-functions-31/#func-concat"><code>fn:concat</code></a>, with arity
                  ranging from 2 to infinity. For this special case, a single function signature is
                  given, with an ellipsis
                  indicating an indefinite number of arguments.
               </p>
               <p>The next section in the proforma defines the semantics of the function as a set of
                  rules. 
                  The order in which the rules appear is significant; they are to be applied in the
                  order in which
                  they are written. Error conditions, however, are generally listed in a separate section
                  that follows
                  the main rules, and take precedence over non-error rules except where otherwise stated.
                  The principles outlined
                  in <a href="https://www.w3.org/TR/xpath-31/#id-errors-and-opt">Section 
                     
                     2.3.4 Errors and
                     Optimization
                     </a><sup><small>XP31</small></sup> apply by default: to paraphrase, if the result of the function
                  can be determined without evaluating all its arguments, then it is not necessary to
                  evaluate the remaining arguments
                  merely in order to determine whether any error conditions apply.
               </p>
               <p>Where the proforma includes sections headed <em>Notes</em> or <em>Examples</em>, these are non-normative.
               </p>
               <p>Rules for passing parameters to operators are described in the relevant sections
                  of <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>. For example, the rules for
                  passing parameters to arithmetic operators are described in <a href="https://www.w3.org/TR/xpath-31/#id-arithmetic">Section 
                     
                     3.5 Arithmetic Expressions
                     </a><sup><small>XP31</small></sup>. Specifically, rules for parameters of
                  type <code>xs:untypedAtomic</code> and the empty sequence are specified in this section.
               </p>
               <p>As is customary, the parameter type name indicates that the function or operator
                  accepts arguments of that type, or types derived from it, in that position. This
                  is called <em>subtype substitution</em> (See <a href="https://www.w3.org/TR/xpath-31/#id-sequencetype-matching">Section 
                     
                     2.5.5 SequenceType Matching
                     </a><sup><small>XP31</small></sup>). In addition, numeric type instances and
                  instances of type <code>xs:anyURI</code> can be promoted to produce an argument
                  of the required type. (See <a href="https://www.w3.org/TR/xpath-31/#promotion">Section 
                     
                     B.1 Type Promotion
                     </a><sup><small>XP31</small></sup>).
               </p>
               <ol class="enumar">
                  <li>
                     <p><em>Subtype Substitution</em>: A derived type may substitute for
                        its base type. In particular, <code>xs:integer</code> may be used
                        where <code>xs:decimal</code> is expected.
                     </p>
                  </li>
                  <li>
                     <p><em>Numeric Type Promotion</em>: <code>xs:decimal</code> may be
                        promoted to <code>xs:float</code> or <code>xs:double</code>. 
                        								Promotion to <code>xs:double</code> should be done directly, not via
                        								 <code>xs:float</code>, to avoid loss of precision.
                     </p>
                  </li>
                  <li>
                     <p><em>anyURI Type Promotion</em>: A value of
                        type <code>xs:anyURI</code> can be promoted to the
                        type <code>xs:string</code>. 
                     </p>
                  </li>
               </ol>
               <p>Some functions accept a single value or the empty sequence as an argument and
                  some may return a single value or the empty sequence. This is indicated in the
                  function signature by following the parameter or return type name with a
                  question mark: "<code>?</code>", indicating that either a single value or the
                  empty sequence must appear. See below.
               </p>
               <div class="proto"><code class="function">fn:function-name</code>(<code class="arg">$parameter-name</code><code class="as">&nbsp;as&nbsp;</code><code class="type">parameter-type?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">return-type?</code></div>
               <p>Note that this function signature is different from a signature in which the
                  parameter is omitted. See, for example, the two signatures
                  for <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a>. In the first signature, the parameter is omitted
                  and the argument defaults to the context item, referred to as <code>.</code>.
                  In the second signature, the argument must be present but may be the empty
                  sequence, written as <code>()</code>.
                  
               </p>
               <p>Some functions accept a sequence of zero or more values as an argument. This is
                  indicated by following the name of the type of the items in the sequence with
                  <code>*</code>. The sequence may contain zero or more items of the named type.
                  For example, the function below accepts a sequence of <code>xs:double</code> and
                  returns a <code>xs:double</code> or the empty sequence.
               </p>
               <div class="proto"><code class="function">fn:median</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
            </div>
            <div class="div2">
               
               <h3><a id="options"></a>1.5 Options
               </h3>
               <p>As a matter of convention, a number of functions defined in this document take
                  a parameter whose value is a map, defining options controlling the detail of how
                  the function is evaluated. Maps are a new datatype introduced in XPath 3.1.
               </p>
               <p>For example, the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> has an options parameter
                  allowing specification of whether the output is to be indented. A call might be written:
               </p>
               <div class="exampleInner"><pre>fn:xml-to-json($input, map{'indent':true()})</pre></div>
               <p><span class="termdef"><a id="option-parameter-conventions"></a>[Definition]  Functions
                     that take an options parameter adopt common conventions on how the
                     options are used. These are referred to as the <b>option parameter conventions</b>. These
                     rules apply only to functions that explicitly refer to them.</span></p>
               <p>Where a function adopts the <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a>, the following rules
                  apply:
               </p>
               <ol class="enumar">
                  <li>
                     <p>The value of the relevant argument must be a map. The entries in the map are
                        referred to as options: the key of the entry is called the option name, and the
                        associated value is the option value. Option names defined in this specification
                        are always strings (single <code>xs:string</code> values). Option values may
                        be of any type.
                     </p>
                  </li>
                  <li>
                     <p>The type of the options parameter in the function signature is always
                        given as <code>map(*)</code>.
                     </p>
                  </li>
                  <li>
                     <p>Although option names are described above as strings, the actual key may be
                        any value that compares equal to the required string (using the <code>eq</code> operator
                        with Unicode codepoint collation; or equivalently, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-same-key"><code>op:same-key</code></a> relation). 
                        For example, instances of <code>xs:untypedAtomic</code>
                        or <code>xs:anyURI</code> are equally acceptable.
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>This means that the implementation of the function can check for the
                           presence and value of particular options using the functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-contains"><code>map:contains</code></a>
                           and/or <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-get"><code>map:get</code></a>.
                        </p>
                     </div>
                  </li>
                  <li>
                     <p>It is not an error if the options map contains options with names other than those
                        described in this specification. Implementations <span class="verb">may</span> attach an 
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> meaning to such entries,
                        and <span class="verb">may</span> define errors that arise if such entries are present with invalid values.
                        Implementations <span class="verb">must</span> ignore such entries unless they have a specific 
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> meaning.
                        Implementations that define additional options in this way <span class="verb">should</span>
                        use values of type <code>xs:QName</code> as the option names, using an appropriate namespace.
                     </p>
                  </li>
                  <li>
                     <p>All entries in the options map are optional, and supplying an empty map has the same
                        effect as omitting the relevant argument in the function call, assuming this is permitted.
                     </p>
                  </li>
                  <li>
                     <p>For each named option, the function
                        specification defines a required type for the option value. The value that is actually
                        supplied in the map is converted to this required type using the 
                        <a href="https://www.w3.org/TR/xpath-31/#dt-function-conversion">function conversion rules</a><sup><small>XP31</small></sup>. 
                        <span>A type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup> occurs
                           if conversion of the supplied value to the required type is not possible, or if this
                           conversion
                           delivers a coerced function whose invocation fails with a type error.</span>
                        A dynamic error occurs if the supplied value 
                        after conversion is not one of the permitted values for the option in question: the
                        error codes
                        for this error are defined in the specification of each function.
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>It is the responsibility of each function implementation to invoke this conversion;
                           it
                           does not happen automatically as a consequence of the function calling rules.
                        </p>
                     </div>
                  </li>
                  <li>
                     <p>In cases where an option is list-valued, by convention the value may be supplied
                        either as a sequence or as an array. Accepting a sequence is convenient if the
                        value is generated programmatically using an XPath expression; while accepting an
                        array 
                        allows the options to be held in an external file in JSON format, to be read using
                        a call on the <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><code>fn:json-doc</code></a> function.
                     </p>
                  </li>
                  <li>
                     <p>In cases where the value of an option is itself a map, the specification
                        of the particular function must indicate whether or not these rules apply recursively
                        
                        to the contents of that map.
                     </p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="datatypes"></a>1.6 Type System
               </h3>
               <p>The diagrams in this section show how nodes, functions,
                  primitive simple types,
                  and user defined types fit together into a type system.
                  This type system comprises two distinct subsystems that both include
                  the primitive atomic types. 
                  In the diagrams, connecting lines represent relationships between derived types
                  and the types from which they are derived;
                  the arrowheads point toward the type from which they are derived. 
                  The dashed line represents relationships not present in this diagram,
                  but that appear in one of the other diagrams. 
                  Dotted lines represent additional relationships that follow an evident pattern.
                  The information that appears in each diagram is recapitulated in tabular form.
                  
               </p>
               <p>The <code>xs:IDREFS</code>, <code>xs:NMTOKENS</code>,
                  <code>xs:ENTITIES</code> types, and <code>xs:numeric</code> and both the
                  <code>user-defined list types</code> and
                  <code>user-defined union types</code>
                  are special types in that these types are lists or unions
                  rather than types derived by extension or restriction.
               </p>
               <div class="div3">
                  
                  <h4><a id="item-type-hierarchy"></a>1.6.1 Item Types
                  </h4>
                  <p>The first diagram and its corresponding table illustrate
                     the relationship of various item types.
                  </p>
                  <p>Item types are used to characterize the various types of item that can appear
                     in a sequence (nodes, atomic values, and functions), and they are therefore used
                     in declaring the types of variables or the argument types and result types of functions.
                  </p>
                  <p>Item types in the data model
                     form a directed graph, rather than a hierarchy or lattice: in the relationship defined
                     by the <code>derived-from(A, B)</code> function, some types are derived
                     from more than one other type. Examples include functions (<code>function(xs:string) as xs:int</code>
                     is substitutable for <code>function(xs:NCName) as xs:int</code> and also for 
                     <code>function(xs:string) as xs:decimal</code>), and union types (<code>A</code>
                     is substitutable for <code>union(A, B)</code> and also for <code>union(A, C)</code>.
                     In XDM, item types include node types, function types, and built-in atomic types.
                     
                     The diagram, which shows only hierarchic relationships, is therefore a simplification
                     of
                     the full model.
                  </p><img src="./xquery31_files/XPathTypeHierarchy-1-items-3.1.png" style="width:100%" alt="Type hierarchy graphic, item hierarchy"><p>In the table, each type whose name is indented is derived from the type
                     whose name appears nearest above it with one less level of indentation.
                  </p>
                  <table class="hierarchy" style="border:0px solid">
                     <caption>Item Type Hierarchy</caption>
                     <tbody>
                        <tr>
                           <td class="castOther">item</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:anyAtomicType</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">node</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">attribute</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">user-defined attribute types</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">comment</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">document</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">user-defined document types</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">element</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">user-defined element types</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">namespace</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">processing-instruction</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">text</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">function(*)</td>
                           <td class="castOther"></td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">array(*)</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">map(*)</td>
                           <td>&nbsp;</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <div class="div3">
                  
                  <h4><a id="schema-type-hierarchy"></a>1.6.2 Schema Type Hierarchy
                  </h4>
                  <p>The next diagram and table illustrate the schema type subsystem, in which
                     all types are derived from the distinguished type <code>xs:anyType</code>. 
                  </p>
                  <p>Schema types include built-in types defined in the XML Schema specification, and user-defined
                     types defined using mechanisms described in the XML Schema specification. Schema types
                     define the
                     permitted contents of nodes. The main categories are complex types, which define the
                     permitted content
                     of elements, and simple types, which can be used to constrain the values of both elements
                     and attributes.
                  </p><img src="./xquery31_files/XPathTypeHierarchy-2-anyTypes-3.1.png" style="width:100%" alt="Type hierarchy graphic, anyType hierarchy"><p>In the table, each type whose name is indented is derived from the type
                     whose name appears nearest above it with one less level of indentation.
                  </p>
                  <table class="hierarchy" style="border:0px solid">
                     <tbody>
                        <tr>
                           <td class="castOther">xs:anyType</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:anySimpleType</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:anyAtomicType</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">list types</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:IDREFS</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:NMTOKENS</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:ENTITIES</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">user-defined list types</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">union types</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:numeric</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">user-defined union types</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">complex types</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:untyped</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">user-defined complex types</td>
                           <td>&nbsp;</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
               <div class="div3">
                  
                  <h4><a id="atomic-type-hierarchy"></a>1.6.3 Atomic Type Hierarchy
                  </h4>
                  <p>The final diagram and table show all of the atomic types, including the primitive
                     simple types and the
                     built-in types derived from the primitive simple types. 
                     This includes all the built-in datatypes defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.
                  </p>
                  <p>Atomic types are both item types and schema types, so the root type <code>xs:anyAtomicType</code> may be found
                     in both the previous diagrams.
                  </p><img src="./xquery31_files/XPathTypeHierarchy-3-anyAtomicTypes-3.1.png" style="width:100%" alt="Type hierarchy graphic, anyAtomicType hierarchy"><p>In the table, each type whose name is indented is derived from the type
                     whose name appears nearest above it with one less level of indentation.
                  </p>
                  <table class="hierarchy" style="border:0px solid">
                     <tbody>
                        <tr>
                           <td class="castOther">xs:untypedAtomic</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:dateTime</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:dateTimeStamp</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:date</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:time</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:duration</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:yearMonthDuration</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:dayTimeDuration</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:float</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:double</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:decimal</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:integer</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:nonPositiveInteger</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:negativeInteger</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:long</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:int</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:short</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:byte</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:nonNegativeInteger</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:unsignedLong</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:unsignedInt</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:unsignedShort</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:unsignedByte</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:positiveInteger</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:gYearMonth</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:gYear</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:gMonthDay</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:gDay</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:gMonth</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:string</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther">xs:normalizedString</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:token</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:language</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:NMTOKEN</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:Name</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:NCName</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:ID</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:IDREF</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther"></td>
                           <td class="castOther">xs:ENTITY</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:boolean</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:base64Binary</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:hexBinary</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:anyURI</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:QName</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                        <tr>
                           <td class="castOther">xs:NOTATION</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                           <td>&nbsp;</td>
                        </tr>
                     </tbody>
                  </table>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="terminology"></a>1.7 Terminology
               </h3>
               <p>The terminology used to describe the functions and operators on types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> is defined in the body of this specification. The terms defined
                  in this section are used in building those definitions.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>Following in the tradition of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, the terms <b>type</b>
                     and <b>datatype</b> are used interchangeably.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="character-terminology"></a>1.7.1 Strings, characters, and codepoints
                  </h4>
                  <p>This document uses the terms <code>string</code>, <code>character</code>, and <code>codepoint</code>
                     with meanings that are normatively defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>, and which are paraphrased here
                     for ease of reference:
                  </p>
                  <p><span class="termdef"><a id="character"></a>[Definition]  A <b>character</b> is an instance of the 
                        <a href="https://www.w3.org/TR/REC-xml/#NT-Char">Char</a><sup><small>XML</small></sup> production of <a href="https://www.w3.org/TR/xpath-functions-31/#xml">[Extensible Markup Language (XML) 1.0 (Fifth Edition)]</a>.</span></p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>This
                        definition excludes Unicode characters in the surrogate blocks as well as xFFFE and
                        xFFFF, while
                        including characters with codepoints greater than xFFFF which some programming languages
                        treat
                        as two characters. The valid characters are defined by their codepoints, and include
                        some
                        whose codepoints have not been assigned by the Unicode consortium to any character.
                     </p>
                  </div>
                  <p><span class="termdef"><a id="string"></a>[Definition]  A <b>string</b> is a sequence of zero or more 
                        <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a>, or equivalently,
                        a value in the value space of the <code>xs:string</code> datatype.</span></p>
                  <p><span class="termdef"><a id="codepoint"></a>[Definition]  A <b>codepoint</b> is an  integer
                        assigned to a <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> by the Unicode consortium, 
                        or reserved for future assignment to a character.</span>
                     
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>The set of codepoints is thus wider than the set of characters.</p>
                     <p>This specification spells "codepoint" as one word; the Unicode specification spells
                        it as "code point".
                        Equivalent terms found in other specifications are
                        "character number" or "code position". See <a href="https://www.w3.org/TR/xpath-functions-31/#charmod">[Character Model for the World Wide Web 1.0: Fundamentals]</a></p>
                  </div>
                  <p>Because these terms appear so frequently, they are hyperlinked to the definition only
                     when there
                     is a particular desire to draw the reader's attention to the definition; the absence
                     of a hyperlink
                     does not mean that the term is being used in some other sense.
                  </p>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which version of <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a> is supported, but it is recommended that the most recent version of Unicode be used.
                  </p>
                  <p>Unless explicitly stated, the <code>xs:string</code> values returned by the
                     functions in this document are not normalized in the sense of <a href="https://www.w3.org/TR/xpath-functions-31/#charmod">[Character Model for the World Wide Web 1.0: Fundamentals]</a>.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Notes:</b></p>
                     <p>In functions that involve character counting such
                        as <a href="https://www.w3.org/TR/xpath-functions-31/#func-substring"><code>fn:substring</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-string-length"><code>fn:string-length</code></a> and
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-translate"><code>fn:translate</code></a>, what is counted is the number of XML <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a>
                        in the string (or equivalently, the number of Unicode codepoints). Some
                        implementations may represent a codepoint above xFFFF using two 16-bit
                        values known as a surrogate pair. A surrogate pair counts as one character, not two.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="namespace-terminology"></a>1.7.2 Namespaces and URIs
                  </h4>
                  <p>This document uses the phrase "namespace URI" to identify the concept identified
                     in <a href="https://www.w3.org/TR/xpath-functions-31/#xml-names">[Namespaces in XML]</a> as "namespace name", and the phrase "local name"
                     to identify the concept identified in <a href="https://www.w3.org/TR/xpath-functions-31/#xml-names">[Namespaces in XML]</a> as "local part".
                  </p>
                  <p>It also uses the term "expanded-QName" defined below.</p>
                  <p><span class="termdef"><a id="expanded-name"></a>[Definition]   An <b>expanded-QName</b> 
                        is a value in the value space of the <code>xs:QName</code> datatype as defined in the XDM data model 
                        (see <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>): that is, a triple containing namespace prefix (optional), namespace URI (optional),
                        
                        and local name. Two expanded QNames are equal if the namespace URIs are the same (or
                        both absent) 
                        and the local names are the same. The prefix plays no part in the comparison, but
                        is used only 
                        if the expanded QName needs to be converted back to a string.</span></p>
                  <p>The term URI is used as follows:</p>
                  <p><span class="termdef"><a id="dt-uri"></a>[Definition]  Within this specification, the term <b>URI</b> refers to Universal Resource Identifiers as
                        defined in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a> and extended in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a> with a new name <b>IRI</b>.  The term <b>URI   
                           Reference</b>, unless otherwise stated, refers to a string in the lexical space of the <code>xs:anyURI</code> datatype 
                        as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.</span></p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>
                        Note that this means, in practice, that where this 
                        specification requires a "URI Reference", an IRI as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a> will be 
                        accepted, provided that other relevant specifications also permit an IRI. The term
                        URI has been 
                        retained in preference to IRI to avoid introducing new names for concepts such as
                        "Base URI" that 
                        are defined or referenced across the whole family of XML specifications.  Note also
                        that the 
                        definition of <code>xs:anyURI</code> is a wider definition than the definition in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a>; 
                        for example it does not require non-ASCII characters to be escaped.
                        
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="conformance-terminology"></a>1.7.3 Conformance terminology
                  </h4>
                  <p>In this specification:</p>
                  <ul>
                     <li>
                        <p>The auxiliary verb <span class="verb">must</span>, when rendered in small capitals, indicates a precondition for conformance.
                        </p>
                        <ul>
                           <li>
                              <p>When the sentence relates to an implementation of a function (for example "All implementations
                                 <span class="verb">must</span> 
                                 recognize URIs of the form ...") then an implementation is not conformant unless it
                                 behaves as stated.
                                 
                              </p>
                           </li>
                           <li>
                              <p>When the sentence relates to the result of a function (for example "The result <span class="verb">must</span> have the same type as 
                                 <code>$arg</code>") then the implementation is not conformant unless it delivers a result as stated.
                                 
                              </p>
                           </li>
                           <li>
                              <p>When the sentence relates to the arguments to a function (for example "The value of
                                 <code>$arg</code> <span class="verb">must</span> 
                                 be a valid regular expression") then the implementation is not conformant unless it
                                 enforces the condition by raising a dynamic error 
                                 whenever the condition is not satisfied. 
                                 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>The auxiliary verb <span class="verb">may</span>, when rendered in small capitals, indicates optional or discretionary behavior. 
                           The statement "An implementation <span class="verb">may</span> do X" implies that it is implementation-dependent whether or not it does X.
                        </p>
                     </li>
                     <li>
                        <p>The auxiliary verb <span class="verb">should</span>, when rendered in small capitals, indicates desirable or recommended behavior. 
                           The statement "An implementation <span class="verb">should</span> do X" implies that it is desirable to do X, but implementations may choose
                           to do otherwise if this is judged appropriate.
                        </p>
                     </li>
                  </ul>
                  <p><span class="termdef"><a id="implementation-defined"></a>[Definition]  Where behavior is described as 
                        <b>implementation-defined</b>, variations between processors are permitted, but a 
                        conformant implementation <span class="verb">must</span> document the choices it has made.</span></p>
                  <p><span class="termdef"><a id="implementation-dependent"></a>[Definition]  Where behavior is described as 
                        <b>implementation-dependent</b>, variations between processors are permitted, and  
                        conformant implementations are not required to document the choices they have made.</span></p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>Where this specification states that something is implementation-defined or implementation-dependent,
                        it is
                        open to host languages to place further constraints on the behavior.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="properties-of-functions"></a>1.7.4 Properties of functions
                  </h4>
                  <p>This section is concerned with the question of whether two calls on a function, with
                     the same arguments, may
                     produce different results.
                  </p>
                  <p><span class="termdef"><a id="execution-scope"></a>[Definition]  An <b>execution scope</b> is a sequence of
                        calls to the function library during which certain aspects of the state are required
                        to remain invariant.
                        For example, two calls to <a href="https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime"><code>fn:current-dateTime</code></a> within the same execution scope will return the same result.
                        The execution scope is defined by the host language that invokes the function library.</span>
                     In XSLT, for example, any two function calls executed during
                     the same transformation are in the same execution scope (except that static expressions,
                     such as those used in
                     <code>use-when</code> attributes, are in a separate execution scope).
                     
                  </p>
                  <p>The following definition explains more precisely what it means for two function calls
                     to return the same result:
                  </p>
                  <p><span class="termdef"><a id="dt-identical"></a>[Definition]  </span>Two values are
                     defined to be <b>identical</b> if they
                     contain the same number of items and the items are pairwise identical. Two items are
                     identical
                     if and only if one of the following conditions applies:
                  </p>
                  <ol class="enumar">
                     <li>
                        <p>Both items are atomic values, of precisely the same type, and the values are equal
                           as defined using the <code>eq</code> operator,
                           using the Unicode codepoint collation when comparing strings.
                        </p>
                     </li>
                     <li>
                        <p>Both items are nodes, and represent the same node.</p>
                     </li>
                     <li>
                        <p>Both items are maps, both maps have the same number of entries, 
                           and for every entry <var>E1</var> in the first map there is an entry <var>E2</var> in the second map such 
                           that the keys of <var>E1</var> and <var>E2</var> are <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>the same key<span class="arrow">·</span></a>, 
                           and the corresponding values <var>V1</var> and <var>V2</var> are <a title="identical" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-identical"><span class="arrow">·</span>identical<span class="arrow">·</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>Both items are arrays, both arrays have the same number of members, and the members
                           are pairwise <a title="identical" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-identical"><span class="arrow">·</span>identical<span class="arrow">·</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>Both items are function items, 
                           <span>neither item is a map or array</span>, and all the following conditions apply:
                        </p>
                        <ol class="enumla">
                           <li>
                              <p>Either both functions have the same name, or both names are 
                                 <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                              </p>
                           </li>
                           <li>
                              <p>Both functions have the same arity.</p>
                           </li>
                           <li>
                              <p>Both functions have the same function signature. <span>Two
                                    function signatures are defined to be the same if the declared result types are identical
                                    and the declared
                                    argument types are pairwise identical. Two types <var>S</var> and <var>T</var> are defined to be
                                    identical if and only if <code>subtype(S, T)</code> and <code>subtype(T, S)</code>
                                    both hold, where the subtype relation is defined in <a href="https://www.w3.org/TR/xpath-31/#id-seqtype-subtype">Section 
                                       
                                       2.5.6.1 The judgement subtype(A, B)
                                       
                                       </a><sup><small>XP31</small></sup>.</span></p>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>Under this definition, a union type with <code>memberTypes="xs:double xs:decimal"</code>
                                    is identical to a union type with <code>memberTypes="xs:decimal xs:double"</code>. However, two functions
                                    whose signatures differ in this way will probably be deemed non-identical under rule
                                    (e) below, because they are likely to
                                    have different effect when invoked with an argument of type <code>xs:untypedAtomic</code>.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Both functions have the same nonlocal variable bindings (sometimes called the function's
                                 closure).
                              </p>
                           </li>
                           <li>
                              <p>The processor is able to determine that the implementations of the two functions are
                                 equivalent,
                                 in the sense that for all possible combinations of arguments, the two functions have
                                 the same effect.
                              </p>
                           </li>
                        </ol>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>There is no function or operator defined in the specification that tests whether two
                              function items 
                              are identical. Where the specification requires two function items to be identical,
                              for example in the 
                              results of repeated calls of a function whose result is a function, then the processor
                              must ensure that 
                              it returns functions that are indistinguishable in their observable effect. Where
                              the specification defines 
                              behavior conditional on two function items being identical, the determination of identity
                              is to some degree 
                              implementation-dependent. There are cases where function items are definitely not
                              identical (for example 
                              if they have different name or arity), but positive determination of identity is possible
                              only using 
                              implementation-dependent techniques, for example when both items contain references
                              to the same piece of 
                              code representing the function's implementation.
                              
                           </p>
                        </div>
                     </li>
                  </ol>
                  <p>Some functions produce results that depend not only on their explicit arguments, 
                     but also on the static and dynamic context.
                  </p>
                  <p><span class="termdef"><a id="dt-context-dependent"></a>[Definition]  A function may have 
                        the property of being <b>context-dependent</b>: the result of such a
                        function depends on the values of properties in the static and dynamic
                        evaluation context as well as on the actual supplied arguments (if any).</span></p>
                  <p><span class="termdef"><a id="dt-context-independent"></a>[Definition]  A function that is
                        not <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a> is called 
                        <b>context-independent</b>.</span></p>
                  <p>A function that is context-dependent can be used as a named
                     function reference, can be partially applied, and can be found using <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a>. 
                     The principle in such cases is that the static context used for the function evaluation
                     is taken from the static context of the named function reference, partial function
                     application, or the call
                     on <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a>; and the dynamic context for the function evaluation is taken from the dynamic
                     context of the evaluation of the named function reference, partial function application,
                     or the call
                     of <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a>. In effect, the static and dynamic part of the context thus act
                     as part of the closure of the function item.
                  </p>
                  <p>Context-dependent functions fall into a number of categories:</p>
                  <ol class="enumar">
                     <li>
                        <p>The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-current-date"><code>fn:current-date</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime"><code>fn:current-dateTime</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-current-time"><code>fn:current-time</code></a>, 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-default-language"><code>fn:default-language</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-implicit-timezone"><code>fn:implicit-timezone</code></a>,
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-date-to-timezone"><code>fn:adjust-date-to-timezone</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-dateTime-to-timezone"><code>fn:adjust-dateTime-to-timezone</code></a>, and
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-time-to-timezone"><code>fn:adjust-time-to-timezone</code></a> depend on properties of the dynamic context that are
                           fixed within the <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>. The same applies to a
                           number of functions in the <code>op:</code> namespace that manipulate dates and times and
                           that make use of the implicit timezone. These functions will return the same
                           result if called repeatedly during a single <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>A number of functions including <a href="https://www.w3.org/TR/xpath-functions-31/#func-base-uri"><code>fn:base-uri#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data#0</code></a>, 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-document-uri"><code>fn:document-uri#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-element-with-id"><code>fn:element-with-id#1</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id#1</code></a>, 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-idref"><code>fn:idref#1</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-lang"><code>fn:lang#1</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-last"><code>fn:last#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-local-name"><code>fn:local-name#0</code></a>,
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-name"><code>fn:name#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri"><code>fn:namespace-uri#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-space"><code>fn:normalize-space#0</code></a>, 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-number"><code>fn:number#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-path"><code>fn:path#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-position"><code>fn:position#0</code></a>, 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-root"><code>fn:root#0</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string#0</code></a>, and
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-string-length"><code>fn:string-length#0</code></a> depend on the <span><a href="https://www.w3.org/TR/xpath-31/#dt-focus">focus</a><sup><small>XP31</small></sup></span>. 
                           These functions will in general return
                           different results on different calls if the focus is different.
                        </p>
                        <p><span class="termdef"><a id="dt-focus-dependent"></a>[Definition]  A function is <b>focus-dependent</b>
                              if its result depends on the <span><a href="https://www.w3.org/TR/xpath-31/#dt-focus">focus</a><sup><small>XP31</small></sup></span>
                              (that is, the context item, position, or size).</span></p>
                        <p><span class="termdef"><a id="dt-focus-independent"></a>[Definition]  A function that
                              is not <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a> is called
                              <b>focus-independent</b></span></p>
                     </li>
                     <li>
                        <p>The function <a href="https://www.w3.org/TR/xpath-functions-31/#func-default-collation"><code>fn:default-collation</code></a> and many string-handling operators and functions depend
                           on the default collation and the in-scope collations, which are both properties
                           of the static context. If a particular call of one of these functions is
                           evaluated twice with the same arguments then it will return the same result
                           each time (because the static context, by definition, does not change at run
                           time). However, two distinct calls (that is, two calls on the function
                           appearing in different places in the source code) may produce different results
                           even if the explicit arguments are the same.
                        </p>
                     </li>
                     <li>
                        <p>Functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-static-base-uri"><code>fn:static-base-uri</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>, and <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> depend on
                           other aspects of the static context. As with functions that depend on
                           collations, a single call will produce the same results on each call if the
                           explicit arguments are the same, but two calls appearing in different places in
                           the source code may produce different results.
                        </p>
                     </li>
                  </ol>
                  <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a> function is a special case because it is
                     potentially dependent on everything in the static and dynamic context. This is because
                     the static and dynamic
                     context of the call to <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a> are used as the static and dynamic context of the
                     function that <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a> returns.
                  </p>
                  <p><span class="termdef"><a id="dt-implicit-arguments"></a>[Definition]  For a
                        <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a> function, 
                        the parts of the context on which it depends are
                        referred to as <b>implicit arguments</b>.</span></p>
                  <p><span class="termdef"><a id="dt-deterministic"></a>[Definition]  A function that is guaranteed to produce <a title="identical" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-identical"><span class="arrow">·</span>identical<span class="arrow">·</span></a> results 
                        from repeated calls <span>within a single <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a></span>
                        if the explicit and implicit arguments are identical is referred to as
                        <b>deterministic</b>.</span></p>
                  <p><span class="termdef"><a id="dt-nondeterministic"></a>[Definition]  A function that is not
                        <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a> is referred to as <b>nondeterministic</b>.</span></p>
                  <p>All functions defined in this specification are <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a> unless otherwise stated.
                     Exceptions include the following:
                  </p>
                  <ul>
                     <li>
                        <p><span class="termdef"><a id="dt-nondeterministic-wrt-ordering"></a>[Definition]  Some 
                              functions (such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-distinct-values"><code>fn:distinct-values</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-unordered"><code>fn:unordered</code></a>, <span><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-keys"><code>map:keys</code></a>,
                                 and <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-for-each"><code>map:for-each</code></a></span>) produce results in an
                              <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> or 
                              <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order. 
                              In such cases two calls with the same arguments are not guaranteed to produce the
                              results in the same order. These functions are
                              said to be <b>nondeterministic with respect to ordering</b>.</span></p>
                     </li>
                     <li>
                        <p><span>Some functions (such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><code>fn:analyze-string</code></a>,
                              <span><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml-fragment"><code>fn:parse-xml-fragment</code></a>,</span> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a>) </span>
                           construct a tree of nodes to
                           represent their results. There is no guarantee that repeated calls with the same
                           arguments will return the same identical node (in the sense of the <code>is</code>
                           operator). However, if non-identical nodes are returned, their content will be the
                           same in the sense of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-deep-equal"><code>fn:deep-equal</code></a> function. Such a function is said 
                           to be <b>non-deterministic with respect to node identity</b>.
                        </p>
                     </li>
                     <li>
                        <p>Some functions (such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a>) create new nodes by reading external
                           documents. Such functions are guaranteed to be <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a> with the exception that
                           an implementation is allowed to make them non-deterministic as a user option.
                        </p>
                     </li>
                  </ul>
                  <p>Where the results of a function are described as being (to a greater or lesser
                     extent) <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> or 
                     <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>, this does not by
                     itself remove the requirement that the results should be deterministic: that is, that
                     repeated calls with the same explicit and implicit arguments <span class="verb">must</span> return
                     identical results.
                  </p>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="accessors"></a>2 Accessors
            </h2>
            <p>Accessors and their semantics are described in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>. Some of
               these accessors are exposed to the user through the functions described below.
            </p>
            <p>Each of these functions has an arity-zero signature which is equivalent to the arity-one
               form, with the context item supplied as the implicit first argument. In addition,
               each of the
               arity-one functions accepts an empty sequence as the argument, in which case it generally
               delivers
               an empty sequence as the result: the exception is <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a>, which delivers
               a zero-length string.
            </p>
            <div class="overlarge"><table class="data">
               <colgroup><col style="width:25%" span="1">
               <col style="width:25%" span="1">
               <col style="width:25%" span="1">
               <col style="width:25%" span="1">
               </colgroup><thead>
                  <tr>
                     <th>Function</th>
                     <th>Accessor</th>
                     <th>Accepts</th>
                     <th>Returns</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td>
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-node-name"><code>fn:node-name</code></a>
                        
                     </td>
                     <td>
                        <code>node-name</code>
                        
                     </td>
                     <td>node (optional)</td>
                     <td><code>xs:QName</code> (optional)
                        
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-nilled"><code>fn:nilled</code></a>
                        
                     </td>
                     <td>
                        <code>nilled</code>
                        
                     </td>
                     <td>node (optional)</td>
                     <td><code>xs:boolean</code> (optional)
                        
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a>
                        
                     </td>
                     <td>
                        <code>string-value</code>
                        
                     </td>
                     <td>item (optional)</td>
                     <td>
                        <code>xs:string</code>
                        
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data</code></a>
                        
                     </td>
                     <td>
                        <code>typed-value</code>
                        
                     </td>
                     <td>zero or more items</td>
                     <td>a sequence of atomic values</td>
                  </tr>
                  <tr>
                     <td>
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-base-uri"><code>fn:base-uri</code></a>
                        
                     </td>
                     <td>
                        <code>base-uri</code>
                        
                     </td>
                     <td>node (optional)</td>
                     <td><code>xs:anyURI</code> (optional)
                        
                     </td>
                  </tr>
                  <tr>
                     <td>
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-document-uri"><code>fn:document-uri</code></a>
                        
                     </td>
                     <td>
                        <code>document-uri</code>
                        
                     </td>
                     <td>node (optional)</td>
                     <td><code>xs:anyURI</code> (optional)
                        
                     </td>
                  </tr>
               </tbody>
            </table></div>
            <div class="div2">
               
               <h3><a id="func-node-name"></a>2.1 fn:node-name
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the name of a node, as an <code>xs:QName</code>.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:node-name</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:QName?</code></div>
                     <div class="proto"><code class="function">fn:node-name</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:QName?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>If <code>$arg</code> is the empty sequence, the empty sequence is returned.
                     </p>
                     <p>Otherwise, the function returns the result of the <code>dm:node-name</code> accessor as
                        defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a> (see <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-node-name">Section 
                           
                           5.10 node-name Accessor
                           </a><sup><small>DM31</small></sup>).
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">For element and attribute nodes, the name of the node is returned as an
                        <code>xs:QName</code>, retaining the prefix, namespace URI, and local part.
                     </p>
                     <p class="note">For processing instructions, the name of the node is returned as an
                        <code>xs:QName</code> in which the prefix and namespace URI are <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                     </p>
                     <p class="note">For a namespace node, the function returns an empty sequence if the node represents
                        the
                        default namespace; otherwise it returns an <code>xs:QName</code> in which prefix and
                        namespace URI are <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup> and the local
                        part is the namespace prefix being bound.
                     </p>
                     <p class="note">For all other kinds of node, the function returns the empty sequence.</p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-nilled"></a>2.2 fn:nilled
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns true for an element that is <b>nilled</b>.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:nilled</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean?</code></div>
                     <div class="proto"><code class="function">fn:nilled</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                     </p>
                     <p>Otherwise the function returns the result of the <code>dm:nilled</code> accessor as
                        defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a> (see <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-nilled">Section 
                           
                           5.8 nilled Accessor
                           </a><sup><small>DM31</small></sup>).
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">If <code>$arg</code> is not an element node, the function returns the empty
                        sequence.
                     </p>
                     <p class="note">If <code>$arg</code> is an untyped element node, the function returns false.
                     </p>
                     <p class="note">In practice, the function returns <code>true</code> only for an element node that has
                        the attribute <code>xsi:nil="true"</code> and that is successfully validated against a
                        schema that defines the element to be nillable; the detailed rules, however, are defined
                        in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-string"></a>2.3 fn:string
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the value of <code>$arg</code> represented as an <code>xs:string</code>.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:string</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     <div class="proto"><code class="function">fn:string</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>In the zero-argument version of the function, <code>$arg</code> defaults to the context
                        item. That is, calling <code>fn:string()</code> is equivalent to calling
                        <code>fn:string(.)</code>.
                     </p>
                     <p>If <code>$arg</code> is the empty sequence, the function returns the zero-length
                        string.
                     </p>
                     <p>If <var>$arg</var> is a node, the function returns the string value of the node, as obtained using the
                        <code>dm:string-value</code> accessor defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a> (see <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-string-value">Section 
                           
                           5.12 string-value Accessor
                           </a><sup><small>DM31</small></sup>).
                     </p>
                     <p>If <var>$arg</var> is an atomic value, the function returns the result of the expression <code>$arg cast
                           as xs:string</code> (see <a href="https://www.w3.org/TR/xpath-functions-31/#casting"><b>19 Casting</b></a>).
                     </p>
                     <p>In all other cases, a dynamic error occurs (see below).</p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup> by
                        the zero-argument version of the function if the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>. 
                     </p>
                     <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOTY0014" title="err:FOTY0014">err:FOTY0014</a>] if
                        <code>$arg</code> is a function item (this includes maps and arrays).
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Every node has a string value, even an element with element-only
                        content (which has no typed value). Moreover, casting an atomic value to a string
                        always
                        succeeds. Functions, maps, and arrays have no string value, so these are the
                        only arguments that satisfy the type signature but cause failure.
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>string(23)</code> returns <code>"23"</code>.
                        </p>
                        <p>The expression <code>string(false())</code> returns <code>"false"</code>.
                        </p>
                        <p>The expression <code>string("Paris")</code> returns <code>"Paris"</code>.
                        </p>
                        <p>The expression <code>string((1, 2, 3))</code> raises error <code>XPTY0004</code>.
                        </p>
                        <p>The expression <code>string([[1, 2], [3, 4]])</code> raises error <code>FOTY0014</code>.
                        </p>
                        <p>The expression <code>string(abs#1)</code> raises error <code>FOTY0014</code>.
                        </p>
                        <div class="exampleInner"><pre class="small">let $para := 
&lt;para&gt;In a hole in the ground there lived a &lt;term author="Tolkien"&gt;hobbit&lt;/term&gt;.&lt;/para&gt;
         </pre></div>
                        <p>The expression <code>string($para)</code> returns <code>"In a hole in the ground there lived a hobbit."</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-data"></a>2.4 fn:data
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the result of atomizing a sequence. This process flattens arrays, and replaces
                        nodes by their typed values.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:data</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></div>
                     <div class="proto"><code class="function">fn:data</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p> The result of <code>fn:data</code> is the sequence of atomic values produced by
                        applying the following rules to each item in <code>$arg</code>:
                     </p>
                     <ul>
                        <li>
                           <p>If the item is an atomic value, it is appended to the result sequence.</p>
                        </li>
                        <li>
                           <p>If the item is a node, the typed value of the node is appended to the result
                              sequence. The typed value is a sequence of zero or more atomic values:
                              specifically, the result of the <code>dm:typed-value</code> accessor as defined in
                              <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a> (See <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-typed-value">Section 
                                 
                                 5.14 typed-value Accessor
                                 </a><sup><small>DM31</small></sup>).
                           </p>
                        </li>
                        <li>
                           <p>If the item is an array, the result of applying <code>fn:data</code> to
                              each member of the array, in order, is appended to the result sequence.
                           </p>
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOTY0012" title="err:FOTY0012">err:FOTY0012</a>] if an item in the
                        sequence <code>$arg</code> is a node that does not have a typed value. 
                     </p>
                     <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOTY0013" title="err:FOTY0013">err:FOTY0013</a>] if an item in
                        the sequence <code>$arg</code> is a function item <span>other than
                           an array</span>. 
                     </p>
                     <p>A dynamic error is raised if <code>$arg</code> is omitted and the context item is
                        <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The process of applying the <code>fn:data</code> function to a sequence is referred to
                        as <code>atomization</code>. In many cases an explicit call on <code>fn:data</code> is
                        not required, because atomization is invoked implicitly when a node or sequence of
                        nodes
                        is supplied in a context where an atomic value or sequence of atomic values is
                        required.
                     </p>
                     <p class="note">The result of atomizing an empty sequence is an empty sequence.</p>
                     <p class="note">The result of atomizing an empty array is an empty sequence.</p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>data(123)</code> returns <code>123</code>.
                        </p>
                        <p>The expression <code>data((123, 456))</code> returns <code>123, 456</code>.
                        </p>
                        <p>The expression <code>data([[1,2],[3,4]])</code> returns <code>1, 2, 3, 4</code>.
                        </p>
                        <div class="exampleInner"><pre class="small">let $para := 
&lt;para&gt;In a hole in the ground there lived a &lt;term author="Tolkien"&gt;hobbit&lt;/term&gt;.&lt;/para&gt;
         </pre></div>
                        <p>The expression <code>data($para)</code> returns <code>xs:untypedAtomic("In a hole in the ground there lived a hobbit.")</code>.
                        </p>
                        <p>The expression <code>data($para/term/@author)</code> returns <code>xs:untypedAtomic("Tolkien")</code>.
                        </p>
                        <p>The expression <code>data(abs#1)</code> raises error <code>FOTY0013</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-base-uri"></a>2.5 fn:base-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the base URI of a node.</p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:base-uri</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                     <div class="proto"><code class="function">fn:base-uri</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The zero-argument version of the function returns the base URI of the context node:
                        it
                        is equivalent to calling <code>fn:base-uri(.)</code>.
                     </p>
                     <p>The single-argument version of the function behaves as follows:</p>
                     <ol class="enumar">
                        <li>If <code>$arg</code> is the empty sequence, the function returns the empty
                           sequence.
                        </li>
                        <li>Otherwise, the function returns the value of the <code>dm:base-uri</code> accessor
                           applied to the node <code>$arg</code>. This accessor is defined, for each kind of
                           node, in the XDM specification (See <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-base-uri">Section 
                              
                              5.2 base-uri Accessor
                              </a><sup><small>DM31</small></sup>).
                        </li>
                     </ol>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>As explained in XDM, document, element and processing-instruction nodes have a
                        base-uri property which may be empty. The base-uri property for all other node kinds
                        is
                        the empty sequence. The dm:base-uri accessor returns the base-uri property of a node
                        if
                        it exists and is non-empty; otherwise it returns the result of applying the dm:base-uri
                        accessor to its parent, recursively. If the node does not have a parent, or if the
                        recursive ascent up the ancestor chain encounters a parentless node whose base-uri
                        property is empty, the empty sequence is returned. In the case of namespace nodes,
                        however, the result is always an empty sequence — it does not depend on the base URI
                        of
                        the parent element.
                     </div>
                     <p>See also <a href="https://www.w3.org/TR/xpath-functions-31/#func-static-base-uri"><code>fn:static-base-uri</code></a>.
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-document-uri"></a>2.6 fn:document-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the URI of a resource where a document can be found, if available.</p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:document-uri</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                     <div class="proto"><code class="function">fn:document-uri</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                     </p>
                     <p>If <code>$arg</code> is not a document node, the function returns the empty
                        sequence.
                     </p>
                     <p>Otherwise, the function returns the value of the <code>document-uri</code> accessor
                        applied to <code>$arg</code>, as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a> (See
                        <a href="https://www.w3.org/TR/xpath-datamodel-31/#DocumentNodeAccessors">Section 
                           
                           6.1.2 Accessors
                           </a><sup><small>DM31</small></sup>).
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">In the case of a document node <code>$D</code> returned by the <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>
                        function, or a document node at the root of a tree containing a node returned by the
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> function, it will always be true that either
                        <code>fn:document-uri($D)</code> returns the empty sequence, or that the following
                        expression is true: <code>fn:doc(fn:document-uri($D))</code> is <code>$D</code>. It is
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether this guarantee also holds for
                        document nodes obtained by other means, for example a document node passed as the
                        initial context node of a query or transformation.
                     </p>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="errors-and-diagnostics"></a>3 Errors and diagnostics
            </h2>
            <div class="div2">
               
               <h3><a id="errors"></a>3.1 Raising errors
               </h3>
               <p>In this document, as well as in <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>,
                  	            the phrase "an error is raised"
                  	                is used. Raising an error is equivalent to calling the <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a>
                  	                function defined in this section with the provided error code. Except
                  where otherwise
                  	                specified, errors defined in this specification are dynamic errors.
                  Some errors,
                  	                however, are classified as type errors. Type errors are typically
                  used where the presence
                  	         of the error can be inferred from knowledge of the type of the actual arguments
                  to a function, for
                  	         example with a call such as <code>fn:string(fn:abs#1)</code>. Host languages may allow type errors
                  	         to be reported statically if they are discovered during static analysis.
               </p>
               <p> When function specifications indicate that an error is to be raised, the notation
                  
                  	            "[<em>error code</em>]". os used to specify an error code. Each error defined
                  	                in this document is identified by an <code>xs:QName</code> that is in the
                  	                <code>http://www.w3.org/2005/xqt-errors</code> namespace, represented in this document by the <code>err</code> prefix. It is this
                  	                <code>xs:QName</code> that is actually passed as an argument to the
                  	                <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a> function. Calling this function raises an error.  For a
                  	                more detailed treatment of error handing, see <a href="https://www.w3.org/TR/xpath-31/#id-handling-dynamic">Section 
                     
                     2.3.3 Handling Dynamic Errors
                     </a><sup><small>XP31</small></sup>.
               </p>
               <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a> function is a general function that may be called as above
                  	                but may also be called from <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> or <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>
                  	                applications with, for example, an <code>xs:QName</code> argument. 
               </p>
               <div class="div3">
                  
                  <h4><a id="func-error"></a>3.1.1 fn:error
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Calling the <code>fn:error</code> function raises an application-defined error.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:error</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">none</code></div>
                        <div class="proto"><code class="function">fn:error</code>(<code class="arg">$code</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">none</code></div>
                        <div class="proto"><code class="function">fn:error</code>(<code class="arg">$code</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName?</code>, <code class="arg">$description</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">none</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:error</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$code</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$description</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$error-object</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">none</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>This function never returns a value. Instead it always raises an error. The effect
                           of
                           the error is identical to the effect of dynamic errors raised implicitly, for example
                           when an incorrect argument is supplied to a function.
                        </p>
                        <p>The parameters to the <code>fn:error</code> function supply information that is
                           associated with the error condition and that is made available to a caller that asks
                           for
                           information about the error. The error may be caught either by the host language (using
                           a try/catch construct in XSLT or XQuery, for example), or by the calling application
                           or
                           external processing environment. The way in which error information is returned to
                           the
                           external processing environment is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                        <p>There are three pieces of information that may be associated with an error:</p>
                        <ul>
                           <li>
                              <p>The <code>$code</code> is an error code that distinguishes this error from others.
                                 It is an <code>xs:QName</code>; the namespace URI conventionally identifies the
                                 component, subsystem, or authority responsible for defining the meaning of the
                                 error code, while the local part identifies the specific error condition. The
                                 namespace URI <code>http://www.w3.org/2005/xqt-errors</code> is used for errors
                                 defined in this specification; other namespace URIs may be used for errors defined
                                 by the application.
                              </p>
                              <p>If the external processing environment expects the error code to be returned as a
                                 URI or a string rather than as an <code>xs:QName</code>, then an error code with
                                 namespace URI <code>NS</code> and local part <code>LP</code> will be returned in
                                 the form <code>NS#LP</code>. The namespace URI part of the error code should
                                 therefore not include a fragment identifier.
                              </p>
                              <p>If no value is supplied for the <code>$code</code> argument (that is,
                                 if the function is called with no arguments or if the first argument is an empty sequence),
                                 the effective value of the error code is <code>fn:QName('http://www.w3.org/2005/xqt-errors', 'err:FOER0000')</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code>$description</code> is a natural-language description of the error
                                 condition.
                              </p>
                              <p>If no value is supplied for the <code>$description</code>
                                 argument (that is, if the function is called with less than two arguments), then the
                                 effective value of the description is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                              </p>
                           </li>
                           <li>
                              <p>The <code>$error-object</code> is an arbitrary value used to convey additional
                                 information about the error, and may be used in any way the application
                                 chooses.
                              </p>
                              <p>If no value is supplied for the <code>$error-object</code>
                                 argument (that is, if the function is called with less than three arguments), then
                                 the
                                 effective value of the error object is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>This function always raises a dynamic error. By default, it raises [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOER0000" title="err:FOER0000">err:FOER0000</a>]
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The value of the <code>$description</code> parameter may need to be localized.
                        </p>
                        <p class="note">The type "none" is a special type defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-semantics">[XQuery 1.0 and XPath 2.0 Formal Semantics]</a> and is not available to the user. It indicates that the function never returns and
                           ensures that it has the correct static type.
                        </p>
                        <p class="note">Any QName may be used as an error code; there are no reserved names or namespaces.
                           The
                           error is always classified as a dynamic error, even if the error code used is one
                           that
                           is normally used for static errors or type errors.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:error()</code> raises error <code>FOER0000</code>. <em>(This returns the URI
                                 <code>http://www.w3.org/2005/xqt-errors#FOER0000</code> (or the corresponding
                                 <code>xs:QName</code>) to the external processing environment, unless the error
                                 is caught using a try/catch construct in the host language.)</em></p>
                           <p>The expression <code>fn:error(fn:QName('http://www.example.com/HR', 'myerr:toohighsal'),
                                 'Does not apply because salary is too high')</code> raises error <code>myerr:toohighsal</code>. <em>(This returns <code>http://www.example.com/HR#toohighsal</code> and the
                                 <code>xs:string</code>
                                 <code>"Does not apply because salary is too high"</code> (or the corresponding
                                 <code>xs:QName</code>) to the external processing environment, unless the error
                                 is caught using a try/catch construct in the host language.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="diagnostics"></a>3.2 Diagnostic tracing
               </h3>
               <div class="div3">
                  
                  <h4><a id="func-trace"></a>3.2.1 fn:trace
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Provides an execution trace intended to be used in debugging queries.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:trace</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                        <div class="proto"><code class="function">fn:trace</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$label</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the value of <code>$value</code>, unchanged.
                        </p>
                        <p>In addition, the values of <code>$value</code>, converted to an <code>xs:string</code>,
                           and <code>$label</code> <span>(if supplied)</span>
                           <span class="verb">may</span> be directed to a trace data set. The destination of the trace
                           output is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. The format of the trace output is
                           <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>. The ordering of output from calls of the
                           <code>fn:trace</code> function is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Sometimes there is a need to output trace information unrelated to a specific value.
                           In such cases it can be useful to set <code>$value</code> to an empty string or an empty
                           sequence, and to compute the value of the <code>$label</code> argument: 
                           <code>fn:trace((), "Processing item " || $i)</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Consider a situation in which a user wants to investigate the actual value passed
                              to
                              a function. Assume that in a particular execution, <code>$v</code> is an
                              <code>xs:decimal</code> with value <code>124.84</code>. Writing <code>fn:trace($v,
                                 'the value of $v is:')</code> will put the strings <code>"124.84"</code> and
                              <code>"the value of $v is:"</code> in the trace data set in implementation
                              dependent order.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="numeric-functions"></a>4 Functions and operators on numerics
            </h2>
            <p>This section specifies arithmetic operators on the numeric datatypes defined in
               <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.
            </p>
            <div class="div2">
               
               <h3><a id="numeric-types"></a>4.1 Numeric types
               </h3>
               <p>The operators described in this section are defined on the following <span>atomic</span>
                  types. Each type whose name is indented is derived from the type whose name
                  appears nearest above with one less level of indentation.
               </p>
               <table class="hierarchy" style="border:0px solid">
                  <tbody>
                     <tr>
                        <td class="castOther">xs:decimal</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther">xs:integer</td>
                     </tr>
                     <tr>
                        <td class="castOther">xs:float</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther">xs:double</td>
                        <td>&nbsp;</td>
                     </tr>
                  </tbody>
               </table>
               <p>They also apply to types derived by restriction from the above types. </p>
               <p>The type <code>xs:numeric</code> is defined as a union type whose member types are
                  (in order) <code>xs:double</code>, <code>xs:float</code>, and <code>xs:decimal</code>. This type is implicitly imported
                  into the static context, so it can also be used in defining the signature of user-written
                  functions. Apart from the fact that
                  it is implicitly imported, it behaves exactly like a user-defined type with the same
                  definition. This means, for example:
               </p>
               <ul>
                  <li>
                     <p>If the expected type of a function parameter is given as <code>xs:numeric</code>, the actual value supplied
                        can be an instance of any of these three types, or any type derived from these three
                        by restriction (this includes the built-in
                        type <code>xs:integer</code>, which is derived from <code>xs:decimal</code>).
                     </p>
                  </li>
                  <li>
                     <p>If the expected type of a function parameter is given as <code>xs:numeric</code>, and the actual value supplied
                        is <code>xs:untypedAtomic</code> (or a node whose atomized value is <code>xs:untypedAtomic</code>), then it will
                        be cast to the union type <code>xs:numeric</code> using the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-union"><b>19.3.5 Casting to union types</b></a>.
                        Because the lexical space of <code>xs:double</code> subsumes the lexical space of the other member types, and
                        <code>xs:double</code> is listed first, the effect is that if the untyped atomic value is in the lexical
                        space of
                        <code>xs:double</code>, it will be converted to an <code>xs:double</code>, and if not, a dynamic error occurs.
                     </p>
                  </li>
                  <li>
                     <p>When the return type of a function is given as <code>xs:numeric</code>, the actual value returned will be
                        an instance of one of the three member types (and perhaps also of types derived from
                        these by restriction). The rules
                        for the particular function will specify how the type of the result depends on the
                        values supplied as arguments.
                        In many cases, for the functions in this specification, the result is defined to be
                        the same type as the first
                        argument.
                     </p>
                  </li>
               </ul>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>
                     This specification uses  <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> arithmetic for <code>xs:float</code> and <code>xs:double</code> values.
                     One consequence of this is that some operations result in the value <code>NaN</code> (not-a number), which
                     has the unusual property that it is not equal to itself. Another consequence is that
                     some operations return the value negative zero.
                     This differs from <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> which defines
                     <code>NaN</code> as being equal to itself and defines only a single zero in the value space.
                     The text accompanying several functions defines behavior for both positive and negative
                     zero inputs and outputs 
                     in the interest of alignment with <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>. A conformant implementation must
                     respect these semantics. In consequence, the expression <code>-0.0e0</code> (which is actually a unary minus operator 
                     applied to an <code>xs:double</code> value) will always return negative zero: see <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-minus"><b>4.2.8 op:numeric-unary-minus</b></a>. 
                     As a concession to implementations that rely on implementations of XSD 1.0, however,
                     when casting from string to double
                     the lexical form <code>-0</code> <span class="verb">may</span> be converted to positive zero, though negative zero
                     is <span class="verb">recommended</span>.
                     
                  </p>
                  <p>XML Schema 1.1 introduces support for positive and negative zero as distinct values,
                     and also uses the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>
                     semantics for comparisons involving <code>NaN</code>.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="op.numeric"></a>4.2 Arithmetic operators on numeric values
               </h3>
               <p>The following functions define the semantics of arithmetic operators defined in 
                  			<a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a> on these numeric types. 
               </p>
               <div class="overlarge"><table class="no-code-break data">
                  <thead>
                     <tr>
                        <th>Operator</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-add"><code>op:numeric-add</code></a>
                           
                        </td>
                        <td>Addition</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-subtract"><code>op:numeric-subtract</code></a>
                           
                        </td>
                        <td>Subtraction</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-multiply"><code>op:numeric-multiply</code></a>
                           
                        </td>
                        <td>Multiplication</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-divide"><code>op:numeric-divide</code></a>
                           
                        </td>
                        <td>Division</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-integer-divide"><code>op:numeric-integer-divide</code></a>
                           
                        </td>
                        <td>Integer division</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-mod"><code>op:numeric-mod</code></a>
                           
                        </td>
                        <td>Modulus</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-plus"><code>op:numeric-unary-plus</code></a>
                           
                        </td>
                        <td>Unary plus</td>
                     </tr>
                     <tr>
                        <td>
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-minus"><code>op:numeric-unary-minus</code></a>
                           
                        </td>
                        <td>Unary minus (negation)</td>
                     </tr>
                  </tbody>
               </table></div>
               <p><span>The parameters and return types for the above operators are in most cases declared
                     to be of type
                     <code>xs:numeric</code>, which permits the basic numeric
                     types: <code>xs:integer</code>, <code>xs:decimal</code>, <code>xs:float</code>
                     and <code>xs:double</code>, and types derived from them.
                     In general the two-argument functions require that both arguments are of the same
                     primitive type,
                     and they return a value of this same type.</span>
                  The exceptions are <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-divide"><code>op:numeric-divide</code></a>, which returns
                  an <code>xs:decimal</code> if called with two <code>xs:integer</code> operands,
                  and <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-integer-divide"><code>op:numeric-integer-divide</code></a> which always returns an <code>xs:integer</code>.
               </p>
               <p>If the two operands of an arithmetic expression are not of the same type, <em>subtype substitution</em>
                  and <em>numeric type promotion</em> are used to obtain two operands of the
                  same type. <a href="https://www.w3.org/TR/xpath-31/#promotion">Section 
                     
                     B.1 Type Promotion
                     </a><sup><small>XP31</small></sup> and <a href="https://www.w3.org/TR/xpath-31/#mapping">Section 
                     
                     B.2 Operator Mapping
                     </a><sup><small>XP31</small></sup> describe the semantics of these operations in
                  detail. 
               </p>
               <p>The result type of operations depends on their argument datatypes and is defined
                  in the following table:
               </p>
               <div class="overlarge"><table class="no-code-break data">
                  <thead>
                     <tr>
                        <th>Operator</th>
                        <th>Returns</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td>
                           <code>op:operation(xs:integer, xs:integer)</code>
                           
                        </td>
                        <td>
                           <code>xs:integer</code> (except for <code>op:numeric-divide(integer,
                              integer)</code>, which returns <code>xs:decimal</code>)
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:decimal, xs:decimal)</code>
                           
                        </td>
                        <td>
                           <code>xs:decimal</code>
                           
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:float, xs:float)</code>
                           
                        </td>
                        <td>
                           <code>xs:float</code>
                           
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:double, xs:double)</code>
                           
                        </td>
                        <td>
                           <code>xs:double</code>
                           
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:integer)</code>
                           
                        </td>
                        <td>
                           <code>xs:integer</code>
                           
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:decimal)</code>
                           
                        </td>
                        <td>
                           <code>xs:decimal</code>
                           
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:float)</code>
                           
                        </td>
                        <td>
                           <code>xs:float</code>
                           
                        </td>
                     </tr>
                     <tr>
                        <td>
                           <code>op:operation(xs:double)</code>
                           
                        </td>
                        <td>
                           <code>xs:double</code>
                           
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>These rules define any operation on any pair of arithmetic types. Consider the
                  following example:
               </p>
               <div class="exampleInner"><pre>op:operation(xs:int, xs:double) =&gt; op:operation(xs:double, xs:double)</pre></div>
               <p>For this operation, <code>xs:int</code> must be converted to
                  <code>xs:double</code>. This can be done, since by the rules above:
                  <code>xs:int</code> can be substituted for <code>xs:integer</code>,
                  <code>xs:integer</code> can be substituted for <code>xs:decimal</code>,
                  <code>xs:decimal</code> can be promoted to <code>xs:double</code>. As far as possible, the promotions should be done in a
                  single step. Specifically, when an <code>xs:decimal</code> is promoted to an
                  <code>xs:double</code>, it should not be converted to an <code>xs:float</code>
                  and then to <code>xs:double</code>, as this risks loss of precision.
               </p>
               <p>As another example, a user may define <code>height</code> as a derived type of
                  <code>xs:integer</code> with a minimum value of 20 and a maximum value of 100.
                  They may then derive <code>fenceHeight</code> using an enumeration to restrict the
                  permitted set of values to, say, 36, 48 and 60.
               </p>
               <div class="exampleInner"><pre>op:operation(fenceHeight, xs:integer) =&gt; op:operation(xs:integer, xs:integer)</pre></div>
               <p>
                  <code>fenceHeight</code> can be substituted for its base type
                  <code>height</code> and <code>height</code> can be substituted for its base type
                  <code>xs:integer</code>. 
               </p>
               <p>The basic rules for addition, subtraction, and multiplication
                  			of ordinary numbers are not set out in this specification; they are taken as given.
                  In the case of <code>xs:double</code>
                  			and <code>xs:float</code> the rules are as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>. The rules for handling
                  			division and modulus operations, as well as the rules for handling special values
                  such as infinity and <code>NaN</code>,
                  			and exception conditions such as overflow and underflow, are described more explicitly
                  since they are not necessarily obvious.
               </p>
               <p>On overflow and underflow situations during arithmetic operations conforming
                  implementations <span class="verb">must</span> behave as follows:
               </p>
               <ul>
                  <li>
                     <p>For <code>xs:float</code> and <code>xs:double</code> operations, overflow
                        behavior <span class="verb">must</span> be conformant with <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>. This specification allows the following options:
                     </p>
                     <ul>
                        <li>
                           <p>Raising a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0002" title="err:FOAR0002">err:FOAR0002</a>] via an
                              overflow trap.
                           </p>
                        </li>
                        <li>
                           <p>Returning <code>INF</code> or <code>-INF</code>.
                           </p>
                        </li>
                        <li>
                           <p>Returning the largest (positive or negative) non-infinite number.</p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>For <code>xs:float</code> and <code>xs:double</code> operations,
                        underflow behavior <span class="verb">must</span> be conformant with <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>. This specification allows the following options:
                     </p>
                     <ul>
                        <li>
                           <p>Raising a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0002" title="err:FOAR0002">err:FOAR0002</a>] via an
                              underflow trap.
                           </p>
                        </li>
                        <li>
                           <p>Returning <code>0.0E0</code> or <code>+/- 2**Emin</code> or a
                              denormalized value; where <code>Emin</code> is the smallest
                              possible <code>xs:float</code> or <code>xs:double</code> exponent.
                           </p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>For <code>xs:decimal</code> operations, overflow behavior <span class="verb">must</span> 
                        raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0002" title="err:FOAR0002">err:FOAR0002</a>]. On
                        underflow, <code>0.0</code> must be returned.
                     </p>
                  </li>
                  <li>
                     <p>For <code>xs:integer</code> operations, implementations that support
                        limited-precision integer operations <span class="verb">must</span> select from
                        the following options:
                     </p>
                     <ul>
                        <li>
                           <p> They <span class="verb">may</span> choose to always raise a dynamic
                              error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0002" title="err:FOAR0002">err:FOAR0002</a>].
                           </p>
                        </li>
                        <li>
                           <p> They <span class="verb">may</span> provide an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> mechanism that allows users to
                              choose between raising an error and returning a result that is
                              modulo the largest representable integer value. See <a href="https://www.w3.org/TR/xpath-functions-31/#ISO10967">[ISO 10967]</a>.
                           </p>
                        </li>
                     </ul>
                  </li>
               </ul>
               <p>The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-add"><code>op:numeric-add</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-subtract"><code>op:numeric-subtract</code></a>,
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-multiply"><code>op:numeric-multiply</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-divide"><code>op:numeric-divide</code></a>,
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-integer-divide"><code>op:numeric-integer-divide</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-mod"><code>op:numeric-mod</code></a> are each
                  defined for pairs of numeric operands, each of which has the same
                  type:<code>xs:integer</code>, <code>xs:decimal</code>, <code>xs:float</code>, or
                  <code>xs:double</code>. The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-plus"><code>op:numeric-unary-plus</code></a> and
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-unary-minus"><code>op:numeric-unary-minus</code></a> are defined for a single operand whose type
                  is one of those same numeric types.
               </p>
               <p> For <code>xs:float</code> and <code>xs:double</code> arguments, if either
                  argument is <code>NaN</code>, the result is <code>NaN</code>.
               </p>
               <p>For <code>xs:decimal</code> values<span>, let <var>N</var> be the number of digits
                     of precision supported by the implementation, and let <var>M</var> (<code>M &lt;= N</code>) be the minimum limit on the number of digits
                     required for conformance (18 digits for XSD 1.0, 16 digits for XSD 1.1). Then for
                     addition, subtraction, and multiplication
                     operations, the returned result <span class="verb">should</span> be accurate to <var>N</var> digits of precision, and for division and modulus operations,
                     the returned result <span class="verb">should</span> be accurate to at least <var>M</var> digits of precision.</span> 
                  The actual precision is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the number
                  of digits in the mathematical result exceeds the number of digits that the implementation
                  retains for that operation, the result is truncated or rounded in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> manner.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>This Recommendation does not specify whether <code>xs:decimal</code> operations are fixed point or floating point.
                     In an implementation using floating point it is possible for very simple operations
                     to require more digits of precision than
                     are available; for example adding <code>1e100</code> to <code>1e-100</code> requires 200 digits of precision for an
                     accurate representation of the result.
                  </p>
               </div>
               <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification also describes handling of
                  two exception conditions called <code>divideByZero</code> and <code>invalidOperation</code>. The 
                  IEEE <code>divideByZero</code> exception is raised not only by a direct attempt to divide by zero, but also by
                  operations such as <code>log(0)</code>. The IEEE <code>invalidOperation</code> exception is raised by
                  attempts to call a function with an argument that is outside the function's domain
                  (for example,
                  <code>sqrt(-1)</code> or <code>log(-1)</code>). 
                  <span>Although IEEE defines these as exceptions, it also defines "default non-stop exception
                     handling" in 
                     which the operation returns a defined result, typically positive or negative infinity,
                     or NaN. With this 
                     function library,</span>
                  these IEEE exceptions do not cause a dynamic error
                  at the application level; rather they result in the relevant function or operator
                  returning
                  <span>the defined non-error result.</span> 
                  The underlying IEEE exception <span class="verb">may</span> be notified to the application
                  or to the user by some <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                  warning condition, but the observable effect on an application 
                  using the functions and operators defined in this specification is simply to return
                  <span>the defined 
                     result (typically -INF, +INF, or NaN)</span> with no error.
               </p>
               <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification distinguishes two NaN values,
                  a quiet NaN and a signaling NaN. These two values are not distinguishable in the XDM
                  model:
                  the value spaces of <code>xs:float</code> and <code>xs:double</code> each include only a single
                  <code>NaN</code> value. This does not prevent the implementation distinguishing them internally,
                  and triggering different <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                  warning conditions, but such distinctions do not affect the observable behavior of
                  an application 
                  using the functions and operators defined in this specification.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-numeric-add"></a>4.2.1 op:numeric-add
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arithmetic sum of its operands: (<code>$arg1 + $arg2</code>).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "+" operator when
                           applied to two numeric values
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-add</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note"> For <code>xs:float</code> or <code>xs:double</code> values, if one of the operands is a
                           zero or a finite number and the other is <code>INF</code> or <code>-INF</code>,
                           <code>INF</code> or <code>-INF</code> is returned. If both operands are
                           <code>INF</code>, <code>INF</code> is returned. If both operands are
                           <code>-INF</code>, <code>-INF</code> is returned. If one of the operands is
                           <code>INF</code> and the other is <code>-INF</code>, <code>NaN</code> is
                           returned.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-subtract"></a>4.2.2 op:numeric-subtract
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arithmetic difference of its operands: (<code>$arg1 - $arg2</code>).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "-" operator when
                           applied to two numeric values. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-subtract</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note"> For <code>xs:float</code> or <code>xs:double</code> values, if one of the operands is a
                           zero or a finite number and the other is <code>INF</code> or <code>-INF</code>, an
                           infinity of the appropriate sign is returned. If both operands are <code>INF</code> or
                           <code>-INF</code>, <code>NaN</code> is returned. If one of the operands is
                           <code>INF</code> and the other is <code>-INF</code>, an infinity of the appropriate
                           sign is returned.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-multiply"></a>4.2.3 op:numeric-multiply
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arithmetic product of its operands: (<code>$arg1 * $arg2</code>).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "*" operator when
                           applied to two numeric values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-multiply</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note"> For <code>xs:float</code> or <code>xs:double</code> values, if one of the operands is a
                           zero and the other is an infinity, <code>NaN</code> is returned. If one of the operands
                           is a non-zero number and the other is an infinity, an infinity with the appropriate
                           sign
                           is returned.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-divide"></a>4.2.4 op:numeric-divide
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arithmetic quotient of its operands: (<code>$arg1 div $arg2</code>).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "div" operator when
                           applied to two numeric values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-divide</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                        <p>As a special case, if the types of both <code>$arg1</code> and <code>$arg2</code> are
                           <code>xs:integer</code>, then the return type is <code>xs:decimal</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0001" title="err:FOAR0001">err:FOAR0001</a>] for <code>xs:decimal</code>
                           and <code>xs:integer</code> operands, if the divisor is (positive or negative) zero.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">For <code>xs:float</code> and <code>xs:double</code> operands, floating point division
                           is performed as specified in <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>. A positive number divided by
                           positive zero returns <code>INF</code>. A negative number divided by positive zero
                           returns <code>-INF</code>. Division by negative zero returns <code>-INF</code> and
                           <code>INF</code>, respectively. Positive or negative zero divided by positive or
                           negative zero returns <code>NaN</code>. Also, <code>INF</code> or <code>-INF</code>
                           divided by <code>INF</code> or <code>-INF</code> returns <code>NaN</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-integer-divide"></a>4.2.5 op:numeric-integer-divide
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Performs an integer division.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "idiv" operator when
                           applied to two numeric values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:numeric-integer-divide</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                        <p>If <code>$arg2</code> is <code>INF</code> or <code>-INF</code>, and <code>$arg1</code>
                           is not <code>INF</code> or <code>-INF</code>, then the result is zero.
                        </p>
                        <p>Otherwise, subject to limits of precision and overflow/underflow conditions, the result
                           is the largest (furthest from zero) <code>xs:integer</code> value <code>$N</code> such
                           that the following expression is true:
                        </p>
                        <div class="exampleInner"><pre class="small">fn:abs($N * $arg2) le fn:abs($arg1) 
               and fn:compare($N * $arg2, 0) eq fn:compare($arg1, 0).</pre></div>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>The second term in this condition ensures that the result has the correct sign.</p>
                        </div>
                        <p>The implementation may adopt a different algorithm provided that it is equivalent
                           to
                           this formulation in all cases where <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> or <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> behavior does not affect the outcome, for example,
                           the implementation-defined precision of the result of <code>xs:decimal</code>
                           division.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0001" title="err:FOAR0001">err:FOAR0001</a>] if the divisor is (positive
                           or negative) zero.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0002" title="err:FOAR0002">err:FOAR0002</a>] if either operand is
                           <code>NaN</code> or if <code>$arg1</code> is <code>INF</code> or
                           <code>-INF</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Except in situations involving errors, loss of precision, or overflow/underflow, the
                           result of <code>$a idiv $b</code> is the same as <code>($a div $b) cast as
                              xs:integer</code>.
                        </p>
                        <p class="note">The semantics of this function are different from integer division as defined in
                           programming languages such as Java and C++.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:numeric-integer-divide(10,3)</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(3,-2)</code> returns <code>-1</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(-3,2)</code> returns <code>-1</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(-3,-2)</code> returns <code>1</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(9.0,3)</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(-3.5,3)</code> returns <code>-1</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(3.0,4)</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(3.1E1,6)</code> returns <code>5</code>.
                           </p>
                           <p>The expression <code>op:numeric-integer-divide(3.1E1,7)</code> returns <code>4</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-mod"></a>4.2.6 op:numeric-mod
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the remainder resulting from dividing <code>$arg1</code>, the dividend, by
                           <code>$arg2</code>, the divisor. 
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "mod" operator when
                           applied to two numeric values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-mod</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                        <p>The operation <code>a mod b</code> for operands that are <code>xs:integer</code> or
                           <code>xs:decimal</code>, or types derived from them, produces a result such that
                           <code>(a idiv b)*b+(a mod b)</code> is equal to <code>a</code> and the magnitude of
                           the result is always less than the magnitude of <code>b</code>. This identity holds even
                           in the special case that the dividend is the negative integer of largest possible
                           magnitude for its type and the divisor is -1 (the remainder is 0). It follows from
                           this
                           rule that the sign of the result is the sign of the dividend.
                        </p>
                        <p> For <code>xs:float</code> and <code>xs:double</code> operands the following rules
                           apply:
                        </p>
                        <ul>
                           <li>
                              <p>If either operand is <code>NaN</code>, the result is <code>NaN</code>.
                              </p>
                           </li>
                           <li>
                              <p>If the dividend is positive or negative infinity, or the divisor is positive or
                                 negative zero (0), or both, the result is <code>NaN</code>.
                              </p>
                           </li>
                           <li>
                              <p>If the dividend is finite and the divisor is an infinity, the result equals the
                                 dividend.
                              </p>
                           </li>
                           <li>
                              <p>If the dividend is positive or negative zero and the divisor is finite, the result
                                 is the same as the dividend.
                              </p>
                           </li>
                           <li>
                              <p>In the remaining cases, where neither positive or negative infinity, nor positive
                                 or negative zero, nor <code>NaN</code> is involved, the result obeys <code>(a idiv
                                    b)*b+(a mod b)</code> = <code>a</code>.
                                 
                                 Division is truncating division, analogous to integer division, not <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> rounding division i.e. additional digits are truncated,
                                 not rounded to the required precision.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAR0001" title="err:FOAR0001">err:FOAR0001</a>] for <code>xs:integer</code>
                           and <code>xs:decimal</code> operands, if <code>$arg2</code> is zero.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:numeric-mod(10,3)</code> returns <code>1</code>.
                           </p>
                           <p>The expression <code>op:numeric-mod(6,-2)</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>op:numeric-mod(4.5,1.2)</code> returns <code>0.9</code>.
                           </p>
                           <p>The expression <code>op:numeric-mod(1.23E2, 0.6E1)</code> returns <code>3.0E0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-unary-plus"></a>4.2.7 op:numeric-unary-plus
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns its operand with the sign unchanged: (<code>+ $arg</code>).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the unary "+" operator
                           applied to a numeric value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-unary-plus</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                        <p>The returned value is equal to <code>$arg</code>, and is an instance of
                           <code>xs:integer</code>, <code>xs:decimal</code>, <code>xs:double</code>, or
                           <code>xs:float</code> depending on the type of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Because function conversion rules are applied in the normal way, the unary
                           <code>+</code> operator can be used to force conversion of an untyped node to a
                           number: the result of <code>+@price</code> is the same as <code>xs:double(@price)</code>
                           if the type of <code>@price</code> is <code>xs:untypedAtomic</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-unary-minus"></a>4.2.8 op:numeric-unary-minus
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns its operand with the sign reversed: (<code>- $arg</code>).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the unary "-" operator when
                           applied to a numeric value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-unary-minus</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                        <p>The returned value is an instance of <code>xs:integer</code>, <code>xs:decimal</code>,
                           <code>xs:double</code>, or <code>xs:float</code> depending on the type of
                           <code>$arg</code>.
                        </p>
                        <p>For <code>xs:integer</code> and <code>xs:decimal</code> arguments, <code>0</code> and
                           <code>0.0</code> return <code>0</code> and <code>0.0</code>, respectively. For
                           <code>xs:float</code> and <code>xs:double</code> arguments, <code>NaN</code> returns
                           <code>NaN</code>, <code>0.0E0</code> returns <code>-0.0E0</code> and vice versa.
                           <code>INF</code> returns <code>-INF</code>. <code>-INF</code> returns
                           <code>INF</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="comp.numeric"></a>4.3 Comparison operators on numeric values
               </h3>
               <p>This specification defines the following comparison operators on numeric values.
                  Comparisons take two arguments of the same type. If the arguments are of
                  different types, one argument is promoted to the type of the other as described
                  above in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. Each comparison operator returns a boolean
                  value. If either, or both, operands are <code>NaN</code>, <code>false</code> is
                  returned. 
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-equal"><code>op:numeric-equal</code></a></td>
                        <td>Returns true if and only if the value of <code>$arg1</code> is equal to the value of
                           <code>$arg2</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-less-than"><code>op:numeric-less-than</code></a></td>
                        <td>Returns <code>true</code> if and only if <code>$arg1</code> is numerically less than
                           <code>$arg2</code>. 
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-greater-than"><code>op:numeric-greater-than</code></a></td>
                        <td>Returns <code>true</code> if and only if <code>$arg1</code> is numerically greater than
                           <code>$arg2</code>.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-equal"></a>4.3.1 op:numeric-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if and only if the value of <code>$arg1</code> is equal to the value of
                           <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "eq" operator when applied to two numeric values, and is also used in defining
                           the
                           semantics of "ne", "le" and "ge".
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#comp.numeric"><b>4.3 Comparison operators on numeric values</b></a>.
                        </p>
                        <p> For <code>xs:float</code> and <code>xs:double</code> values, positive zero and negative
                           zero compare equal. <code>INF</code> equals <code>INF</code>, and <code>-INF</code>
                           equals <code>-INF</code>. <code>NaN</code> does not equal itself.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-less-than"></a>4.3.2 op:numeric-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if and only if <code>$arg1</code> is numerically less than
                           <code>$arg2</code>. 
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "lt" operator when applied to two numeric values, and is also used in defining the
                           semantics of "le".
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-less-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#comp.numeric"><b>4.3 Comparison operators on numeric values</b></a>.
                        </p>
                        <p>For <code>xs:float</code> and <code>xs:double</code> values, positive infinity is
                           greater than all other non-<code>NaN</code> values; negative infinity is less than all
                           other non-<code>NaN</code> values. If <code>$arg1</code> or <code>$arg2</code> is
                           <code>NaN</code>, the function returns <code>false</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-numeric-greater-than"></a>4.3.3 op:numeric-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if and only if <code>$arg1</code> is numerically greater than
                           <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "gt" operator when applied to two numeric values, and is also used in defining the
                           semantics of "ge".
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:numeric-greater-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:numeric-greater-than($A, $B)</code> is defined to return the
                           same result as <code>op:numeric-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="numeric-value-functions"></a>4.4 Functions on numeric values
               </h3>
               <p>The following functions are defined on numeric types. Each function returns a
                  value of the same type as the type of its argument.
               </p>
               <ul>
                  <li>
                     <p>If the argument is the empty sequence, the empty sequence is returned.</p>
                  </li>
                  <li>
                     <p>For <code>xs:float</code> and <code>xs:double</code> arguments, if the
                        argument is "NaN", "NaN" is returned.
                     </p>
                  </li>
                  <li>
                     <p>Except for <a href="https://www.w3.org/TR/xpath-functions-31/#func-abs"><code>fn:abs</code></a>, for <code>xs:float</code> and
                        <code>xs:double</code> arguments, if the argument is positive or
                        negative infinity, positive or negative infinity is returned.
                     </p>
                  </li>
               </ul>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-abs"><code>fn:abs</code></a></td>
                        <td>Returns the absolute value of <code>$arg</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-ceiling"><code>fn:ceiling</code></a></td>
                        <td>Rounds <code>$arg</code> upwards to a whole number.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-floor"><code>fn:floor</code></a></td>
                        <td>Rounds <code>$arg</code> downwards to a whole number.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><code>fn:round</code></a></td>
                        <td>Rounds a value to a specified number of decimal places, rounding upwards if two such
                           values are equally near.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-round-half-to-even"><code>fn:round-half-to-even</code></a></td>
                        <td>Rounds a value to a specified number of decimal places, rounding to make the last
                           digit
                           even if two such values are equally near.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><code>fn:round</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-round-half-to-even"><code>fn:round-half-to-even</code></a> produce the same result in all cases
                     except when the argument is exactly midway between two values with the required precision.
                  </p>
                  <p>Other ways of rounding midway values can be achieved as follows:</p>
                  <ul>
                     <li>
                        <p>Towards negative infinity: <code>-fn:round(-$x)</code></p>
                     </li>
                     <li>
                        <p>Away from zero: <code>fn:round(fn:abs($x))*fn:compare($x,0)</code></p>
                     </li>
                     <li>
                        <p>Towards zero: <code>fn:abs(fn:round(-$x))*-fn:compare($x,0)</code></p>
                     </li>
                  </ul>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-abs"></a>4.4.1 fn:abs
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the absolute value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:abs</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#numeric-value-functions"><b>4.4 Functions on numeric values</b></a>.
                        </p>
                        <p>If <code>$arg</code> is negative the function returns <code>-$arg</code>, otherwise it
                           returns <code>$arg</code>.
                        </p>
                        <p>For the four types <code>xs:float</code>,
                           <code>xs:double</code>, <code>xs:decimal</code> and <code>xs:integer</code>, it is
                           guaranteed that if the type of <code>$arg</code> is an instance of type <var>T</var> then
                           the result will also be an instance of <var>T</var>. The result <span class="verb">may</span>
                           also be an instance of a type derived from one of these four by restriction. For example,
                           if
                           <code>$arg</code> is an instance of <code>xs:positiveInteger</code> then the value of
                           <code>$arg</code> <span class="verb">may</span> be returned unchanged.
                        </p>
                        <p>For <code>xs:float</code> and <code>xs:double</code> arguments, if the argument is
                           positive zero or negative zero, then positive zero is returned. If the argument is
                           positive or negative infinity, positive infinity is returned.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:abs(10.5)</code> returns <code>10.5</code>.
                           </p>
                           <p>The expression <code>fn:abs(-10.5)</code> returns <code>10.5</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-ceiling"></a>4.4.2 fn:ceiling
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Rounds <code>$arg</code> upwards to a whole number.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:ceiling</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#numeric-value-functions"><b>4.4 Functions on numeric values</b></a>.
                        </p>
                        <p>The function returns the smallest (closest to negative infinity) number with no
                           fractional part that is not less than the value of <code>$arg</code>.
                        </p>
                        <p>For the four types <code>xs:float</code>,
                           <code>xs:double</code>, <code>xs:decimal</code> and <code>xs:integer</code>, it is
                           guaranteed that if the type of <code>$arg</code> is an instance of type <var>T</var> then
                           the result will also be an instance of <var>T</var>. The result <span class="verb">may</span>
                           also be an instance of a type derived from one of these four by restriction. For example,
                           if
                           <code>$arg</code> is an instance of <code>xs:decimal</code> then the result <span class="verb">may</span>
                           be an instance of <code>xs:integer</code>.
                        </p>
                        <p>For <code>xs:float</code> and <code>xs:double</code> arguments, if the argument is
                           positive zero, then positive zero is returned. If the argument is negative zero, then
                           negative zero is returned. If the argument is less than zero and greater than -1,
                           negative zero is returned.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:ceiling(10.5)</code> returns <code>11</code>.
                           </p>
                           <p>The expression <code>fn:ceiling(-10.5)</code> returns <code>-10</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-floor"></a>4.4.3 fn:floor
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Rounds <code>$arg</code> downwards to a whole number.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:floor</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#numeric-value-functions"><b>4.4 Functions on numeric values</b></a>.
                        </p>
                        <p>The function returns the largest (closest to positive infinity) number with no
                           fractional part that is not greater than the value of <code>$arg</code>.
                        </p>
                        <p>For the four types <code>xs:float</code>,
                           <code>xs:double</code>, <code>xs:decimal</code> and <code>xs:integer</code>, it is
                           guaranteed that if the type of <code>$arg</code> is an instance of type <var>T</var> then
                           the result will also be an instance of <var>T</var>. The result <span class="verb">may</span>
                           also be an instance of a type derived from one of these four by restriction. For example,
                           if
                           <code>$arg</code> is an instance of <code>xs:decimal</code> then the result <span class="verb">may</span>
                           be an instance of <code>xs:integer</code>.
                        </p>
                        <p>For <code>xs:float</code> and <code>xs:double</code> arguments, if the argument is
                           positive zero, then positive zero is returned. If the argument is negative zero, then
                           negative zero is returned.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:floor(10.5)</code> returns <code>10</code>.
                           </p>
                           <p>The expression <code>fn:floor(-10.5)</code> returns <code>-11</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-round"></a>4.4.4 fn:round
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Rounds a value to a specified number of decimal places, rounding upwards if two such
                           values are equally near.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:round</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                        <div class="proto"><code class="function">fn:round</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>, <code class="arg">$precision</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#numeric-value-functions"><b>4.4 Functions on numeric values</b></a>.
                        </p>
                        <p>The function returns the nearest (that is, numerically closest) value to
                           <code>$arg</code> that is a multiple of ten to the power of minus
                           <code>$precision</code>. If two such values are equally near (for example, if the
                           fractional part in <code>$arg</code> is exactly .5), the function returns the one that
                           is closest to positive infinity.
                        </p>
                        <p>For the four types <code>xs:float</code>,
                           <code>xs:double</code>, <code>xs:decimal</code> and <code>xs:integer</code>, it is
                           guaranteed that if the type of <code>$arg</code> is an instance of type <var>T</var> then
                           the result will also be an instance of <var>T</var>. The result <span class="verb">may</span>
                           also be an instance of a type derived from one of these four by restriction. For example,
                           if
                           <code>$arg</code> is an instance of <code>xs:decimal</code> and <code>$precision</code> is less than one,
                           then the result <span class="verb">may</span>
                           be an instance of <code>xs:integer</code>.
                        </p>
                        <p>The single-argument version of this function produces the same result as the
                           two-argument version with <code>$precision=0</code> (that is, it rounds to a whole
                           number).
                        </p>
                        <p>When <code>$arg</code> is of type <code>xs:float</code> and <code>xs:double</code>:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>If <code>$arg</code> is NaN, positive or negative zero, or positive or negative
                                 infinity, then the result is the same as the argument.
                              </p>
                           </li>
                           <li>
                              <p>For other values, the argument is cast to <code>xs:decimal</code> using an
                                 implementation of <code>xs:decimal</code> that imposes no limits on the number of
                                 digits that can be represented. The function is applied to this
                                 <code>xs:decimal</code> value, and the resulting <code>xs:decimal</code> is
                                 cast back to <code>xs:float</code> or <code>xs:double</code> as appropriate to
                                 form the function result. If the resulting <code>xs:decimal</code> value is zero,
                                 then positive or negative zero is returned according to the sign of
                                 <code>$arg</code>.
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This function is typically used with a non-zero <code>$precision</code> in financial
                           applications where the argument is of type <code>xs:decimal</code>. For arguments of
                           type <code>xs:float</code> and <code>xs:double</code> the results may be
                           counter-intuitive. For example, consider <code>round(35.425e0, 2)</code>. The result is
                           not 35.43, as might be expected, but 35.42. This is because the <code>xs:double</code>
                           written as 35.425e0 has an exact value equal to 35.42499999999..., which is closer
                           to
                           35.42 than to 35.43.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:round(2.5)</code> returns <code>3.0</code>.
                           </p>
                           <p>The expression <code>fn:round(2.4999)</code> returns <code>2.0</code>.
                           </p>
                           <p>The expression <code>fn:round(-2.5)</code> returns <code>-2.0</code>. <em>(Not the possible alternative, <code>-3</code>).</em></p>
                           <p>The expression <code>fn:round(1.125, 2)</code> returns <code>1.13</code>.
                           </p>
                           <p>The expression <code>fn:round(8452, -2)</code> returns <code>8500</code>.
                           </p>
                           <p>The expression <code>fn:round(3.1415e0, 2)</code> returns <code>3.14e0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-round-half-to-even"></a>4.4.5 fn:round-half-to-even
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Rounds a value to a specified number of decimal places, rounding to make the last
                           digit
                           even if two such values are equally near.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:round-half-to-even</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:round-half-to-even</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$precision</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>General rules: see <a href="https://www.w3.org/TR/xpath-functions-31/#numeric-value-functions"><b>4.4 Functions on numeric values</b></a>.
                        </p>
                        <p>The function returns the nearest (that is, numerically closest) value to
                           <code>$arg</code> that is a multiple of ten to the power of minus
                           <code>$precision</code>. If two such values are equally near (e.g. if the fractional
                           part in <code>$arg</code> is exactly .500...), the function returns the one whose least
                           significant digit is even.
                        </p>
                        <p>For the four types <code>xs:float</code>,
                           <code>xs:double</code>, <code>xs:decimal</code> and <code>xs:integer</code>, it is
                           guaranteed that if the type of <code>$arg</code> is an instance of type <var>T</var> then
                           the result will also be an instance of <var>T</var>. The result <span class="verb">may</span>
                           also be an instance of a type derived from one of these four by restriction. For example,
                           if
                           <code>$arg</code> is an instance of <code>xs:decimal</code> and <code>$precision</code>
                           is less than one, then the result <span class="verb">may</span>
                           be an instance of <code>xs:integer</code>.
                        </p>
                        <p> The first signature of this function produces the same result as the second signature
                           with <code>$precision=0</code>.
                        </p>
                        <p>For arguments of type <code>xs:float</code> and <code>xs:double</code>:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>If the argument is <code>NaN</code>, positive or negative zero, or positive or
                                 negative infinity, then the result is the same as the argument.
                              </p>
                           </li>
                           <li>
                              <p>In all other cases, the argument is cast to <code>xs:decimal</code> using an
                                 implementation of xs:decimal that imposes no limits on the number of digits that
                                 can be represented. The function is applied to this <code>xs:decimal</code> value,
                                 and the resulting <code>xs:decimal</code> is cast back to <code>xs:float</code> or
                                 <code>xs:double</code> as appropriate to form the function result. If the
                                 resulting <code>xs:decimal</code> value is zero, then positive or negative zero is
                                 returned according to the sign of the original argument.
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This function is typically used in financial applications where the argument is of
                           type
                           <code>xs:decimal</code>. For arguments of type <code>xs:float</code> and
                           <code>xs:double</code> the results may be counter-intuitive. For example, consider
                           <code>round-half-to-even(xs:float(150.015), 2)</code>. The result is not 150.02 as
                           might be expected, but 150.01. This is because the conversion of the
                           <code>xs:float</code> value represented by the literal 150.015 to an
                           <code>xs:decimal</code> produces the <code>xs:decimal</code> value 150.014999389...,
                           which is closer to 150.01 than to 150.02.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:round-half-to-even(0.5)</code> returns <code>0.0</code>.
                           </p>
                           <p>The expression <code>fn:round-half-to-even(1.5)</code> returns <code>2.0</code>.
                           </p>
                           <p>The expression <code>fn:round-half-to-even(2.5)</code> returns <code>2.0</code>.
                           </p>
                           <p>The expression <code>fn:round-half-to-even(3.567812e+3, 2)</code> returns <code>3567.81e0</code>.
                           </p>
                           <p>The expression <code>fn:round-half-to-even(4.7564e-3, 2)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>fn:round-half-to-even(35612.25, -2)</code> returns <code>35600</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="parsing-numbers"></a>4.5 Parsing numbers
               </h3>
               <p>It is possible to convert strings to values of type <code>xs:integer</code>,
                  <code>xs:float</code>, <code>xs:decimal</code>, or <code>xs:double</code>
                  using the constructor functions described in <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions"><b>18 Constructor functions</b></a>
                  or using <code>cast</code> expressions as described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting"><b>19 Casting</b></a>.
               </p>
               <p>In addition the <a href="https://www.w3.org/TR/xpath-functions-31/#func-number"><code>fn:number</code></a> function is available to convert strings
                  to values of type <code>xs:double</code>. It differs from the <code>xs:double</code>
                  constructor function in that any value outside the lexical space of the <code>xs:double</code>
                  datatype is converted to the <code>xs:double</code> value <code>NaN</code>.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-number"><code>fn:number</code></a></td>
                        <td>Returns the value indicated by <code>$arg</code> or, if <code>$arg</code> is not
                           specified, the context item after atomization, converted to an <code>xs:double</code>.
                           
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-number"></a>4.5.1 fn:number
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value indicated by <code>$arg</code> or, if <code>$arg</code> is not
                           specified, the context item after atomization, converted to an <code>xs:double</code>.
                           
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:number</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double</code></div>
                        <div class="proto"><code class="function">fn:number</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Calling the zero-argument version of the function is defined to give the same result
                           as
                           calling the single-argument version with the context item (<code>.</code>). That is,
                           <code>fn:number()</code> is equivalent to <code>fn:number(.)</code>, as defined by
                           the rules that follow.
                        </p>
                        <p>If <code>$arg</code> is the empty sequence or if <code>$arg</code> cannot be converted
                           to an <code>xs:double</code>, the <code>xs:double</code> value <code>NaN</code> is
                           returned. 
                        </p>
                        <p>Otherwise, <code>$arg</code> is converted to an <code>xs:double</code> following the
                           rules of <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-double"><b>19.1.2.2 Casting to xs:double</b></a>. If the conversion to <code>xs:double</code>
                           fails, the <code>xs:double</code> value <code>NaN</code> is returned.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup>
                           if <code>$arg</code> is omitted and the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                        </p>
                        <p>As a consequence of the rules given above, a type error occurs if the context item
                           cannot be atomized, or if the result of atomizing the context item is a sequence
                           containing more than one atomic value.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">XSD 1.1 allows the string <code>+INF</code> as a representation of positive infinity;
                           XSD 1.0 does not. It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether XSD 1.1 is
                           supported.
                        </p>
                        <p class="note">Generally <code>fn:number</code> returns <code>NaN</code> rather than raising a dynamic
                           error if the argument cannot be converted to <code>xs:double</code>. However, a type
                           error is raised in the usual way if the supplied argument cannot be atomized or if
                           the
                           result of atomization does not match the required argument type.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:number($item1/quantity)</code> returns <code>5.0e0</code>.
                           </p>
                           <p>The expression <code>fn:number($item2/description)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>Assume that the context item is the <code>xs:string</code> value "<code>15</code>".
                              Then <code>fn:number()</code> returns <code>1.5e1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="formatting-integers"></a>4.6 Formatting integers
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a></td>
                        <td>Formats an integer according to a given picture string, using the conventions of a
                           given
                           natural language if specified.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-format-integer"></a>4.6.1 fn:format-integer
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Formats an integer according to a given picture string, using the conventions of a
                           given
                           natural language if specified.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:format-integer</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer?</code>, <code class="arg">$picture</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:format-integer</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$picture</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$lang</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		default language.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$value</code> is an empty sequence, the function returns a zero-length
                           string.
                        </p>
                        <p>In all other cases, the <code>$picture</code> argument describes the format in which
                           <code>$value</code> is output.
                        </p>
                        <p>The rules that follow describe how non-negative numbers are output. If the value of
                           <code>$value</code> is negative, the rules below are applied to the absolute value of
                           <code>$value</code>, and a minus sign is prepended to the result.
                        </p>
                        <p>The value of <code>$picture</code> consists of a primary format token, optionally
                           followed by a format modifier. The primary format token is always present and
                           <span class="verb">must not</span> be zero-length. If the string contains one or more
                           semicolons then everything that precedes the last semicolon is taken as the primary
                           format token and everything that follows is taken as the format modifier; if the string
                           contains no semicolon then the entire picture is taken as the primary format token,
                           and
                           the format modifier is taken to be absent (which is equivalent to supplying a
                           zero-length string).
                        </p>
                        <p>The primary format token is classified as one of the following:</p>
                        <ol class="enumar">
                           <li>
                              <p>A <var>decimal-digit-pattern</var> made up of <var>optional-digit-signs</var>,
                                 <var>mandatory-digit-signs</var>, and <var>grouping-separator-signs</var>.
                              </p>
                              <ul>
                                 <li>
                                    <p>The <var>optional-digit-sign</var> is the character "#".
                                    </p>
                                 </li>
                                 <li>
                                    <p>A <var>mandatory-digit-sign</var> is a <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> in Unicode category <var>Nd</var>. All
                                       <var>mandatory-digit-signs</var> within the format token
                                       <span class="verb">must</span> be from the same digit family, where a digit
                                       family is a sequence of ten consecutive characters in Unicode category <var>Nd</var>,
                                       having digit values 0 through 9. Within the format token, these digits are
                                       interchangeable: a three-digit number may thus be indicated equivalently by
                                       <code>000</code>, <code>001</code>, or <code>999</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>a <var>grouping-separator-sign</var> is a non-alphanumeric character, that
                                       is a <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> whose Unicode category is
                                       other than <var>Nd</var>, <var>Nl</var>, <var>No</var>, <var>Lu</var>, <var>Ll</var>, 
                                       <var>Lt</var>, <var>Lm</var> or <var>Lo</var>.
                                    </p>
                                 </li>
                              </ul>
                              <p>If the primary format token contains at least one Unicode digit then it is taken
                                 as a decimal digit pattern, and in this case it <span class="verb">must</span> match the
                                 regular expression <code>^((\p{Nd}|#|[^\p{N}\p{L}])+?)$</code>. If it contains a
                                 digit but does not match this pattern, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODF1310" title="err:FODF1310">err:FODF1310</a>].
                              </p>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>If a semicolon is to be used as a grouping separator, then the primary format
                                    token as a whole must be followed by another semicolon, to ensure that the
                                    grouping separator is not mistaken as a separator between the primary format
                                    token and the format modifier.
                                 </p>
                              </div>
                              <p>There <span class="verb">must</span> be at least one <var>mandatory-digit-sign</var>.
                                 There may be zero or more <var>optional-digit-signs</var>, and (if present) these
                                 <span class="verb">must</span> precede all <var>mandatory-digit-signs</var>. There may
                                 be zero or more <var>grouping-separator-signs</var>. A
                                 <var>grouping-separator-sign</var>
                                 <span class="verb">must not</span> appear at the start or end of the
                                 <var>decimal-digit-pattern</var>, nor adjacent to another
                                 <var>grouping-separator-sign</var>.
                              </p>
                              <p>The corresponding output format is a decimal number, using this digit family, with
                                 at least as many digits as there are <var>mandatory-digit-signs</var> in the
                                 format token. Thus, a format token <code>1</code> generates the sequence <code>0 1
                                    2 ... 10 11 12 ...</code>, and a format token <code>01</code> (or equivalently,
                                 <code>00</code> or <code>99</code>) generates the sequence <code>00 01 02 ...
                                    09 10 11 12 ... 99 100 101</code>. A format token of <code>&amp;#x661;</code>
                                 (Arabic-Indic digit one) generates the sequence <code>١</code> then <code>٢</code>
                                 then <code>٣</code> ...
                              </p>
                              <p>The <var>grouping-separator-signs</var> are handled as follows:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The position of
                                       grouping separators within the format token, counting backwards from the last
                                       digit, indicates the position of grouping separators to appear within the
                                       formatted number, and the character used as the <var>grouping-separator-sign</var>
                                       within the format token indicates the character to be used as the corresponding
                                       grouping separator in the formatted number.
                                       
                                    </p>
                                 </li>
                                 <li>
                                    <p>More specifically, the <b>position</b> of a grouping separator is
                                       the number of <var>optional-digit-signs</var> and <var>mandatory-digit-signs</var> appearing
                                       between the grouping separator and the right-hand end of the primary format token.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Grouping separators are defined to be <b>regular</b> if the following conditions apply:
                                    </p>
                                    <ol class="enumlr">
                                       <li>
                                          <p>There is at least one grouping separator.</p>
                                       </li>
                                       <li>
                                          <p>Every grouping separator is the same character (call it <var>C</var>).
                                          </p>
                                       </li>
                                       <li>
                                          <p>There is a positive integer <var>G</var> (the grouping size) such that:
                                          </p>
                                          <ol class="enumua">
                                             <li>
                                                <p>The position of every grouping separator is an integer multiple of <var>G</var>, and
                                                </p>
                                             </li>
                                             <li>
                                                <p>Every positive integer multiple of <var>G</var> that is less than the number of 
                                                   <var>optional-digit-signs</var> and <var>mandatory-digit-signs</var> in the primary format token
                                                   is the position of a grouping separator.
                                                </p>
                                             </li>
                                          </ol>
                                       </li>
                                    </ol>
                                 </li>
                                 <li>
                                    <p>The <b>grouping separator template</b> is a (possibly infinite) set of (position, character) pairs.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If grouping separators are regular, then the grouping separator template contains
                                       one pair of the form <code>(n×G, C)</code>
                                       for every positive integer <var>n</var> where <var>G</var> is the grouping size and <var>C</var> is the grouping character.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise (when grouping separators are not regular), the grouping separator template
                                       contains one pair of the form
                                       <code>(P, C)</code> for every grouping separator found in the primary formatting token, where <var>C</var> is the grouping
                                       separator character and <var>P</var> is its position.
                                    </p>
                                 </li>
                                 <li>
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>If there are no grouping separators, then the grouping separator template is an empty
                                          set.
                                       </p>
                                    </div>
                                 </li>
                              </ol>
                              <p>The number is formatted as follows:</p>
                              <ol class="enumla">
                                 <li>
                                    <p>Let <var>S<sub>1</sub></var> be the result of formatting the supplied number in decimal notation as if by casting
                                       it to <code>xs:string</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Let <var>S<sub>2</sub></var> be the result of padding <var>S<sub>1</sub></var> on the left with as many leading zeroes
                                       as are needed to ensure that it contains at least as many digits as the number of
                                       <var>mandatory-digit-signs</var>
                                       in the primary format token.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Let <var>S<sub>3</sub></var> be the result of replacing all decimal digits (0-9) in <var>S<sub>2</sub></var> with the corresponding
                                       digits from the selected digit family.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Let <var>S<sub>4</sub></var> be the result of inserting grouping separators into <var>S<sub>3</sub></var>: for every (position 
                                       <var>P</var>, character <var>C</var>) pair in the grouping separator template where <var>P</var> is less than the number
                                       of digits in <var>S<sub>3</sub></var>, insert character <var>C</var> into <var>S<sub>3</sub></var> at position <var>P</var>, counting from 
                                       the right-hand end.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Let <var>S<sub>5</sub></var> be the result of converting <var>S<sub>4</sub></var> into ordinal form, if an ordinal modifier
                                       is present, as described below.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The result of the function is then <var>S<sub>5</sub></var>.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>The format token <code>A</code>, which generates the sequence <code>A B C ... Z AA
                                    AB AC...</code>.
                              </p>
                           </li>
                           <li>
                              <p>The format token <code>a</code>, which generates the sequence <code>a b c ... z aa
                                    ab ac...</code>.
                              </p>
                           </li>
                           <li>
                              <p>The format token <code>i</code>, which generates the sequence <code>i ii iii iv v
                                    vi vii viii ix x ...</code>.
                              </p>
                           </li>
                           <li>
                              <p>The format token <code>I</code>, which generates the sequence <code>I II III IV V
                                    VI VII VIII IX X ...</code>.
                              </p>
                           </li>
                           <li>
                              <p>The format token <code>w</code>, which generates numbers written as lower-case
                                 words, for example in English, <code>one two three four ...</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>The format token <code>W</code>, which generates numbers written as upper-case
                                 words, for example in English, <code>ONE TWO THREE FOUR ...</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>The format token <code>Ww</code>, which generates numbers written as title-case
                                 words, for example in English, <code>One Two Three Four ...</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>Any other format token, which indicates a numbering sequence in which that token
                                 represents the number 1 (one) (but see the note below).
                                 
                                 It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which
                                 numbering sequences, additional to those listed above, are supported. If an
                                 implementation does not support a numbering sequence represented by the given
                                 token, it <span class="verb">must</span> use a format token of <code>1</code>.
                              </p>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>In some traditional numbering sequences additional signs are added to denote
                                    that the letters should be interpreted as numbers; these are not included in
                                    the format token. An example (see also the example below) is classical Greek
                                    where a <em>dexia keraia</em> (x0374, ʹ) and sometimes an
                                    <em>aristeri keraia</em> (x0375, ͵) is added.
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <p>For all format tokens other than a <var>decimal-digit-pattern</var>, there 
                           <span class="verb">may</span> be <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> lower and upper bounds on the range of numbers that
                           can be formatted using this format token; indeed, for some numbering sequences there
                           may
                           be intrinsic limits. For example, the format token <code>&amp;#x2460;</code> (circled
                           digit one, ①) has a range imposed by the Unicode character repertoire — <span>zero to 20</span>
                           in Unicode versions prior to <span>3.2</span>, or <span>zero to 50</span> in subsequent versions. For the numbering
                           sequences described above any upper bound imposed by the implementation <span class="verb">must
                              not</span> be less than 1000 (one thousand) and any lower bound must not be
                           greater than 1. Numbers that fall outside this range <span class="verb">must</span> be
                           formatted using the format token <code>1</code>.
                        </p>
                        <p>The above expansions of numbering sequences for format tokens such as <code>a</code> and
                           <code>i</code> are indicative but not prescriptive. There are various conventions in
                           use for how alphabetic sequences continue when the alphabet is exhausted, and differing
                           conventions for how roman numerals are written (for example, <code>IV</code> versus
                           <code>IIII</code> as the representation of the number 4). Sometimes alphabetic
                           sequences are used that omit letters such as <code>i</code> and <code>o</code>. This
                           specification does not prescribe the detail of any sequence other than those sequences
                           consisting entirely of decimal digits.
                        </p>
                        <p>Many numbering sequences are language-sensitive. This applies especially to the sequence
                           selected by the tokens <code>w</code>, <code>W</code> and <code>Ww</code>. It also
                           applies to other sequences, for example different languages using the Cyrillic alphabet
                           use different sequences of characters, each starting with the letter #x410 (Cyrillic
                           capital letter A). In such cases, the <code>$lang</code> argument specifies which
                           language's conventions are to be used. If the argument is specified, the value
                           <span class="verb">should</span> be either an empty sequence or a value that would be valid
                           for the <code>xml:lang</code> attribute (see <a href="https://www.w3.org/TR/xpath-functions-31/#xml">[Extensible Markup Language (XML) 1.0 (Fifth Edition)]</a>). Note that this
                           permits the identification of sublanguages based on country codes (from ISO 3166-1)
                           as
                           well as identification of dialects and regions within a country.
                        </p>
                        <p>The set of languages for which numbering is supported is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the <code>$lang</code> argument is absent, or is
                           set to an empty sequence, or is invalid, or is not a language supported by the
                           implementation, then the number is formatted using the default language from the dynamic
                           context. 
                        </p>
                        <p>The format modifier <span class="verb">must</span> be a string that matches the regular
                           expression <code>^([co](\(.+\))?)?[at]?$</code>. That is, if it is present it must
                           consist of one or more of the following, in order:
                        </p>
                        <ul>
                           <li>
                              <p>either <code>c</code> or <code>o</code>, optionally followed by a sequence of
                                 characters enclosed between parentheses, to indicate cardinal or ordinal numbering
                                 respectively, the default being cardinal numbering
                              </p>
                           </li>
                           <li>
                              <p>either <code>a</code> or <code>t</code>, to indicate alphabetic or traditional
                                 numbering respectively, the default being <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                              </p>
                           </li>
                        </ul>
                        <p>If the <code>o</code> modifier is present, this indicates a request to output ordinal
                           numbers rather than cardinal numbers. For example, in English, when used with the
                           format
                           token <code>1</code>, this outputs the sequence <code>1st 2nd 3rd 4th ...</code>, and
                           when used with the format token <code>w</code> outputs the sequence <code>first second
                              third fourth ...</code>.
                        </p>
                        <p>The string of characters between the parentheses, if present, is used to select between
                           other possible variations of cardinal or ordinal numbering sequences. The interpretation
                           of this string is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. No error occurs if the implementation does not
                           define any interpretation for the defined string.
                        </p>
                        <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> what
                           combinations of values of the format token, the language, and the cardinal/ordinal
                           modifier are supported. If ordinal numbering is not supported for the combination
                           of the
                           format token, the language, and the string appearing in parentheses, the request is
                           ignored and cardinal numbers are generated instead.
                        </p>
                        <p>The use of the <code>a</code> or <code>t</code> modifier disambiguates between numbering
                           sequences that use letters. In many languages there are two commonly used numbering
                           sequences that use letters. One numbering sequence assigns numeric values to letters
                           in
                           alphabetic sequence, and the other assigns numeric values to each letter in some other
                           manner traditional in that language. In English, these would correspond to the numbering
                           sequences specified by the format tokens <code>a</code> and <code>i</code>. In some
                           languages, the first member of each sequence is the same, and so the format token
                           alone
                           would be ambiguous. In the absence of the <code>a</code> or <code>t</code> modifier, the
                           default is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODF1310" title="err:FODF1310">err:FODF1310</a>] if the format token is
                           invalid, that is, if it violates any mandatory rules (indicated by an emphasized
                           <span class="verb">must</span> or <span class="verb">required</span> keyword in the above rules).
                           For example, the error is raised if the primary format token contains a digit but
                           does
                           not match the required regular expression.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <div class="note">
                           <ol class="enumar">
                              <li>
                                 <p>Note the careful distinction between conditions that are errors and conditions where
                                    fallback occurs. The principle is that an error in the syntax of the format picture
                                    will
                                    be reported by all processors, while a construct that is recognized by some
                                    implementations but not others will never result in an error, but will instead cause
                                    a
                                    fallback representation of the integer to be used.
                                 </p>
                              </li>
                              <li>
                                 <p>The following notes apply when a <var>decimal-digit-pattern</var> is used:
                                 </p>
                                 <ol class="enumla">
                                    <li>
                                       <p>If <var>grouping-separator-signs</var>
                                          appear at regular intervals within the format token, then the sequence is extrapolated
                                          to
                                          the left, so grouping separators will be used in the formatted number at every
                                          multiple of <var>N</var>. For example, if the format token is <code>0'000</code>
                                          then the number one million will be formatted as <code>1'000'000</code>, while the
                                          number fifteen will be formatted as <code>0'015</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The only purpose of <var>optional-digit-signs</var> is to mark the position of
                                          <var>grouping-separator-signs</var>. For example, if the format token is
                                          <code>#'##0</code> then the number one million will be formatted as
                                          <code>1'000'000</code>, while the number fifteen will be formatted as
                                          <code>15</code>. A grouping separator is included in the formatted number only
                                          if there is a digit to its left, which will only be the case if either (a) the
                                          number is large enough to require that digit, or (b) the number of
                                          <var>mandatory-digit-signs</var> in the format token requires insignificant
                                          leading zeros to be present.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Grouping separators are <em>not</em> designed for effects such as
                                          formatting a US telephone number as <code>(365)123-9876</code>. In general they are not 
                                          suitable for such purposes because (a) only single characters are allowed, and (b)
                                          they
                                          cannot appear at the beginning or end of the number.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Numbers will never be truncated. Given the <var>decimal-digit-pattern</var>
                                          <code>01</code>, the number three hundred will be output as <code>300</code>,
                                          despite the absence of any <var>optional-digit-sign</var>.
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>The following notes apply when ordinal numbering is selected using the <code>o</code> modifier.
                                 </p>
                                 <p>In some languages, the form of numbers (especially ordinal numbers) varies depending
                                    
                                    on the grammatical context: they may have different genders and may decline with the
                                    
                                    noun that they qualify. In such cases the string appearing in parentheses after the
                                    
                                    letter <code>c</code> or <code>o</code> may be used to indicate the variation of the 
                                    cardinal or ordinal number required.
                                 </p>
                                 <p>The way in which the variation is indicated will depend on the conventions of the
                                    language.
                                 </p>
                                 <p>For inflected languages that vary the ending of the word, the approach recommended
                                    
                                    in the previous version of this specification was to indicate the required ending,
                                    
                                    preceded by a hyphen: for example in German, appropriate values might be 
                                    <code>o(-e)</code>, <code>o(-er)</code>, <code>o(-es)</code>, <code>o(-en)</code>. 
                                    
                                 </p>
                                 <p>Another approach, which might usefully be adopted by an implementation based on the
                                    
                                    open-source ICU localization library <a href="https://www.w3.org/TR/xpath-functions-31/#ICU">[ICU]</a>, or any other library making use of the 
                                    Unicode Common Locale Data Repository <a href="https://www.w3.org/TR/xpath-functions-31/#CLDR">[Unicode CLDR]</a>, is to allow the value in parentheses 
                                    to be the name of a registered numbering rule set for the language in question, 
                                    conventionally prefixed with a percent sign: for example, 
                                    <code>o(%spellout-ordinal-masculine)</code>, or <code>c(%spellout-cardinal-year)</code>.
                                    
                                 </p>
                              </li>
                           </ol>
                        </div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>format-integer(123, '0000')</code> returns <code>"0123"</code>.
                           </p>
                           <p><code>format-integer(123, 'w')</code> might return <code>"one hundred and
                                 twenty-three"</code></p>
                           <p>Ordinal numbering in Italian: The specification <code>"1;o(-º)"</code> with <code>$lang</code> equal to
                              <code>it</code>, if supported, should produce the sequence:
                           </p>
                           <div class="exampleInner"><pre>1º 2º 3º 4º ...</pre></div>
                           <p>The specification <code>"Ww;o"</code> with <code>$lang</code> equal to
                              <code>it</code>, if supported, should produce the sequence:
                           </p>
                           <div class="exampleInner"><pre>Primo Secondo Terzo Quarto Quinto ...</pre></div>
                           <p>The expression <code>format-integer(21, '1;o', 'en')</code> returns <code>"21st"</code>.
                           </p>
                           <p><code>format-integer(14, 'Ww;o(-e)', 'de')</code> might return
                              <code>"Vierzehnte"</code></p>
                           <p>The expression <code>format-integer(7, 'a')</code> returns <code>"g"</code>.
                           </p>
                           <p>The expression <code>format-integer(57, 'I')</code> returns <code>"LVII"</code>.
                           </p>
                           <p>The expression <code>format-integer(1234, '#;##0;')</code> returns <code>"1;234"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="formatting-numbers"></a>4.7 Formatting numbers
               </h3>
               <p>This section defines a function for formatting decimal and floating point numbers.</p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a></td>
                        <td>Returns a string containing a number formatted according to a given picture string,
                           taking account of decimal formats specified in the static context.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>This function can be used to format any numeric quantity, including an integer. For
                     integers, however,
                     		         the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a> function offers additional possibilities. Note also that the picture
                     		         strings used by the two functions are not 100% compatible, though they
                     share some options in common.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="defining-decimal-format"></a>4.7.1 Defining a decimal format
                  </h4>
                  <p>Decimal formats are defined in the static context, and the way they are defined is
                     therefore outside the scope
                     of this specification. XSLT and XQuery both provide custom syntax for creating a decimal
                     format.
                  </p>
                  <p>The static context provides a set of decimal formats. One of the decimal formats is
                     unnamed, the others (if any)
                     are identified by a QName. There is always an unnamed decimal format available, but
                     its contents are 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                  </p>
                  <p>Each decimal format provides a set of named properties, described in the following
                     table:
                  </p>
                  <div class="overlarge"><table class="no-code-break longlastcol data">
                     <thead>
                        <tr>
                           <th>Name</th>
                           <th>Type</th>
                           <th>Usage (non-normative)</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td><code>decimal-separator</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used to represent the decimal point (typically ".") both in
                              the picture string and in the formatted number.
                           </td>
                        </tr>
                        <tr>
                           <td><code>grouping-separator</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used to separate groups of digits (typically ",") both in the
                              picture string and in the formatted number.
                           </td>
                        </tr>
                        <tr>
                           <td><code>exponent-separator</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used to separate the mantissa from the exponent
                              in scientific notation (typically "e") both in the picture string and in the formatted
                              number.
                           </td>
                        </tr>
                        <tr>
                           <td><code>infinity</code></td>
                           <td>A <a title="string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#string"><span class="arrow">·</span>string<span class="arrow">·</span></a></td>
                           <td>Defines the string used to represent the value positive or negative infinity in the
                              formatted number (typically "Infinity")
                           </td>
                        </tr>
                        <tr>
                           <td><code>minus-sign</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used as a minus sign in the formatted number if there is no
                              subpicture for formatting negative numbers (typically "-", x2D)
                           </td>
                        </tr>
                        <tr>
                           <td><code>NaN</code></td>
                           <td>A <a title="string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#string"><span class="arrow">·</span>string<span class="arrow">·</span></a></td>
                           <td>Defines the string used to represent the value <code>NaN</code> in the formatted number
                           </td>
                        </tr>
                        <tr>
                           <td><code>percent</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used as a percent sign (typically "%") both in the picture string
                              and in the formatted number
                           </td>
                        </tr>
                        <tr>
                           <td><code>per-mille</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used as a per-mille sign (typically "‰", x2030) both in the
                              picture string and in the formatted number
                           </td>
                        </tr>
                        <tr>
                           <td><code>zero-digit</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a>, which must be a character in Unicode category Nd with decimal digit value 0 (zero)
                           </td>
                           <td>Defines the characters used in the picture string to represent a mandatory digit:
                              for example, if the zero-digit is "0" then any of the
                              digits "0" to "9" may be used (interchangeably) in the picture string to represent
                              a mandatory digit, and in the formatted number the characters "0" to "9" will
                              be used to represent the digits zero to nine.
                           </td>
                        </tr>
                        <tr>
                           <td><code>digit</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used in the picture string to represent an optional digit (typically
                              "#")
                           </td>
                        </tr>
                        <tr>
                           <td><code>pattern-separator</code></td>
                           <td>A single <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a></td>
                           <td>Defines the character used in the picture string to separate the positive and negative
                              subpictures (typically ";")
                           </td>
                        </tr>
                     </tbody>
                  </table></div>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>A phrase such as "The <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-minus-sign">minus-sign</a><sup><small>XP31</small></sup> character" is to be read as 
                        "the character assigned to the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-minus-sign">minus-sign</a><sup><small>XP31</small></sup>
                        property in the relevant decimal format within the static context".
                     </p>
                  </div>
                  <p><span class="termdef"><a id="dt-decimal-digit-family"></a>[Definition]  The <b>decimal digit family</b> of a decimal format 
                        is the sequence of ten digits with
                        consecutive Unicode <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a> starting with the character that is the value of the 
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-zero-digit">zero-digit</a><sup><small>XP31</small></sup> property.</span></p>
                  <p><span class="termdef"><a id="dt-optional-digit-character"></a>[Definition]  The <b>optional digit character</b> is
                        the character that is the value of the 
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-digit">digit</a><sup><small>XP31</small></sup> property.</span></p>
                  <p>For any named or unnamed decimal format, the properties
                     representing characters used in a <a title="picture string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string"><span class="arrow">·</span>picture string<span class="arrow">·</span></a>
                     must have distinct values. These properties are <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup> ,
                     <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup>, 
                     <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-exponent-separator">exponent-separator</a><sup><small>XP31</small></sup>,
                     <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-percent">percent</a><sup><small>XP31</small></sup>, <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-per-mille">per-mille</a><sup><small>XP31</small></sup>,
                     <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-digit">digit</a><sup><small>XP31</small></sup>, and <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-pattern-separator">pattern-separator</a><sup><small>XP31</small></sup>.
                     Furthermore, none of these properties may be equal to any <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> in the 
                     <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>.
                     
                     
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-format-number"></a>4.7.2 fn:format-number
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a string containing a number formatted according to a given picture string,
                           taking account of decimal formats specified in the static context.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:format-number</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>, <code class="arg">$picture</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:format-number</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$picture</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$decimal-format-name</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		decimal formats, and namespaces.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the two-argument form of the function is equivalent to calling the
                           three-argument form with an empty sequence as the value of the third argument.
                        </p>
                        <p>The function formats <code>$value</code> as a string using the <a title="picture string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string"><span class="arrow">·</span>picture string<span class="arrow">·</span></a> specified by the
                           <code>$picture</code> argument and the decimal-format named by the
                           <code>$decimal-format-name</code> argument, or the unnamed decimal-format, if there
                           is no <code>$decimal-format-name</code> argument. The syntax of the picture string is
                           described in <a href="https://www.w3.org/TR/xpath-functions-31/#syntax-of-picture-string"><b>4.7.3 Syntax of the picture string</b></a>.
                        </p>
                        <p>The <code>$value</code> argument may be of any numeric data type
                           (<code>xs:double</code>, <code>xs:float</code>, <code>xs:decimal</code>, or their
                           subtypes including <code>xs:integer</code>). Note that if an <code>xs:decimal</code> is
                           supplied, it is not automatically promoted to an <code>xs:double</code>, as such
                           promotion can involve a loss of precision.
                        </p>
                        <p>If the supplied value of the <code>$value</code> argument is an empty sequence, the
                           function behaves as if the supplied value were the <code>xs:double</code> value
                           <code>NaN</code>.
                        </p>
                        <p>The value of <code>$decimal-format-name</code>, if present and non-empty,
                           <span class="verb">must</span> be a string which after removal of leading and trailing
                           whitespace is in the form of an <code>EQName</code> as defined in the XPath 3.0
                           grammar, that is one of the following:
                        </p>
                        <ul>
                           <li>
                              <p>A lexical QName, which is expanded using the statically known namespaces. The
                                 default namespace is not used (no prefix means no namespace).
                              </p>
                           </li>
                           <li>
                              <p>A <code>URIQualifiedName</code> using the syntax <code>Q{uri}local</code>, where
                                 the URI can be zero-length to indicate a name in no namespace.
                              </p>
                           </li>
                        </ul>
                        <p>The decimal format that is used is the decimal format in the static context whose
                           name
                           matches <code>$decimal-format-name</code> if supplied, or the unnamed decimal format in
                           the static context otherwise.
                        </p>
                        <p>The evaluation of the <code>fn:format-number</code> function takes place in two
                           phases, an analysis phase described in <a href="https://www.w3.org/TR/xpath-functions-31/#analyzing-picture-string"><b>4.7.4 Analyzing the picture string</b></a> and a
                           formatting phase described in <a href="https://www.w3.org/TR/xpath-functions-31/#formatting-the-number"><b>4.7.5 Formatting the number</b></a>.
                        </p>
                        <p>The analysis phase takes as its inputs the <a title="picture string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string"><span class="arrow">·</span>picture
                              string<span class="arrow">·</span></a> and the variables derived from the relevant decimal format in the
                           static context, and produces as its output a number of variables with defined values.
                           The formatting phase takes as its inputs the number to be formatted and the variables
                           produced by the analysis phase, and produces as its output a string containing a
                           formatted representation of the number.
                        </p>
                        <p>The result of the function is the formatted string representation of the supplied
                           number.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODF1280" title="err:FODF1280">err:FODF1280</a>] if the name specified as
                           the <code>$decimal-format-name</code> argument is neither a valid lexical QName nor a
                           valid <code>URIQualifiedName</code>, or if it uses a prefix that is not found in the
                           statically known namespaces, or if the static context does not contain a declaration
                           of
                           a decimal-format with a matching expanded QName. If the processor is able to detect
                           the
                           error statically (for example, when the argument is supplied as a string literal),
                           then
                           the processor <span class="verb">may</span> optionally signal this as a static error.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">A string is an ordered sequence of characters, and this specification 
                           uses terms such as "left" and "right", "preceding" and "following" in relation to
                           this ordering, 
                           irrespective of the position of the characters when visually rendered on some output
                           medium. 
                           Both in the picture string and in the result string, digits with higher significance
                           (that is, 
                           representing higher powers of ten) always precede digits with lower significance,
                           even when 
                           the rendered text flow is from right to left.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The following examples assume a default decimal format in which the chosen digits
                              are
                              the ASCII digits 0-9, the decimal separator is ".", the grouping separator is ",",
                              the minus-sign is "-", and the percent-sign is "%".
                           </p>
                           <p>The expression <code>format-number(12345.6, '#,###.00')</code> returns <code>"12,345.60"</code>.
                           </p>
                           <p>The expression <code>format-number(12345678.9, '9,999.99')</code> returns <code>"12,345,678.90"</code>.
                           </p>
                           <p>The expression <code>format-number(123.9, '9999')</code> returns <code>"0124"</code>.
                           </p>
                           <p>The expression <code>format-number(0.14, '01%')</code> returns <code>"14%"</code>.
                           </p>
                           <p>The expression <code>format-number(-6, '000')</code> returns <code>"-006"</code>.
                           </p>
                           <p>The following example assumes the existence of a decimal format named 'ch' in which
                              the grouping separator is <code>ʹ</code> and the decimal separator is
                              <code>·</code>:
                           </p>
                           <p>The expression <code>format-number(1234.5678, '#ʹ##0·00',
                                 'ch')</code> returns <code>"1ʹ234·57"</code>.
                           </p>
                           <p>The following examples assume that the exponent separator is
                              in decimal format 'fortran' is 'E':
                           </p>
                           <p>The expression <code>format-number(1234.5678, '00.000E0', 'fortran')</code> returns <code>"12.346E2"</code>.
                           </p>
                           <p>The expression <code>format-number(0.234, '0.0E0', 'fortran')</code> returns <code>"2.3E-1"</code>.
                           </p>
                           <p>The expression <code>format-number(0.234, '#.00E0', 'fortran')</code> returns <code>"0.23E0"</code>.
                           </p>
                           <p>The expression <code>format-number(0.234, '.00E0', 'fortran')</code> returns <code>".23E0"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="syntax-of-picture-string"></a>4.7.3 Syntax of the picture string
                  </h4>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>This differs from the <code>format-number</code> function previously defined in XSLT 2.0 in that
                        			   any digit can be used in the picture string to represent a mandatory digit:
                        for example the picture
                        			   strings '000', '001', and '999' are equivalent. The digits will all be from
                        the same decimal digit family,
                        			   specifically, the sequence of ten consecutive digits starting with the digit
                        assigned to the <span><var>zero-digit</var> property</span>.
                        			      This change is to align <code>format-number</code> 
                        			   (which previously used '000') with <code>format-dateTime</code> (which used '001').
                     </p>
                  </div>
                  <p>
                     <span class="termdef"><a id="dt-picture-string"></a>[Definition]  The formatting of a 
                        number is controlled by a <b>picture string</b>. The
                        picture string is a sequence of <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a>, in which the characters
                        assigned to the properties <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup> , 
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-exponent-separator">exponent-separator</a><sup><small>XP31</small></sup>, 
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup>, and
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-digit">digit</a><sup><small>XP31</small></sup>, 
                        and <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-pattern-separator">pattern-separator</a><sup><small>XP31</small></sup> 
                        and the members of the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>, are classified as
                        active characters, and all other characters (including the values of the properties
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-percent">percent</a><sup><small>XP31</small></sup> and 
                        <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-per-mille">per-mille</a><sup><small>XP31</small></sup>) are classified as passive characters.</span> 
                     
                     
                  </p>
                  <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODF1310" title="err:FODF1310">err:FODF1310</a>] if the
                     <a title="picture string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string"><span class="arrow">·</span>picture string<span class="arrow">·</span></a> does not conform to the following rules. 
                     Note that in these
                     rules the words "preceded" and "followed" refer to characters anywhere in the string,
                     they
                     are not to be read as "immediately preceded" and "immediately followed".
                  </p>
                  <ul>
                     <li>
                        <p>A picture-string consists either of a sub-picture, or of
                           two sub-pictures separated by the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-pattern-separator">pattern-separator</a><sup><small>XP31</small></sup> character. A picture-string
                           <span class="verb">must not</span> contain more than one instance of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-pattern-separator">pattern-separator</a><sup><small>XP31</small></sup> character. 
                           If the picture-string contains two
                           sub-pictures, the first is used for positive <span>and unsigned zero</span> values and the second for negative values.
                        </p>
                     </li>
                     <li>
                        <p>A sub-picture <span class="verb">must not</span> contain more than one instance of the 
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup> character.
                        </p>
                     </li>
                     <li>
                        <p>A sub-picture <span class="verb">must not</span> contain more than one instance of the 
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-percent">percent</a><sup><small>XP31</small></sup> or
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-per-mille">per-mille</a><sup><small>XP31</small></sup> characters, and it <span class="verb">must not</span> contain one of each.
                        </p>
                     </li>
                     <li>
                        <p><span>The <var>mantissa part</var> of</span> a
                           sub-picture (defined below) <span class="verb">must</span> contain at least one character that is either 
                           an <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a>
                           or a member of the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>A sub-picture <span class="verb">must not</span> contain a passive character that is preceded by
                           an active character and that is followed by another active character.
                        </p>
                     </li>
                     <li>
                        <p>A sub-picture <span class="verb">must not</span> contain a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> 
                           character that appears adjacent to                        
                           a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character, 
                           <span> or in the absence of a 
                              <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character, 
                              at the end of the <var>integer part</var></span>.
                        </p>
                     </li>
                     <li>
                        <p>A sub-picture <span class="verb">must not</span> contain two adjacent instances of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character.
                        </p>
                     </li>
                     <li>
                        <p>The <var>integer part</var> of a sub-picture (defined below) <span class="verb">must not</span> contain 
                           a member of the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> 
                           					 that is followed by
                           					 an instance of the <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a>. 
                           The <var>fractional part</var> of a sub-picture (defined below) <span class="verb">must not</span> contain an instance of the 
                           <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a>
                           that is followed by a member of the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>A character that matches the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-exponent-separator">exponent-separator</a><sup><small>XP31</small></sup> property
                           is treated as an <var>exponent-separator-sign</var> if it is both preceded and followed
                           within the sub-picture by an active character. Otherwise, it is treated as a passive
                           character. 
                           A sub-picture <span class="verb">must not</span> contain more than one character that is treated as an <var>exponent-separator-sign</var>.
                           
                        </p>
                     </li>
                     <li>
                        <p>A sub-picture that contains a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-percent">percent</a><sup><small>XP31</small></sup> or
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-per-mille">per-mille</a><sup><small>XP31</small></sup> character <span class="verb">must not</span> contain a character treated as an
                           <var>exponent-separator-sign</var>.
                        </p>
                     </li>
                     <li>
                        <p>If a sub-picture contains a character treated as an
                           <var>exponent-separator-sign</var> then this <span class="verb">must</span> be followed by
                           one or more characters that are members of the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>,
                           and it <span class="verb">must not</span> be followed by any active character
                           that is not a member of the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>.
                        </p>
                     </li>
                  </ul>
                  <p>The <var>mantissa part</var> of the sub-picture is defined as the part that appears
                     to the left of the <var>exponent-separator-sign</var> if there is one, or the entire
                     sub-picture otherwise. The <var>exponent part</var> of the subpicture is defined as
                     the part that appears to the right of the <var>exponent-separator-sign</var>;
                     if there is no <var>exponent-separator-sign</var> then the <var>exponent part</var>
                     is absent.
                  </p>
                  <p>The <var>integer part</var> of the sub-picture is defined as the part that
                     appears to the left of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character if there is one, or the entire
                     <var>mantissa part</var> otherwise.
                  </p>
                  <p>The <var>fractional part</var> of the sub-picture is defined as <span>that
                        part of the <var>mantissa part</var></span> that
                     appears to the right of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character if there is one, or the part that appears
                     to the right of the rightmost active character otherwise. The fractional part may
                     be zero-length.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="analyzing-picture-string"></a>4.7.4 Analyzing the picture string
                  </h4>
                  <p>This phase of the algorithm analyzes 
                     the <a title="picture string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string"><span class="arrow">·</span>picture string<span class="arrow">·</span></a> and the properties from the selected
                     decimal format in the static context, and it has the effect
                     of setting the values of various variables, which are used in the
                     subsequent formatting phase. These variables are listed below.
                     Each is shown with its initial setting and its datatype.
                     					
                  </p>
                  <p>Several variables are associated with each sub-picture. If there are
                     two sub-pictures, then these rules are applied to one sub-picture to obtain the values
                     that apply to positive <span>and unsigned zero</span> numbers, and to the other to obtain the values that apply
                     to negative numbers. If there is only one sub-picture, then the values for both cases
                     are derived from this sub-picture.
                  </p>
                  <p>The variables are as follows:</p>
                  <ul>
                     <li>
                        <p>The <var>integer-part-grouping-positions</var> is a sequence of integers
                           representing the positions of grouping separators within the integer part of the
                           sub-picture. For each <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character that appears within the
                           integer part of the sub-picture, this sequence contains an integer that is equal
                           to the total number of <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a> and <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>
                           characters that appear within the integer part of the sub-picture and to the right
                           of the 
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character.
                        </p>
                        <p>The grouping is defined to be <b>regular</b> if the following conditions apply:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>There is an least one grouping-separator in the integer part of the sub-picture.</p>
                           </li>
                           <li>
                              <p>There is a positive integer <var>G</var> (the grouping size) such that the position of every grouping-separator
                                 in the integer part of the sub-picture is a positive integer multiple of <var>G</var>.
                              </p>
                           </li>
                           <li>
                              <p>Every position in the integer part of the sub-picture that is a positive integer multiple
                                 of <var>G</var>
                                 is occupied by a grouping-separator.
                              </p>
                           </li>
                        </ol>
                        <p>If the grouping is regular, then the <var>integer-part-grouping-positions</var> sequence contains all
                           integer multiples of <var>G</var> as far as necessary to accommodate the largest 
                           possible number.
                        </p>
                     </li>
                     <li>
                        <p>The <var>minimum-integer-part-size</var> is an integer indicating the minimum number of digits that will
                           appear to the left of the <var>decimal-separator</var> character. It is <span>initially</span> set to 
                           the number of <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> characters found in the integer part of the sub-picture,
                           <span>but may be adjusted as described below.</span> 
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>There is no maximum integer part size. All significant digits in the integer part
                              of the
                              number will be displayed, even if this exceeds the number of <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a> and
                              <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> characters in the subpicture.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>The <var>scaling factor</var> is a non-negative integer used to determine the scaling of the mantissa
                           in exponential notation. It is set to the number of <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> 
                           characters found in the integer part of the sub-picture.
                        </p>
                     </li>
                     <li>
                        <p>The <var>prefix</var> is set to contain all passive characters
                           in the sub-picture to the left of the leftmost active character.
                           If the picture string contains only one sub-picture, 
                           the <var>prefix</var> 
                           for the negative sub-picture is set by concatenating the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-minus-sign">minus-sign</a><sup><small>XP31</small></sup> 
                           character and the <var>prefix</var> for the positive sub-picture (if any),
                           in that order.
                        </p>
                     </li>
                     <li>
                        <p>The <var>fractional-part-grouping-positions</var> is a sequence of integers
                           representing the positions of grouping separators within the fractional part of the
                           sub-picture. For each <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character that appears within the
                           fractional part of the sub-picture, this sequence contains an integer that is equal
                           to the total number of <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a> and <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> 
                           characters that appear within the fractional part of the sub-picture and to the left
                           of the 
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>There is no need to extrapolate grouping positions on the fractional side,
                              because the number of digits in the output will never exceed the number of 
                              <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a> and <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> characters
                              in the fractional part of the sub-picture.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>The <var>minimum-fractional-part-size</var> is set to the number of 
                           <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> characters found in the fractional part of the sub-picture.
                        </p>
                     </li>
                     <li>
                        <p>The <var>maximum-fractional-part-size</var> is set to the total number of 
                           <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a> and 
                           <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> characters found 
                           in the fractional part of the sub-picture.
                        </p>
                     </li>
                     <li>
                        <p>If the effect of the above rules is that <var>minimum-integer-part-size</var> and 
                           <var>maximum-fractional-part-size</var> are both zero, then an adjustment is applied as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If an exponent separator is present then:</p>
                              <ul>
                                 <li>
                                    <p><var>minimum-fractional-part-size</var> is changed to 1 (one).
                                    </p>
                                 </li>
                                 <li>
                                    <p><var>maximum-fractional-part-size</var> is changed to 1 (one).
                                    </p>
                                 </li>
                              </ul>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>This has the effect that with the picture <code>#.e9</code>, the value <code>0.123</code> is formatted as <code>0.1e0</code></p>
                              </div>
                           </li>
                           <li>
                              <p>Otherwise:</p>
                              <ul>
                                 <li>
                                    <p><var>minimum-integer-part-size</var> is changed to 1 (one).
                                    </p>
                                 </li>
                              </ul>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>This has the effect that with the picture <code>#</code>, the value <code>0.23</code> is formatted
                                    as <code>0</code></p>
                              </div>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>If all the following conditions are true:</p>
                        <ul>
                           <li>
                              <p>An exponent separator is present</p>
                           </li>
                           <li>
                              <p>The <var>minimum-integer-part-size</var> is zero
                              </p>
                           </li>
                           <li>
                              <p>There is at least one <a title="optional digit character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-optional-digit-character"><span class="arrow">·</span>optional digit character<span class="arrow">·</span></a> 
                                 in the integer part of the sub-picture
                              </p>
                           </li>
                        </ul>
                        <p>then the <var>minimum-integer-part-size</var> is changed to 1 (one).
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>This has the effect that with the picture <code>.9e9</code>, the value <code>0.1</code> is formatted
                              as <code>.1e0</code>, while with the picture <code>#.9e9</code>, it is formatted as <code>0.1e0</code></p>
                        </div>
                     </li>
                     <li>
                        <p>If (after making the above adjustments) the <var>minimum-integer-part-size</var> and the 
                           <var>minimum-fractional-part-size</var> are both zero, then the <var>minimum-fractional-part-size</var> is set to 1 (one).
                        </p>
                     </li>
                     <li>
                        <p>The <var>minimum-exponent-size</var> is set to the number of 
                           <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> characters found in the exponent part of the sub-picture
                           if present, or zero otherwise.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>The rules for the syntax of the picture string ensure that if an exponent
                              separator is present, then the <var>minimum-exponent-size</var> will always be greater than zero.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>The <var>suffix</var> is set to contain all passive characters to the right of the rightmost
                           active character in the sub-picture.
                        </p>
                     </li>
                  </ul>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>If there is only one sub-picture, then all variables
                        for positive numbers and negative numbers will be the same, except for  
                        <var>prefix</var>: the prefix for negative numbers will 
                        be preceded by the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-minus-sign">minus-sign</a><sup><small>XP31</small></sup> character.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="formatting-the-number"></a>4.7.5 Formatting the number
                  </h4>
                  <p>This section describes the second phase of processing of the
                     <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a> function. This phase takes as input a number to be formatted
                     (referred to as the <em>input number</em>), and the variables set up by
                     analyzing the decimal format in the static context and the
                     <a title="picture string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-picture-string"><span class="arrow">·</span>picture string<span class="arrow">·</span></a>, as described above.
                     The result of this phase is a string, which forms the return value of 
                     the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a> function.
                  </p>
                  <p>The algorithm for this second stage of processing is as follows:</p>
                  <ol class="enumar">
                     <li>
                        <p>If the input number is NaN (not a number), the result is the 
                           							 value of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-NaN">pattern separator</a><sup><small>XP31</small></sup> property (with no
                           <var>prefix</var> or <var>suffix</var>).
                        </p>
                     </li>
                     <li>
                        <p>In the rules below, the positive sub-picture and its associated variables are used
                           
                           							 if the input number is positive, and the negative sub-picture and its associated
                           variables are used if <span>it is negative. For <code>xs:double</code> and <code>xs:float</code>,
                              negative zero is taken as negative, positive zero as positive. For <code>xs:decimal</code>
                              and <code>xs:integer</code>, the positive sub-picture is used for zero.</span></p>
                     </li>
                     <li>
                        <p>The <var>adjusted number</var> is determined as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If the sub-picture contains a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-percent">percent</a><sup><small>XP31</small></sup> character, 
                                 the <var>adjusted number</var> is the input number multiplied by 100.
                              </p>
                           </li>
                           <li>
                              <p>If the sub-picture contains a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-per-mille">per-mille</a><sup><small>XP31</small></sup> character, 
                                 the <var>adjusted number</var> is the input number multiplied by 1000.
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, the <var>adjusted number</var> is the input number.
                              </p>
                           </li>
                        </ul>
                        <p>If the multiplication causes numeric overflow, no error occurs, and the 
                           <var>adjusted number</var> is positive or negative infinity as appropriate.
                        </p>
                     </li>
                     <li>
                        <p>If the <span><var>adjusted number</var></span> is positive or negative infinity, the result is the 
                           concatenation of the appropriate <var>prefix</var>, the value of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-infinity">infinity</a><sup><small>XP31</small></sup> property,
                           and the appropriate <var>suffix</var>.
                        </p>
                     </li>
                     <li>
                        <p>If the <var>minimum exponent size</var> is non-zero, then the <var>adjusted number</var> is scaled to establish a 
                           <var>mantissa</var> and an integer <var>exponent</var>. The <var>mantissa</var> and <var>exponent</var> are chosen 
                           such that all the following conditions are true:
                        </p>
                        <ul>
                           <li>
                              <p>The primitive type of the <var>mantissa</var> is the same as the primitive type of the <var>adjusted number</var> (integer, decimal, float, or double).
                              </p>
                           </li>
                           <li>
                              <p>The <var>mantissa</var> multiplied by ten to the power of the exp<var></var>onent is equal to the <var>adjusted number</var>.
                              </p>
                           </li>
                           <li>
                              <p>The <var>mantissa</var> is less than 10<sup>N</sup>, and at least 10<sup>N-1</sup>, where <var>N</var> is the <var>scaling factor</var>.
                              </p>
                           </li>
                        </ul>
                        <p>If the <var>minimum exponent size</var> is zero, then the <var>mantissa</var> is the <var>adjusted number</var> and there is no <var>exponent</var>.
                        </p>
                     </li>
                     <li>
                        <p>The <var>mantissa</var> is converted (if necessary) to
                           an <code>xs:decimal</code> value,
                           using an implementation of <code>xs:decimal</code> that imposes no limits on the
                           <code>totalDigits</code> or <code>fractionDigits</code> facets. If there are several 
                           such values that
                           are numerically equal to the <var>mantissa</var> (bearing in mind that if the
                           <var>mantissa</var> is an <code>xs:double</code> or <code>xs:float</code>, the comparison will be done by
                           converting the decimal value back to an <code>xs:double</code> or <code>xs:float</code>), the one that
                           is chosen <span class="verb">should</span> be one with the smallest possible number of digits
                           not counting leading or trailing zeroes (whether significant or insignificant). 
                           For example, 1.0 is preferred to
                           0.9999999999, and 100000000 is preferred to 100000001. This value is then
                           rounded so that it uses no more than <code>maximum-fractional-part-size</code> digits in
                           its fractional part. The <var>rounded number</var> is defined to be the result of
                           converting the <var>mantissa</var> to an <code>xs:decimal</code> value, as described above,
                           and then calling the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-round-half-to-even"><code>fn:round-half-to-even</code></a> with this converted number
                           as the first argument and the <code>maximum-fractional-part-size</code> as the second
                           argument, again with no limits on the <code>totalDigits</code> or <code>fractionDigits</code> in the
                           result.
                        </p>
                     </li>
                     <li>
                        <p>The absolute value of the <var>rounded number</var> is converted to a string in decimal notation, 
                           using the digits in the <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a> to 
                           represent the ten decimal digits, and the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup> 
                           character to separate the integer part and the fractional part. This string must always
                           contain a 
                           <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>, 
                           and it must contain no leading zeroes and no trailing zeroes. The value zero will
                           at this stage be 
                           represented by a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup> 
                           on its own.
                        </p>
                     </li>
                     <li>
                        <p>If the number of digits to the left of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character is less than
                           <var>minimum-integer-part-size</var>, leading <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-zero-digit">zero digit</a><sup><small>XP31</small></sup> 
                           characters are added to pad out to that size.
                        </p>
                     </li>
                     <li>
                        <p>If the number of digits to the right of the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character is less than
                           <var>minimum-fractional-part-size</var>, trailing <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-zero-digit">zero digit</a><sup><small>XP31</small></sup> 
                           characters are added to pad out to that size.
                        </p>
                     </li>
                     <li>
                        <p>For each integer <var>N</var> in the <var>integer-part-grouping-positions</var> list,  
                           a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character is inserted into the string immediately
                           after that digit that appears in the integer part of the number and has <var>N</var> digits
                           between it and the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character, if there is such a digit.
                        </p>
                     </li>
                     <li>
                        <p>For each integer <var>N</var> in the <var>fractional-part-grouping-positions</var> list,  
                           a <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-grouping-separator">grouping-separator</a><sup><small>XP31</small></sup> character is inserted into the string immediately
                           before that digit that appears in the fractional part of the number and has <var>N</var> digits
                           between it and the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character, if there is such a digit.
                        </p>
                     </li>
                     <li>
                        <p>If there is no <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-decimal-separator">decimal-separator</a><sup><small>XP31</small></sup>  character in the sub-picture, 
                           or if there are no digits to the right of the 
                           <var>decimal-separator</var> character in the string, then the
                           <var>decimal-separator</var> character is removed from the string (it will be the rightmost 
                           character in the string).
                        </p>
                     </li>
                     <li>
                        <p>If an <var>exponent</var> exists, then the string
                           produced from the <var>mantissa</var> as described above is extended with
                           the following, in order:
                           (a) the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-exponent-separator">exponent-separator</a><sup><small>XP31</small></sup> character; (b) if the <var>exponent</var> is negative,
                           the <a href="https://www.w3.org/TR/xpath-31/#id-static-decimal-format-minus-sign">minus-sign</a><sup><small>XP31</small></sup> character; (c) the value of the <var>exponent</var> represented
                           as a decimal integer, extended if necessary with leading zeroes to make it up to
                           the <var>minimum exponent size</var>, using digits taken from the
                           <a title="digit family" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-decimal-digit-family"><span class="arrow">·</span>decimal digit family<span class="arrow">·</span></a>.
                        </p>
                     </li>
                     <li>
                        <p>The result of the function is the concatenation of the appropriate <var>prefix</var>, the 
                           string conversion of the number as obtained above, and the appropriate <var>suffix</var>.
                        </p>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="trigonometry"></a>4.8 Trigonometric and exponential functions
               </h3>
               <p>The functions in this section perform trigonometric and other mathematical calculations
                  on <code>xs:double</code> values. They
                  			are provided primarily for use in applications performing geometrical computation,
                  for example when generating 
                  			SVG graphics.
               </p>
               <p>Functions are provided to support the six most commonly used trigonometric calculations:
                  sine, cosine and tangent, 
                  			and their inverses arc sine, arc cosine, and arc tangent. Other functions such
                  as secant, cosecant, and cotangent are
                  			not provided because they are easily computed in terms of these six.
               </p>
               <p>The functions in this section (with the exception of <a href="https://www.w3.org/TR/xpath-functions-31/#func-math-pi"><code>math:pi</code></a>) 
                  		      are specified by reference to <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a>, where
                  		   they appear as <em>Recommended operations</em> in section 9. IEEE defines
                  		   these functions for a variety of floating point formats; this specification
                  		   defines them only for <code>xs:double</code> values. The IEEE specification
                  		   applies with the following caveats:
               </p>
               <ol class="enumar">
                  <li>
                     <p>IEEE states that the preferred quantum is language-defined. In this
                        		       specification, it is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     </p>
                  </li>
                  <li>
                     <p>IEEE states that certain functions should raise the inexact exception if the
                        		          result is inexact. 
                        		          In this specification, this exception if it occurs does not
                        		          result in an error. Any diagnostic information is outside the scope of
                        this
                        		          specification.
                     </p>
                  </li>
                  <li>
                     <p>IEEE defines various rounding algorithms for inexact results, and states
                        		          that the choice of rounding direction, and the mechanisms for influencing
                        this choice,
                        		          are language-defined. In this specification, the rounding direction and
                        any mechanisms for
                        		          influencing it are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     </p>
                  </li>
                  <li>
                     <p>Certain operations (such as taking the square root of a negative number)
                        		          are defined in IEEE to signal the invalid operation exception and return
                        a
                        		          quiet NaN. In this specification, such operations return <code>NaN</code>
                        		          and do not raise an error. The same policy applies to operations (such
                        as taking
                        		          the logarithm of zero) that raise a divide-by-zero exception. Any diagnostic
                        
                        		          information is outside the scope of this specification. 
                     </p>
                  </li>
                  <li>
                     <p>Operations whose mathematical result is greater than the largest finite <code>xs:double</code>
                        		          value are defined in IEEE to signal the overflow exception; operations
                        whose mathematical
                        		          result is closer to zero than the smallest non-zero <code>xs:double</code> value are similarly
                        		       defined in IEEE to signal the underflow exception. The treatment of these
                        exceptions in
                        		       this specification is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                     </p>
                  </li>
               </ol>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-pi"><code>math:pi</code></a></td>
                        <td>Returns an approximation to the mathematical constant <span style="font-family:Times; font-style:italic">π</span>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-exp"><code>math:exp</code></a></td>
                        <td>Returns the value of <var>e</var><sup><var>x</var></sup>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-exp10"><code>math:exp10</code></a></td>
                        <td>Returns the value of <code>10</code><sup><var>x</var></sup>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-log"><code>math:log</code></a></td>
                        <td>Returns the natural logarithm of the argument.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-log10"><code>math:log10</code></a></td>
                        <td>Returns the base-ten logarithm of the argument.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-pow"><code>math:pow</code></a></td>
                        <td>Returns the result of raising the first argument to the power of the second.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-sqrt"><code>math:sqrt</code></a></td>
                        <td>Returns the non-negative square root of the argument.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-sin"><code>math:sin</code></a></td>
                        <td>Returns the sine of the argument. The argument is an angle in radians.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-cos"><code>math:cos</code></a></td>
                        <td>Returns the cosine of the argument. The argument is an angle in radians.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-tan"><code>math:tan</code></a></td>
                        <td>Returns the tangent of the argument. The argument is an angle in radians.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-asin"><code>math:asin</code></a></td>
                        <td>Returns the arc sine of the argument.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-acos"><code>math:acos</code></a></td>
                        <td>Returns the arc cosine of the argument.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-atan"><code>math:atan</code></a></td>
                        <td>Returns the arc tangent of the argument.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-math-atan2"><code>math:atan2</code></a></td>
                        <td>Returns the angle in radians subtended at the origin by the point on a plane with
                           coordinates (x, y) and the positive x-axis.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p></p>
               <div class="div3">
                  
                  <h4><a id="func-math-pi"></a>4.8.1 math:pi
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an approximation to the mathematical constant <span style="font-family:Times; font-style:italic">π</span>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:pi</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>This function returns the <code>xs:double</code> value whose lexical representation is
                           3.141592653589793e0
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>2*math:pi()</code> returns <code>6.283185307179586e0</code>.
                           </p>
                           <p>The expression <code>60 * (math:pi() div 180)</code> converts an angle of 60 degrees
                              to radians. 
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-exp"></a>4.8.2 math:exp
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value of <var>e</var><sup><var>x</var></sup>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:exp</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the mathematical constant <var>e</var> raised to the power of
                           <code>$arg</code>, as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of
                           the <code>exp</code> function applied to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of overflow and underflow is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:exp(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:exp(0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:exp(1)</code> returns <code>2.7182818284590455e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:exp(2)</code> returns <code>7.38905609893065e0</code>.
                           </p>
                           <p>The expression <code>math:exp(-1)</code> returns <code>0.36787944117144233e0</code>.
                           </p>
                           <p>The expression <code>math:exp(math:pi())</code> returns <code>23.140692632779267e0</code>.
                           </p>
                           <p>The expression <code>math:exp(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:exp(xs:double('INF'))</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:exp(xs:double('-INF'))</code> returns <code>0.0e0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-exp10"></a>4.8.3 math:exp10
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value of <code>10</code><sup><var>x</var></sup>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:exp10</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is ten raised to the power of <code>$arg</code>, as defined in the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the <code>exp10</code> function applied
                           to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of overflow and underflow is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:exp10(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:exp10(0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:exp10(1)</code> returns <code>1.0e1</code>.
                           </p>
                           <p>The expression <code>math:exp10(0.5)</code> returns <code>3.1622776601683795e0</code>.
                           </p>
                           <p>The expression <code>math:exp10(-1)</code> returns <code>1.0e-1</code>.
                           </p>
                           <p>The expression <code>math:exp10(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:exp10(xs:double('INF'))</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:exp10(xs:double('-INF'))</code> returns <code>0.0e0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-log"></a>4.8.4 math:log
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the natural logarithm of the argument.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:log</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the natural logarithm of <code>$arg</code>, as defined in the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the <code>log</code> function applied
                           to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of <code>divideByZero</code> and <code>invalidOperation</code> exceptions
                           is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. <span>The effect is that if the argument is 
                              zero, the result is <code>-INF</code>, and if it is negative, the result is <code>NaN</code></span>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:log(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:log(0)</code> returns <code>xs:double('-INF')</code>.
                           </p>
                           <p>The expression <code>math:log(math:exp(1))</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:log(1.0e-3)</code> returns <code>-6.907755278982137e0</code>.
                           </p>
                           <p>The expression <code>math:log(2)</code> returns <code>0.6931471805599453e0</code>.
                           </p>
                           <p>The expression <code>math:log(-1)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:log(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:log(xs:double('INF'))</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:log(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-log10"></a>4.8.5 math:log10
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the base-ten logarithm of the argument.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:log10</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the base-10 logarithm of <code>$arg</code>, as defined in the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the <code>log10</code> function applied
                           to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of <code>divideByZero</code> and <code>invalidOperation</code> exceptions
                           is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. <span>The effect is that if the argument is 
                              zero, the result is <code>-INF</code>, and if it is negative, the result is <code>NaN</code></span>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:log10(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:log10(0)</code> returns <code>xs:double('-INF')</code>.
                           </p>
                           <p>The expression <code>math:log10(1.0e3)</code> returns <code>3.0e0</code>.
                           </p>
                           <p>The expression <code>math:log10(1.0e-3)</code> returns <code>-3.0e0</code>.
                           </p>
                           <p>The expression <code>math:log10(2)</code> returns <code>0.3010299956639812e0</code>.
                           </p>
                           <p>The expression <code>math:log10(-1)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:log10(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:log10(xs:double('INF'))</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:log10(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-pow"></a>4.8.6 math:pow
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of raising the first argument to the power of the second.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:pow</code>(<code class="arg">$x</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>, <code class="arg">$y</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:numeric</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$x</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>If <code>$y</code> is an instance of <code>xs:integer</code>, the result is
                           <code>$x</code> raised to the power of <code>$y</code> as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the <code>pown</code> function applied to a
                           64-bit binary floating point value and an integer.
                        </p>
                        <p>Otherwise <code>$y</code> is converted to an <code>xs:double</code> by numeric
                           promotion, and the result is the value of <code>$x</code> raised to the power of
                           <code>$y</code> as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>pow</code> function applied to two 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>divideByZero</code> and <code>invalidOperation</code>
                           exceptions is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. Some of the consequences are
                           illustrated in the examples below.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:pow((), 93.7)</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:pow(2, 3)</code> returns <code>8.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-2, 3)</code> returns <code>-8.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(2, -3)</code> returns <code>0.125e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-2, -3)</code> returns <code>-0.125e0</code>.
                           </p>
                           <p>The expression <code>math:pow(2, 0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(0, 0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(xs:double('INF'), 0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(xs:double('NaN'), 0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-math:pi(), 0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(0e0, 3)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(0e0, 4)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-0e0, 3)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(0, 4)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(0e0, -3)</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(0e0, -4)</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(-0e0, -3)</code> returns <code>xs:double('-INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(0, -4)</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(16, 0.5e0)</code> returns <code>4.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(16, 0.25e0)</code> returns <code>2.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(0e0, -3.0e0)</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(-0e0, -3.0e0)</code> returns <code>xs:double('-INF')</code>. <em>(Odd-valued whole numbers are treated specially).</em></p>
                           <p>The expression <code>math:pow(0e0, -3.1e0)</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(-0e0, -3.1e0)</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:pow(0e0, 3.0e0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-0e0, 3.0e0)</code> returns <code>-0.0e0</code>. <em>(Odd-valued whole numbers are treated specially).</em></p>
                           <p>The expression <code>math:pow(0e0, 3.1e0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-0e0, 3.1e0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-1, xs:double('INF'))</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-1, xs:double('-INF'))</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(1, xs:double('INF'))</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(1, xs:double('-INF'))</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(1, xs:double('NaN'))</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-2.5e0, 2.0e0)</code> returns <code>6.25e0</code>.
                           </p>
                           <p>The expression <code>math:pow(-2.5e0, 2.00000001e0)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-sqrt"></a>4.8.7 math:sqrt
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the non-negative square root of the argument.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:sqrt</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the mathematical non-negative square root of <code>$arg</code>
                           as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>squareRoot</code> function applied to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>invalidOperation</code> exception is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. The effect is that if the argument is less than zero, the result
                           is <code>NaN</code>.
                        </p>
                        <p class="note">If <code>$arg</code> is positive or negative zero, positive infinity, or
                           <code>NaN</code>, then the result is <code>$arg</code>. (Negative zero is the only
                           case where the result can have negative sign)
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:sqrt(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:sqrt(0.0e0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:sqrt(-0.0e0)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:sqrt(1.0e6)</code> returns <code>1.0e3</code>.
                           </p>
                           <p>The expression <code>math:sqrt(2.0e0)</code> returns <code>1.4142135623730951e0</code>.
                           </p>
                           <p>The expression <code>math:sqrt(-2.0e0)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:sqrt(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:sqrt(xs:double('INF'))</code> returns <code>xs:double('INF')</code>.
                           </p>
                           <p>The expression <code>math:sqrt(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-sin"></a>4.8.8 math:sin
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the sine of the argument. The argument is an angle in radians.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:sin</code>(<code class="arg">$</code><span style="font-family:Times; font-style:italic">θ</span><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is the empty sequence, the function returns the empty
                           sequence.
                        </p>
                        <p>Otherwise the result is the sine of <code>$</code><span style="font-family:Times; font-style:italic">θ</span> (which is treated as an angle in
                           radians) as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>sin</code> function applied to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>invalidOperation</code> and <code>underflow</code> exceptions
                           is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is positive or negative zero, the result is
                           <code>$</code><span style="font-family:Times; font-style:italic">θ</span>.
                        </p>
                        <p class="note">If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is positive or negative infinity, or <code>NaN</code>,
                           then the result is <code>NaN</code>.
                        </p>
                        <p class="note">Otherwise the result is always in the range -1.0e0 to +1.0e0</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:sin(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:sin(0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:sin(-0.0e0)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:sin(math:pi() div 2)</code> returns <code>1.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:sin(-math:pi() div 2)</code> returns <code>-1.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:sin(math:pi())</code> returns <code>0.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:sin(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:sin(xs:double('INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:sin(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-cos"></a>4.8.9 math:cos
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the cosine of the argument. The argument is an angle in radians.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:cos</code>(<code class="arg">$</code><span style="font-family:Times; font-style:italic">θ</span><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is the empty sequence, the function returns the empty
                           sequence.
                        </p>
                        <p>If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is positive or negative infinity, or <code>NaN</code>,
                           then the result is <code>NaN</code>.
                        </p>
                        <p>Otherwise the result is the cosine of <code>$</code><span style="font-family:Times; font-style:italic">θ</span> (which is treated as an angle in
                           radians) as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>cos</code> function applied to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>invalidOperation</code> exception is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is positive or negative zero, the result is
                           <code>$</code><span style="font-family:Times; font-style:italic">θ</span>.
                        </p>
                        <p class="note">If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is positive or negative infinity, or <code>NaN</code>,
                           then the result is <code>NaN</code>.
                        </p>
                        <p class="note">Otherwise the result is always in the range -1.0e0 to +1.0e0</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:cos(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:cos(0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:cos(-0.0e0)</code> returns <code>1.0e0</code>.
                           </p>
                           <p>The expression <code>math:cos(math:pi() div 2)</code> returns <code>0.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:cos(-math:pi() div 2)</code> returns <code>0.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:cos(math:pi())</code> returns <code>-1.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:cos(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:cos(xs:double('INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:cos(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-tan"></a>4.8.10 math:tan
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the tangent of the argument. The argument is an angle in radians.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:tan</code>(<code class="arg">$</code><span style="font-family:Times; font-style:italic">θ</span><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is the empty sequence, the function returns the empty
                           sequence.
                        </p>
                        <p>Otherwise the result is the tangent of <code>$</code><span style="font-family:Times; font-style:italic">θ</span> (which is treated as an angle
                           in radians) as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>tan</code> function applied to 64-bit binary floating point values.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>invalidOperation</code> and <code>underflow</code> exceptions
                           is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If <code>$</code><span style="font-family:Times; font-style:italic">θ</span> is positive or negative infinity, or <code>NaN</code>,
                           then the result is <code>NaN</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:tan(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:tan(0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:tan(-0.0e0)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:tan(math:pi() div 4)</code> returns <code>1.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:tan(-math:pi() div 4)</code> returns <code>-1.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>1 div math:tan(math:pi() div 2)</code> returns <code>0.0e0</code> (approximately). <em>(Mathematically, <em>tan(π/2)</em> is positive infinity. But because <code>math:pi() div 2</code>
                                 returns an approximation, the result of <code>math:tan(math:pi() div 2)</code> will be a large
                                 but finite number.)</em></p>
                           <p>The expression <code>1 div math:tan(-math:pi() div 2)</code> returns <code>-0.0e0</code> (approximately). <em>(Mathematically, <em>tan(-π/2)</em> is negative infinity. But because <code>-math:pi() div 2</code>
                                 returns an approximation, the result of <code>math:tan(-math:pi() div 2)</code> will be a large
                                 but finite negative number.)</em></p>
                           <p>The expression <code>math:tan(math:pi())</code> returns <code>0.0e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:tan(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:tan(xs:double('INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:tan(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-asin"></a>4.8.11 math:asin
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arc sine of the argument.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:asin</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the arc sine of <code>$arg</code> as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>asin</code> function applied to 64-bit binary floating point values. 
                           The result is in the range -<span style="font-family:Times; font-style:italic">π</span>/2 to +<span style="font-family:Times; font-style:italic">π</span>/2 radians. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>invalidOperation</code> and <code>underflow</code> exceptions
                           is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If <code>$arg</code> is positive or negative zero, the result is <code>$arg</code>.
                        </p>
                        <p class="note">If <code>$arg</code> is <code>NaN</code>, or if its absolute value is greater than one,
                           then the result is <code>NaN</code>.
                        </p>
                        <p class="note">In other cases the result is an <code>xs:double</code> value representing an angle
                           <span style="font-family:Times; font-style:italic">θ</span> in radians in the range -<span style="font-family:Times; font-style:italic">π</span><code>/2 &lt;=
                              </code><span style="font-family:Times; font-style:italic">θ</span><code> &lt;= +</code><span style="font-family:Times; font-style:italic">π</span><code>/2</code>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:asin(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:asin(0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:asin(-0.0e0)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:asin(1.0e0)</code> returns <code>1.5707963267948966e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:asin(-1.0e0)</code> returns <code>-1.5707963267948966e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:asin(2.0e0)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:asin(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:asin(xs:double('INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:asin(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-acos"></a>4.8.12 math:acos
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arc cosine of the argument.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:acos</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the arc cosine of <code>$arg</code>, as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>acos</code> function applied to 64-bit binary floating point values.
                           The result is in the range zero to +<span style="font-family:Times; font-style:italic">π</span> radians.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>invalidOperation</code> exception is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If <code>$arg</code> is <code>NaN</code>, or if its absolute value is greater than one,
                           then the result is <code>NaN</code>.
                        </p>
                        <p class="note">In other cases the result is an <code>xs:double</code> value representing an angle
                           <span style="font-family:Times; font-style:italic">θ</span> in radians in the range <code>0 &lt;= </code><span style="font-family:Times; font-style:italic">θ</span><code> &lt;=
                              +</code><span style="font-family:Times; font-style:italic">π</span>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:acos(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:acos(0)</code> returns <code>1.5707963267948966e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:acos(-0.0e0)</code> returns <code>1.5707963267948966e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:acos(1.0e0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:acos(-1.0e0)</code> returns <code>3.141592653589793e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:acos(2.0e0)</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:acos(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:acos(xs:double('INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:acos(xs:double('-INF'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-atan"></a>4.8.13 math:atan
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arc tangent of the argument.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:atan</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise the result is the arc tangent of <code>$arg</code>, as defined 
                           in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the
                           <code>atan</code> function applied to 64-bit binary floating point values.
                           The result is in the range -<span style="font-family:Times; font-style:italic">π</span>/2
                           to +<span style="font-family:Times; font-style:italic">π</span>/2 radians.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>underflow</code> exception is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If <code>$arg</code> is positive or negative zero, the result is <code>$arg</code>.
                        </p>
                        <p class="note">If <code>$arg</code> is <code>NaN</code> then the result is <code>NaN</code>.
                        </p>
                        <p class="note">In other cases the result is an <code>xs:double</code> value representing an angle
                           <span style="font-family:Times; font-style:italic">θ</span> in radians in the range -<span style="font-family:Times; font-style:italic">π</span><code>/2 &lt;=
                              </code><span style="font-family:Times; font-style:italic">θ</span><code> &lt;= +</code><span style="font-family:Times; font-style:italic">π</span><code>/2</code>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:atan(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>math:atan(0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:atan(-0.0e0)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:atan(1.0e0)</code> returns <code>0.7853981633974483e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:atan(-1.0e0)</code> returns <code>-0.7853981633974483e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:atan(xs:double('NaN'))</code> returns <code>xs:double('NaN')</code>.
                           </p>
                           <p>The expression <code>math:atan(xs:double('INF'))</code> returns <code>1.5707963267948966e0</code> (approximately).
                           </p>
                           <p>The expression <code>math:atan(xs:double('-INF'))</code> returns <code>-1.5707963267948966e0</code> (approximately).
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-math-atan2"></a>4.8.14 math:atan2
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the angle in radians subtended at the origin by the point on a plane with
                           coordinates (x, y) and the positive x-axis.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">math:atan2</code>(<code class="arg">$y</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>, <code class="arg">$x</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is the value of <code>atan2(y, x)</code> as defined in the <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification of the <code>atan2</code> function applied to
                           64-bit binary floating point values. The result is in the range -<span style="font-family:Times; font-style:italic">π</span>
                           to +<span style="font-family:Times; font-style:italic">π</span> radians.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The treatment of the <code>underflow</code> exception is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>. 
                        </p>
                        <p class="note">If either argument is <code>NaN</code> then the result is <code>NaN</code>.
                        </p>
                        <p class="note">If <code>$y</code> is positive and <code>$x</code> is positive and finite, then (subject
                           to rules for overflow, underflow and approximation) the value of <code>atan2($y,
                              $x)</code> is <code>atan($y div $x)</code>.
                        </p>
                        <p class="note">If <code>$y</code> is positive and <code>$x</code> is negative and finite, then (subject
                           to the same caveats) the value of <code>atan2($y, $x)</code> is <span style="font-family:Times; font-style:italic">π</span>
                           <code>- atan($y div $x)</code>.
                        </p>
                        <p class="note">Some results for special values of the arguments are shown in the examples below.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>math:atan2(+0.0e0, 0.0e0)</code> returns <code>0.0e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(-0.0e0, 0.0e0)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(+0.0e0, -0.0e0)</code> returns <code>3.141592653589793e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(-0.0e0, -0.0e0)</code> returns <code>-3.141592653589793e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(-1, 0.0e0)</code> returns <code>-1.5707963267948966e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(+1, 0.0e0)</code> returns <code>1.5707963267948966e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(-0.0e0, -1)</code> returns <code>-3.141592653589793e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(+0.0e0, -1)</code> returns <code>3.141592653589793e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(-0.0e0, +1)</code> returns <code>-0.0e0</code>.
                           </p>
                           <p>The expression <code>math:atan2(+0.0e0, +1)</code> returns <code>+0.0e0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="random-numbers"></a>4.9 Random Numbers
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator"><code>fn:random-number-generator</code></a></td>
                        <td>Returns a random number generator, which can be used to generate sequences of random
                           numbers.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-random-number-generator"></a>4.9.1 fn:random-number-generator
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a random number generator, which can be used to generate sequences of random
                           numbers.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:random-number-generator</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(xs:string, item())</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline"><code class="function">fn:random-number-generator</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$seed</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(xs:string, item())</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a random number generator. A random number generator is represented
                           as a map containing three entries. 
                           The keys of each entry are strings:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>The entry with key <code>"number"</code> holds a random number; it is an <code>xs:double</code> greater than or equal
                                 to zero (0.0e0), and less than one (1.0e0).
                              </p>
                           </li>
                           <li>
                              <p>The entry with key <code>"next"</code> is a zero-arity function that can be called to return another random number
                                 generator.
                              </p>
                              <p>The properties of this function are as follows:</p>
                              <ul>
                                 <li>
                                    <p>name: absent</p>
                                 </li>
                                 <li>
                                    <p>parameter names: ()</p>
                                 </li>
                                 <li>
                                    <p>signature: <code>() =&gt; map(xs:string, item())</code></p>
                                 </li>
                                 <li>
                                    <p>non-local variable bindings: none</p>
                                 </li>
                                 <li>
                                    <p>implementation: implementation-dependent</p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>The entry with key <code>"permute"</code> is a function with arity 1 (one), which takes an arbitrary sequence
                                 as its argument, and returns a random permutation of that sequence.
                              </p>
                              <p>The properties of this function are as follows:</p>
                              <ul>
                                 <li>
                                    <p>name: absent</p>
                                 </li>
                                 <li>
                                    <p>parameter names: ("arg")</p>
                                 </li>
                                 <li>
                                    <p>signature: <code>(item()*) =&gt; item()*</code></p>
                                 </li>
                                 <li>
                                    <p>non-local variable bindings: none</p>
                                 </li>
                                 <li>
                                    <p>implementation: implementation-dependent</p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                        <p>Calling the <code>fn:random-number-generator</code> function with no arguments is equivalent to calling the single-argument
                           form of the function with an implementation-dependent seed.
                        </p>
                        <p>Calling the <code>fn:random-number-generator</code> function with an empty sequence as the value of <code>$seed</code> 
                           is equivalent to calling the single-argument form of the function with an implementation-dependent
                           seed.
                        </p>
                        <p>If a <code>$seed</code> is supplied, it may be an atomic value of any type.
                        </p>
                        <p>Both forms of the function are <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>: calling the function twice with the same arguments, within a single
                           <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>, produces the same results.
                        </p>
                        <p>The value of the <code>number</code> entry <span class="verb">should</span> be such that all eligible <code>xs:double</code>
                           values are equally likely to be chosen.
                        </p>
                        <p>The function returned in the <code>permute</code> entry <span class="verb">should</span> be such that all permutations 
                           of the supplied sequence are equally likely to be chosen.
                        </p>
                        <p>The map returned by the <code>fn:random-number-generator</code> function <span class="verb">may</span> contain additional entries beyond
                           those specified here, but it <span class="verb">must</span> match the type <code>map(xs:string, item())</code>. The meaning of any additional entries
                           is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. To avoid conflict with any future version of this specification, the keys of any
                           such entries <span class="verb">should</span> start with an underscore character.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">It is not meaningful to ask whether the functions returned in the <code>next</code> and <code>permute</code>
                           functions resulting from two separate calls with the same seed are "the same function",
                           but the functions must be equivalent in the sense
                           that calling them produces the same sequence of random numbers.
                        </p>
                        <p class="note">The repeatability of the results of function calls in different execution scopes is
                           outside the scope of this
                           specification. It is <span class="verb">recommended</span> that when the same seed is provided explicitly, the same random number sequence
                           should be delivered even in different execution scopes; while if no seed is provided,
                           the processor should choose a seed
                           that is likely to be different from one execution scope to another. (The same effect
                           can be achieved explicitly by using
                           <code>fn:current-dateTime()</code> as a seed.)
                        </p>
                        <p class="note">The specification does not place strong conformance requirements on the actual randomness
                           of the result; this is left to 
                           the implementation. It is desirable, for example, when generating a sequence
                           of random numbers that the sequence should not get into a repeating loop; but the
                           specification does not attempt to dictate this.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The following example returns a random permutation of the integers in the range 1
                              to 100: 
                              <code>fn:random-number-generator()?permute(1 to 100)</code>
                              
                           </p>
                           <p>The following example returns a 10% sample of the items in an input sequence <code>$seq</code>, chosen at random: 
                              <code>fn:random-number-generator()?permute($seq)[position() = 1 to (count($seq) idiv 10)]</code>
                              
                           </p>
                           <p>The following code defines a function that can be called to produce a random sequence
                              of <code>xs:double</code>
                              values in the range zero to one, of specified length:
                           </p>
                           <div class="exampleInner"><pre class="small">declare %public function r:random-sequence($length as xs:integer) as xs:double* {
  r:random-sequence($length, fn:random-number-generator())
};

declare %private function r:random-sequence($length as xs:integer, 
                                            $G as map(xs:string, item())) {
  if ($length eq 0)
  then ()
  else ($G?number, r:random-sequence($length - 1, $G?next()))
};

r:random-sequence(200);
            </pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="string-functions"></a>5 Functions on strings
            </h2>
            <p>This section specifies functions and operators on the <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
               <code>xs:string</code> datatype and the datatypes derived from it.
            </p>
            <div class="div2">
               
               <h3><a id="string-types"></a>5.1 String types
               </h3>
               <p>The operators described in this section are defined on the following types. Each
                  type whose name is indented is derived from the type whose name appears nearest
                  above with one less level of indentation.
               </p>
               <table class="hierarchy" style="border:0px solid">
                  <tbody>
                     <tr>
                        <td class="castOther">xs:string</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther">xs:normalizedString</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:token</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:language</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:NMTOKEN</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:Name</td>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:NCName</td>
                        <td>&nbsp;</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:ID</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:IDREF</td>
                     </tr>
                     <tr>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther"></td>
                        <td class="castOther">xs:ENTITY</td>
                     </tr>
                  </tbody>
               </table>
               <p>They also apply to user-defined types derived by restriction from the above types.
                  
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="func-assemble-disassemble-string"></a>5.2 Functions to assemble and disassemble strings
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoints-to-string"><code>fn:codepoints-to-string</code></a></td>
                        <td>Returns an <code>xs:string</code> whose characters have supplied <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-string-to-codepoints"><code>fn:string-to-codepoints</code></a></td>
                        <td>Returns the sequence of <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a> that constitute an
                           <code>xs:string</code> value. 
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-codepoints-to-string"></a>5.2.1 fn:codepoints-to-string
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an <code>xs:string</code> whose characters have supplied <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:codepoints-to-string</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the string made up from the <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> whose Unicode <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a> are
                           supplied in <code>$arg</code>. This will be the zero-length string if <code>$arg</code>
                           is the empty sequence. 
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0001" title="err:FOCH0001">err:FOCH0001</a>] if any of the codepoints in
                           <code>$arg</code> is not a permitted XML character.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:codepoints-to-string((66, 65, 67, 72))</code> returns <code>"BACH"</code>.
                           </p>
                           <p>The expression <code>fn:codepoints-to-string((2309, 2358, 2378, 2325))</code> returns <code>"अशॊक"</code>.
                           </p>
                           <p>The expression <code>fn:codepoints-to-string(())</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code>fn:codepoints-to-string(0)</code> raises error <code>FOCH0001</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-string-to-codepoints"></a>5.2.2 fn:string-to-codepoints
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the sequence of <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a> that constitute an
                           <code>xs:string</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:string-to-codepoints</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence of integers, each integer being the Unicode <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoint<span class="arrow">·</span></a> of the corresponding <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> in <code>$arg</code>.
                        </p>
                        <p>If <code>$arg</code> is a zero-length string or the empty sequence, the function returns
                           the empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:string-to-codepoints("Thérèse")</code> returns <code>(84, 104, 233, 114, 232, 115, 101)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="string-compare"></a>5.3 Comparison of strings
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-compare"><code>fn:compare</code></a></td>
                        <td>Returns -1, 0, or 1, depending on whether <code>$comparand1</code> collates before,
                           equal to, or after <code>$comparand2</code> according to the rules of a selected
                           collation.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoint-equal"><code>fn:codepoint-equal</code></a></td>
                        <td>Returns true if two strings are equal, considered codepoint-by-codepoint.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-collation-key"><code>fn:collation-key</code></a></td>
                        <td>Given a string value and a collation, generates an internal value called a collation
                           key, with the property that
                           the matching and ordering of collation keys reflects the matching and ordering of
                           strings under the specified collation.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-contains-token"><code>fn:contains-token</code></a></td>
                        <td>Determines whether or not any of the supplied strings, when tokenized at whitespace
                           boundaries, contains the supplied token,
                           under the rules of the supplied collation.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="collations"></a>5.3.1 Collations
                  </h4>
                  <p> A collation is a specification of the manner in which <a title="string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#string"><span class="arrow">·</span>strings<span class="arrow">·</span></a> are
                     compared and, by extension, ordered. When values whose type is
                     <code>xs:string</code> or a type derived from <code>xs:string</code> are
                     compared (or, equivalently, sorted), the comparisons are inherently
                     performed according to some collation (even if that collation is defined
                     entirely on codepoint values). The <a href="https://www.w3.org/TR/xpath-functions-31/#charmod">[Character Model for the World Wide Web 1.0: Fundamentals]</a> observes that
                     some applications may require different comparison and ordering behaviors
                     than other applications. Similarly, some users having particular linguistic
                     expectations may require different behaviors than other users. Consequently,
                     the collation must be taken into account when comparing strings in any
                     context. Several functions in this and the following section make use of a
                     collation. 
                  </p>
                  <p>Collations can indicate that two different codepoints are, in fact, equal
                     for comparison purposes (e.g., "v" and "w" are considered equivalent in
                     some Swedish collations). Strings can be compared codepoint-by-codepoint or in a
                     linguistically appropriate manner, as defined by the collation. 
                  </p>
                  <p>Some collations, especially those based on the 
                     Unicode Collation Algorithm (see <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>) can be "tailored" for various purposes. This
                     document does not discuss such tailoring, nor does it provide a mechanism to
                     perform tailoring. Instead, it assumes that the collation argument to the
                     various functions below is a tailored and named collation.
                  </p>
                  <p>The <a title="Unicode codepoint collation" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-codepoint-collation"><span class="arrow">·</span>Unicode codepoint collation<span class="arrow">·</span></a> is a collation
                     available in every implementation, which sorts based on codepoint values. For further
                     details
                     see <a href="https://www.w3.org/TR/xpath-functions-31/#codepoint-collation"><b>5.3.2 The Unicode Codepoint Collation</b></a>.
                  </p>
                  <p>Collations may or may not perform Unicode normalization on strings before comparing
                     them.
                  </p>
                  <p>This specification assumes that collations are named and that the collation
                     name may be provided as an argument to string functions. Functions that
                     allow specification of a collation do so with an argument whose type is
                     <code>xs:string</code> but whose lexical form must conform to an
                     <code>xs:anyURI</code>. If the collation is specified using a relative URI reference, 
                     it is resolved relative to the value of the
                     static base URI property from the static context. 
                     This specification also defines the manner in which a
                     default collation is determined if the collation argument is not specified
                     in calls of functions that use a collation but allow it to be omitted. 
                  </p>
                  <p>This specification does not define whether or not the collation URI is
                     					dereferenced. The collation URI may be an abstract identifier, or it may
                     					refer to an actual resource describing the collation. If it refers to a
                     					resource, this specification does not define the nature of that resource.
                     					One possible candidate is that the resource is a locale description
                     					expressed using the Locale Data Markup Language: see <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR35">[UTS #35]</a>.
                     					
                  </p>
                  <p>Functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-compare"><code>fn:compare</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><code>fn:max</code></a> that
                     compare <code>xs:string</code> values use a single collation URI to identify
                     all aspects of the collation rules. This means that any parameters such as
                     the strength of the collation must be specified as part of the collation
                     URI. For example, suppose there is a collation 
                     <code>http://www.example.com/collations/French</code>
                     that refers to a French collation that compares on the basis of
                     base characters. Collations that use the same basic rules, but with higher
                     strengths, for example, base characters and accents, or base characters,
                     accents and case, would need to be given different names, say 
                     <code>http://www.example.com/collations/French1</code>
                     and 
                     <code>http://www.example.com/collations/French2</code>. 
                     Note that some specifications use the term collation to refer to
                     an algorithm that can be parameterized, but in this specification, each
                     possible parameterization is considered to be a distinct collation.
                  </p>
                  <p>The XQuery/XPath static context includes a provision for a default collation
                     that can be used for string comparisons and ordering operations. See the
                     description of the static context in <a href="https://www.w3.org/TR/xpath-31/#static_context">Section 
                        
                        2.1.1 Static Context
                        </a><sup><small>XP31</small></sup>. 
                     						If the default collation is not specified by the
                     user or the system, the default collation is the <a title="Unicode codepoint collation" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-codepoint-collation"><span class="arrow">·</span>Unicode codepoint collation<span class="arrow">·</span></a>.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>XML allows elements to specify the <code>xml:lang</code> attribute to
                        indicate the language associated with the content of such an element.
                        This specification does not use <code>xml:lang</code> to identify the
                        default collation because using
                        <code>xml:lang</code> does not produce desired effects when the two
                        strings to be compared have different <code>xml:lang</code> values or
                        when a string is multilingual. 
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="codepoint-collation"></a>5.3.2 The Unicode Codepoint Collation
                  </h4>
                  <p><span class="termdef"><a id="dt-codepoint-collation"></a>[Definition]  The collation URI
                        <code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code> identifies
                        a collation which must be recognized by every implementation: it is referred to as
                        the <b>Unicode codepoint collation</b> (not to be confused with the Unicode collation algorithm).</span></p>
                  <p>The Unicode codepoint collation does not perform any normalization on the
                     supplied strings.
                  </p>
                  <p>The collation is defined as follows. Each of the two strings is
                     converted to a sequence of integers using the <a href="https://www.w3.org/TR/xpath-functions-31/#func-string-to-codepoints"><code>fn:string-to-codepoints</code></a>
                     function. These two sequences <code>$A</code> and <code>$B</code> are then compared as follows: 
                  </p>
                  <ul>
                     <li>
                        <p>If both sequences are empty, the strings are equal.</p>
                     </li>
                     <li>
                        <p>If one sequence is empty and the other is not, then the string
                           corresponding to the empty sequence is less than the other string.
                        </p>
                     </li>
                     <li>
                        <p>If the first integer in <code>$A</code> is less than the first integer in <code>$B</code>, then
                           the string corresponding to <code>$A</code> is less than the string corresponding to
                           <code>$B</code>.
                           
                        </p>
                     </li>
                     <li>
                        <p>If the first integer in <code>$A</code> is greater than the first integer in <code>$B</code>, then
                           the string corresponding to <code>$A</code> is greater than the string corresponding to
                           <code>$B</code>.
                        </p>
                     </li>
                     <li>
                        <p>Otherwise (the first pair of integers are equal), the result is obtained
                           by applying the same rules recursively to <code>fn:tail($A)</code> and
                           <code>fn:tail($B)</code></p>
                     </li>
                  </ul>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>While the Unicode codepoint collation does not produce results suitable for quality
                        publishing of
                        printed indexes or directories, it is adequate for many purposes where a restricted
                        alphabet
                        is used, such as sorting of vehicle registrations.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="uca-collations"></a>5.3.3 The Unicode Collation Algorithm
                  </h4>
                  <p>This specification defines a family of collation URIs representing tailorings of the
                     Unicode Collation
                     Algorithm (UCA) as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. The parameters used for tailoring the UCA
                     are based on the parameters defined in the Locale Data Markup Language (LDML), defined
                     in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR35">[UTS #35]</a>.
                  </p>
                  <p>This family of URIs use the scheme and path <code>http://www.w3.org/2013/collation/UCA</code>
                     followed by an optional query part. The query part, if present, consists of a question
                     mark followed
                     by a sequence of zero or more semicolon-separated parameters. Each parameter is a
                     keyword-value pair, the
                     keyword and value being separated by an equals sign.
                  </p>
                  <p>All implementations must recognize URIs in this family in the <code>collation</code> argument of functions that
                     take a collation argument.
                  </p>
                  <p>If the <code>fallback</code> parameter is
                     present with the value <code>no</code>, then the implementation <span class="verb">must</span> either use a collation that conforms with
                     the rules in the Unicode specifications for the requested tailoring, or fail with
                     a static or dynamic error indicating that it
                     does not provide the collation (the error code should be the same as if the collation
                     URI were not recognized). 
                     If the <code>fallback</code> parameter
                     is omitted or takes the value <code>yes</code>, and if the collation URI is well-formed according to the rules in this section,
                     then the implementation <span class="verb">must</span> accept the collation URI, and <span class="verb">should</span> use the available
                     collation that most closely reflects the user's intentions. For example, if the collation
                     URI requested is
                     <code>http://www.w3.org/2013/collation/UCA?lang=se;fallback=yes</code> and the implementation does not include a fully
                     conformant version of the UCA tailored for Swedish, then it <span class="verb">may</span> choose to use a Swedish collation that is known to differ
                     from the UCA definition, or one whose conformance has not been established. It might
                     even, as a last resort, fall back to using
                     codepoint collation.
                  </p>
                  <p>If two query parameters use the same keyword then the last one wins. If a query parameter
                     uses a keyword or value which is not
                     defined in this specification then the meaning is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the implementation recognizes
                     the meaning of the keyword and value then it <span class="verb">should</span> interpret it accordingly; if it does not recognize
                     the keyword or value then if the <code>fallback</code> parameter is present with the value <code>no</code> it should reject
                     the collation as unsupported, otherwise it should ignore the unrecognized parameter.
                  </p>
                  <p>The following query parameters are defined. If any parameter is absent, the default
                     is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                     except where otherwise stated.
                     The meaning given for each parameter is non-normative; the normative specification
                     is found in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR35">[UTS #35]</a>.
                  </p>
                  <div class="overlarge"><table class="longlastcol data">
                     <thead>
                        <tr>
                           <th>Keyword</th>
                           <th>Values</th>
                           <th>Meaning</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>fallback</td>
                           <td>yes | no (default yes)</td>
                           <td>Determines whether the processor uses a fallback collation if a conformant collation
                              is not available.
                           </td>
                        </tr>
                        <tr>
                           <td>lang</td>
                           <td>language code: <span>a string in the lexical space of <code>xs:language</code></span>.
                           </td>
                           <td>The language whose collation conventions are to be used.</td>
                        </tr>
                        <tr>
                           <td>version</td>
                           <td>string</td>
                           <td>The version number of the UCA to be used.</td>
                        </tr>
                        <tr>
                           <td>strength (default tertiary)</td>
                           <td>primary | secondary | tertiary | quaternary | identical, or 
                              1|2|3|4|5 as synonyms
                           </td>
                           <td>The collation strength as defined in UCA. Primary 
                              strength takes only the base form of the character into account (so A=a=Ä=ä); secondary
                              strength ignores case but considers accents
                              and diacritics as significant (so A=a and Ä=ä but ä≠a); tertiary considers case as
                              significant (A≠a≠Ä≠ä); quaternary considers 
                              spaces and punctuation that would otherwise be ignored (for example <code>data-base</code>=<code>database</code>).
                           </td>
                        </tr>
                        <tr>
                           <td>maxVariable</td>
                           <td>space | punct | symbol | currency (default punct)</td>
                           <td>
                              Indicates that all characters in the specified group and earlier groups are treated
                              as "noise" characters 
                              to be handled as defined by the <code>alternate</code> parameter. For example, <code>maxVariable=punct</code> indicates 
                              that characters classified as whitespace or punctuation get this treatment.
                           </td>
                        </tr>
                        <tr>
                           <td>alternate</td>
                           <td>non-ignorable | shifted | blanked (default non-ignorable)</td>
                           <td>Controls the handling of characters such as spaces and hyphens;
                              specifically, the "noise" characters in the groups selected by the <code>maxVariable</code> parameter. The value <code>non-ignorable</code>
                              indicates that such characters are treated as distinct at the primary level (so <code>data base</code> sorts before <code>datatype</code>);
                              <code>shifted</code> indicates that they are used to differentiate two strings only at the <code>quaternary</code> level,
                              and <code>blanked</code> indicates that they are taken into account only at the <code>identical</code> level.
                           </td>
                        </tr>
                        <tr>
                           <td>backwards</td>
                           <td>yes | no (default no)</td>
                           <td>The value <code>backwards=yes</code> indicates that the last accent in the 
                              <span>string</span> is the most significant.
                           </td>
                        </tr>
                        <tr>
                           <td>normalization</td>
                           <td>yes | no (default no)</td>
                           <td>Indicates whether <span>strings</span> 
                              are converted to normalization form D.
                           </td>
                        </tr>
                        <tr>
                           <td>caseLevel</td>
                           <td>yes | no (default no)</td>
                           <td>When used with primary strength, setting <code>caseLevel=yes</code> has the effect of ignoring accents
                              while taking account of case.
                           </td>
                        </tr>
                        <tr>
                           <td>caseFirst</td>
                           <td>upper | lower</td>
                           <td>Indicates whether upper-case precedes lower-case or vice versa.</td>
                        </tr>
                        <tr>
                           <td>numeric</td>
                           <td>yes | no (default no)</td>
                           <td>When <code>numeric=yes</code> is specified, a sequence of consecutive digits is interpreted as a number,
                              for example <code>chap2</code> sorts before <code>chap12</code>.
                           </td>
                        </tr>
                        <tr>
                           <td>reorder</td>
                           <td>a comma-separated sequence of reorder codes, where a reorder code is one of <code>space</code>, <code>punct</code>,
                              <code>symbol</code>, <code>currency</code>, <code>digit</code>, or a four-letter script code defined in <a href="https://www.w3.org/TR/xpath-functions-31/#ISO15924_register">[ISO 15924 Register]</a>, the register
                              of scripts maintained by the Unicode Consortium in its capacity as registration authority
                              for <a href="https://www.w3.org/TR/xpath-functions-31/#ISO15924">[ISO 15924]</a>.
                           </td>
                           <td>Determines the relative ordering of text in different scripts; for example the value
                              <code>digit,Grek,Latn</code> indicates
                              that digits precede Greek letters, which precede Latin letters.
                           </td>
                        </tr>
                     </tbody>
                  </table></div>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>This list excludes parameters that are inconvenient to express in a URI, or that are
                        applicable only to substring matching.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="html-ascii-case-insensitive-collation"></a>5.3.4 The HTML ASCII Case-Insensitive Collation
                  </h4>
                  <p>The collation URI <code>http://www.w3.org/2005/xpath-functions/collation/html-ascii-case-insensitive</code> must be recognized
                     by every implementation. It is used
                     to refer to the HTML ASCII case-insensitive collation as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#html5">[HTML5: A vocabulary and associated APIs for HTML and XHTML]</a> (section 2.5, <em>Case sensitivity and
                        string comparison</em>). It is used, for example, when matching HTML <code>class</code> attribute values.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>The definition of the collation is paraphrased here for convenience:</p>
                     <p>Comparing two strings in an ASCII case-insensitive manner means comparing them exactly,
                        
                        codepoint for codepoint, except that the characters in the range x41 to x5A (A-Z)
                        
                        and the corresponding characters in the range x61 to x7A (a-z) are considered to also
                        match.
                     </p>
                  </div>
                  <p>HTML5 defines the semantics of equality matching using this collation; it does not
                     define rules for ordering. If the collation
                     is used for ordering, the results are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. The collation supports collation units and can therefore
                     be used with functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-contains"><code>fn:contains</code></a>; each Unicode codepoint is a single collation unit.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="choosing-a-collation"></a>5.3.5 Choosing a collation
                  </h4>
                  <p>Many functions have two signatures, where one signature includes a <code>$collation</code>
                     			   argument and the other omits this argument.
                  </p>
                  <p>The collation to use for these functions is determined by the following rules:</p>
                  <ol class="enumar">
                     <li>
                        <p>If the function specifies an explicit collation, CollationA (e.g., if
                           the optional collation argument is specified in a call of the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-compare"><code>fn:compare</code></a> function), then:
                        </p>
                        <ul>
                           <li>
                              <p>If CollationA is supported by the implementation, then
                                 CollationA is used. 
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0002" title="err:FOCH0002">err:FOCH0002</a>]. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>If no collation is explicitly specified for the function and the
                           default collation in the XQuery/XPath static context is CollationB, then:
                        </p>
                        <ul>
                           <li>
                              <p>If CollationB is supported by the implementation, then
                                 CollationB is used. 
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0002" title="err:FOCH0002">err:FOCH0002</a>]. 
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ol>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>Because the set of collations that are supported is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>,
                        			   an implementation has the option to support all collation URIs, in which case
                        it will never raise this error.
                     </p>
                  </div>
                  <p>If the value of the collation argument is a relative URI reference, it is resolved
                     against the base-URI from the
                     			      static context. If it is a relative URI reference and cannot be resolved,
                     perhaps because the base-URI property in the static context
                     			      is absent, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0002" title="err:FOCH0002">err:FOCH0002</a>].
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>There is no explicit requirement that the string used as a collation URI be a valid
                        URI.
                        			   Implementations will in many cases reject such strings on the grounds that do
                        not identify a supported collation; they
                        			   may also cause an error if they cannot be resolved against the static base URI.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-compare"></a>5.3.6 fn:compare
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns -1, 0, or 1, depending on whether <code>$comparand1</code> collates before,
                           equal to, or after <code>$comparand2</code> according to the rules of a selected
                           collation.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:compare</code>(<code class="arg">$comparand1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$comparand2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:compare</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$comparand1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$comparand2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Returns -1, 0, or 1, depending on whether the value of the <code>$comparand1</code> is
                           respectively less than, equal to, or greater than the value of <code>$comparand2</code>,
                           according to the rules of the collation that is used. 
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>. 
                        </p>
                        <p>If either <code>$comparand1</code> or <code>$comparand2</code> is the empty sequence,
                           the function returns the empty sequence.
                        </p>
                        <p>This function, called with the first signature, defines the semantics of the "eq",
                           "ne",
                           "gt", "lt", "le" and "ge" operators on <code>xs:string</code> values.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:compare('abc', 'abc')</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>fn:compare('Strasse', 'Straße')</code> returns <code>0</code>. <em>(Assuming the default collation includes provisions that equate
                                 "ss" and the (German) character "ß"
                                 ("sharp-s"). Otherwise, the returned value depends on the
                                 semantics of the default collation.)</em></p>
                           <p>The expression <code>fn:compare('Strasse', 'Straße',
                                 'http://www.w3.org/2013/collation/UCA?lang=de;strength=primary')</code> returns <code>0</code>. <em>(The specified collation equates
                                 "ss" and the (German) character "ß"
                                 ("sharp-s").)</em></p>
                           <p>The expression <code>fn:compare('Strassen', 'Straße')</code> returns <code>1</code>. <em>(Assuming the default collation includes provisions that treat
                                 differences between "ss" and the (German) character "ß"
                                 ("sharp-s") with less strength than the differences between the
                                 base characters, such as the final "n". ).</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-codepoint-equal"></a>5.3.7 fn:codepoint-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if two strings are equal, considered codepoint-by-codepoint.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:codepoint-equal</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$comparand1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$comparand2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If either argument is the empty sequence, the function returns the empty sequence.
                           
                        </p>
                        <p>Otherwise, the function returns <code>true</code> or <code>false</code> depending on
                           whether the value of <code>$comparand1</code> is equal to the value of
                           <code>$comparand2</code>, according to the Unicode codepoint collation
                           (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>).
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This function allows <code>xs:anyURI</code> values to be compared without having to
                           specify the Unicode codepoint collation.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:codepoint-equal("abcd", "abcd")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:codepoint-equal("abcd", "abcd ")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:codepoint-equal("", "")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:codepoint-equal("", ())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:codepoint-equal((), ())</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-collation-key"></a>5.3.8 fn:collation-key
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Given a string value and a collation, generates an internal value called a collation
                           key, with the property that
                           the matching and ordering of collation keys reflects the matching and ordering of
                           strings under the specified collation.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:collation-key</code>(<code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:base64Binary</code></div>
                        <div class="proto"><code class="function">fn:collation-key</code>(<code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>, <code class="arg">$collation</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:base64Binary</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Calling the one-argument version of this function is equivalent to calling the
                           two-argument version supplying the default collation as the second argument.
                        </p>
                        <p>The function returns an <span><a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a></span> 
                           value with the property that,
                           for any two strings <code>$K1</code> and <code>$K2</code>:
                        </p>
                        <ul>
                           <li>
                              <p><code>collation-key($K1, $C) eq collation-key($K2, $C)</code> if and only if
                                 <code>compare($K1, $K2, $C) eq 0</code></p>
                           </li>
                           <li>
                              <p><code>collation-key($K1, $C) lt collation-key($K2, $C)</code> if and only if
                                 <code>compare($K1, $K2, $C) lt 0</code></p>
                           </li>
                        </ul>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>. Collation keys are defined as <code>xs:base64Binary</code> values
                           to ensure unambiguous and context-free comparison semantics.
                        </p>
                        <p>An implementation is free to generate a collation key in any convenient way provided
                           that it always generates the same collation key for two strings that are equal under
                           the
                           collation, and different collation keys for strings that are not equal. This holds
                           only
                           within a single <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>;
                           an implementation is under no obligation to generate the same collation keys during
                           a
                           subsequent unrelated query or transformation.
                        </p>
                        <p>It is possible to define collations that do not have the ability to generate collation
                           keys. Supplying such a collation will cause the function to fail. The ability to
                           generate collation keys is an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> property of the
                           collation.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0004" title="err:FOCH0004">err:FOCH0004</a>] if the specified
                           collation does not support the generation of collation keys. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The function is provided primarily for use with maps. If a map is required where
                           codepoint equality is inappropriate for comparing keys, then a common technique is
                           to
                           normalize the key so that equality matching becomes feasible. There are many ways
                           keys can be normalized, for example by use of functions such as
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-upper-case"><code>fn:upper-case</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-lower-case"><code>fn:lower-case</code></a>,
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-space"><code>fn:normalize-space</code></a>, or <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode"><code>fn:normalize-unicode</code></a>, but this
                           function provides a way of normalizing them according to the rules of a specified
                           collation. For example, if the collation ignores accents, then the function will
                           generate the same collation key for two input strings that differ only in their use
                           of
                           accents.
                        </p>
                        <p class="note">The result of the function is defined to be an <code>xs:base64Binary</code> value. Binary values
                           are chosen because they have unambiguous and context-free comparison semantics, because
                           the value space
                           is unbounded, and because the ordering rules are such that between any two values
                           in the ordered value space, an
                           arbitrary number of further values can be interpolated. The choice between <code>xs:base64Binary</code>
                           and <code>xs:hexBinary</code> is arbitrary; the only operation that behaves differently between the two binary
                           data types is conversion to/from a string, and this operation is not one that is normally
                           required for
                           effective use of collation keys.
                           
                        </p>
                        <p class="note">For collations based on the Unicode Collation Algorithm, an algorithm for computing
                           collation keys is provided in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. Implementations are
                           <span class="verb">not required</span> to use this algorithm.
                        </p>
                        <p class="note">This specification does not mandate that collation keys should retain ordering. This
                           is
                           partly because the primary use case is for maps, where only equality comparisons are
                           required, and partly to allow the use of binary data types (which are currently
                           unordered types) for the result. The specification may be revised in a future release
                           to
                           specify that ordering is preserved.
                        </p>
                        <p class="note">The fact that collation keys are ordered can be exploited in XQuery, whose <code>order by</code>
                           clause does not allow the collation to be selected dynamically. This restriction can
                           be circumvented
                           by rewriting the clause <code>order by $e/@key collation "URI"</code> as <code>order by fn:collation-key($e/@key, $collation)</code>,
                           where <code>$collation</code> allows the collation to be chosen dynamically.
                        </p>
                        <p class="note">Note that <code>xs:base64Binary</code> becomes an ordered type
                           in XPath 3.1, making binary collation keys possible.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $C := 'http://www.w3.org/2013/collation/UCA?strength=primary'</pre></div>
                           <p>The expression <code>map:merge((map{collation-key("A", $C):1}, map{collation-key("a",
                                 $C):2}), map{"duplicates":"use-last"})(collation-key("A", $C))</code> returns <code>2</code>. <em>(Given that the keys of the two entries are equal under the rules of
                                 the chosen collation, only one of the entries can appear in the result; the one
                                 that is chosen is the one from the last map in the input sequence.)</em></p>
                           <p>The expression <code>let $M := map{collation-key("A", $C):1, collation-key("B", $C):2}
                                 return $M(collation-key("a", $C))</code> returns <code>1</code>. <em>(The strings "A" and "a" have the same collation key under this
                                 collation.)</em></p>
                           <p>As the above examples illustrate, it is important that when the
                              <code>collation-key</code> function is used to add entries to a map, then it must
                              also be used when retrieving entries from the map. This process can be made less
                              error-prone by encapsulating the map within a function: <code>function($k)
                                 {$M(collation-key($k, $collation)}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-contains-token"></a>5.3.9 fn:contains-token
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Determines whether or not any of the supplied strings, when tokenized at whitespace
                           boundaries, contains the supplied token,
                           under the rules of the supplied collation.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:contains-token</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>, <code class="arg">$token</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:contains-token</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$token</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$input</code> is the empty sequence, the function returns <code>false</code>.
                        </p>
                        <p>Leading and trailing whitespace is trimmed from the supplied value of <code>$token</code>. If the trimmed value of <code>$token</code>
                           is a zero-length string, the function returns <code>false</code>.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns true if and only if there is string in <code>$input</code> which, 
                           after tokenizing at whitespace boundaries, contains a token
                           that is equal to the trimmed value of <code>$token</code> under
                           the rules of the selected collation.
                        </p>
                        <p>That is, the function returns the value of the expression:</p>
                        <div class="exampleInner"><pre class="small">some $t in $input!fn:tokenize(.) satisfies 
                 compare($t, fn:replace($token, '^\s*|\s*$', ''), $collation) eq 0)</pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Interior whitespace within <code>$token</code> will cause the function to return <code>false</code>,
                           unless such whitespace is ignored by the selected collation.
                        </p>
                        <p class="note">This function can be used for processing space-separated attribute values
                           (for example, the XHTML and DITA class attribute),
                           where one often needs to test for the presence
                           of a single token in a space-separated list. The function is designed to work
                           both when the attribute has been validated against an XSD list type, and when it
                           appears as a single untyped string. It differs from the
                           HTML 5 definition in that HTML 5 recognizes form feed (x0C) as a separator.
                           To reproduce the HTML token matching behavior, the HTML ASCII case-insensitive collation
                           should be used: see <a href="https://www.w3.org/TR/xpath-functions-31/#html-ascii-case-insensitive-collation"><b>5.3.4 The HTML ASCII Case-Insensitive Collation</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:contains-token("red green blue ", "red")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:contains-token(("red", "green", "blue"), " red ")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:contains-token("red, green, blue", "red")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:contains-token("red green blue", "RED", "http://www.w3.org/2005/xpath-functions/collation/html-ascii-case-insensitive")</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="string-value-functions"></a>5.4 Functions on string values
               </h3>
               <p>The following functions are defined on values of type <code>xs:string</code> and
                  types derived from it.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-concat"><code>fn:concat</code></a></td>
                        <td>Returns the concatenation of the string values of the arguments.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-string-join"><code>fn:string-join</code></a></td>
                        <td>Returns a string created by concatenating the items in a sequence, with a defined
                           separator between adjacent items.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-substring"><code>fn:substring</code></a></td>
                        <td>Returns the portion of the value of <code>$sourceString</code> beginning at the position
                           indicated by the value of <code>$start</code> and continuing for the number of <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> indicated by the value of
                           <code>$length</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-string-length"><code>fn:string-length</code></a></td>
                        <td>Returns the number of <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> in a string.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-space"><code>fn:normalize-space</code></a></td>
                        <td>Returns the value of <code>$arg</code> with leading and trailing whitespace removed, and
                           sequences of internal whitespace reduced to a single space character.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode"><code>fn:normalize-unicode</code></a></td>
                        <td>Returns the value of <code>$arg</code> after applying Unicode normalization.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-upper-case"><code>fn:upper-case</code></a></td>
                        <td>Converts a string to upper case.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-lower-case"><code>fn:lower-case</code></a></td>
                        <td>Converts a string to lower case.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-translate"><code>fn:translate</code></a></td>
                        <td>Returns the value of <code>$arg</code> modified by replacing or removing individual
                           characters. 
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="note">
                  <p class="prefix"><b>Notes:</b></p>
                  <p>When the above operators and functions are applied to datatypes derived from
                     <code>xs:string</code>, they are guaranteed to return values that are instances of
                     <code>xs:string</code>, but the value might or might not be an instance of the
                     particular subtype of <code>xs:string</code> to which they were applied. 
                  </p>
                  <p>The strings returned by <a href="https://www.w3.org/TR/xpath-functions-31/#func-concat"><code>fn:concat</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-string-join"><code>fn:string-join</code></a> are not guaranteed to be normalized.  
                     			   But see note in <a href="https://www.w3.org/TR/xpath-functions-31/#func-concat"><code>fn:concat</code></a>.
                     
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-concat"></a>5.4.1 fn:concat
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the concatenation of the string values of the arguments.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p> The two-argument form of
                           this function defines the semantics of the "||" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:concat</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><span class="varargs">...</span></td>
                                 <td style="vertical-align:baseline">)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>This function accepts two or more <code>xs:anyAtomicType</code> arguments and casts each
                           one to <code>xs:string</code>. The function returns the <code>xs:string</code> that is
                           the concatenation of the values of its arguments after conversion. If any argument
                           is
                           the empty sequence, that argument is treated as the zero-length string.
                        </p>
                        <p>The <code>fn:concat</code> function is specified to allow two or more arguments, which
                           are concatenated together. This is the only function specified in this document that
                           allows a variable number of arguments. This capability is retained for compatibility
                           with <a href="https://www.w3.org/TR/xpath-functions-31/#xpath">[XML Path Language (XPath) Version 1.0]</a>. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">As mentioned in <a href="https://www.w3.org/TR/xpath-functions-31/#string-types"><b>5.1 String types</b></a> Unicode normalization is not automatically
                           applied to the result of <code>fn:concat</code>. If a normalized result is required,
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode"><code>fn:normalize-unicode</code></a> can be applied to the <code>xs:string</code>
                           returned by <code>fn:concat</code>. The following XQuery:
                        </p>
                        <div class="exampleInner"><pre>let $v1 := "I plan to go to Mu"
let $v2 := "?nchen in September"
return concat($v1, $v2)</pre></div>
                        <p class="note">where the "?" represents either the actual Unicode character COMBINING DIARESIS (Unicode
                           codepoint U+0308) or "&amp;#x0308;", will return:
                        </p>
                        <p class="note">"I plan to go to Mu?nchen in September"</p>
                        <p class="note">where the "?" represents either the actual Unicode character COMBINING DIARESIS (Unicode
                           codepoint U+0308) or "&amp;#x0308;". It is worth noting that the returned value is not
                           normalized in NFC; however, it is normalized in NFD. .
                        </p>
                        <p class="note"> However, the following XQuery:</p>
                        <div class="exampleInner"><pre class="small">let $v1 := "I plan to go to Mu"
let $v2 := "?nchen in September"
return normalize-unicode(concat($v1, $v2))</pre></div>
                        <p class="note">where the "?" represents either the actual Unicode character COMBINING DIARESIS (Unicode
                           codepoint U+0308) or "&amp;#x0308;", will return:
                        </p>
                        <p class="note"> "I plan to go to München in September"</p>
                        <p class="note">This returned result is normalized in NFC.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:concat('un', 'grateful')</code> returns <code>"ungrateful"</code>.
                           </p>
                           <p>The expression <code>fn:concat('Thy ', (), 'old ', "groans", "", ' ring',
                                 ' yet', ' in', ' my', ' ancient',' ears.')</code> returns <code>"Thy old groans ring yet in my ancient ears."</code>.
                           </p>
                           <p>The expression <code>fn:concat('Ciao!',())</code> returns <code>"Ciao!"</code>.
                           </p>
                           <p>The expression <code>fn:concat('Ingratitude, ', 'thou ', 'marble-hearted', ' fiend!')</code> returns <code>"Ingratitude, thou marble-hearted fiend!"</code>.
                           </p>
                           <p>The expression <code>fn:concat(01, 02, 03, 04, true())</code> returns <code>"1234true"</code>.
                           </p>
                           <p>The expression <code>10 || '/' || 6</code> returns <code>"10/6"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-string-join"></a>5.4.2 fn:string-join
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a string created by concatenating the items in a sequence, with a defined
                           separator between adjacent items.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:string-join</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto"><code class="function">fn:string-join</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of calling the single-argument version of this function is the same as
                           calling the two-argument version with <code>$arg2</code> set to a zero-length
                           string.
                        </p>
                        <p>The function returns an <code>xs:string</code> created by <span>casting each item 
                              in the sequence <code>$arg1</code> to an <code>xs:string</code>, 
                              and then concatenating the result strings in order,</span> 
                           using the value of <code>$arg2</code> as a
                           separator between adjacent strings. If the value of <code>$arg2</code> is the zero-length
                           string, then the members of <code>$arg1</code> are concatenated without a separator.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the value of <code>$arg1</code> is the empty sequence, the function returns the
                           zero-length string.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:string-join(1 to 9)</code> returns <code>"123456789"</code>.
                           </p>
                           <p>The expression <code>fn:string-join(('Now', 'is', 'the', 'time', '...'),
                                 ' ')</code> returns <code>"Now is the time ..."</code>.
                           </p>
                           <p>The expression <code>fn:string-join(('Blow, ', 'blow, ', 'thou ', 'winter ', 'wind!'),
                                 '')</code> returns <code>"Blow, blow, thou winter wind!"</code>.
                           </p>
                           <p>The expression <code>fn:string-join((), 'separator')</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code>fn:string-join(1 to 5, ', ')</code> returns <code>"1, 2, 3, 4, 5"</code>.
                           </p>
                           <div class="exampleInner"><pre>let $doc := &lt;doc&gt;
  &lt;chap&gt;
    &lt;section xml:id="xyz"/&gt;
  &lt;/chap&gt;
&lt;/doc&gt;</pre></div>
                           <p>The expression <code>$doc//@xml:id ! fn:string-join((node-name(), '="', ., '"'))</code> returns <code>'xml:id="xyz"'</code>.
                           </p>
                           <p>The expression <code>$doc//section ! fn:string-join(ancestor-or-self::*/name(), '/')</code> returns <code>"doc/chap/section"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-substring"></a>5.4.3 fn:substring
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the portion of the value of <code>$sourceString</code> beginning at the position
                           indicated by the value of <code>$start</code> and continuing for the number of <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> indicated by the value of
                           <code>$length</code>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:substring</code>(<code class="arg">$sourceString</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$start</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:substring</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$sourceString</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$start</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$length</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$sourceString</code> is the empty sequence, the function returns
                           the zero-length string. 
                        </p>
                        <p>Otherwise, the function returns a string comprising those <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> of <code>$sourceString</code> whose index position (counting
                           from one) is greater than or equal to the value of <code>$start</code> (rounded to an
                           integer), and (if <code>$length</code> is specified) less than the sum of
                           <code>$start</code> and <code>$length</code> (both rounded to integers).
                        </p>
                        <p>The characters returned do not extend beyond <code>$sourceString</code>. If
                           <code>$start</code> is zero or negative, only those characters in positions greater
                           than zero are returned.
                        </p>
                        <p>More specifically, the three argument version of the function returns the characters
                           in
                           <code>$sourceString</code> whose position <code>$p</code> satisfies:
                        </p>
                        <p>
                           <code>fn:round($start) &lt;= $p and $p &lt; fn:round($start) + fn:round($length)</code>
                           
                        </p>
                        <p>The two argument version of the function assumes that <code>$length</code> is infinite
                           and thus returns the <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> in
                           <code>$sourceString</code> whose position <code>$p</code> satisfies:
                        </p>
                        <p>
                           <code>fn:round($start) &lt;= $p</code>
                           
                        </p>
                        <p>In the above computations, the rules for <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-less-than"><code>op:numeric-less-than</code></a> and
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-greater-than"><code>op:numeric-greater-than</code></a> apply.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The first character of a string is located at position 1, not position 0.</p>
                        <p class="note">The second and third arguments allow <code>xs:double</code> values (rather than
                           requiring <code>xs:integer</code>) in order to achieve compatibility with XPath 1.0.
                        </p>
                        <p class="note">A surrogate pair counts as one character, not two.</p>
                        <p class="note">The consequences of supplying values such as <code>NaN</code> or positive or negative
                           infinity for the <code>$start</code> or <code>$length</code> arguments follow from the
                           above rules, and are not always intuitive.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:substring("motor car", 6)</code> returns <code>" car"</code>. <em>(Characters starting at position 6 to the end of
                                 <code>$sourceString</code> are selected.)</em></p>
                           <p></p>
                           <p>The expression <code>fn:substring("metadata", 4, 3)</code> returns <code>"ada"</code>. <em>(Characters at positions greater than or equal to 4 and less than 7 are
                                 selected.)</em></p>
                           <p>The expression <code>fn:substring("12345", 1.5, 2.6)</code> returns <code>"234"</code>. <em>(Characters at positions greater than or equal to 2 and less than 5 are
                                 selected.)</em></p>
                           <p>The expression <code>fn:substring("12345", 0, 3)</code> returns <code>"12"</code>. <em>(Characters at positions greater than or equal to 0 and less than 3 are
                                 selected. Since the first position is 1, these are the characters at positions 1
                                 and 2.)</em></p>
                           <p>The expression <code>fn:substring("12345", 5, -3)</code> returns <code>""</code>. <em>(Characters at positions greater than or equal to 5 and less than 2 are
                                 selected.)</em></p>
                           <p>The expression <code>fn:substring("12345", -3, 5)</code> returns <code>"1"</code>. <em>(Characters at positions greater than or equal to -3 and less than 2
                                 are selected. Since the first position is 1, this is the character at position
                                 1.)</em></p>
                           <p>The expression <code>fn:substring("12345", 0 div 0E0, 3)</code> returns <code>""</code>. <em>(Since <code>0 div 0E0</code> returns <code>NaN</code>, and
                                 <code>NaN</code> compared to any other number returns <code>false</code>, no
                                 characters are selected.)</em></p>
                           <p>The expression <code>fn:substring("12345", 1, 0 div 0E0)</code> returns <code>""</code>. <em>(As above.)</em></p>
                           <p>The expression <code>fn:substring((), 1, 3)</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code>fn:substring("12345", -42, 1 div 0E0)</code> returns <code>"12345"</code>. <em>(Characters at positions greater than or equal to -42 and less than
                                 <code>INF</code> are selected.)</em></p>
                           <p>The expression <code>fn:substring("12345", -1 div 0E0, 1 div 0E0)</code> returns <code>""</code>. <em>(Since the value of <code>-INF + INF</code> is <code>NaN</code>, no
                                 characters are selected.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-string-length"></a>5.4.4 fn:string-length
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> in a string.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:string-length</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                        <div class="proto"><code class="function">fn:string-length</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns an <code>xs:integer</code> equal to the length in <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> of the value of <code>$arg</code>.
                        </p>
                        <p>Calling the zero-argument version of the function is equivalent to calling
                           <code>fn:string-length(fn:string(.))</code>.
                        </p>
                        <p>If the value of <code>$arg</code> is the empty sequence, the function returns the
                           <code>xs:integer</code> value zero (0).
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>If <code>$arg</code> is not specified and the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>, a dynamic error is raised: [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Unlike some programming languages, a <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoint<span class="arrow">·</span></a>
                           greater than 65535 counts as one character, not two.
                        </p>
                        <p class="note">There are situations where <code>fn:string-length()</code> has a different effect
                           from <code>fn:string-length(.)</code>. For example, if the context item
                           is an attribute node typed as an <code>xs:integer</code> with the string value <code>000001</code>,
                           then <code>fn:string-length()</code> returns 6 (the length of the string value of the node), while 
                           <code>fn:string-length(.)</code> raises a type error (because the result of atomization
                           is not an <code>xs:string</code>).
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:string-length("Harp not on that string, madam; that is past.")</code> returns <code>45</code>.
                           </p>
                           <p>The expression <code>fn:string-length(())</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-normalize-space"></a>5.4.5 fn:normalize-space
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value of <code>$arg</code> with leading and trailing whitespace removed, and
                           sequences of internal whitespace reduced to a single space character.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:normalize-space</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto"><code class="function">fn:normalize-space</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is the empty sequence, the function returns the
                           zero-length string.
                        </p>
                        <p>The function returns a string constructed by stripping leading and trailing whitespace
                           from the value of <code>$arg</code>, and replacing sequences of one or more adjacent
                           whitespace characters with a single space, <code>#x20</code>.
                        </p>
                        <p>The whitespace characters are defined in the metasymbol S (Production 3) of <a href="https://www.w3.org/TR/xpath-functions-31/#xml">[Extensible Markup Language (XML) 1.0 (Fifth Edition)]</a>.
                        </p>
                        <p>If no argument is supplied, then <code>$arg</code> defaults to the string value
                           (calculated using <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a>) of the context item (<code>.</code>). 
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>If no argument is supplied and the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup> then a dynamic error is raised: [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The definition of whitespace is unchanged in <a href="https://www.w3.org/TR/xpath-functions-31/#xml11">[Extensible Markup Language (XML) 1.1 Recommendation]</a>. It is repeated here
                           for convenience:
                        </p>
                        <p class="note"><code>S ::= (#x20 | #x9 | #xD | #xA)+</code></p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:normalize-space("&nbsp;The&nbsp;&nbsp;&nbsp;&nbsp;wealthy&nbsp;curled&nbsp;darlings
                                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;&nbsp;&nbsp;&nbsp;our&nbsp;&nbsp;&nbsp;&nbsp;nation.&nbsp;")</code> returns <code>"The wealthy curled darlings of our nation."</code>.
                           </p>
                           <p>The expression <code>fn:normalize-space(())</code> returns <code>""</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-normalize-unicode"></a>5.4.6 fn:normalize-unicode
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value of <code>$arg</code> after applying Unicode normalization.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:normalize-unicode</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:normalize-unicode</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$normalizationForm</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is the empty sequence, the function returns the
                           zero-length string.
                        </p>
                        <p>If the single-argument version of the function is used, the result is the same as
                           calling the two-argument version with <code>$normalizationForm</code> set to the string
                           "NFC".
                        </p>
                        <p>Otherwise, the function returns the value of <code>$arg</code> normalized according to
                           the rules of the normalization form identified by the value of
                           <code>$normalizationForm</code>.
                        </p>
                        <p>The effective value of <code>$normalizationForm</code> is the value of the expression
                           <code>fn:upper-case(fn:normalize-space($normalizationForm))</code>.
                        </p>
                        <ul>
                           <li>
                              <p>If the effective value of <code>$normalizationForm</code> is "NFC",
                                 then the function returns the value of <code>$arg</code> converted to Unicode
                                 Normalization Form C (NFC).
                              </p>
                           </li>
                           <li>
                              <p>If the effective value of <code>$normalizationForm</code> is "NFD",
                                 then the function returns the value of <code>$arg</code> converted to Unicode
                                 Normalization Form D (NFD).
                              </p>
                           </li>
                           <li>
                              <p>If the effective value of <code>$normalizationForm</code> is "NFKC",
                                 then the function returns the value of <code>$arg</code> in Unicode Normalization
                                 Form KC (NFKC).
                              </p>
                           </li>
                           <li>
                              <p>If the effective value of <code>$normalizationForm</code> is "NFKD",
                                 then the function returns the value of <code>$arg</code> converted to Unicode
                                 Normalization Form KD (NFKD).
                              </p>
                           </li>
                           <li>
                              <p>If the effective value of <code>$normalizationForm</code> is
                                 "FULLY-NORMALIZED", then the function returns the value of
                                 <code>$arg</code> converted to fully normalized form. 
                              </p>
                           </li>
                           <li>
                              <p>If the effective value of <code>$normalizationForm</code> is the zero-length
                                 string, no normalization is performed and <code>$arg</code> is returned.
                              </p>
                           </li>
                        </ul>
                        <p>Normalization forms NFC, NFD, NFKC, and NFKD, and the algorithms to be used for
                           converting a string to each of these forms, are defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR15">[UAX #15]</a>.
                        </p>
                        <p>The motivation for normalization form FULLY-NORMALIZED is explained in <a href="https://www.w3.org/TR/xpath-functions-31/#charmod-normalization">[Character Model for the World Wide Web 1.0: Normalization]</a>. However, as that specification did not progress beyond
                           working draft status, the normative specification is as follows:
                        </p>
                        <ul>
                           <li>
                              <p>A string is <b>fully-normalized</b> if (a) it is in normalization form NFC
                                 as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR15">[UAX #15]</a>, and (b) it does not start
                                 with a composing character.
                              </p>
                           </li>
                           <li>
                              <p>A composing character is a character that is one or both of the following:</p>
                              <ul>
                                 <li>
                                    <p>the second character in the canonical decomposition mapping of some
                                       character that is not listed in the Composition Exclusion Table defined in
                                       <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR15">[UAX #15]</a>;
                                    </p>
                                 </li>
                                 <li>
                                    <p>of non-zero canonical combining class (as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>).
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>A string is converted to FULLY-NORMALIZED form as follows:</p>
                              <ul>
                                 <li>
                                    <p>if the first character in the string is a composing character, prepend a
                                       single space (x20);
                                    </p>
                                 </li>
                                 <li>
                                    <p>convert the resulting string to normalization form NFC.</p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                        <p>Conforming implementations <span class="verb">must</span> support normalization form "NFC" and
                           <span class="verb">may</span> support normalization forms "NFD", "NFKC", "NFKD", and
                           "FULLY-NORMALIZED". They <span class="verb">may</span> also support other normalization forms
                           with <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> semantics. 
                        </p>
                        <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which
                           version of Unicode (and therefore, of the normalization algorithms and their underlying
                           data) is supported by the implementation. See <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR15">[UAX #15]</a> for
                           details of the stability policy regarding changes to the normalization rules in future
                           versions of Unicode. If the input string contains codepoints that are unassigned in
                           the
                           relevant version of Unicode, or for which no normalization rules are defined, the
                           <code>fn:normalize-unicode</code> function leaves such codepoints unchanged. If the
                           implementation supports the requested normalization form then it <span class="verb">must</span>
                           be able to handle every input string without raising an error.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A <span>dynamic</span> error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0003" title="err:FOCH0003">err:FOCH0003</a>] if the
                           effective value of the <code>$normalizationForm</code> argument is not one of the values
                           supported by the implementation.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-upper-case"></a>5.4.7 fn:upper-case
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Converts a string to upper case.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:upper-case</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is the empty sequence, the zero-length string is
                           returned.
                        </p>
                        <p>Otherwise, the function returns the value of <code>$arg</code> after translating every
                           <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> to its upper-case correspondent as
                           defined in the appropriate case mappings section in the Unicode standard <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>. For versions of Unicode beginning with the 2.1.8 update, only
                           locale-insensitive case mappings should be applied. Beginning with version 3.2.0 (and
                           likely future versions) of Unicode, precise mappings are described in default case
                           operations, which are full case mappings in the absence of tailoring for particular
                           languages and environments. Every lower-case character that does not have an upper-case
                           correspondent, as well as every upper-case character, is included in the returned
                           value
                           in its original form. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Case mappings may change the length of a string. In general, the
                           <code>fn:upper-case</code> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-lower-case"><code>fn:lower-case</code></a> functions are not inverses
                           of each other: <code>fn:lower-case(fn:upper-case($arg))</code> is not guaranteed to
                           return <code>$arg</code>, nor is <code>fn:upper-case(fn:lower-case($arg))</code>. The
                           Latin small letter dotless i (as used in Turkish) is perhaps the most prominent
                           lower-case letter which will not round-trip. The Latin capital letter i with dot above
                           is the most prominent upper-case letter which will not round trip; there are others,
                           such as Latin capital letter Sharp S (#1E9E) which was introduced in Unicode 5.1.
                        </p>
                        <p class="note"> These functions may not always be linguistically appropriate (e.g. Turkish i without
                           dot) or appropriate for the application (e.g. titlecase). In cases such as Turkish,
                           a
                           simple translation should be used first.
                        </p>
                        <p class="note"> Because the function is not sensitive to locale, results will not always match user
                           expectations. In Quebec, for example, the standard uppercase equivalent of "è" is
                           "È",
                           while in metropolitan France it is more commonly "E"; only one of these is supported
                           by
                           the functions as defined.
                        </p>
                        <p class="note"> Many characters of class Ll lack uppercase equivalents in the Unicode case mapping
                           tables; many characters of class Lu lack lowercase equivalents.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:upper-case("abCd0")</code> returns <code>"ABCD0"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-lower-case"></a>5.4.8 fn:lower-case
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Converts a string to lower case.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:lower-case</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is the empty sequence, the zero-length string is
                           returned.
                        </p>
                        <p>Otherwise, the function returns the value of <code>$arg</code> after translating every
                           <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> to its lower-case correspondent as
                           defined in the appropriate case mappings section in the Unicode standard <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>. For versions of Unicode beginning with the 2.1.8 update, only
                           locale-insensitive case mappings should be applied. Beginning with version 3.2.0 (and
                           likely future versions) of Unicode, precise mappings are described in default case
                           operations, which are full case mappings in the absence of tailoring for particular
                           languages and environments. Every upper-case character that does not have a lower-case
                           correspondent, as well as every lower-case character, is included in the returned
                           value
                           in its original form. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Case mappings may change the length of a string. In general, the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-upper-case"><code>fn:upper-case</code></a> and <code>fn:lower-case</code> functions are not inverses
                           of each other: <code>fn:lower-case(fn:upper-case($arg))</code> is not guaranteed to
                           return <code>$arg</code>, nor is <code>fn:upper-case(fn:lower-case($arg))</code>. The
                           Latin small letter dotless i (as used in Turkish) is perhaps the most prominent
                           lower-case letter which will not round-trip. The Latin capital letter i with dot above
                           is the most prominent upper-case letter which will not round trip; there are others,
                           such as Latin capital letter Sharp S (#1E9E) which was introduced in Unicode 5.1.
                        </p>
                        <p class="note"> These functions may not always be linguistically appropriate (e.g. Turkish i without
                           dot) or appropriate for the application (e.g. titlecase). In cases such as Turkish,
                           a
                           simple translation should be used first.
                        </p>
                        <p class="note"> Because the function is not sensitive to locale, results will not always match user
                           expectations. In Quebec, for example, the standard uppercase equivalent of "è" is
                           "È",
                           while in metropolitan France it is more commonly "E"; only one of these is supported
                           by
                           the functions as defined.
                        </p>
                        <p class="note"> Many characters of class Ll lack uppercase equivalents in the Unicode case mapping
                           tables; many characters of class Lu lack lowercase equivalents.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:lower-case("ABc!D")</code> returns <code>"abc!d"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-translate"></a>5.4.9 fn:translate
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value of <code>$arg</code> modified by replacing or removing individual
                           characters. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:translate</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$mapString</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$transString</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is the empty sequence, the function returns the
                           zero-length string.
                        </p>
                        <p>Otherwise, the function returns a result string constructed by processing each <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> in the value of <code>$arg</code>, in order,
                           according to the following rules:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>If the character does not appear in the value of <code>$mapString</code> then it
                                 is added to the result string unchanged.
                              </p>
                           </li>
                           <li>
                              <p>If the character first appears in the value of <code>$mapString</code> at some
                                 position <em>M</em>, where the value of <code>$transString</code> is
                                 <em>M</em> or more characters in length, then the character at position
                                 <em>M</em> in <code>$transString</code> is added to the result string.
                              </p>
                           </li>
                           <li>
                              <p>If the character first appears in the value of <code>$mapString</code> at some
                                 position <em>M</em>, where the value of <code>$transString</code> is less than
                                 <em>M</em> characters in length, then the character is omitted from the
                                 result string.
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$mapString</code> is the zero-length string then the function returns
                           <code>$arg</code> unchanged.
                        </p>
                        <p class="note">If a character occurs more than once in <code>$mapString</code>, then the first
                           occurrence determines the action taken.
                        </p>
                        <p class="note">If <code>$transString</code> is longer than <code>$mapString</code>, the excess
                           characters are ignored.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:translate("bar","abc","ABC")</code> returns <code>"BAr"</code>.
                           </p>
                           <p>The expression <code>fn:translate("--aaa--","abc-","ABC")</code> returns <code>"AAA"</code>.
                           </p>
                           <p>The expression <code>fn:translate("abcdabc", "abc", "AB")</code> returns <code>"ABdAB"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="substring.functions"></a>5.5 Functions based on substring matching
               </h3>
               <p>The functions described in the section examine a string <code>$arg1</code> to see
                  whether it contains another string <code>$arg2</code> as a substring. The result
                  depends on whether <code>$arg2</code> is a substring of <code>$arg1</code>, and
                  if so, on the range of <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> in <code>$arg1</code> which <code>$arg2</code> matches.
               </p>
               <p>When the <a title="Unicode codepoint collation" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-codepoint-collation"><span class="arrow">·</span>Unicode codepoint collation<span class="arrow">·</span></a>
                  is used, this simply involves determining whether <code>$arg1</code> contains a
                  contiguous sequence of characters whose <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a> are the same, one for one,
                  with the codepoints of the characters in <code>$arg2</code>.
               </p>
               <p>When a collation is specified, the rules are more complex.</p>
               <p>All collations support the capability of deciding whether two <a title="string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#string"><span class="arrow">·</span>strings<span class="arrow">·</span></a> are
                  considered equal, and if not, which of the strings should be regarded as
                  preceding the other. For functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-compare"><code>fn:compare</code></a>, this is
                  all that is required. For other functions, such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-contains"><code>fn:contains</code></a>,
                  the collation needs to support an additional property: it must be able to
                  decompose the string into a sequence of collation units, each unit consisting of
                  one or more characters, such that two strings can be compared by pairwise
                  comparison of these units. ("collation unit" is equivalent to "collation
                  element" as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.) The string
                  <code>$arg1</code> is then considered to contain <code>$arg2</code> as a
                  substring if the sequence of collation units corresponding to <code>$arg2</code>
                  is a subsequence of the sequence of the collation units corresponding to
                  <code>$arg1</code>. The characters in <code>$arg1</code> that match are the
                  characters corresponding to these collation units.
               </p>
               <p>This rule may occasionally lead to surprises. For example, consider a collation
                  that treats "Jaeger" and "Jäger" as equal. It might do this by
                  treating "ä" as representing two collation units, in which case the
                  expression <code>fn:contains("Jäger", "eg")</code> will return
                  <code>true</code>. Alternatively, a collation might treat "ae" as a single
                  collation unit, in which case the expression <code>fn:contains("Jaeger",
                     "eg")</code> will return <code>false</code>. The results of these functions thus
                  depend strongly on the properties of the collation that is used.
               </p>
               <p>In addition,
                  collations may specify that some collation units should be ignored during matching.
                  If hyphen is an ignored
                  					collation unit, then <code>fn:contains("code-point", "codepoint")</code> will be true, 
                  					and <code>fn:contains("codepoint", "-")</code> will also be true.
               </p>
               <p> In the definitions below, we refer to the terms <b>match</b> and
                  <b>minimal match</b> as defined in definitions DS2 and DS4 of 
                  <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. In applying these definitions:
               </p>
               <ul>
                  <li>
                     <p>
                        <var>C</var> is the collation; that is, the value of the <code>$collation</code>
                        argument if specified, otherwise the default collation.
                     </p>
                  </li>
                  <li>
                     <p>
                        <var>P</var> is the (candidate) substring <code>$arg2</code>
                        
                     </p>
                  </li>
                  <li>
                     <p>
                        <var>Q</var> is the (candidate) containing string <code>$arg1</code>
                        
                     </p>
                  </li>
                  <li>
                     <p>The boundary condition <var>B</var> is satisfied at the start and end of a
                        string, and between any two characters that belong to different collation units
                        ("collation elements" in the language of <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>). It
                        is not satisfied between two characters that belong to the same collation unit.
                     </p>
                  </li>
               </ul>
               <p>It is possible to define collations that do not have the ability to decompose a
                  string into units suitable for substring matching. An argument to a function
                  defined in this section may be a URI that identifies a collation that is able to
                  compare two strings, but that does not have the capability to split the string
                  into collation units. Such a collation may cause the function to fail, or to
                  give unexpected results or it may be rejected as an unsuitable argument. The
                  ability to decompose strings into collation units is an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> property of the collation.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-contains"><code>fn:contains</code></a></td>
                        <td>Returns true if the string <code>$arg1</code> contains <code>$arg2</code> as a
                           substring, taking collations into account.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-starts-with"><code>fn:starts-with</code></a></td>
                        <td>Returns true if the string <code>$arg1</code> contains <code>$arg2</code> as a leading
                           substring, taking collations into account.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-ends-with"><code>fn:ends-with</code></a></td>
                        <td>Returns true if the string <code>$arg1</code> contains <code>$arg2</code> as a trailing
                           substring, taking collations into account.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-substring-before"><code>fn:substring-before</code></a></td>
                        <td>Returns the part of <code>$arg1</code> that precedes the first occurrence of
                           <code>$arg2</code>, taking collations into account.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-substring-after"><code>fn:substring-after</code></a></td>
                        <td>Returns the part of <code>$arg1</code> that follows the first occurrence of
                           <code>$arg2</code>, taking collations into account.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-contains"></a>5.5.1 fn:contains
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the string <code>$arg1</code> contains <code>$arg2</code> as a
                           substring, taking collations into account.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:contains</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:contains</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg1</code> or <code>$arg2</code> is the empty sequence, or
                           contains only ignorable collation units, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>If the value of <code>$arg2</code> is the zero-length string, then the function returns
                           <code>true</code>.
                        </p>
                        <p>If the value of <code>$arg1</code> is the zero-length string, the function returns
                           <code>false</code>.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns an <code>xs:boolean</code> indicating whether or not the value of
                           <code>$arg1</code> contains (at the beginning, at the end, or anywhere within) at
                           least one sequence of collation units that provides a <b>minimal match</b> to the
                           collation units in the value of <code>$arg2</code>, according to the collation that is
                           used.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p><b>Minimal match</b> is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. 
                           </p>
                        </div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A <span>dynamic</span> error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0004" title="err:FOCH0004">err:FOCH0004</a>] if the specified collation does not support collation units.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The collation used in these examples, <code>http://example.com/CollationA</code> is a
                              collation in which both "-" and "*" are ignorable collation units.
                           </p>
                           <p>"Ignorable collation unit" is equivalent to "ignorable collation element" in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.
                           </p>
                           <p>The expression <code>fn:contains ( "tattoo", "t")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:contains ( "tattoo", "ttt")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:contains ( "", ())</code> returns <code>true()</code>. <em>(The first rule is applied, followed by the second
                                 rule.)</em></p>
                           <p>The expression <code>fn:contains ( "abcdefghi", "-d-e-f-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:contains ( "a*b*c*d*e*f*g*h*i*", "d-ef-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:contains ( "abcd***e---f*--*ghi", "def",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:contains ( (), "--***-*---",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>. <em>(The second argument contains only ignorable collation units and is
                                 equivalent to the zero-length string.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-starts-with"></a>5.5.2 fn:starts-with
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the string <code>$arg1</code> contains <code>$arg2</code> as a leading
                           substring, taking collations into account.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:starts-with</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:starts-with</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg1</code> or <code>$arg2</code> is the empty sequence, or
                           contains only ignorable collation units, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>If the value of <code>$arg2</code> is the zero-length string, then the function returns
                           <code>true</code>. If the value of <code>$arg1</code> is the zero-length string and
                           the value of <code>$arg2</code> is not the zero-length string, then the function returns
                           <code>false</code>.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns an <code>xs:boolean</code> indicating whether or not the value of
                           <code>$arg1</code> starts with a sequence of collation units that provides a
                           <b>match</b> to the collation units of <code>$arg2</code> according to the
                           collation that is used.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p><b>Match</b> is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.
                           </p>
                        </div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A <span>dynamic</span> error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0004" title="err:FOCH0004">err:FOCH0004</a>] if the specified collation does not support collation units.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The collation used in these examples, <code>http://example.com/CollationA</code> is a
                              collation in which both "-" and "*" are ignorable collation units.
                           </p>
                           <p>"Ignorable collation unit" is equivalent to "ignorable collation element" in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.
                           </p>
                           <p>The expression <code>fn:starts-with("tattoo", "tat")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:starts-with ( "tattoo", "att")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:starts-with ((), ())</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:starts-with ( "abcdefghi", "-a-b-c-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:starts-with ( "a*b*c*d*e*f*g*h*i*", "a-bc-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:starts-with ( "abcd***e---f*--*ghi", "abcdef",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:starts-with ( (), "--***-*---",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>. <em>(The second argument contains only ignorable collation units and is
                                 equivalent to the zero-length string.)</em></p>
                           <p>The expression <code>fn:starts-with ( "-abcdefghi", "-abc",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-ends-with"></a>5.5.3 fn:ends-with
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the string <code>$arg1</code> contains <code>$arg2</code> as a trailing
                           substring, taking collations into account.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:ends-with</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:ends-with</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg1</code> or <code>$arg2</code> is the empty sequence, or
                           contains only ignorable collation units, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>If the value of <code>$arg2</code> is the zero-length string, then the function returns
                           <code>true</code>. If the value of <code>$arg1</code> is the zero-length string and
                           the value of <code>$arg2</code> is not the zero-length string, then the function returns
                           <code>false</code>.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns an <code>xs:boolean</code> indicating whether or not the value of
                           <code>$arg1</code> <span>ends</span> with a sequence of collation units that provides a
                           <b>match</b> to the collation units of <code>$arg2</code> according to the
                           collation that is used.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>
                              <b>Match</b> is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. 
                           </p>
                        </div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A <span>dynamic</span> error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0004" title="err:FOCH0004">err:FOCH0004</a>] if the specified collation does not support collation units.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The collation used in these examples, <code>http://example.com/CollationA</code> is a
                              collation in which both "-" and "*" are ignorable collation units.
                           </p>
                           <p>"Ignorable collation unit" is equivalent to "ignorable collation element" in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.
                           </p>
                           <p>The expression <code>fn:ends-with ( "tattoo", "tattoo")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:ends-with ( "tattoo", "atto")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:ends-with ((), ())</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:ends-with ( "abcdefghi", "-g-h-i-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:ends-with ( "abcd***e---f*--*ghi", "defghi",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:ends-with ( "abcd***e---f*--*ghi", "defghi",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:ends-with ( (), "--***-*---",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>. <em>(The second argument contains only ignorable collation units and is
                                 equivalent to the zero-length string.)</em></p>
                           <p>The expression <code>fn:ends-with ( "abcdefghi", "ghi-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-substring-before"></a>5.5.4 fn:substring-before
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the part of <code>$arg1</code> that precedes the first occurrence of
                           <code>$arg2</code>, taking collations into account.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:substring-before</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:substring-before</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p> If the value of <code>$arg1</code> or <code>$arg2</code> is the empty sequence, or
                           contains only ignorable collation units, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>If the value of <code>$arg2</code> is the zero-length string, then the function returns
                           the zero-length string. 
                        </p>
                        <p>If the value of <code>$arg1</code> does not contain a string that is equal to the value
                           of <code>$arg2</code>, then the function returns the zero-length string. 
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns the substring of the value of <code>$arg1</code> that precedes in
                           the value of <code>$arg1</code> the first occurrence of a sequence of collation units
                           that provides a <b>minimal match</b> to the collation units of <code>$arg2</code>
                           according to the collation that is used.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p><b>Minimal match</b> is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. 
                           </p>
                        </div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A <span>dynamic</span> error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0004" title="err:FOCH0004">err:FOCH0004</a>] if the specified collation does not support collation units.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The collation used in these examples, <code>http://example.com/CollationA</code> is a
                              collation in which both "-" and "*" are ignorable collation units.
                           </p>
                           <p>"Ignorable collation unit" is equivalent to "ignorable collation element" in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.
                           </p>
                           <p>The expression <code>fn:substring-before ( "tattoo", "attoo")</code> returns <code>"t"</code>.
                           </p>
                           <p>The expression <code>fn:substring-before ( "tattoo", "tatto")</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code>fn:substring-before ((), ())</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code>fn:substring-before ( "abcdefghi", "--d-e-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"abc"</code>.
                           </p>
                           <p>The expression <code>fn:substring-before ( "abc--d-e-fghi", "--d-e-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"abc--"</code>.
                           </p>
                           <p>The expression <code>fn:substring-before ( "a*b*c*d*e*f*g*h*i*", "***cde",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"a*b*"</code>.
                           </p>
                           <p>The expression <code>fn:substring-before ( "Eureka!", "--***-*---",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>""</code>. <em>(The second argument contains only ignorable collation units and is
                                 equivalent to the zero-length string.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-substring-after"></a>5.5.5 fn:substring-after
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the part of <code>$arg1</code> that follows the first occurrence of
                           <code>$arg2</code>, taking collations into account.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:substring-after</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:substring-after</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg1</code> or <code>$arg2</code> is the empty sequence, or
                           contains only ignorable collation units, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>If the value of <code>$arg2</code> is the zero-length string, then the function returns
                           the value of <code>$arg1</code>.
                        </p>
                        <p>If the value of <code>$arg1</code> does not contain a string that is equal to the value
                           of <code>$arg2</code>, then the function returns the zero-length string. 
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns the substring of the value of <code>$arg1</code> that follows in
                           the value of <code>$arg1</code> the first occurrence of a sequence of collation units
                           that provides a <b>minimal match</b> to the collation units of <code>$arg2</code>
                           according to the collation that is used. 
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p><b>Minimal match</b> is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>. 
                           </p>
                        </div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCH0004" title="err:FOCH0004">err:FOCH0004</a>] if
                           the specified collation does not support collation units.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The collation used in these examples, <code>http://example.com/CollationA</code> is a
                              collation in which both "-" and "*" are ignorable collation units.
                           </p>
                           <p>"Ignorable collation unit" is equivalent to "ignorable collation element" in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">[UTS #10]</a>.
                           </p>
                           <p>The expression <code>fn:substring-after("tattoo", "tat")</code> returns <code>"too"</code>.
                           </p>
                           <p>The expression <code>fn:substring-after("tattoo", "tattoo")</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code>fn:substring-after((), ())</code> returns <code>""</code>.
                           </p>
                           <p>The expression <code> fn:substring-after("abcdefghi", "--d-e-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"fghi"</code>.
                           </p>
                           <p>The expression <code>fn:substring-after("abc--d-e-fghi", "--d-e-",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"-fghi"</code>.
                           </p>
                           <p>The expression <code>fn:substring-after ( "a*b*c*d*e*f*g*h*i*", "***cde***",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"*f*g*h*i*"</code>.
                           </p>
                           <p>The expression <code>fn:substring-after ( "Eureka!", "--***-*---",
                                 "http://www.w3.org/2013/collation/UCA?lang=en;alternate=blanked;strength=primary")</code> returns <code>"Eureka!"</code>. <em>(The second argument contains only ignorable collation units and is
                                 equivalent to the zero-length string.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="string.match"></a>5.6 String functions that use regular expressions
               </h3>
               <p>The three functions described in this section make use of a regular expression
                  syntax for pattern matching. This is described below.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a></td>
                        <td>Returns true if the supplied string matches a given regular expression.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a></td>
                        <td>Returns a string produced from the input string by replacing any substrings that match
                           a
                           given regular expression with a supplied replacement string.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-tokenize"><code>fn:tokenize</code></a></td>
                        <td>Returns a sequence of strings constructed by splitting the input wherever a separator
                           is
                           found; the separator is any substring that matches a given regular expression.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><code>fn:analyze-string</code></a></td>
                        <td>Analyzes a string using a regular expression, returning an XML structure that identifies
                           which parts of the input string matched or failed to match the regular expression,
                           and
                           in the case of matched substrings, which substrings matched each capturing group in
                           the
                           regular expression.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="regex-syntax"></a>5.6.1 Regular expression syntax
                  </h4>
                  <p>The regular expression syntax used by these functions is defined in terms of
                     the regular expression syntax specified in XML Schema (see <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>), which in turn is based on the established conventions of
                     languages such as Perl. However, because XML Schema uses regular expressions
                     only for validity checking, it omits some facilities that are widely-used
                     with languages such as Perl. This section, therefore, describes extensions
                     to the XML Schema regular expressions syntax that reinstate these capabilities.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>
                        It is recommended that implementers consult <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR18">[UTS #18]</a> for information on using regular expression processing on Unicode characters.
                     </p>
                  </div>
                  <p>The regular expression syntax and semantics are identical to those
                     defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> with the additions described in the 
                     following sub-sections.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>In <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a> there are no substantive technical changes
                        to the syntax or semantics of regular expressions relative to XSD 1.0, but a number
                        of errors and ambiguities have been resolved. For example, the rules for the 
                        interpretation of hyphens within square brackets in a regular expression have been
                        
                        clarified; and the semantics of regular expressions are no longer tied to a specific
                        
                        version of Unicode.
                     </p>
                     <p>Implementers, even in cases where XSD 1.1 is not supported, are advised to consult
                        the XSD 1.1 regular expression specification for guidance on how to handle cases where
                        the XSD 1.0 specification is unclear or inconsistent.
                     </p>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="matching-start-and-end"></a>5.6.1.1 Matching the Start and End of the String
                     </h5>
                     <p> Two meta-characters, <code>^</code> and <code>$</code> are
                        added. By default, the meta-character <code>^</code> matches the
                        start of the entire string, while <code>$</code> matches the end
                        of the entire string. In multi-line mode, <code>^</code> matches
                        the start of any line (that is, the start of the entire string,
                        and the position immediately after a newline character), while
                        <code>$</code> matches the end of any line (that is, the end of
                        the entire string, and the position immediately before a newline
                        character). Newline here means the character <code>#x0A</code> only.
                     </p>
                     <p>This means that the production in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>:
                     </p>
                     <p><code>[10] Char ::= [^.\?*+()|#x5B#x5D]</code>
                        
                     </p>
                     <p>is modified to read:</p>
                     <p><code>[10] Char ::= [^.\?*+{}()|^$#x5B#x5D]</code>
                        
                     </p>
                     <p>The XSD 1.1 grammar for regular expressions uses the same
                        production rule, but renumbered and renamed <code>[73] NormalChar</code>; it
                        is affected in the same way.
                     </p>
                     <p>The characters <code>#x5B</code> and <code>#x5D</code> correspond
                        to "<code>[</code>" and "<code>]</code>" respectively.
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>The definition of Char (production [10]) in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> has a known error in which it omits the left brace ("{") and right brace ("}"). 
                           That error is corrected here.
                        </p>
                     </div>
                     <p>The following production:</p>
                     <p><code>[11] charClass ::= charClassEsc | charClassExpr | WildCardEsc</code>
                        
                     </p>
                     <p>is modified to read:</p>
                     <p><code>[11] charClass ::= charClassEsc | charClassExpr |
                           WildCardEsc | "^" | "$"</code>
                        
                     </p>
                     <p>Using XSD 1.1 as the baseline the equivalent is to change
                        the production:
                     </p>
                     <p><code>[74] charClass ::= SingleCharEsc | charClassEsc | charClassExpr | WildCardEsc</code>
                        
                     </p>
                     <p>to read:</p>
                     <p><code>[74] charClass ::= SingleCharEsc | charClassEsc | charClassExpr |
                           WildCardEsc | "^" | "$"</code>
                        
                     </p>
                     <p>Single character escapes are extended to allow the
                        <code>$</code> character to be escaped. The following production
                        is changed:
                     </p>
                     <p>
                        <code>[24]SingleCharEsc ::= '\' [nrt\|.?*+(){}#x2D#x5B#x5D#x5E]</code>
                        
                     </p>
                     <p>to</p>
                     <p>
                        <code>[24]SingleCharEsc ::= '\' [nrt\|.?*+(){}$#x2D#x5B#x5D#x5E]</code>
                        
                     </p>
                     <p>(In the XSD 1.1 version of the regular expression grammar, the production rule
                        for <code>SingleCharEsc</code> is unchanged, but is renumbered [84])
                     </p>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="reluctant-quantifiers"></a>5.6.1.2 Reluctant Quantifiers
                     </h5>
                     <p><em>Reluctant quantifiers</em> are supported. They are
                        indicated by a 
                        <code>?</code>
                        following a quantifier. Specifically:
                     </p>
                     <ul>
                        <li>
                           <p><code>X??</code> matches X, once or not at all
                           </p>
                        </li>
                        <li>
                           <p><code>X*?</code> matches X, zero or more times
                           </p>
                        </li>
                        <li>
                           <p><code>X+?</code> matches X, one or more times
                           </p>
                        </li>
                        <li>
                           <p><code>X{n}?</code> matches X, exactly n times
                           </p>
                        </li>
                        <li>
                           <p><code>X{n,}?</code> matches X, at least n times
                           </p>
                        </li>
                        <li>
                           <p><code>X{n,m}?</code> matches X, at least n times, but
                              not more than m times
                           </p>
                        </li>
                     </ul>
                     <p>The effect of these quantifiers is that the regular expression
                        matches the <em>shortest</em> possible substring consistent
                        with the match as a whole succeeding. Without the 
                        <code>?</code>
                        , the regular expression matches the
                        <em>longest</em> possible substring.
                     </p>
                     <p>To achieve this, the production in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>:
                     </p>
                     <p><code>[4] quantifier ::= [?*+] | ( '{' quantity '}' )</code>
                        
                     </p>
                     <p>is changed to:</p>
                     <p><code>[4] quantifier ::= ( [?*+] | ( '{' quantity '}' ) ) '?'?</code>
                        
                     </p>
                     <p>(In the XSD 1.1 version of the regular expression grammar,
                        this rule is unchanged, but is renumbered [67])
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>Reluctant quantifiers have no effect on the results of the
                           boolean <a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a> function, since this
                           function is only interested in discovering whether a match
                           exists, and not where it exists.
                        </p>
                     </div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="captured-subexpressions"></a>5.6.1.3 Captured Sub-Expressions
                     </h5>
                     <p>Sub-expressions (groups) within the regular expression are
                        recognized. The regular expression syntax defined by <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> 
                        						      allows a regular expression to contain parenthesized sub-expressions,
                        but attaches no special
                        significance to them. Some operations associated with regular expressions (for example,
                        back-references, and the <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> function) allow access to the parts of the
                        input string that matched a sub-expression (called captured substrings).
                     </p>
                     <p><span class="termdef"><a id="dt-capturing-subexpression"></a>[Definition]  A 
                           left parenthesis is recognized as a capturing left parenthesis provided 
                           it is not immediately followed by <code>?:</code> (see below), is not within a character group (square brackets), 
                           and is not escaped with a backslash. The sub-expression enclosed by a capturing left
                           
                           parenthesis and its matching right parenthesis is referred to as a <b>capturing sub-expression</b>.</span></p>
                     <p>More specifically, the <a title="capturing sub-expression" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-capturing-subexpression"><span class="arrow">·</span>capturing sub-expression<span class="arrow">·</span></a> 
                        enclosed by the <var>N</var>th capturing left parenthesis within the regular expression (determined by
                        its character position in left-to-right order, and
                        counting from one) is referred to as the <var>N</var>th capturing sub-expression.
                        
                     </p>
                     <p>For example, in the regular expression <code>A(BC(?:D(EF(GH[()]))))</code>, the string matched
                        by the sub-expression <code>BC(?:D(EF(GH[()])))</code> is capturing sub-expression 1, the string
                        matched by <code>EF(GH[()])</code> is capturing sub-expression 2, and the string matched by
                        <code>GH[()]</code> is capturing sub-expression 3.
                        
                     </p>
                     <p>When, in the course of evaluating a regular expression, a particular substring of
                        the input
                        matches a capturing sub-expression, that substring becomes available as a <b>captured substring</b>.
                        The string matched by the <var>N</var>th capturing sub-expression is referred to as the 
                        <var>N</var>th captured substring. By convention, the substring captured by the entire
                        regular expression is treated as captured substring 0 (zero).
                     </p>
                     <p>When a <a title="capturing sub-expression" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-capturing-subexpression"><span class="arrow">·</span>capturing sub-expression<span class="arrow">·</span></a> is matched
                        more than once (because it is within a construct that allows repetition), then
                        only the last substring that it matched will be captured. Note that this rule
                        is not sufficient in all cases to ensure an unambiguous result, especially in
                        cases where (a) the regular expression contains nested repeating constructs,
                        and/or (b) the repeating construct matches a zero-length string. In such cases
                        it is implementation-dependent which substring is captured. For example given
                        the regular expression <code>(a*)+</code> and the input string <code>"aaaa"</code>, an implementation
                        might legitimately capture either <code>"aaaa"</code> or a zero length string as the content
                        of the captured subgroup.
                     </p>
                     <p>Parentheses that are required to group terms within the regular expression, but which
                        are
                        not required for capturing of substrings, can be represented using
                        the syntax <code>(?:xxxx)</code>. To achieve this, the production rule for <code>atom</code>
                        in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> is changed to replace the alternative:
                     </p>
                     <p><code>( '(' regExp ')' )</code>
                        
                     </p>
                     <p>with:</p>
                     <p><code>( '(' '?:'? regExp ')' )</code>
                        
                     </p>
                     <p>(For the new versions of the XSD 1.0 and XSD 1.1 production rules for
                        <code>atom</code>, see below.)
                     </p>
                     <p><span>In the absence of back-references (see below), </span>
                        the presence of the optional <code>?:</code> has no effect on the set of strings
                        that match the regular expression, but causes the left parenthesis not to be counted
                        by operations (such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> and back-references) that number the capturing sub-expressions 
                        within a regular expression.
                     </p>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="back-references"></a>5.6.1.4 Back-References
                     </h5>
                     <p> Back-references are allowed 
                        			    outside a character class expression. 
                        				A back-reference is an additional kind of atom.
                        				The construct <code>\N</code> where
                        <code>N</code> is a single digit is always recognized as a
                        back-reference; if this is followed by further digits, these
                        digits are taken to be part of the back-reference if and only if
                        the resulting number <var>NN</var> is such that
                        				    the back-reference is preceded by the opening parenthesis of the <var>NN</var>th 
                        capturing left parenthesis.
                        				The regular expression is invalid if a back-reference refers to a
                        				capturing sub-expression that does not exist or whose
                        closing right parenthesis occurs after the back-reference.
                        
                     </p>
                     <p>A back-reference with number <var>N</var> matches a string that is the same as
                        the value of the <code>N</code>th captured substring.
                     </p>
                     <p>For example, the regular expression
                        <code>('|").*\1</code> matches a sequence of characters
                        delimited either by an apostrophe at the start and end, or by a
                        quotation mark at the start and end. 
                     </p>
                     <p>If no string has been matched by the <code>N</code>th capturing 
                        sub-expression, the back-reference is interpreted as matching 
                        a zero-length string.
                     </p>
                     <p>Combining this change with the introduction of
                        non-capturing groups (see above), back-references change the following production:
                     </p>
                     <p>
                        <code>[9] atom ::= Char | charClass | ( '(' regExp ')' )</code>
                        
                     </p>
                     <p>to</p>
                     <p>
                        <code>[9] atom ::= Char | charClass | ( '(' '?:'? regExp ')' ) | backReference</code>
                        
                     </p>
                     <p>
                        <code>[9a] backReference ::= "\" [1-9][0-9]*</code>
                        
                     </p>
                     <p>With respect to the XSD 1.1 version of the regular expression grammar,
                        the effect is to change:
                     </p>
                     <p>
                        <code>[72] atom ::= NormalChar | charClass | ( '(' regExp ')' )</code>
                        
                     </p>
                     <p>to</p>
                     <p>
                        <code>[72] atom ::= NormalChar | charClass | ( '(' '?:'? regExp ')' ) | backReference</code>
                        
                     </p>
                     <p>
                        <code>[72a] backReference ::= "\" [1-9][0-9]*</code>
                        
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>
                           Within a character class expression, 
                           <code>\</code> followed by a digit is invalid.
                           			 Some other regular expression languages interpret this as an octal character reference.
                           
                        </p>
                     </div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="unicode-block-names"></a>5.6.1.5 Unicode Block Names
                     </h5>
                     <p>A regular expression that uses a Unicode block name that is not defined in the version(s)
                        of Unicode
                        supported by the processor (for example <code>\p{IsBadBlockName}</code>) is deemed to be invalid
                        [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0002" title="err:FORX0002">err:FORX0002</a>].
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>XSD 1.0 does not say how this situation should be handled; XSD 1.1
                           says that it should be handled by treating all characters as matching.
                        </p>
                     </div>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="flags"></a>5.6.2 Flags
                  </h4>
                  <p>All these functions provide an optional parameter, <code>$flags</code>,
                     to set options for the interpretation of the regular expression. The
                     parameter accepts a <code>xs:string</code>, in which individual letters
                     are used to set options. The presence of a letter within the string
                     indicates that the option is on; its absence indicates that the option
                     is off. Letters may appear in any order and may be repeated. If there
                     are characters present that are not defined here as flags, then a dynamic error
                     is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0001" title="err:FORX0001">err:FORX0001</a>].
                  </p>
                  <p>The following options are defined:</p>
                  <ul>
                     <li>
                        <p><code>s</code>: If present, the match operates in "dot-all"
                           mode. (Perl calls this the single-line mode.) If the
                           <code>s</code> flag is not specified, the meta-character
                           <code>.</code> matches any character except a newline
                           (<code>#x0A</code>) or carriage return (<code>#x0D</code>) 
                           character. In dot-all mode, the
                           meta-character <code>.</code> matches any character whatsoever.
                           Suppose the input contains "hello" and "world" on two lines.
                           This will not be matched by the regular expression
                           "hello.*world" unless dot-all mode is enabled.
                        </p>
                     </li>
                     <li>
                        <p>
                           <code>m</code>: If present, the match operates in multi-line
                           			            mode. By default, the meta-character <code>^</code> matches the
                           			            start of the entire string, while $ matches the end of the
                           			            entire string. In multi-line mode, <code>^</code> matches the
                           			            start of any line (that is, the start of the entire string, and
                           			            the position immediately after a newline character
                           						other than a newline
                           			            that appears as the last character in the string), while
                           			            <code>$</code> matches the end of any line 
                           						(that is, the position immediately
                           			            before a newline character, and the end of the entire string if there
                           is no
                           			            newline character at the end of the string).
                           			            Newline here means the character <code>#x0A</code> only.
                        </p>
                     </li>
                     <li>
                        <p><code>i</code>: If present, the match operates in
                           case-insensitive mode. The detailed rules are as follows. 
                           In these
                           rules, a character C2 is considered to be a <em>case-variant</em> of 
                           another character C1 if the following XPath expression returns 
                           <code>true</code> when the two characters
                           are considered as strings of length one, and the 
                           <a title="Unicode codepoint collation" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-codepoint-collation"><span class="arrow">·</span>Unicode codepoint collation<span class="arrow">·</span></a> is used:
                        </p>
                        <p>
                           <code>fn:lower-case(C1) eq fn:lower-case(C2) or
                              fn:upper-case(C1) eq fn:upper-case(C2)</code>
                           
                        </p>
                        <p>
                           Note that the case-variants of a character under this definition 
                           are always single characters.
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>
                                 When a normal character (<code>Char</code>) is used as an atom, 
                                 it represents 
                                 the set containing that character and all its case-variants. 
                                 For example, the regular expression "z" will match both "z" and 
                                 "Z".
                              </p>
                           </li>
                           <li>
                              <p>
                                 A character range (production <code>charRange</code>
                                 in the XSD 1.0 grammar, replaced by productions <code>charRange</code> and <code>singleChar</code>
                                 in XSD 1.1) represents the set 
                                 containing all the characters that it would match in the absence 
                                 of the "<code>i</code>" flag, together with their case-variants. 
                                 For example, 
                                 the regular expression "[A-Z]" will match all
                                 the letters A-Z and all the letters a-z. It will also match 
                                 certain other characters such as <code>#x212A</code> (KELVIN SIGN), since 
                                 <code>fn:lower-case("#x212A")</code> is "k".
                              </p>
                              <p>
                                 This rule applies also to a character range used in a character 
                                 class subtraction (<code>charClassSub</code>): thus [A-Z-[IO]] will match 
                                 characters such as "A", "B", "a", and "b", but will not match 
                                 "I", "O", "i", or "o".
                              </p>
                              <p>
                                 The rule also applies to a character range used as part of a 
                                 negative character group: thus [^Q] will match every character 
                                 except "Q" and "q" (these being the only case-variants of "Q" in 
                                 Unicode).
                              </p>
                           </li>
                           <li>
                              <p>
                                 A back-reference is compared using case-blind comparison: 
                                 that is, each character must either be the same as the 
                                 corresponding character of the previously matched string, or must 
                                 be a case-variant of that character. For example, the strings 
                                 "Mum", "mom", "Dad", and "DUD" all match the regular
                                 expression "([md])[aeiou]\1" when the "<code>i</code>" flag is used.
                              </p>
                           </li>
                           <li>
                              <p>
                                 All other constructs are unaffected by the "<code>i</code>" flag. 
                                 For example, 
                                 "\p{Lu}" continues to match upper-case letters only.
                              </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p><code>x</code>: If present, whitespace characters 
                           (#x9, #xA, #xD and #x20) in the regular 
                           expression are removed prior to matching with one exception:  
                           whitespace characters within character class expressions 
                           (<code>charClassExpr</code>) are not removed. This flag can be used, 
                           for example, to break up long regular expressions into readable lines.
                        </p>
                        <p> Examples:</p>
                        <p> 
                           <code>fn:matches("helloworld", "hello world", "x")</code> returns <code>true()</code>
                           
                        </p>
                        <p> 
                           <code>fn:matches("helloworld", "hello[ ]world", "x")</code> returns <code>false()</code>
                           
                        </p>
                        <p> 
                           <code>fn:matches("hello world", "hello\ sworld", "x")</code> returns <code>true()</code>
                           
                        </p>
                        <p> 
                           <code>fn:matches("hello world", "hello world", "x")</code> returns <code>false()</code>
                           
                        </p>
                     </li>
                     <li>
                        <p><code>q</code>: if present, all characters in the regular expression
                           are treated as representing themselves, not as metacharacters. In effect, every
                           character that would normally have a special meaning in a regular expression is implicitly
                           escaped
                           by preceding it with a backslash.
                        </p>
                        <p>Furthermore, when this flag is present, the characters <code>$</code> and
                           <code>\</code> have no special significance when used in the replacement string
                           supplied to the <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> function.
                        </p>
                        <p>This flag can be used in conjunction with the <code>i</code> flag. If it is used
                           together with the <code>m</code>, <code>s</code>, or <code>x</code> flag, that flag
                           has no effect.
                        </p>
                        <p>Examples:</p>
                        <p><code>fn:tokenize("12.3.5.6", ".", "q")</code> returns <code>("12", "3", "5", "6")</code></p>
                        <p><code>fn:replace("a\b\c", "\", "\\", "q")</code> returns <code>"a\\b\\c"</code></p>
                        <p><code>fn:replace("a/b/c", "/", "$", "q")</code> returns <code>"a$b$c"</code></p>
                        <p><code>fn:matches("abcd", ".*", "q")</code> returns <code>false()</code></p>
                        <p><code>fn:matches("Mr. B. Obama", "B. OBAMA", "iq")</code> returns <code>true()</code></p>
                     </li>
                  </ul>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-matches"></a>5.6.3 fn:matches
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the supplied string matches a given regular expression.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:matches</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$pattern</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:matches</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$pattern</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$flags</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of calling the first version of this function (omitting the argument
                           <code>$flags</code>) is the same as the effect of calling the second version with the
                           <code>$flags</code> argument set to a zero-length string. Flags are defined in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>.
                        </p>
                        <p>If <code>$input</code> is the empty sequence, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>The function returns <code>true</code> if <code>$input</code> or some substring of
                           <code>$input</code> matches the regular expression supplied as <code>$pattern</code>.
                           Otherwise, the function returns <code>false</code>. The matching rules are influenced by
                           the value of <code>$flags</code> if present. 
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0002" title="err:FORX0002">err:FORX0002</a>] if the value of
                           <code>$pattern</code> is invalid according to the rules described in <a href="https://www.w3.org/TR/xpath-functions-31/#regex-syntax"><b>5.6.1 Regular expression syntax</b></a>. 
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0001" title="err:FORX0001">err:FORX0001</a>] if the value of
                           <code>$flags</code> is invalid according to the rules described in <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Unless the metacharacters <code>^</code> and <code>$</code> are used as anchors, the
                           string is considered to match the pattern if any substring matches the pattern. But
                           if
                           anchors are used, the anchors must match the start/end of the string (in string mode),
                           or the start/end of a line (in multi-line mode). 
                        </p>
                        <p class="note">This is different from the behavior of patterns in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, where
                           regular expressions are <em>implicitly</em> anchored.
                        </p>
                        <p class="note">Regular expression matching is defined on the basis of Unicode code points; it takes
                           no
                           account of collations.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:matches("abracadabra", "bra")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:matches("abracadabra", "^a.*a$")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:matches("abracadabra", "^bra")</code> returns <code>false()</code>.
                           </p>
                           <p>Given the source document:</p>
                           <div class="exampleInner"><pre class="small">let $poem := 
&lt;poem author="Wilhelm Busch"&gt;
Kaum hat dies der Hahn gesehen,
Fängt er auch schon an zu krähen:
Kikeriki! Kikikerikih!!
Tak, tak, tak! - da kommen sie.
&lt;/poem&gt;</pre></div>
                           <p>the following function calls produce the following results, with the
                              <code>poem</code> element as the context node:
                           </p>
                           <p>The expression <code>fn:matches($poem, "Kaum.*krähen")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:matches($poem, "Kaum.*krähen", "s")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:matches($poem, "^Kaum.*gesehen,$", "m")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:matches($poem, "^Kaum.*gesehen,$")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:matches($poem, "kiki", "i")</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-replace"></a>5.6.4 fn:replace
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a string produced from the input string by replacing any substrings that match
                           a
                           given regular expression with a supplied replacement string.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:replace</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$pattern</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$replacement</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="4"><code class="function">fn:replace</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$pattern</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$replacement</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$flags</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of calling the first version of this function (omitting the argument
                           <code>$flags</code>) is the same as the effect of calling the second version with the
                           <code>$flags</code> argument set to a zero-length string. Flags are defined in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>.
                        </p>
                        <p>The <code>$flags</code> argument is interpreted in the same manner as for the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a> function. 
                        </p>
                        <p>If <code>$input</code> is the empty sequence, it is interpreted as the zero-length
                           string.
                        </p>
                        <p>The function returns the <code>xs:string</code> that is obtained by replacing each
                           non-overlapping substring of <code>$input</code> that matches the given
                           <code>$pattern</code> with an occurrence of the <code>$replacement</code> string.
                        </p>
                        <p>If two overlapping substrings of <code>$input</code> both match the
                           <code>$pattern</code>, then only the first one (that is, the one whose first <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> comes first in the <code>$input</code> string) is
                           replaced.
                        </p>
                        <p>If the <code>q</code> flag is present, the replacement string is used <em>as
                              is</em>.
                        </p>
                        <p>Otherwise, within the <code>$replacement</code> string, a variable <code>$N</code> may
                           be used to refer to the substring captured by the Nth parenthesized sub-expression
                           in
                           the regular expression. For each match of the pattern, these variables are assigned
                           the
                           value of the content matched by the relevant sub-expression, and the modified
                           replacement string is then substituted for the <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> in <code>$input</code> that matched the pattern.
                           <code>$0</code> refers to the substring captured by the regular expression as a
                           whole.
                        </p>
                        <p>More specifically, the rules are as follows, where <code>S</code> is the number of
                           parenthesized sub-expressions in the regular expression, and <code>N</code> is the
                           decimal number formed by taking all the digits that consecutively follow the
                           <code>$</code> character:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>If <code>N</code>=<code>0</code>, then the variable is replaced by the substring
                                 matched by the regular expression as a whole.
                              </p>
                           </li>
                           <li>
                              <p>If <code>1</code>&lt;=<code>N</code>&lt;=<code>S</code>, then the variable is
                                 replaced by the substring captured by the Nth parenthesized sub-expression. If the
                                 <code>Nth</code> parenthesized sub-expression was not matched, then the
                                 variable is replaced by the zero-length string.
                              </p>
                           </li>
                           <li>
                              <p>If <code>S</code>&lt;<code>N</code>&lt;=<code>9</code>, then the variable is
                                 replaced by the zero-length string.
                              </p>
                           </li>
                           <li>
                              <p>Otherwise (if <code>N</code>&gt;<code>S</code> and
                                 <code>N</code>&gt;<code>9</code>), the last digit of <code>N</code> is taken to
                                 be a literal character to be included "as is" in the replacement string, and the
                                 rules are reapplied using the number <code>N</code> formed by stripping off this
                                 last digit.
                              </p>
                           </li>
                        </ol>
                        <p>For example, if the replacement string is 
                           <code>"$23"</code>
                           and there are 5 substrings, the result contains the value of the substring that
                           matches the second sub-expression, followed by the digit 
                           <code>3</code>.
                        </p>
                        <p>Unless the <code>q</code> flag is used, a literal <code>$</code> character within the
                           replacement string must be written as <code>\$</code>, and a literal <code>\</code>
                           character must be written as <code>\\</code>.
                        </p>
                        <p> If two alternatives within the pattern both match at the same position in the
                           <code>$input</code>, then the match that is chosen is the one matched by the first
                           alternative. For example:
                        </p>
                        <div class="exampleInner"><pre> fn:replace("abcd", "(ab)|(a)", "[1=$1][2=$2]") returns "[1=ab][2=]cd"</pre></div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0002" title="err:FORX0002">err:FORX0002</a>] if the value of
                           <code>$pattern</code> is invalid according to the rules described in section <a href="https://www.w3.org/TR/xpath-functions-31/#regex-syntax"><b>5.6.1 Regular expression syntax</b></a>. 
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0001" title="err:FORX0001">err:FORX0001</a>] if the value of
                           <code>$flags</code> is invalid according to the rules described in section <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>. 
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0003" title="err:FORX0003">err:FORX0003</a>] if the pattern matches a
                           zero-length string, that is, if the expression <code>fn:matches("", $pattern,
                              $flags)</code> returns <code>true</code>. It is not an error, however, if a captured
                           substring is zero-length.
                        </p>
                        <p><span>In the absence of the <code>q</code> flag,</span>
                           a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0004" title="err:FORX0004">err:FORX0004</a>] if the value of
                           <code>$replacement</code> contains a dollar sign (<code>$</code>) character that is not
                           immediately followed by a digit <code>0-9</code> and not immediately preceded by a
                           backslash (<code>\</code>).
                        </p>
                        <p><span>In the absence of the <code>q</code> flag,</span>
                           a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0004" title="err:FORX0004">err:FORX0004</a>] if the value of
                           <code>$replacement</code> contains a backslash (<code>\</code>) character that is not part of a
                           <code>\\</code> pair, unless it is immediately followed by a dollar sign (<code>$</code>)
                           character.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the input string contains no substring that matches the regular
                           expression, the result of the function is a single string identical to the input
                           string.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:replace("abracadabra", "bra", "*")</code> returns <code>"a*cada*"</code>.
                           </p>
                           <p>The expression <code>fn:replace("abracadabra", "a.*a", "*")</code> returns <code>"*"</code>.
                           </p>
                           <p>The expression <code>fn:replace("abracadabra", "a.*?a", "*")</code> returns <code>"*c*bra"</code>.
                           </p>
                           <p>The expression <code>fn:replace("abracadabra", "a", "")</code> returns <code>"brcdbr"</code>.
                           </p>
                           <p>The expression <code>fn:replace("abracadabra", "a(.)", "a$1$1")</code> returns <code>"abbraccaddabbra"</code>.
                           </p>
                           <p>The expression <code>fn:replace("abracadabra", ".*?", "$1")</code> raises an error,
                              because the pattern matches the zero-length string 
                           </p>
                           <p>The expression <code>fn:replace("AAAA", "A+", "b")</code> returns <code>"b"</code>.
                           </p>
                           <p>The expression <code>fn:replace("AAAA", "A+?", "b")</code> returns <code>"bbbb"</code>.
                           </p>
                           <p>The expression <code>fn:replace("darted", "^(.*?)d(.*)$", "$1c$2")</code> returns <code>"carted"</code>. <em>(The first <code>d</code> is replaced.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-tokenize"></a>5.6.5 fn:tokenize
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a sequence of strings constructed by splitting the input wherever a separator
                           is
                           found; the separator is any substring that matches a given regular expression.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:tokenize</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></div>
                        <div class="proto"><code class="function">fn:tokenize</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$pattern</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:tokenize</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$pattern</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$flags</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The one-argument form of this function
                           splits the supplied string at whitespace boundaries. More specifically, calling <code>fn:tokenize($input)</code>
                           is equivalent to calling <code>fn:tokenize(fn:normalize-space($input), ' '))</code> where the second argument
                           is a single space character (x20).
                        </p>
                        <p>The effect of calling the two-argument form of this function (omitting the argument
                           <code>$flags</code>) is the same as the effect of calling the three-argument version with the
                           <code>$flags</code> argument set to a zero-length string. Flags are defined in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>.
                        </p>
                        <p>The following rules apply to the three-argument form of the function:</p>
                        <ul>
                           <li>
                              <p>The <code>$flags</code> argument is interpreted in the same way as for the
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a> function.
                              </p>
                           </li>
                           <li>
                              <p>If <code>$input</code> is the empty sequence, or if <code>$input</code> is the
                                 zero-length string, the function returns the empty sequence.
                              </p>
                           </li>
                           <li>
                              <p>The function returns a sequence of strings formed by breaking the <code>$input</code>
                                 string into a sequence of strings, treating any substring that matches
                                 <code>$pattern</code> as a separator. The separators themselves are not returned.
                              </p>
                           </li>
                           <li>
                              <p><span>Except with the one-argument form of the function,</span>
                                 if a separator occurs at the start of the <code>$input</code> string, the result
                                 sequence will start with a zero-length string. Similarly, zero-length strings will
                                 also occur in
                                 the result sequence if a separator occurs at the end of the <code>$input</code> string,
                                 or if two adjacent substrings match the supplied <code>$pattern</code>.
                              </p>
                           </li>
                           <li>
                              <p>If two alternatives within the supplied <code>$pattern</code> both match at the same
                                 position in the <code>$input</code> string, then the match that is chosen is the first.
                                 For example:
                              </p>
                              <div class="exampleInner"><pre> fn:tokenize("abracadabra", "(ab)|(a)") returns ("", "r", "c", "d", "r", "")</pre></div>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0002" title="err:FORX0002">err:FORX0002</a>] if the value of
                           <code>$pattern</code> is invalid according to the rules described in section <a href="https://www.w3.org/TR/xpath-functions-31/#regex-syntax"><b>5.6.1 Regular expression syntax</b></a>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0001" title="err:FORX0001">err:FORX0001</a>] if the value of
                           <code>$flags</code> is invalid according to the rules described in section <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0003" title="err:FORX0003">err:FORX0003</a>] if the supplied
                           <code>$pattern</code> matches a zero-length string, that is, if <code>fn:matches("",
                              $pattern, $flags)</code> returns <code>true</code>. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the input string is not zero length, and no separators are found in
                           the input string, the result of the function is a single string identical to the input
                           string.
                        </p>
                        <p class="note">The one-argument form of the function has a similar effect to
                           the two-argument form with <code>\s+</code> as the separator pattern, except that the one-argument
                           form strips leading and trailing whitespace, whereas the two-argument form delivers
                           an extra
                           zero-length token if leading or trailing whitespace is present.
                        </p>
                        <p class="note">The function returns no information about the separators that were found
                           in the string. If this information is required, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><code>fn:analyze-string</code></a> function
                           can be used instead.
                        </p>
                        <p class="note">The separator used by the one-argument form of the function is any sequence
                           of tab (x09), newline (x0A), carriage return (x0D) or space (x20) characters. This
                           is the same as the
                           separator recognized by list-valued attributes as defined in XSD. It is not the same
                           as the separator
                           recognized by list-valued attributes in HTML5, which also treats form-feed (x0C) as
                           whitespace.
                           If it is necessary to treat form-feed as a separator, an explicit separator pattern
                           should be used.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:tokenize(" red green blue ")</code> returns <code>("red", "green", "blue")</code>.
                           </p>
                           <p>The expression <code>fn:tokenize("The cat sat on the mat", "\s+")</code> returns <code>("The", "cat", "sat", "on", "the", "mat")</code>.
                           </p>
                           <p>The expression <code>fn:tokenize(" red green blue ", "\s+")</code> returns <code>("", "red", "green", "blue", "")</code>.
                           </p>
                           <p>The expression <code>fn:tokenize("1, 15, 24, 50", ",\s*")</code> returns <code>("1", "15", "24", "50")</code>.
                           </p>
                           <p>The expression <code>fn:tokenize("1,15,,24,50,", ",")</code> returns <code>("1", "15", "", "24", "50", "")</code>.
                           </p>
                           <p><code>fn:tokenize("abba", ".?")</code> raises the dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0003" title="err:FORX0003">err:FORX0003</a>].
                           </p>
                           <p>The expression <code>fn:tokenize("Some unparsed &lt;br&gt; HTML &lt;BR&gt; text",
                                 "\s*&lt;br&gt;\s*", "i")</code> returns <code>("Some unparsed", "HTML", "text")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-analyze-string"></a>5.6.6 fn:analyze-string
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Analyzes a string using a regular expression, returning an XML structure that identifies
                           which parts of the input string matched or failed to match the regular expression,
                           and
                           in the case of matched substrings, which substrings matched each capturing group in
                           the
                           regular expression.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:analyze-string</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$pattern</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">element(fn:analyze-string-result)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:analyze-string</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$pattern</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$flags</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">element(fn:analyze-string-result)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of calling the first version of this function (omitting the argument
                           <code>$flags</code>) is the same as the effect of calling the second version with the
                           <code>$flags</code> argument set to a zero-length string. Flags are defined in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>.
                        </p>
                        <p>The <code>$flags</code> argument is interpreted in the same way as for the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a> function.
                        </p>
                        <p>If <code>$input</code> is the empty sequence the function behaves as if
                           <code>$input</code> were the zero-length string. In this situation the result will be
                           an element node with no children.
                        </p>
                        <p>The function returns an element node whose local name is
                           <code>analyze-string-result</code>. This element and all its descendant elements have
                           the namespace URI <code>http://www.w3.org/2005/xpath-functions</code>. The namespace
                           prefix is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>. The children of this element are a
                           sequence of <code>fn:match</code> and <code>fn:non-match</code> elements. This sequence
                           is formed by breaking the <code>$input</code> string into a sequence of strings,
                           returning any substring that matches <code>$pattern</code> as the content of a
                           <code>match</code> element, and any intervening substring as the content of a
                           <code>non-match</code> element.
                        </p>
                        <p>More specifically, the function starts at the beginning of the input string and attempts
                           to find the first substring that matches the regular expression. If there are several
                           matches, the first match is defined to be the one whose starting position comes first
                           in
                           the string. If several alternatives within the regular expression both match at the
                           same
                           position in the input string, then the match that is chosen is the first alternative
                           that matches. For example, if the input string is <code>The quick brown fox jumps</code>
                           and the regular expression is <code>jump|jumps</code>, then the match that is chosen is
                           <code>jump</code>.
                        </p>
                        <p>Having found the first match, the instruction proceeds to find the second and subsequent
                           matches by repeating the search, starting at the first <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a> that was not included in the previous match.
                        </p>
                        <p>The input string is thus partitioned into a sequence of substrings, some of which
                           match
                           the regular expression, others which do not match it. Each substring will contain
                           at
                           least one character. This sequence is represented in the result by the sequence of
                           <code>fn:match</code> and <code>fn:non-match</code> children of the returned element
                           node; the string value of the <code>fn:match</code> or <code>fn:non-match</code> element
                           will be the corresponding substring of <code>$input</code>, and the string value of the
                           returned element node will therefore be the same as <code>$input</code>.
                        </p>
                        <p>The content of an <code>fn:non-match</code> element is always a single text node.
                        </p>
                        <p>The content of a <code>fn:match</code> element, however, is in general a sequence of
                           text nodes and <code>fn:group</code> element children. An <code>fn:group</code> element
                           with a <code>nr</code> attribute having the integer value <var>N</var> identifies the
                           substring captured by the <var>Nth</var> parenthesized sub-expression in the regular
                           expression. For each capturing subexpression there will be at most one corresponding
                           <code>fn:group</code> element in each <code>fn:match</code> element in the
                           result.
                        </p>
                        <p>If the function is called twice with the same arguments, it is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> whether the two calls return the same element node
                           or distinct (but deep equal) element nodes. In this respect it is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>non-deterministic with respect to node identity<span class="arrow">·</span></a>.
                        </p>
                        <p>The base URI of the element nodes in the result is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                        <p>A schema is defined for the structure of the returned element: see <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-analyze-string"><b>C.1 Schema for the result of fn:analyze-string</b></a>.
                        </p>
                        <p>The result of the function will always be such that validation against this schema
                           would succeed.
                           However, it is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether the result is typed or untyped,
                           that is, whether the elements and attributes in the returned tree have type annotations
                           that reflect
                           the result of validating against this schema.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0002" title="err:FORX0002">err:FORX0002</a>] if the value of
                           <code>$pattern</code> is invalid according to the rules described in section <a href="https://www.w3.org/TR/xpath-functions-31/#regex-syntax"><b>5.6.1 Regular expression syntax</b></a>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0001" title="err:FORX0001">err:FORX0001</a>] if the value of
                           <code>$flags</code> is invalid according to the rules described in section <a href="https://www.w3.org/TR/xpath-functions-31/#flags"><b>5.6.2 Flags</b></a>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORX0003" title="err:FORX0003">err:FORX0003</a>] if the supplied
                           <code>$pattern</code> matches a zero-length string, that is, if <code>fn:matches("",
                              $pattern, $flags)</code> returns <code>true</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">It is <span class="verb">recommended</span> that a processor that implements schema awareness should return typed nodes.
                           The concept of "schema awareness", however, is a matter for host languages to define
                           and is outside
                           the scope of the function library specification.
                        </p>
                        <p class="note">The declarations and definitions in the schema are not automatically available in
                           the static context of the <code>fn:analyze-string</code> call (or of any other
                           expression). The contents of the static context are host-language defined, and in
                           some
                           host languages are implementation-defined.
                        </p>
                        <p class="note">The schema defines the outermost element, <code>analyze-string-result</code>, in such
                           a way that mixed content is permitted. In fact the element will only have element
                           nodes (<code>match</code>
                           and <code>non-match</code>) as its children, never text nodes. Although this might have originally been an
                           oversight, defining the <code>analyze-string-result</code> element with <code>mixed="true"</code> allows it
                           to be atomized, which is potentially useful (the atomized value will be the original
                           input string),
                           and the capability has therefore been retained for compatibility with the 3.0 version
                           of this
                           specification.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>In the following examples, the result document is shown in serialized form, with
                              whitespace between the element nodes. This whitespace is not actually present in the
                              result.
                           </p>
                           <p>The expression <code>fn:analyze-string("The cat sat on the mat.", "\w+")</code> returns (with whitespace added for legibility):
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;analyze-string-result xmlns="http://www.w3.org/2005/xpath-functions"&gt;
  &lt;match&gt;The&lt;/match&gt;
  &lt;non-match&gt; &lt;/non-match&gt;
  &lt;match&gt;cat&lt;/match&gt;
  &lt;non-match&gt; &lt;/non-match&gt;
  &lt;match&gt;sat&lt;/match&gt;
  &lt;non-match&gt; &lt;/non-match&gt;
  &lt;match&gt;on&lt;/match&gt;
  &lt;non-match&gt; &lt;/non-match&gt;
  &lt;match&gt;the&lt;/match&gt;
  &lt;non-match&gt; &lt;/non-match&gt;
  &lt;match&gt;mat&lt;/match&gt;
  &lt;non-match&gt;.&lt;/non-match&gt;
&lt;/analyze-string-result&gt;</pre></div>
                           <p>The expression <code>fn:analyze-string("2008-12-03",
                                 "^(\d+)\-(\d+)\-(\d+)$")</code> returns (with whitespace added for legibility):
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;analyze-string-result xmlns="http://www.w3.org/2005/xpath-functions"&gt;
  &lt;match&gt;
    &lt;group nr="1"&gt;2008&lt;/group&gt;-
    &lt;group nr="2"&gt;12&lt;/group&gt;-
    &lt;group nr="3"&gt;03&lt;/group&gt;
  &lt;/match&gt;
&lt;/analyze-string-result&gt;</pre></div>
                           <p>The expression <code>fn:analyze-string("A1,C15,,D24, X50,",
                                 "([A-Z])([0-9]+)")</code> returns (with whitespace added for legibility):
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;analyze-string-result xmlns="http://www.w3.org/2005/xpath-functions"&gt;                  
  &lt;match&gt;&lt;group nr="1"&gt;A&lt;/group&gt;&lt;group nr="2"&gt;1&lt;/group&gt;&lt;/match&gt;
  &lt;non-match&gt;,&lt;/non-match&gt;
  &lt;match&gt;&lt;group nr="1"&gt;C&lt;/group&gt;&lt;group nr="2"&gt;15&lt;/group&gt;&lt;/match&gt;
  &lt;non-match&gt;,,&lt;/non-match&gt;
  &lt;match&gt;&lt;group nr="1"&gt;D&lt;/group&gt;&lt;group nr="2"&gt;24&lt;/group&gt;&lt;/match&gt;
  &lt;non-match&gt;, &lt;/non-match&gt;
  &lt;match&gt;&lt;group nr="1"&gt;X&lt;/group&gt;&lt;group nr="2"&gt;50&lt;/group&gt;&lt;/match&gt;
  &lt;non-match&gt;,&lt;/non-match&gt;
&lt;/analyze-string-result&gt;</pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="anyURI-functions"></a>6 Functions that manipulate URIs
            </h2>
            <p>This section specifies functions that manipulate URI values, either as instances
               of <code>xs:anyURI</code> or as strings.
            </p>
            <div class="overlarge"><table class="index">
               <thead>
                  <tr>
                     <th>Function</th>
                     <th>Meaning</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><code>fn:resolve-uri</code></a></td>
                     <td>Resolves a relative IRI reference against an absolute IRI.</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-encode-for-uri"><code>fn:encode-for-uri</code></a></td>
                     <td>Encodes reserved characters in a string that is intended to be used in the path segment
                        of a URI.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-iri-to-uri"><code>fn:iri-to-uri</code></a></td>
                     <td>Converts a string containing an IRI into a URI according to the rules of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a>.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-escape-html-uri"><code>fn:escape-html-uri</code></a></td>
                     <td>Escapes a URI in the same way that HTML user agents handle attribute values expected
                        to
                        contain URIs.
                     </td>
                  </tr>
               </tbody>
            </table></div>
            <div class="div2">
               
               <h3><a id="func-resolve-uri"></a>6.1 fn:resolve-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Resolves a relative IRI reference against an absolute IRI.</p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:resolve-uri</code>(<code class="arg">$relative</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                     <div class="proto"><code class="function">fn:resolve-uri</code>(<code class="arg">$relative</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$base</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		static base URI.
                        	
                     </p>
                     <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function is defined to operate on IRI references as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a>, and the implementation <span class="verb">must</span> permit all arguments that are valid
                        according to that specification. In addition, the implementation <span class="verb">may</span>
                        accept some or all strings that conform to the rules for (absolute or relative) Legacy
                        Extended IRI references as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#LEIRI">[Legacy extended IRIs for XML resource identification]</a>. For the purposes of this
                        section, the terms IRI and IRI reference include these extensions, insofar as the
                        implementation chooses to support them.
                     </p>
                     <p>The following rules apply in order:</p>
                     <ol class="enumar">
                        <li>
                           <p>If <code>$relative</code> is the empty sequence, the function returns the empty
                              sequence.
                           </p>
                        </li>
                        <li>
                           <p>If <code>$relative</code> is an absolute IRI (as defined above), then it is returned
                              unchanged.
                           </p>
                        </li>
                        <li>
                           <p>If the <code>$base</code> argument is not supplied, then:
                           </p>
                           <ol class="enumla">
                              <li>
                                 <p>If the static base URI in the static context is not absent, it is used as the effective
                                    value of <code>$base</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Otherwise, a dynamic error is raised: <span>[<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFONS0005" title="err:FONS0005">err:FONS0005</a>]</span>.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>The function resolves the relative IRI reference <code>$relative</code>
                              against the base IRI <code>$base</code> using the algorithm defined in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a>, adapted by treating any <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>character<span class="arrow">·</span></a>
                              that would not be valid in an RFC3986 URI or relative reference in the same way that
                              RFC3986 treats unreserved characters. No percent-encoding takes place.
                           </p>
                        </li>
                     </ol>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The first form of this function resolves <code>$relative</code> against the value of the
                        base-uri property from the static context. A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFONS0005" title="err:FONS0005">err:FONS0005</a>] if the base-uri property is not initialized in the static
                        context. 
                     </p>
                     <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0002" title="err:FORG0002">err:FORG0002</a>] if <code>$relative</code>
                        is not a valid IRI according to the rules of RFC3987, extended with an
                        implementation-defined subset of the extensions permitted in LEIRI, or if it is not
                        a
                        suitable relative reference to use as input to the RFC3986 resolution algorithm extended
                        to handle additional unreserved characters. 
                     </p>
                     <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0002" title="err:FORG0002">err:FORG0002</a>] if <code>$base</code> is
                        not a valid IRI according to the rules of RFC3987, extended with an
                        implementation-defined subset of the extensions permitted in LEIRI, or if it is not
                        a
                        suitable IRI to use as input to the chosen resolution algorithm (for example, if it
                        is a
                        relative IRI reference, if it is a non-hierarchic URI, or if it contains a fragment
                        identifier). 
                     </p>
                     <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0009" title="err:FORG0009">err:FORG0009</a>] if the chosen resolution
                        algorithm fails for any other reason. 
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Resolving a URI does not dereference it. This is merely a syntactic operation on two
                        <a title="string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#string"><span class="arrow">·</span>strings<span class="arrow">·</span></a>.
                     </p>
                     <p class="note">The algorithms in the cited RFCs include some variations that are optional or
                        recommended rather than mandatory; they also describe some common practices that are
                        not
                        recommended, but which are permitted for backwards compatibility. Where the cited
                        RFCs
                        permit variations in behavior, so does this specification. 
                     </p>
                     <p class="note">Throughout this family of specifications, the phrase "resolving a relative URI (or
                        IRI)
                        reference" should be understood as using the rules of this function, unless otherwise
                        stated.
                     </p>
                     <p class="note">RFC3986 defines an algorithm for resolving relative references 
                        in the context of the URI syntax defined in that RFC. RFC3987 describes a modification
                        
                        to that algorithm to make it applicable to IRIs (specifically: additional characters
                        
                        permitted in an IRI are handled the same way that RFC3986 handles unreserved characters).
                        
                        The LEIRI specification does not explicitly define a resolution algorithm, but suggests
                        
                        that it <em>should not</em> be done by converting the LEIRI to a URI, and 
                        <em>should not</em> involve percent-encoding. This specification fills this gap 
                        by defining resolution for LEIRIs in the same way that RFC3987 defines resolution
                        for IRIs,
                        that is by specifying that additional characters are handled as unreserved characters.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-encode-for-uri"></a>6.2 fn:encode-for-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Encodes reserved characters in a string that is intended to be used in the path segment
                        of a URI.
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:encode-for-uri</code>(<code class="arg">$uri-part</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If <code>$uri-part</code> is the empty sequence, the function returns the zero-length
                        string.
                     </p>
                     <p>This function applies the URI escaping rules defined in section 2 of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a> to the <code>xs:string</code> supplied as <code>$uri-part</code>. The
                        effect of the function is to escape reserved characters. Each such character in the
                        string is replaced with its percent-encoded form as described in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a>.
                     </p>
                     <p>Since <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a> recommends that, for consistency, URI producers and
                        normalizers should use uppercase hexadecimal digits for all percent-encodings, this
                        function must always generate hexadecimal values using the upper-case letters A-F.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">All characters are escaped except those identified as "unreserved" by <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a>, that is the upper- and lower-case letters A-Z, the digits 0-9,
                        HYPHEN-MINUS ("-"), LOW LINE ("_"), FULL STOP ".", and TILDE "~".
                     </p>
                     <p class="note">This function escapes URI delimiters and therefore cannot be used indiscriminately
                        to
                        encode "invalid" characters in a path segment.
                     </p>
                     <p class="note">This function is invertible but not idempotent. This is because a string containing
                        a
                        percent character will be modified by applying the function: for example
                        <code>100%</code> becomes <code>100%25</code>, while <code>100%25</code> becomes
                        <code>100%2525</code>.
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>fn:encode-for-uri("http://www.example.com/00/Weather/CA/Los%20Angeles#ocean")</code> returns <code>"http%3A%2F%2Fwww.example.com%2F00%2FWeather%2FCA%2FLos%2520Angeles%23ocean"</code>. <em>(This is probably not what the user intended because all of the
                              delimiters have been encoded.)</em></p>
                        <p>The expression <code>concat("http://www.example.com/",
                              encode-for-uri("~bébé"))</code> returns <code>"http://www.example.com/~b%C3%A9b%C3%A9"</code>.
                        </p>
                        <p>The expression <code>concat("http://www.example.com/", encode-for-uri("100% organic"))</code> returns <code>"http://www.example.com/100%25%20organic"</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-iri-to-uri"></a>6.3 fn:iri-to-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Converts a string containing an IRI into a URI according to the rules of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a>.
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:iri-to-uri</code>(<code class="arg">$iri</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If <code>$iri</code> is the empty sequence, the function returns the zero-length
                        string.
                     </p>
                     <p>Otherwise, the function converts the value of <code>$iri</code> into a URI according to
                        the rules given in Section 3.1 of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3987">[RFC 3987]</a> by percent-encoding characters
                        that are allowed in an IRI but not in a URI. If <code>$iri</code> contains a character
                        that is invalid in an IRI, such as the space character (see note below), the invalid
                        character is replaced by its percent-encoded form as described in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a> before the conversion is performed.
                     </p>
                     <p>Since <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3986">[RFC 3986]</a> recommends that, for consistency, URI producers and
                        normalizers should use uppercase hexadecimal digits for all percent-encodings, this
                        function must always generate hexadecimal values using the upper-case letters A-F.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The function is idempotent but not invertible. Both the inputs <code>My Documents</code>
                        and <code>My%20Documents</code> will be converted to the output
                        <code>My%20Documents</code>.
                     </p>
                     <p class="note">This function does not check whether <code>$iri</code> is a valid IRI. It treats it as
                        an <a title="string" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#string"><span class="arrow">·</span>string<span class="arrow">·</span></a> and operates on the <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> in the string.
                     </p>
                     <p class="note"> The following printable ASCII characters are invalid in an IRI: "&lt;", "&gt;", "
                        " " (double quote), space, "{", "}", "|", "\", "^", and "`". Since these
                        characters should not appear in an IRI, if they do appear in <code>$iri</code> they will
                        be percent-encoded. In addition, characters outside the range x20-x7E will be
                        percent-encoded because they are invalid in a URI. 
                     </p>
                     <p class="note"> Since this function does not escape the PERCENT SIGN "%" and this character is not
                        allowed in data within a URI, users wishing to convert character strings (such as
                        file
                        names) that include "%" to a URI should manually escape "%" by replacing it with "%25".
                        
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>fn:iri-to-uri
                              ("http://www.example.com/00/Weather/CA/Los%20Angeles#ocean")</code> returns <code>"http://www.example.com/00/Weather/CA/Los%20Angeles#ocean"</code>.
                        </p>
                        <p>The expression <code>fn:iri-to-uri ("http://www.example.com/~bébé")</code> returns <code>"http://www.example.com/~b%C3%A9b%C3%A9"</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-escape-html-uri"></a>6.4 fn:escape-html-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Escapes a URI in the same way that HTML user agents handle attribute values expected
                        to
                        contain URIs.
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:escape-html-uri</code>(<code class="arg">$uri</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If <code>$uri</code> is the empty sequence, the function returns the zero-length
                        string.
                     </p>
                     <p>Otherwise, the function escapes all <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> except
                        printable characters of the US-ASCII coded character set, specifically the <a title="codepoint" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#codepoint"><span class="arrow">·</span>codepoints<span class="arrow">·</span></a> between 32 and 126 (decimal) inclusive. Each
                        character in <code>$uri</code> to be escaped is replaced by an escape sequence, which is
                        formed by encoding the character as a sequence of octets in UTF-8, and then representing
                        each of these octets in the form %HH, where HH is the hexadecimal representation of
                        the
                        octet. This function must always generate hexadecimal values using the upper-case
                        letters A-F.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The behavior of this function corresponds to the recommended handling of non-ASCII
                        characters in URI attribute values as described in <a href="https://www.w3.org/TR/xpath-functions-31/#HTML40">[HTML 4.0]</a> Appendix
                        B.2.1.
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>fn:escape-html-uri("http://www.example.com/00/Weather/CA/Los Angeles#ocean")</code> returns <code>"http://www.example.com/00/Weather/CA/Los Angeles#ocean"</code>.
                        </p>
                        <p>The expression <code>fn:escape-html-uri("javascript:if (navigator.browserLanguage == 'fr') window.open('http://www.example.com/~bébé');")</code> returns <code>"javascript:if (navigator.browserLanguage == 'fr') window.open('http://www.example.com/~b%C3%A9b%C3%A9');"</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="boolean-functions"></a>7 Functions and operators on Boolean values
            </h2>
            <p>This section defines functions and operators on the <code>xs:boolean</code> datatype.
            </p>
            <div class="div2">
               
               <h3><a id="boolean-constructors"></a>7.1 Boolean constant functions
               </h3>
               <p>Since no literals are defined in XPath to reference the constant boolean values true
                  and false,
                  			two functions are provided for the purpose.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-true"><code>fn:true</code></a></td>
                        <td>Returns the <code>xs:boolean</code> value <code>true</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-false"><code>fn:false</code></a></td>
                        <td>Returns the <code>xs:boolean</code> value <code>false</code>.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-true"></a>7.1.1 fn:true
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:boolean</code> value <code>true</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:true</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is equivalent to <code>xs:boolean("1")</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:true()</code> returns <code>xs:boolean(1)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-false"></a>7.1.2 fn:false
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:boolean</code> value <code>false</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:false</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is equivalent to <code>xs:boolean("0")</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:false()</code> returns <code>xs:boolean(0)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="op.boolean"></a>7.2 Operators on Boolean values
               </h3>
               <p>The following functions define the semantics of operators on boolean values in
                  <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>:
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-equal"><code>op:boolean-equal</code></a></td>
                        <td>Returns <code>true</code> if the two arguments are the same boolean value.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-less-than"><code>op:boolean-less-than</code></a></td>
                        <td>Returns true if the first argument is false and the second is true.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-greater-than"><code>op:boolean-greater-than</code></a></td>
                        <td>Returns true if the first argument is true and the second is false.</td>
                     </tr>
                  </tbody>
               </table></div>
               <p>The ordering operators <a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-less-than"><code>op:boolean-less-than</code></a>
                  and <a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean-greater-than"><code>op:boolean-greater-than</code></a> are provided for application purposes
                  and for compatibility with <a href="https://www.w3.org/TR/xpath-functions-31/#xpath">[XML Path Language (XPath) Version 1.0]</a>. The <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                  datatype <code>xs:boolean</code> is not ordered.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-boolean-equal"></a>7.2.1 op:boolean-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the two arguments are the same boolean value.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "eq"
                           operator when applied to two <code>xs:boolean</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:boolean-equal</code>(<code class="arg">$value1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:boolean</code>, <code class="arg">$value2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:boolean</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if both arguments are <code>true</code> or if
                           both arguments are <code>false</code>. It returns <code>false</code> if one of the
                           arguments is <code>true</code> and the other argument is <code>false</code>. 
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-boolean-less-than"></a>7.2.2 op:boolean-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the first argument is false and the second is true.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "lt" operator when applied to two <code>xs:boolean</code> values. Also
                           used in the definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:boolean-less-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:boolean</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:boolean</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if <code>$arg1</code> is <code>false</code> and
                           <code>$arg2</code> is <code>true</code>. Otherwise, it returns
                           <code>false</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-boolean-greater-than"></a>7.2.3 op:boolean-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the first argument is true and the second is false.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "gt" operator when applied to two <code>xs:boolean</code> values. Also
                           used in the definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:boolean-greater-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:boolean</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:boolean</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:boolean-greater-than($A, $B)</code> is defined to return the
                           same result as <code>op:boolean-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="boolean-value-functions"></a>7.3 Functions on Boolean values
               </h3>
               <p>The following functions are defined on boolean values:</p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean"><code>fn:boolean</code></a></td>
                        <td>Computes the effective boolean value of the sequence <code>$arg</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-not"><code>fn:not</code></a></td>
                        <td>Returns <code>true</code> if the effective boolean value of <code>$arg</code> is
                           <code>false</code>, or <code>false</code> if it is <code>true</code>.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-boolean"></a>7.3.1 fn:boolean
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Computes the effective boolean value of the sequence <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:boolean</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function computes the effective boolean value of a sequence, defined according
                           to
                           the following rules. See also <a href="https://www.w3.org/TR/xpath-31/#id-ebv">Section 
                              
                              2.4.3 Effective Boolean Value
                              </a><sup><small>XP31</small></sup>.
                        </p>
                        <ul>
                           <li>
                              <p>If <code>$arg</code> is the empty sequence, <code>fn:boolean</code> returns
                                 <code>false</code>.
                              </p>
                           </li>
                           <li>
                              <p>If <code>$arg</code> is a sequence whose first item is a node,
                                 <code>fn:boolean</code> returns <code>true</code>.
                              </p>
                           </li>
                           <li>
                              <p>If <code>$arg</code> is a singleton value of type <code>xs:boolean</code> or a
                                 derived from <code>xs:boolean</code>, <code>fn:boolean</code> returns
                                 <code>$arg</code>.
                              </p>
                           </li>
                           <li>
                              <p>If <code>$arg</code> is a singleton value of type <code>xs:string</code> or a type
                                 derived from <code>xs:string</code>, <code>xs:anyURI</code> or a type derived from
                                 <code>xs:anyURI</code>, or <code>xs:untypedAtomic</code>,
                                 <code>fn:boolean</code> returns <code>false</code> if the operand value has
                                 zero length; otherwise it returns <code>true</code>.
                              </p>
                           </li>
                           <li>
                              <p>If <code>$arg</code> is a singleton value of any numeric type or a type derived
                                 from a numeric type, <code>fn:boolean</code> returns <code>false</code> if the
                                 operand value is <code>NaN</code> or is numerically equal to zero; otherwise it
                                 returns <code>true</code>.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>In all cases other than those listed above, <code>fn:boolean</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>].
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The result of this function is not necessarily the same as <code>$arg cast as
                              xs:boolean</code>. For example, <code>fn:boolean("false")</code> returns the value
                           <code>true</code> whereas <code>"false" cast as xs:boolean</code> (which can also be
                           written <code>xs:boolean("false")</code>) returns <code>false</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $abc := ("a", "b", "")</pre></div>
                           <p><code>fn:boolean($abc)</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>].
                           </p>
                           <p>The expression <code>fn:boolean($abc[1])</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:boolean($abc[0])</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:boolean($abc[3])</code> returns <code>false()</code>.
                           </p>
                           <p><code>fn:boolean([])</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>].
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-not"></a>7.3.2 fn:not
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the effective boolean value of <code>$arg</code> is
                           <code>false</code>, or <code>false</code> if it is <code>true</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:not</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The value of <code>$arg</code> is first reduced to an effective boolean value by
                           applying the <code>fn:boolean()</code> function. The function returns <code>true</code>
                           if the effective boolean value is <code>false</code>, or <code>false</code> if the
                           effective boolean value is <code>true</code>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:not(fn:true())</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:not(())</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:not("false")</code> returns <code>false()</code>.
                           </p>
                           <p><code>fn:not(1 to 10)</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>].
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="durations"></a>8 Functions and operators on durations
            </h2>
            <p>Operators are defined on the following type:</p>
            <ul>
               <li>
                  <p>xs:duration</p>
               </li>
            </ul>
            <p>and on the two defined subtypes (see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-subtypes"><b>8.1 Two totally ordered subtypes of duration</b></a>):
            </p>
            <ul>
               <li>
                  <p>xs:yearMonthDuration</p>
               </li>
               <li>
                  <p>xs:dayTimeDuration</p>
               </li>
            </ul>
            <p>No ordering relation is defined on <code>xs:duration</code> values.
               			Two <code>xs:duration</code> values may however be compared for equality.
            </p>
            <p>Operations on durations (including equality comparison, casting to string, and extraction
               of components) 
               			all treat the duration as normalized. This means that the seconds and minutes components
               
               			will always be less than 60, the hours component less than 24, and the months component
               
               			less than 12.  Thus, for example, a duration of 120 seconds always gives the same
               result 
               			as a duration of two minutes.
            </p>
            <p>Conditions such as underflow and overflow may occur with arithmetic on
               	         durations: see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a> 
            </p>
            <div class="note">
               <p class="prefix"><b>Note:</b></p>
               <p>This means that in practice, the information content of an <code>xs:duration</code>
                  			value can be reduced to an <code>xs:integer</code> number of months, and an <code>xs:decimal</code>
                  			number of seconds. For the two defined subtypes this is further simplified so that
                  one of these two
                  			components is fixed at zero. Operations such as comparison of durations and arithmetic
                  on durations
                  			can be expressed in terms of numeric operations applied to these two components.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="duration-subtypes"></a>8.1 Two totally ordered subtypes of duration
               </h3>
               <p>Two subtypes of <code>xs:duration</code>, namely <code>xs:yearMonthDuration</code>
                  and <code>xs:dayTimeDuration</code>, are defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a>. These types <span class="verb">must</span>
                  be available in the data model whether or not the implementation supports other aspects
                  of XSD 1.1.
               </p>
               <p>The significance of these subtypes is that arithmetic and ordering become well defined;
                  this is not the
                  case for <code>xs:duration</code> values in general, because of the variable number of days in a month. For this reason,
                  many of the functions
                  and operators on durations require the arguments/operands to belong to these two subtypes.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="comp.duration"></a>8.2 Comparison operators on durations
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-yearMonthDuration-less-than"><code>op:yearMonthDuration-less-than</code></a></td>
                        <td>Returns true if <code>$arg1</code> is a shorter duration than <code>$arg2</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-yearMonthDuration-greater-than"><code>op:yearMonthDuration-greater-than</code></a></td>
                        <td>Returns true if <code>$arg1</code> is a longer duration than <code>$arg2</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-dayTimeDuration-less-than"><code>op:dayTimeDuration-less-than</code></a></td>
                        <td>Returns true if <code>$arg1</code> is a shorter duration than <code>$arg2</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-dayTimeDuration-greater-than"><code>op:dayTimeDuration-greater-than</code></a></td>
                        <td>Returns true if <code>$arg1</code> is a longer duration than <code>$arg2</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-duration-equal"><code>op:duration-equal</code></a></td>
                        <td>Returns true if <code>$arg1</code> and <code>$arg2</code> are durations of the same
                           length.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>The following comparison operators are defined on the <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                  duration datatypes. Each operator takes two operands of the same
                  type and returns an <code>xs:boolean</code> result. As discussed in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, the
                  order relation on <code>xs:duration</code> is a partial order rather than 
                  a total order. For this reason, only equality is defined on <code>xs:duration</code>. 
                  					A full complement of comparison and
                  arithmetic functions are defined on the two subtypes of duration described in
                  <a href="https://www.w3.org/TR/xpath-functions-31/#duration-subtypes"><b>8.1 Two totally ordered subtypes of duration</b></a> which do have a total order.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-yearMonthDuration-less-than"></a>8.2.1 op:yearMonthDuration-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if <code>$arg1</code> is a shorter duration than <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines
                           the semantics of the "lt" operator when applied to two <code>xs:yearMonthDuration</code>
                           values. Also used in the definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:yearMonthDuration-less-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the number of months in the value of <code>$arg1</code> is numerically less than the
                           number of months in the value of <code>$arg2</code>, the function returns true.
                        </p>
                        <p>Otherwise, the function returns false.</p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either or both durations may be negative.</p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-yearMonthDuration-greater-than"></a>8.2.2 op:yearMonthDuration-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if <code>$arg1</code> is a longer duration than <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines
                           the semantics of the "gt" operator when applied to two <code>xs:yearMonthDuration</code>
                           values. Also used in the definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:yearMonthDuration-greater-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:yearMonthDuration-greater-than($A, $B)</code> is defined to
                           return the same result as <code>op:yearMonthDuration-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-dayTimeDuration-less-than"></a>8.2.3 op:dayTimeDuration-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if <code>$arg1</code> is a shorter duration than <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "lt" operator when applied to two <code>xs:dayTimeDuration</code> values.
                           Also used in the definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:dayTimeDuration-less-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the number of seconds in the value of <code>$arg1</code> is numerically less than the
                           number of seconds in the value of <code>$arg2</code>, the function returns true.
                        </p>
                        <p>Otherwise, the function returns false.</p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either or both durations may be negative</p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-dayTimeDuration-greater-than"></a>8.2.4 op:dayTimeDuration-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if <code>$arg1</code> is a longer duration than <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "gt" operator when applied to two <code>xs:dayTimeDuration</code> values.
                           Also used in the definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:dayTimeDuration-greater-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:dayTimeDuration-greater-than($A, $B)</code> is defined to
                           return the same result as <code>op:dayTimeDuration-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-duration-equal"></a>8.2.5 op:duration-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if <code>$arg1</code> and <code>$arg2</code> are durations of the same
                           length.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operators when applied to two <code>xs:duration</code> values. Also
                           used in the definition of the "ne" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:duration-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the <code>xs:yearMonthDuration</code> components of <code>$arg1</code> and
                           <code>$arg2</code> are equal and the <code>xs:dayTimeDuration</code> components of
                           <code>$arg1</code> and <code>$arg2</code> are equal, the function returns
                           <code>true</code>.
                        </p>
                        <p>Otherwise, the function returns false.</p>
                        <p>The semantics of this function are:</p>
                        <div class="exampleInner"><pre class="small">xs:yearMonthDuration($arg1) div xs:yearMonthDuration('P1M')  eq
xs:yearMonthDuration($arg2) div xs:yearMonthDuration('P1M')
    and
xs:dayTimeDuration($arg1) div xs:dayTimeDuration('PT1S')  eq
xs:dayTimeDuration($arg2) div xs:dayTimeDuration('PT1S')
</pre></div>
                        <p>that is, the function returns <code>true</code> if the months and seconds values of the
                           two durations are equal.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Note that this function, like any other, may be applied to arguments that are derived
                           from the types given in the function signature, including the two subtypes
                           <code>xs:dayTimeDuration</code> and <code>xs:yearMonthDuration</code>. With the
                           exception of the zero-length duration, no instance of <code>xs:dayTimeDuration</code>
                           can ever be equal to an instance of <code>xs:yearMonthDuration</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:duration-equal(xs:duration("P1Y"),
                                 xs:duration("P12M"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:duration("PT24H"),
                                 xs:duration("P1D"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:duration("P1Y"),
                                 xs:duration("P365D"))</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:yearMonthDuration("P0Y"),
                                 xs:dayTimeDuration("P0D"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:yearMonthDuration("P1Y"),
                                 xs:dayTimeDuration("P365D"))</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:yearMonthDuration("P2Y"),
                                 xs:yearMonthDuration("P24M"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:dayTimeDuration("P10D"),
                                 xs:dayTimeDuration("PT240H"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:duration("P2Y0M0DT0H0M0S"),
                                 xs:yearMonthDuration("P24M"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:duration-equal(xs:duration("P0Y0M10D"),
                                 xs:dayTimeDuration("PT240H"))</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="component-extraction-durations"></a>8.3 Component extraction functions on durations
               </h3>
               <p>The duration datatype may be considered to be a composite datatypes
                  in that it contains distinct properties or components. The extraction functions specified
                  below extract a single component from a duration value. 
                  For <code>xs:duration</code> and its subtypes, including the two subtypes <code>xs:yearMonthDuration</code> and
                  <code>xs:dayTimeDuration</code>, the components are normalized: this means that the seconds and minutes 
                  components will always be less than 60, the hours component less than 24, and the
                  months component less than 12.
                  
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-years-from-duration"><code>fn:years-from-duration</code></a></td>
                        <td>Returns the number of years in a duration.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-months-from-duration"><code>fn:months-from-duration</code></a></td>
                        <td>Returns the number of months in a duration.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-days-from-duration"><code>fn:days-from-duration</code></a></td>
                        <td>Returns the number of days in a duration.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-hours-from-duration"><code>fn:hours-from-duration</code></a></td>
                        <td>Returns the number of hours in a duration.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-duration"><code>fn:minutes-from-duration</code></a></td>
                        <td>Returns the number of minutes in a duration.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-duration"><code>fn:seconds-from-duration</code></a></td>
                        <td>Returns the number of seconds in a duration.</td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-years-from-duration"></a>8.3.1 fn:years-from-duration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of years in a duration.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:years-from-duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the years
                           component in the value of <code>$arg</code>. <span>Given that a duration
                              is a <code>($months, $seconds)</code> tuple, the result is the value of <code>($months idiv 12)</code></span>.
                        </p>
                        <p>If <code>$arg</code> is a negative duration then the result will be negative.
                        </p>
                        <p>If <code>$arg</code> is an <code>xs:dayTimeDuration</code> the function returns 0.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:years-from-duration(xs:yearMonthDuration("P20Y15M"))</code> returns <code>21</code>.
                           </p>
                           <p>The expression <code>fn:years-from-duration(xs:yearMonthDuration("-P15M"))</code> returns <code>-1</code>.
                           </p>
                           <p>The expression <code>fn:years-from-duration(xs:dayTimeDuration("-P2DT15H"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-months-from-duration"></a>8.3.2 fn:months-from-duration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of months in a duration.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:months-from-duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the months
                           component in the value of <code>$arg</code>. <span>Given that a duration
                              is a <code>($months, $seconds)</code> tuple, the result is the value of <code>($months mod 12)</code></span>.
                        </p>
                        <p>If <code>$arg</code> is a negative duration then the result will be negative.
                        </p>
                        <p>If <code>$arg</code> is an <code>xs:dayTimeDuration</code> the function returns 0.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:months-from-duration(xs:yearMonthDuration("P20Y15M"))</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>fn:months-from-duration(xs:yearMonthDuration("-P20Y18M"))</code> returns <code>-6</code>.
                           </p>
                           <p>The expression <code>fn:months-from-duration(xs:dayTimeDuration("-P2DT15H0M0S"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-days-from-duration"></a>8.3.3 fn:days-from-duration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of days in a duration.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:days-from-duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the days
                           component in the value of <code>$arg</code>. <span>Given that a duration
                              is a <code>($months, $seconds)</code> tuple, the result is the value of <code>($seconds idiv 86400)</code></span>.
                        </p>
                        <p>If <code>$arg</code> is a negative duration then the result will be negative.
                        </p>
                        <p>If <code>$arg</code> is an <code>xs:yearMonthDuration</code> the function returns 0.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:days-from-duration(xs:dayTimeDuration("P3DT10H"))</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>fn:days-from-duration(xs:dayTimeDuration("P3DT55H"))</code> returns <code>5</code>.
                           </p>
                           <p>The expression <code>fn:days-from-duration(xs:yearMonthDuration("P3Y5M"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-hours-from-duration"></a>8.3.4 fn:hours-from-duration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of hours in a duration.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:hours-from-duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the hours
                           component in the value of <code>$arg</code>. <span>Given that a duration
                              is a <code>($months, $seconds)</code> tuple, the result is the value of <code>($seconds mod 86400) idiv 3600</code></span>.
                        </p>
                        <p>If <code>$arg</code> is a negative duration then the result will be negative.
                        </p>
                        <p>If <code>$arg</code> is an <code>xs:yearMonthDuration</code> the function returns 0.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:hours-from-duration(xs:dayTimeDuration("P3DT10H"))</code> returns <code>10</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-duration(xs:dayTimeDuration("P3DT12H32M12S"))</code> returns <code>12</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-duration(xs:dayTimeDuration("PT123H"))</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-duration(xs:dayTimeDuration("-P3DT10H"))</code> returns <code>-10</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-minutes-from-duration"></a>8.3.5 fn:minutes-from-duration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of minutes in a duration.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:minutes-from-duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the minutes
                           component in the value of <code>$arg</code>. <span>Given that a duration
                              is a <code>($months, $seconds)</code> tuple, the result is the value of <code>($seconds mod 3600) idiv 60</code></span>.
                        </p>
                        <p>If <code>$arg</code> is a negative duration then the result will be negative.
                        </p>
                        <p>If <code>$arg</code> is an <code>xs:yearMonthDuration</code> the function returns 0.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:minutes-from-duration(xs:dayTimeDuration("P3DT10H"))</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>fn:minutes-from-duration(xs:dayTimeDuration("-P5DT12H30M"))</code> returns <code>-30</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-seconds-from-duration"></a>8.3.6 fn:seconds-from-duration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of seconds in a duration.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:seconds-from-duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:duration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:decimal?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:decimal</code> representing the seconds
                           component in the value of <code>$arg</code>. <span>Given that a duration
                              is a <code>($months, $seconds)</code> tuple, the result is the value of <code>($seconds mod 60)</code>
                              as an <code>xs:decimal</code></span>.
                        </p>
                        <p>If <code>$arg</code> is a negative duration then the result will be negative.
                        </p>
                        <p>If <code>$arg</code> is an <code>xs:yearMonthDuration</code> the function returns 0.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:seconds-from-duration(xs:dayTimeDuration("P3DT10H12.5S"))</code> returns <code>12.5</code>.
                           </p>
                           <p>The expression <code>fn:seconds-from-duration(xs:dayTimeDuration("-PT256S"))</code> returns <code>-16.0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="duration-arithmetic"></a>8.4 Arithmetic operators on durations
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDurations"><code>op:add-yearMonthDurations</code></a></td>
                        <td>Returns the result of adding two <code>xs:yearMonthDuration</code> values. 
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-yearMonthDurations"><code>op:subtract-yearMonthDurations</code></a></td>
                        <td>Returns the result of subtracting one <code>xs:yearMonthDuration</code> value from
                           another. 
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-multiply-yearMonthDuration"><code>op:multiply-yearMonthDuration</code></a></td>
                        <td>Returns the result of multiplying the value of <code>$arg1</code> by <code>$arg2</code>.
                           The result is rounded to the nearest month.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-yearMonthDuration"><code>op:divide-yearMonthDuration</code></a></td>
                        <td>Returns the result of dividing the value of <code>$arg1</code> by <code>$arg2</code>.
                           The result is rounded to the nearest month.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-yearMonthDuration-by-yearMonthDuration"><code>op:divide-yearMonthDuration-by-yearMonthDuration</code></a></td>
                        <td>Returns the ratio of two <code>xs:yearMonthDuration</code> values.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDurations"><code>op:add-dayTimeDurations</code></a></td>
                        <td>Returns the sum of two <code>xs:dayTimeDuration</code> values.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDurations"><code>op:subtract-dayTimeDurations</code></a></td>
                        <td>Returns the result of subtracting one <code>xs:dayTimeDuration</code> from another.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-multiply-dayTimeDuration"><code>op:multiply-dayTimeDuration</code></a></td>
                        <td>Returns the result of multiplying a <code>xs:dayTimeDuration</code> by a number.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-dayTimeDuration"><code>op:divide-dayTimeDuration</code></a></td>
                        <td>Returns the result of multiplying a <code>xs:dayTimeDuration</code> by a number.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-divide-dayTimeDuration-by-dayTimeDuration"><code>op:divide-dayTimeDuration-by-dayTimeDuration</code></a></td>
                        <td>Returns the ratio of two <code>xs:dayTimeDuration</code> values, as a decimal
                           number.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>For operators that combine a duration and a date/time value, see <a href="https://www.w3.org/TR/xpath-functions-31/#dateTime-arithmetic"><b>9.7 Arithmetic operators on durations, dates and times</b></a>.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-add-yearMonthDurations"></a>8.4.1 op:add-yearMonthDurations
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of adding two <code>xs:yearMonthDuration</code> values. 
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "+" operator when applied to two <code>xs:yearMonthDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:add-yearMonthDurations</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:yearMonthDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of adding the value of <code>$arg1</code> to the value
                           of <code>$arg2</code>. The result will be an <code>xs:yearMonthDuration</code> whose
                           length in months is equal to the length in months of <code>$arg1</code> plus the length
                           in months of <code>$arg2</code>.
                        </p>
                        <p>For handling of overflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either duration (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-yearMonthDurations(xs:yearMonthDuration("P2Y11M"),
                                 xs:yearMonthDuration("P3Y3M"))</code> returns <code>xs:yearMonthDuration("P6Y2M")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-yearMonthDurations"></a>8.4.2 op:subtract-yearMonthDurations
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of subtracting one <code>xs:yearMonthDuration</code> value from
                           another. 
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "-" operator when applied to two <code>xs:yearMonthDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:subtract-yearMonthDurations</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:yearMonthDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of subtracting the value of <code>$arg2</code> from the
                           value of <code>$arg1</code>. The result will be an <code>xs:yearMonthDuration</code>
                           whose length in months is equal to the length in months of <code>$arg1</code> minus the
                           length in months of <code>$arg2</code>.
                        </p>
                        <p>For handling of overflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either duration (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-yearMonthDurations(xs:yearMonthDuration("P2Y11M"),
                                 xs:yearMonthDuration("P3Y3M"))</code> returns <code>xs:yearMonthDuration("-P4M")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-multiply-yearMonthDuration"></a>8.4.3 op:multiply-yearMonthDuration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of multiplying the value of <code>$arg1</code> by <code>$arg2</code>.
                           The result is rounded to the nearest month.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "*" operator when applied to an <code>xs:yearMonthDuration</code> and a numeric
                           value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:multiply-yearMonthDuration</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:yearMonthDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is the <code>xs:yearMonthDuration</code> whose length in months is equal to
                           the result of applying the <a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><code>fn:round</code></a> function to the value obtained by
                           multiplying the length in months of <code>$arg1</code> by the value of
                           <code>$arg2</code>.
                        </p>
                        <p>If <code>$arg2</code> is positive or negative zero, the result is a zero-length
                           duration. If <code>$arg2</code> is positive or negative infinity, the result overflows
                           and is handled as described in <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>. 
                        </p>
                        <p>For handling of overflow and underflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0005" title="err:FOCA0005">err:FOCA0005</a>] if <code>$arg2</code> is
                           <code>NaN</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either duration (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:multiply-yearMonthDuration(xs:yearMonthDuration("P2Y11M"),
                                 2.3)</code> returns <code>xs:yearMonthDuration("P6Y9M")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-divide-yearMonthDuration"></a>8.4.4 op:divide-yearMonthDuration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of dividing the value of <code>$arg1</code> by <code>$arg2</code>.
                           The result is rounded to the nearest month.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "div" operator when applied to an <code>xs:yearMonthDuration</code> and a numeric
                           value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:divide-yearMonthDuration</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:yearMonthDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is the <code>xs:yearMonthDuration</code> whose length in months is equal to
                           the result of applying the <a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><code>fn:round</code></a> function to the value obtained by
                           dividing the length in months of <code>$arg1</code> by the value of
                           <code>$arg2</code>.
                        </p>
                        <p>If <code>$arg2</code> is positive or negative infinity, the result is a zero-length
                           duration. If <code>$arg2</code> is positive or negative zero, the result overflows and
                           is handled as described in <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>. 
                        </p>
                        <p>For handling of overflow and underflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0005" title="err:FOCA0005">err:FOCA0005</a>] if <code>$arg2</code> is
                           <code>NaN</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either operand (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:divide-yearMonthDuration(xs:yearMonthDuration("P2Y11M"),
                                 1.5)</code> returns <code>xs:yearMonthDuration("P1Y11M")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-divide-yearMonthDuration-by-yearMonthDuration"></a>8.4.5 op:divide-yearMonthDuration-by-yearMonthDuration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the ratio of two <code>xs:yearMonthDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "div" operator when applied to two <code>xs:yearMonthDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:divide-yearMonthDuration-by-yearMonthDuration</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:yearMonthDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:yearMonthDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:decimal</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of dividing the length in months of <code>$arg1</code>
                           by the length in months of <code>$arg2</code>, according to the rules of the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-divide"><code>op:numeric-divide</code></a> function for integer operands.
                        </p>
                        <p>For handling of overflow and underflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either duration (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:divide-yearMonthDuration-by-yearMonthDuration(xs:yearMonthDuration("P3Y4M"),
                                 xs:yearMonthDuration("-P1Y4M"))</code> returns <code>-2.5</code>.
                           </p>
                           <p>The following example demonstrates how to calculate the length of an
                              <code>xs:yearMonthDuration</code> value in months:
                           </p>
                           <p>The expression <code>op:divide-yearMonthDuration-by-yearMonthDuration(xs:yearMonthDuration("P3Y4M"),
                                 xs:yearMonthDuration("P1M"))</code> returns <code>40</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-add-dayTimeDurations"></a>8.4.6 op:add-dayTimeDurations
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the sum of two <code>xs:dayTimeDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "+"
                           operator when applied to two <code>xs:dayTimeDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:add-dayTimeDurations</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of adding the value of <code>$arg1</code> to the value
                           of <code>$arg2</code>. The result is the <code>xs:dayTimeDuration</code> whose length in
                           seconds is equal to the sum of the length in seconds of the two input durations.
                        </p>
                        <p>For handling of overflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either duration (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-dayTimeDurations(xs:dayTimeDuration("P2DT12H5M"),
                                 xs:dayTimeDuration("P5DT12H"))</code> returns <code>xs:dayTimeDuration('P8DT5M')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-dayTimeDurations"></a>8.4.7 op:subtract-dayTimeDurations
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of subtracting one <code>xs:dayTimeDuration</code> from another.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "-"
                           operator when applied to two <code>xs:dayTimeDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:subtract-dayTimeDurations</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of subtracting the value of <code>$arg2</code> from the
                           value of <code>$arg1</code>. The result is the <code>xs:dayTimeDuration</code> whose
                           length in seconds is equal to the length in seconds of <code>$arg1</code> minus the
                           length in seconds of <code>$arg2</code>.
                        </p>
                        <p>For handling of overflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either duration (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-dayTimeDurations(xs:dayTimeDuration("P2DT12H"),
                                 xs:dayTimeDuration("P1DT10H30M"))</code> returns <code>xs:dayTimeDuration('P1DT1H30M')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-multiply-dayTimeDuration"></a>8.4.8 op:multiply-dayTimeDuration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of multiplying a <code>xs:dayTimeDuration</code> by a number.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "*"
                           operator when applied to an <code>xs:dayTimeDuration</code> and a numeric
                           value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:multiply-dayTimeDuration</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of multiplying the value of <code>$arg1</code> by
                           <code>$arg2</code>. The result is the <code>xs:dayTimeDuration</code> whose length in
                           seconds is equal to the length in seconds of <code>$arg1</code> multiplied by the
                           numeric value <code>$arg2</code>.
                        </p>
                        <p>If <code>$arg2</code> is positive or negative zero, the result is a zero-length
                           duration. If <code>$arg2</code> is positive or negative infinity, the result overflows
                           and is handled as described in <a href="https://www.w3.org/TR/xpath-functions-31/#date-time-duration-conformance"><b>9.1.1 Limits and precision</b></a>. 
                        </p>
                        <p>For handling of overflow and underflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0005" title="err:FOCA0005">err:FOCA0005</a>] if <code>$arg2</code> is
                           <code>NaN</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either operand (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:multiply-dayTimeDuration(xs:dayTimeDuration("PT2H10M"),
                                 2.1)</code> returns <code>xs:dayTimeDuration('PT4H33M')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-divide-dayTimeDuration"></a>8.4.9 op:divide-dayTimeDuration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the result of multiplying a <code>xs:dayTimeDuration</code> by a number.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "div" operator when applied to two <code>xs:dayTimeDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:divide-dayTimeDuration</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of dividing the value of <code>$arg1</code> by
                           <code>$arg2</code>. The result is the <code>xs:dayTimeDuration</code> whose length in
                           seconds is equal to the length in seconds of <code>$arg1</code> divided by the numeric
                           value <code>$arg2</code>.
                        </p>
                        <p>If <code>$arg2</code> is positive or negative infinity, the result is a zero-length
                           duration. If <code>$arg2</code> is positive or negative zero, the result overflows and
                           is handled as described in <a href="https://www.w3.org/TR/xpath-functions-31/#date-time-duration-conformance"><b>9.1.1 Limits and precision</b></a>. 
                        </p>
                        <p>For handling of overflow and underflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0005" title="err:FOCA0005">err:FOCA0005</a>] if <code>$arg2</code> is
                           <code>NaN</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either operand (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:divide-dayTimeDuration(xs:dayTimeDuration("P1DT2H30M10.5S"),
                                 1.5)</code> returns <code>xs:duration("PT17H40M7S")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-divide-dayTimeDuration-by-dayTimeDuration"></a>8.4.10 op:divide-dayTimeDuration-by-dayTimeDuration
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the ratio of two <code>xs:dayTimeDuration</code> values, as a decimal
                           number.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the
                           "div" operator when applied to two <code>xs:dayTimeDuration</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:divide-dayTimeDuration-by-dayTimeDuration</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dayTimeDuration</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dayTimeDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:decimal</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of dividing the value of <code>$arg1</code> by
                           <code>$arg2</code>. The result is the <code>xs:dayTimeDuration</code> whose length in
                           seconds is equal to the length in seconds of <code>$arg1</code> divided by the length in
                           seconds of <code>$arg2</code>. The calculation is performed by applying
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-divide"><code>op:numeric-divide</code></a> to the two <code>xs:decimal</code> operands.
                        </p>
                        <p>For handling of overflow and underflow, see <a href="https://www.w3.org/TR/xpath-functions-31/#duration-limits"><b>9.7.1 Limits and precision</b></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Either operand (and therefore the result) may be negative.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:round-half-to-even( op:divide-dayTimeDuration-by-dayTimeDuration(
                                 xs:dayTimeDuration("P2DT53M11S"), xs:dayTimeDuration("P1DT10H")),
                                 4)</code> returns <code>1.4378</code>.
                           </p>
                           <p>This examples shows how to determine the number of seconds in a duration.</p>
                           <p>The expression <code>op:divide-dayTimeDuration-by-dayTimeDuration(xs:dayTimeDuration("P2DT53M11S"),
                                 xs:dayTimeDuration("PT1S"))</code> returns <code>175991.0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="dates-times"></a>9 Functions and operators on dates and times
            </h2>
            <p>This section defines operations on the <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> date and time types.
            </p>
            <p>
               See <a href="https://www.w3.org/TR/xpath-functions-31/#Working-With-Timezones">[Working With Timezones]</a> for a disquisition on working with date and time values with and without timezones.
               
            </p>
            <div class="div2">
               
               <h3><a id="date-time-types"></a>9.1 Date and time types
               </h3>
               <p>The operators described in this section are defined on the following date and
                  time types: 
               </p>
               <ul>
                  <li>
                     <p><code>xs:dateTime</code></p>
                  </li>
                  <li>
                     <p><code>xs:date</code></p>
                  </li>
                  <li>
                     <p><code>xs:time</code></p>
                  </li>
                  <li>
                     <p><code>xs:gYearMonth</code></p>
                  </li>
                  <li>
                     <p><code>xs:gYear</code></p>
                  </li>
                  <li>
                     <p><code>xs:gMonthDay</code></p>
                  </li>
                  <li>
                     <p><code>xs:gMonth</code></p>
                  </li>
                  <li>
                     <p><code>xs:gDay</code></p>
                  </li>
               </ul>
               <p>The only operation defined on					
                  <code>xs:gYearMonth</code>, <code>xs:gYear</code>,
                  <code>xs:gMonthDay</code>, <code>xs:gMonth</code> and <code>xs:gDay</code> values is 
                  equality comparison.
                  For other types, further operations are provided, including component extraction,
                  
                  order comparisons, arithmetic, formatted display, and timezone
                  					adjustment.
               </p>
               <div class="div3">
                  
                  <h4><a id="date-time-duration-conformance"></a>9.1.1 Limits and precision
                  </h4>
                  <p>All <em>minimally conforming</em> processors
                     <span class="verb">must</span>  support positive year values with a minimum of 4 digits (i.e.,
                     YYYY) and a minimum fractional second precision of 1 millisecond or three
                     digits (i.e., s.sss). However, <em>conforming</em> processors
                     <span class="verb">may</span>  set larger <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> limits
                     on the maximum number of digits they support in these two situations.  Processors
                     <span class="verb">may</span> also choose to support the year 0000 and 
                     years with negative values.  The results of operations on dates that cross the year
                     
                     0000 are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                  </p>
                  <p>A processor that limits the number of digits in date and time datatype
                     representations may encounter overflow and underflow conditions when it
                     tries to execute the functions in <a href="https://www.w3.org/TR/xpath-functions-31/#dateTime-arithmetic"><b>9.7 Arithmetic operators on durations, dates and times</b></a>. In
                     these situations, the processor <span class="verb">must</span> return 00:00:00 in case of time underflow.
                     It <span class="verb">must</span> raise a dynamic 
                     error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0001" title="err:FODT0001">err:FODT0001</a>] in case of overflow.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="date-time-values"></a>9.2 Date/time datatype values
               </h3>
               <p>As defined in <a href="https://www.w3.org/TR/xpath-datamodel-31/#dates-and-times">Section 
                     
                     3.3.2 Dates and Times
                     </a><sup><small>DM31</small></sup>, <code>xs:dateTime</code>, 
                  			<code>xs:date</code>, <code>xs:time</code>,  <code>xs:gYearMonth</code>, <code>xs:gYear</code>, 
                  			<code>xs:gMonthDay</code>, <code>xs:gMonth</code>, <code>xs:gDay</code> values, 
                  			referred to collectively as date/time values, are represented as seven components
                  or properties: 
                  			<code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, <code>minute</code>, 
                  			<code>second</code> and <code>timezone</code>.  The first five components are 
                  			<code>xs:integer</code> values.  The value of the <code>second</code> component is an <code>xs:decimal</code> 
                  			and the value of the <code>timezone</code> component is an <code>xs:dayTimeDuration</code>.  
                  			For all the primitive date/time datatypes, the <code>timezone</code> property is optional and may or may not 
                  			be present. Depending on the datatype, some of the remaining six properties must
                  be present and 
                  			some must be <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.   
                  Absent, or missing, properties are represented by the empty sequence.  
                  			This value is referred to as the <em>local</em> value in that the value retains its original timezone.  
                  			Before comparing or subtracting <code>xs:dateTime</code> values, this local value <span class="verb">must</span>  
                  			be translated or <em>normalized</em> to UTC.
               </p>
               <p>For <code>xs:time</code>, <code>00:00:00</code> and <code>24:00:00</code> are alternate lexical forms 
                  			for the same value, whose canonical representation is <code>00:00:00</code>.  For <code>xs:dateTime</code>,
                  		    a time component <code>24:00:00</code> translates to <code>00:00:00</code> of the following day.
               </p>
               <div class="div3">
                  
                  <h4><a id="date-time-lexical-mapping"></a>9.2.1 Examples
                  </h4>
                  <ul>
                     <li>
                        <p>An <code>xs:dateTime</code> with lexical
                           representation <code>1999-05-31T05:00:00</code>
                           						is represented in the datamodel by <code>{1999, 5, 31, 5, 0, 0.0, ()}</code>.
                        </p>
                     </li>
                     <li>
                        <p>An <code>xs:dateTime</code> with lexical
                           representation <code>1999-05-31T13:20:00-05:00</code> 
                           						is represented by <code>{1999, 5, 31, 13, 20, 0.0, -PT5H}</code>.
                        </p>
                     </li>
                     <li>
                        <p>An <code>xs:dateTime</code> with lexical
                           representation <code>1999-12-31T24:00:00</code> 
                           						is represented by <code>{2000, 1, 1, 0, 0, 0.0, ()}</code>.
                        </p>
                     </li>
                     <li>
                        <p>An <code>xs:date</code> with lexical
                           representation <code>2005-02-28+8:00</code> 
                           						is represented by <code>{2005, 2, 28, (), (), (), PT8H}</code>.
                        </p>
                     </li>
                     <li>
                        <p>An <code>xs:time</code> with lexical
                           representation <code>24:00:00</code> 
                           						is represented by <code>{(), (), (), 0, 0, 0, ()}</code>.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="constructing-dateTime"></a>9.3 Constructing a dateTime
               </h3>
               <p>A function is provided for constructing a
                  <code>xs:dateTime</code> value from a <code>xs:date</code> value and a
                  <code>xs:time</code> value.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime"><code>fn:dateTime</code></a></td>
                        <td>Returns an <code>xs:dateTime</code> value created by combining an <code>xs:date</code>
                           and an <code>xs:time</code>.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-dateTime"></a>9.3.1 fn:dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an <code>xs:dateTime</code> value created by combining an <code>xs:date</code>
                           and an <code>xs:time</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:dateTime</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTime?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If either <code>$arg1</code> or <code>$arg2</code> is the empty sequence the function
                           returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:dateTime</code> whose date component is
                           equal to <code>$arg1</code> and whose time component is equal to <code>$arg2</code>.
                        </p>
                        <p>The timezone of the result is computed as follows:</p>
                        <ul>
                           <li>
                              <p>If neither argument has a timezone, the result has no timezone.</p>
                           </li>
                           <li>
                              <p>If exactly one of the arguments has a timezone, or if both arguments have the same
                                 timezone, the result has this timezone.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0008" title="err:FORG0008">err:FORG0008</a>] if the two arguments both
                           have timezones and the timezones are different. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:dateTime(xs:date("1999-12-31"),
                                 xs:time("12:00:00"))</code> returns <code>xs:dateTime("1999-12-31T12:00:00")</code>.
                           </p>
                           <p>The expression <code>fn:dateTime(xs:date("1999-12-31"),
                                 xs:time("24:00:00"))</code> returns <code>xs:dateTime("1999-12-31T00:00:00")</code>. <em>(This is because <code>"24:00:00"</code> is an alternate lexical form
                                 for <code>"00:00:00"</code>).</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="comp.datetime"></a>9.4 Comparison operators on duration, date and time values
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a></td>
                        <td>Returns true if the two supplied <code>xs:dateTime</code> values refer to the same
                           instant in time.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-less-than"><code>op:dateTime-less-than</code></a></td>
                        <td>Returns <code>true</code> if the first argument represents an earlier instant in time
                           than the second argument.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-greater-than"><code>op:dateTime-greater-than</code></a></td>
                        <td>Returns <code>true</code> if the first argument represents a later instant in time than
                           the second argument.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-date-equal"><code>op:date-equal</code></a></td>
                        <td>Returns <code>true</code> if and only if the starting instants of the two supplied
                           <code>xs:date</code> values are the same.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-date-less-than"><code>op:date-less-than</code></a></td>
                        <td>Returns <code>true</code> if and only if the starting instant of <code>$arg1</code> is
                           less than the starting instant of <code>$arg2</code>. Returns <code>false</code>
                           otherwise.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-date-greater-than"><code>op:date-greater-than</code></a></td>
                        <td>Returns <code>true</code> if and only if the starting instant of <code>$arg1</code> is
                           greater than the starting instant of <code>$arg2</code>. Returns <code>false</code>
                           otherwise.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-time-equal"><code>op:time-equal</code></a></td>
                        <td>Returns <code>true</code> if the two <code>xs:time</code> values represent the same
                           instant in time, when treated as being times on the same date, before adjusting the
                           timezone.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-time-less-than"><code>op:time-less-than</code></a></td>
                        <td>Returns <code>true</code> if the first <code>xs:time</code> value represents an earlier
                           instant in time than the second, when both are treated as being times on the same
                           date,
                           before adjusting the timezone.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-time-greater-than"><code>op:time-greater-than</code></a></td>
                        <td>Returns <code>true</code> if the first <code>xs:time</code> value represents a later
                           instant in time than the second, when both are treated as being times on the same
                           date,
                           before adjusting the timezone.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-gYearMonth-equal"><code>op:gYearMonth-equal</code></a></td>
                        <td>Returns true if the two <code>xs:gYearMonth</code> values have the same starting
                           instant.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-gYear-equal"><code>op:gYear-equal</code></a></td>
                        <td>Returns true if the two <code>xs:gYear</code> values have the same starting instant.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-gMonthDay-equal"><code>op:gMonthDay-equal</code></a></td>
                        <td>Returns true if the two <code>xs:gMonthDay</code> values have the same starting instant,
                           when considered as days in the same year.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-gMonth-equal"><code>op:gMonth-equal</code></a></td>
                        <td>Returns true if the two <code>xs:gMonth</code> values have the same starting instant,
                           when considered as months in the same year.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-gDay-equal"><code>op:gDay-equal</code></a></td>
                        <td>Returns true if the two <code>xs:gDay</code> values have the same starting instant, when
                           considered as days in the same month of the same year.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>The following comparison operators are defined on the <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                  date/time datatypes. Each operator takes two operands of the same
                  type and returns an <code>xs:boolean</code> result.
               </p>
               <p>
                  <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> also states that the
                  order relation on date and time datatypes is
                  not a total order but a partial order because these
                  datatypes may or may not have a timezone.  This is handled as follows.
                  If either operand to a comparison function on date or time values does not have
                  an (explicit) timezone then, for the purpose of the operation, an implicit
                  timezone, provided by the dynamic context <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                     
                     C.2 Dynamic Context Components
                     </a><sup><small>XP31</small></sup>, is assumed to be present as part of
                  the value. This creates a total order for all date and time values.
               </p>
               <p>An <code>xs:dateTime</code> can be considered to consist of seven components:
                  <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, <code>minute</code>, 
                  <code>second</code> and <code>timezone</code>.  For <code>xs:dateTime</code> six components (<code>year</code>, 
                  <code>month</code>, <code>day</code>, <code>hour</code>, <code>minute</code> and <code>second</code>) are required  
                  and  <code>timezone</code> is optional.   For other date/time values, of the first six components, some are
                  required 
                  			   and others must be <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.  
                  			   <code>Timezone</code> is always optional.  For example, for <code>xs:date</code>, 
                  the <code>year</code>, <code>month</code> and <code>day</code> components are required and <code>hour</code>, 
                  <code>minute</code> and <code>second</code> components must be absent;  for <code>xs:time</code> the <code>hour</code>, 
                  <code>minute</code> and <code>second</code> components are required and <code>year</code>, <code>month</code> and 
                  <code>day</code> are missing;  for <code>xs:gDay</code>, <code>day</code> is required and <code>year</code>, 
                  <code>month</code>, <code>hour</code>, <code>minute</code> and <code>second</code> are missing.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>In <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a>, a new <code>explicitTimezone</code> facet is available with values
                     <code>optional</code>, <code>required</code>, or <code>prohibited</code> to 
                     enable the timezone to be defined as mandatory or disallowed.
                  </p>
               </div>
               <p>Values of the date/time datatypes <code>xs:time</code>, <code>xs:gMonthDay</code>, <code>xs:gMonth</code>, 
                  			and <code>xs:gDay</code>, can be considered to represent a sequence of recurring time instants or time periods.
                  
                  			An <code>xs:time</code> occurs every day.  An <code>xs:gMonth</code> occurs every year.  Comparison operators 
                  			on these datatypes compare the starting instants of equivalent occurrences in the
                  recurring series.  
                  			These <code>xs:dateTime</code> values are calculated  as described below.
               </p>
               <p>Comparison operators on <code>xs:date</code>, <code>xs:gYearMonth</code> and <code>xs:gYear</code> compare 
                  			their starting instants. These <code>xs:dateTime</code> values are calculated  as described below.
               </p>
               <p>The starting instant of an occurrence of a date/time value is an <code>xs:dateTime</code> 
                  calculated by filling 
                  			in the missing components of the local value from a reference <code>xs:dateTime</code>.  An example of a suitable
                  reference <code>xs:dateTime</code> is <code>1972-01-01T00:00:00</code>. Then, for example, the starting
                  instant corresponding to the <code>xs:date</code> value <code>2009-03-12</code> is 
                  <code>2009-03-12T00:00:00</code>; the starting instant corresponding to the <code>xs:time</code> value
                  <code>13:30:02</code> is <code>1972-01-01T13:30:02</code>; and the starting instant corresponding to the
                  <code>gMonthDay</code> value <code>--02-29</code> is <code>1972-02-29T00:00:00</code> (which explains
                  why a leap year was chosen for the reference).
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>In the previous version of this specification, the reference date/time chosen was
                     <code>1972-12-31T00:00:00</code>. While this gives the same results, it produces a "starting instant" for 
                     a <code>gMonth</code> or <code>gMonthDay</code> that bears no
                     relation to the ordinary meaning of the term, and it also required special handling
                     of short months. 
                     The original choice was made to allow for leap seconds; but since leap seconds are
                     not recognized 
                     in date/time arithmetic, this is not actually necessary.
                  </p>
               </div>
               <p>If the <code>xs:time</code> value written as
                  			<code>24:00:00</code> is to be compared, filling in the missing components gives <code>1972-01-01T00:00:00</code>, 
                  			because <code>24:00:00</code> is an alternative representation of <code>00:00:00</code> (the lexical value 
                  			<code>"24:00:00"</code> is
                  			converted to the time components {0,0,0} before the missing components are filled
                  			in). This has the consequence that when ordering <code>xs:time</code> values, 
                  			<code>24:00:00</code> is
                  			considered to be earlier than <code>23:59:59</code>. However, when ordering 
                  			<code>xs:dateTime</code>
                  			values, a time component of <code>24:00:00</code> is considered equivalent to <code>00:00:00</code> on the
                  			following day.
               </p>
               <p>Note that the reference <code>xs:dateTime</code> does not have a timezone.  The <code>timezone</code> component 
                  			is never filled in from the reference <code>xs:dateTime</code>.  In some cases, if the date/time value does not 
                  			have a timezone, the implicit timezone from the dynamic context is used as the
                  timezone.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>This specification uses the reference <code>xs:dateTime 1972-01-01T00:00:00</code> in the description of the 
                     			   comparison operators.  Implementations may use other reference <code>xs:dateTime</code> values 
                     			   as long as they yield the same results.  The reference <code>xs:dateTime</code> used must meet the following 
                     			   constraints:  when it is used to supply components into <code>xs:gMonthDay</code> values, the year must allow 
                     			   for February 29 and so must be a leap year; when it is used to supply missing
                     components into <code>xs:gDay</code> 
                     			   values, the month must allow for 31 days.  Different reference <code>xs:dateTime</code> values may be used for 
                     			   different operators.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-dateTime-equal"></a>9.4.1 op:dateTime-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the two supplied <code>xs:dateTime</code> values refer to the same
                           instant in time.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operator when applied to two <code>xs:dateTime</code> values. Also
                           used in the definition of the "ne", "le" and "ge" operators.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:dateTime-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If either <code>$arg1</code> or <code>$arg2</code> has no timezone component, the
                           effective value of the argument is obtained by substituting the implicit timezone
                           from
                           the dynamic evaluation context.
                        </p>
                        <p>The function then returns <code>true</code> if and only if the effective value of
                           <code>$arg1</code> is equal to the effective value of <code>$arg2</code> according to
                           the algorithm defined in section 3.2.7.4 of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                           "Order relation on dateTime" for <code>xs:dateTime</code> values with
                           timezones. Otherwise the function returns <code>false</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code></p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00-01:00"),
                                 xs:dateTime("2002-04-02T17:00:00+04:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00"),
                                 xs:dateTime("2002-04-02T23:00:00+06:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00"),
                                 xs:dateTime("2002-04-02T17:00:00"))</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("2002-04-02T12:00:00"),
                                 xs:dateTime("2002-04-02T12:00:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("2002-04-02T23:00:00-04:00"),
                                 xs:dateTime("2002-04-03T02:00:00-01:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("1999-12-31T24:00:00"),
                                 xs:dateTime("2000-01-01T00:00:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:dateTime-equal(xs:dateTime("2005-04-04T24:00:00"),
                                 xs:dateTime("2005-04-04T00:00:00"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-dateTime-less-than"></a>9.4.2 op:dateTime-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the first argument represents an earlier instant in time
                           than the second argument.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "lt" operator when applied to two <code>xs:dateTime</code> values. Also
                           used in the definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:dateTime-less-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If either <code>$arg1</code> or <code>$arg2</code> has no timezone component, the
                           effective value of the argument is obtained by substituting the implicit timezone
                           from
                           the dynamic evaluation context.
                        </p>
                        <p>The function then returns <code>true</code> if and only if the effective value of
                           <code>$arg1</code> is less than the effective value of <code>$arg2</code> according
                           to the algorithm defined in section 3.2.7.4 of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                           "Order relation on dateTime" for <code>xs:dateTime</code> values with
                           timezones. Otherwise the function returns <code>false</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-dateTime-greater-than"></a>9.4.3 op:dateTime-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the first argument represents a later instant in time than
                           the second argument.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "gt" operator when applied to two <code>xs:dateTime</code> values. Also
                           used in the definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:dateTime-greater-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:dateTime-greater-than($A, $B)</code> is defined to return the
                           same result as <code>op:dateTime-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-date-equal"></a>9.4.4 op:date-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if and only if the starting instants of the two supplied
                           <code>xs:date</code> values are the same.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operator when applied to two <code>xs:date</code> values. Also used
                           in the definition of the "ne", "le" and "ge" operators.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:date-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instant of an <code>xs:date</code> is the <code>xs:dateTime</code> at time
                           <code>00:00:00</code> on that date.
                        </p>
                        <p>The function returns the result of the expression:</p>
                        <div class="exampleInner"><pre>op:dateTime-equal(xs:dateTime($arg1), xs:dateTime($arg2))</pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:date-equal(xs:date("2004-12-25Z"),
                                 xs:date("2004-12-25+07:00"))</code> returns <code>false()</code>. <em>(The starting instants are
                                 <code>xs:dateTime("2004-12-25T00:00:00Z")</code> and
                                 <code>xs:dateTime("2004-12-25T00:00:00+07:00")</code>. These are normalized to
                                 <code>xs:dateTime("2004-12-25T00:00:00Z")</code> and
                                 <code>xs:dateTime("2004-12-24T17:00:00Z")</code>. ).</em></p>
                           <p>The expression <code>op:date-equal(xs:date("2004-12-25-12:00"),
                                 xs:date("2004-12-26+12:00"))</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-date-less-than"></a>9.4.5 op:date-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if and only if the starting instant of <code>$arg1</code> is
                           less than the starting instant of <code>$arg2</code>. Returns <code>false</code>
                           otherwise.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "lt" operator when applied to two <code>xs:date</code> values. Also used in the
                           definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:date-less-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instant of an <code>xs:date</code> is the <code>xs:dateTime</code> at time
                           <code>00:00:00</code> on that date.
                        </p>
                        <p>The function returns the result of the expression:</p>
                        <div class="exampleInner"><pre>op:dateTime-less-than(xs:dateTime($arg1), xs:dateTime($arg2))</pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:date-less-than(xs:date("2004-12-25Z"),
                                 xs:date("2004-12-25-05:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:date-less-than(xs:date("2004-12-25-12:00"),
                                 xs:date("2004-12-26+12:00"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-date-greater-than"></a>9.4.6 op:date-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if and only if the starting instant of <code>$arg1</code> is
                           greater than the starting instant of <code>$arg2</code>. Returns <code>false</code>
                           otherwise.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "gt" operator when applied to two <code>xs:date</code> values. Also used in the
                           definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:date-greater-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:date-greater-than($A, $B)</code> is defined to return the
                           same result as <code>op:date-less-than($B, $A)</code></p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:date-greater-than(xs:date("2004-12-25Z"),
                                 xs:date("2004-12-25+07:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:date-greater-than(xs:date("2004-12-25-12:00"),
                                 xs:date("2004-12-26+12:00"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-time-equal"></a>9.4.7 op:time-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the two <code>xs:time</code> values represent the same
                           instant in time, when treated as being times on the same date, before adjusting the
                           timezone.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operator when applied to two <code>xs:time</code> values. Also used
                           in the definition of the "ne", "le" and "ge" operators.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:time-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Each of the supplied <code>xs:time</code> values is expanded to an
                           <code>xs:dateTime</code> value by associating the time with an arbitrary date. The
                           function returns the result of comparing these two <code>xs:dateTime</code> values using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a>.
                        </p>
                        <p>The result of the function is thus the same as the value of the expression:</p>
                        <div class="exampleInner"><pre class="small">op:dateTime-equal(
        fn:dateTime(xs:date('1972-12-31'), $arg1), 
        fn:dateTime(xs:date('1972-12-31'), $arg2))</pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the date components from the reference <code>xs:dateTime</code>
                              correspond to <code>1972-12-31</code>.
                           </p>
                           <p>The expression <code>op:time-equal(xs:time("08:00:00+09:00"),
                                 xs:time("17:00:00-06:00"))</code> returns <code>false()</code>. <em>(The <code>xs:dateTime</code>s calculated using the reference date
                                 components are <code>1972-12-31T08:00:00+09:00</code> and
                                 <code>1972-12-31T17:00:00-06:00</code>. These normalize to
                                 <code>1972-12-30T23:00:00Z</code> and <code>1972-12-31T23:00:00Z</code>.
                                 ).</em></p>
                           <p>The expression <code>op:time-equal(xs:time("21:30:00+10:30"),
                                 xs:time("06:00:00-05:00"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:time-equal(xs:time("24:00:00+01:00"),
                                 xs:time("00:00:00+01:00"))</code> returns <code>true()</code>. <em>(This not the result one might expect. For <code>xs:dateTime</code>
                                 values, a time of <code>24:00:00</code> is equivalent to <code>00:00:00</code> on
                                 the following day. For <code>xs:time</code>, the normalization from
                                 <code>24:00:00</code> to <code>00:00:00</code> happens before the
                                 <code>xs:time</code> is converted into an <code>xs:dateTime</code> for the
                                 purpose of the equality comparison. For <code>xs:time</code>, any operation on
                                 <code>24:00:00</code> produces the same result as the same operation on
                                 <code>00:00:00</code> because these are two different lexical representations
                                 of the same value. ).</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-time-less-than"></a>9.4.8 op:time-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the first <code>xs:time</code> value represents an earlier
                           instant in time than the second, when both are treated as being times on the same
                           date,
                           before adjusting the timezone.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "lt" operator when applied to two <code>xs:time</code> values. Also used in the
                           definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:time-less-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Each of the supplied <code>xs:time</code> values is expanded to an
                           <code>xs:dateTime</code> value by associating the time with an arbitrary date. The
                           function returns the result of comparing these two <code>xs:dateTime</code> values using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-less-than"><code>op:dateTime-less-than</code></a>.
                        </p>
                        <p>The result of the function is thus the same as the value of the expression:</p>
                        <div class="exampleInner"><pre class="small">op:dateTime-less-than(
        fn:dateTime(xs:date('1972-12-31'), $arg1), 
        fn:dateTime(xs:date('1972-12-31'), $arg2))</pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>.
                           </p>
                           <p>The expression <code>op:time-less-than(xs:time("12:00:00"),
                                 xs:time("23:00:00+06:00"))</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>op:time-less-than(xs:time("11:00:00"),
                                 xs:time("17:00:00Z"))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>op:time-less-than(xs:time("23:59:59"),
                                 xs:time("24:00:00"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-time-greater-than"></a>9.4.9 op:time-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if the first <code>xs:time</code> value represents a later
                           instant in time than the second, when both are treated as being times on the same
                           date,
                           before adjusting the timezone.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "gt" operator when applied to two <code>xs:time</code> values. Also used in the
                           definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:time-greater-than</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:time-greater-than($A, $B)</code> is defined to return the
                           same result as <code>op:time-less-than($B, $A)</code></p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:time-greater-than(xs:time("08:00:00+09:00"),
                                 xs:time("17:00:00-06:00"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-gYearMonth-equal"></a>9.4.10 op:gYearMonth-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the two <code>xs:gYearMonth</code> values have the same starting
                           instant.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operator when applied to two <code>xs:gYearMonth</code> values. Also
                           used in the definition of the "ne" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:gYearMonth-equal</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gYearMonth</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gYearMonth</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instants of <code>$arg1</code> and <code>$arg2</code> are calculated by
                           supplying the missing components of <code>$arg1</code> and <code>$arg2</code> from the
                           <code>xs:dateTime</code> template <code>xxxx-xx-01T00:00:00</code>. The function
                           returns the result of comparing these two starting instants using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>.
                           </p>
                           <p><code>op:gYearMonth-equal(xs:gYearMonth("1986-02"), xs:gYearMonth("1986-03"))</code>
                              returns <code>false()</code>. The starting instants are
                              <code>1986-02-01T00:00:00-05:00</code> and <code>1986-03-01T00:00:00</code>,
                              respectively.
                           </p>
                           <p><code>op:gYearMonth-equal(xs:gYearMonth("1978-03"), xs:gYearMonth("1986-03Z"))</code>
                              returns <code>false()</code>. The starting instants are
                              <code>1978-03-01T00:00:00-05:00</code> and <code>1986-03-01T00:00:00Z</code>,
                              respectively.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-gYear-equal"></a>9.4.11 op:gYear-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the two <code>xs:gYear</code> values have the same starting instant.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "eq" operator when applied to two <code>xs:gYear</code> values. Also used in the
                           definition of the "ne" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:gYear-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gYear</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gYear</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instants of <code>$arg1</code> and <code>$arg2</code> are calculated by
                           supplying the missing components of <code>$arg1</code> and <code>$arg2</code> from the
                           <code>xs:dateTime</code> template <code>xxxx-01-01T00:00:00</code>. The function
                           returns the result of comparing these two starting instants using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>. Assume, also, that the <code>xs:dateTime</code> template is
                              <code>xxxx-01-01T00:00:00</code>. 
                           </p>
                           <p><code>op:gYear-equal(xs:gYear("2005-12:00"), xs:gYear("2005+12:00"))</code> returns
                              <code>false()</code>. The starting instants are
                              <code>2005-01-01T00:00:00-12:00</code> and <code>2005-01-01T00:00:00+12:00</code>,
                              respectively, and normalize to <code>2005-01-01T12:00:00Z</code> and
                              <code>2004-12-31T12:00:00Z</code>.
                           </p>
                           <p>The expression <code>op:gYear-equal(xs:gYear("1976-05:00"),
                                 xs:gYear("1976"))</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-gMonthDay-equal"></a>9.4.12 op:gMonthDay-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the two <code>xs:gMonthDay</code> values have the same starting instant,
                           when considered as days in the same year.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operator when applied to two <code>xs:gMonthDay</code> values. Also
                           used in the definition of the "ne" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:gMonthDay-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gMonthDay</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gMonthDay</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instants of <code>$arg1</code> and <code>$arg2</code> are calculated by
                           supplying the missing components of <code>$arg1</code> and <code>$arg2</code> from the
                           <code>xs:dateTime</code> template <code>1972-xx-xxT00:00:00</code> or an equivalent.
                           The function returns the result of comparing these two starting instants using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>. Assume for the purposes of illustration that the
                              <code>xs:dateTime</code> template used is <code>1972-xx-xxT00:00:00</code> (this
                              does not affect the result). 
                           </p>
                           <p>The expression <code>op:gMonthDay-equal(xs:gMonthDay("--12-25-14:00"),
                                 xs:gMonthDay("--12-26+10:00"))</code> returns <code>true()</code>. <em>( The starting instants are <code>1972-12-25T00:00:00-14:00</code> and
                                 <code>1972-12-26T00:00:00+10:00</code>, respectively, and normalize to
                                 <code>1972-12-25T14:00:00Z</code> and <code>1972-12-25T14:00:00Z</code>.
                                 ).</em></p>
                           <p>The expression <code>op:gMonthDay-equal(xs:gMonthDay("--12-25"),
                                 xs:gMonthDay("--12-26Z"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-gMonth-equal"></a>9.4.13 op:gMonth-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the two <code>xs:gMonth</code> values have the same starting instant,
                           when considered as months in the same year.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "eq" operator when applied to two <code>xs:gMonth</code> values. Also used
                           in the definition of the "ne" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:gMonth-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gMonth</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gMonth</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instants of <code>$arg1</code> and <code>$arg2</code> are calculated by
                           supplying the missing components of <code>$arg1</code> and <code>$arg2</code> from the
                           <code>xs:dateTime</code> template <code>1972-xx-01T00:00:00</code> or an equivalent.
                           The function returns the result of comparing these two starting instants using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>. Assume, also, that the <code>xs:dateTime</code> template
                              chosen is <code>1972-xx-01T00:00:00</code>. 
                           </p>
                           <p>The expression <code>op:gMonth-equal(xs:gMonth("--12-14:00"),
                                 xs:gMonth("--12+10:00"))</code> returns <code>false()</code>. <em>( The starting instants are <code>1972-12-01T00:00:00-14:00</code> and
                                 <code>1972-12-01T00:00:00+10:00</code>, respectively, and normalize to
                                 <code>1972-11-30T14:00:00Z</code> and <code>1972-12-01T14:00:00Z</code>.
                                 ).</em></p>
                           <p>The expression <code>op:gMonth-equal(xs:gMonth("--12"),
                                 xs:gMonth("--12Z"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-gDay-equal"></a>9.4.14 op:gDay-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the two <code>xs:gDay</code> values have the same starting instant, when
                           considered as days in the same month of the same year.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "eq" operator when applied to two <code>xs:gDay</code> values. Also used in the
                           definition of the "ne" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:gDay-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gDay</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:gDay</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The starting instants of <code>$arg1</code> and <code>$arg2</code> are calculated by
                           supplying the missing components of <code>$arg1</code> and <code>$arg2</code> from the
                           <code>xs:dateTime</code> template <code>1972-12-xxT00:00:00</code> or an equivalent.
                           The function returns the result of comparing these two starting instants using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime-equal"><code>op:dateTime-equal</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>. Assume, also, that the <code>xs:dateTime</code> template is
                              <code>1972-12-xxT00:00:00</code>. 
                           </p>
                           <p>The expression <code>op:gDay-equal(xs:gDay("---25-14:00"),
                                 xs:gDay("---25+10:00"))</code> returns <code>false()</code>. <em>( The starting instants are <code>1972-12-25T00:00:00-14:00</code> and
                                 <code>1972-12-25T00:00:00+10:00</code>, respectively, and normalize to
                                 <code>1972-12-25T14:00:00Z</code> and <code>1972-12-24T14:00:00Z</code>.
                                 ).</em></p>
                           <p>The expression <code>op:gDay-equal(xs:gDay("---12"), xs:gDay("---12Z"))</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="component-extraction-dateTime"></a>9.5 Component extraction functions on dates and times
               </h3>
               <p>The date and time datatypes may be considered to be composite datatypes
                  in that they contain distinct properties or components. The extraction functions specified
                  below extract a single component from a date or time value. In all cases 
                  					the local value (that is, the original value as written, 
                  					without any timezone adjustment) is used. 
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>A time written as <code>24:00:00</code> is treated as <code>00:00:00</code> on the
                     			following day.
                  </p>
               </div>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-year-from-dateTime"><code>fn:year-from-dateTime</code></a></td>
                        <td>Returns the year component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-month-from-dateTime"><code>fn:month-from-dateTime</code></a></td>
                        <td>Returns the month component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-day-from-dateTime"><code>fn:day-from-dateTime</code></a></td>
                        <td>Returns the day component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-hours-from-dateTime"><code>fn:hours-from-dateTime</code></a></td>
                        <td>Returns the hours component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-dateTime"><code>fn:minutes-from-dateTime</code></a></td>
                        <td>Returns the minute component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-dateTime"><code>fn:seconds-from-dateTime</code></a></td>
                        <td>Returns the seconds component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-dateTime"><code>fn:timezone-from-dateTime</code></a></td>
                        <td>Returns the timezone component of an <code>xs:dateTime</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-year-from-date"><code>fn:year-from-date</code></a></td>
                        <td>Returns the year component of an <code>xs:date</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-month-from-date"><code>fn:month-from-date</code></a></td>
                        <td>Returns the month component of an <code>xs:date</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-day-from-date"><code>fn:day-from-date</code></a></td>
                        <td>Returns the day component of an <code>xs:date</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-date"><code>fn:timezone-from-date</code></a></td>
                        <td>Returns the timezone component of an <code>xs:date</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-hours-from-time"><code>fn:hours-from-time</code></a></td>
                        <td>Returns the hours component of an <code>xs:time</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-minutes-from-time"><code>fn:minutes-from-time</code></a></td>
                        <td>Returns the minutes component of an <code>xs:time</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-seconds-from-time"><code>fn:seconds-from-time</code></a></td>
                        <td>Returns the seconds component of an <code>xs:time</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-timezone-from-time"><code>fn:timezone-from-time</code></a></td>
                        <td>Returns the timezone component of an <code>xs:time</code>.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-year-from-dateTime"></a>9.5.1 fn:year-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the year component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:year-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the year
                           component in the local value of <code>$arg</code>. The result may be negative.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Ignoring complications that arise with midnight on the last day
                           of the year, the year returned is the same numeric value that appears in the lexical
                           representation, which for negative years means the meaning may vary depending on whether
                           XSD 1.0 or XSD 1.1 conventions are in use.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:year-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))</code> returns <code>1999</code>.
                           </p>
                           <p>The expression <code>fn:year-from-dateTime(xs:dateTime("1999-05-31T21:30:00-05:00"))</code> returns <code>1999</code>.
                           </p>
                           <p>The expression <code>fn:year-from-dateTime(xs:dateTime("1999-12-31T19:20:00"))</code> returns <code>1999</code>.
                           </p>
                           <p>The expression <code>fn:year-from-dateTime(xs:dateTime("1999-12-31T24:00:00"))</code> returns <code>2000</code>.
                           </p>
                           <p>The expression <code>fn:year-from-dateTime(xs:dateTime("-0002-06-06T00:00:00"))</code> returns <code>-2</code>. <em>(The result is the same whether XSD 1.0 or 1.1 is in use, despite
                                 the absence of a year 0 in the XSD 1.0 value space.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-month-from-dateTime"></a>9.5.2 fn:month-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the month component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:month-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> between 1 and 12, both
                           inclusive, representing the month component in the local value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:month-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))</code> returns <code>5</code>.
                           </p>
                           <p>The expression <code>fn:month-from-dateTime(xs:dateTime("1999-12-31T19:20:00-05:00"))</code> returns <code>12</code>.
                           </p>
                           <p>The expression <code>fn:month-from-dateTime(fn:adjust-dateTime-to-timezone(xs:dateTime("1999-12-31T19:20:00-05:00"),
                                 xs:dayTimeDuration("PT0S")))</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-day-from-dateTime"></a>9.5.3 fn:day-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the day component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:day-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> between 1 and 31, both
                           inclusive, representing the day component in the local value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:day-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))</code> returns <code>31</code>.
                           </p>
                           <p>The expression <code>fn:day-from-dateTime(xs:dateTime("1999-12-31T20:00:00-05:00"))</code> returns <code>31</code>.
                           </p>
                           <p>The expression <code>fn:day-from-dateTime(fn:adjust-dateTime-to-timezone(xs:dateTime("1999-12-31T19:20:00-05:00"),
                                 xs:dayTimeDuration("PT0S")))</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-hours-from-dateTime"></a>9.5.4 fn:hours-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the hours component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:hours-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> between 0 and 23, both
                           inclusive, representing the hours component in the local value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:hours-from-dateTime(xs:dateTime("1999-05-31T08:20:00-05:00"))</code> returns <code>8</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-dateTime(xs:dateTime("1999-12-31T21:20:00-05:00"))</code> returns <code>21</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-dateTime(fn:adjust-dateTime-to-timezone(xs:dateTime("1999-12-31T21:20:00-05:00"),
                                 xs:dayTimeDuration("PT0S")))</code> returns <code>2</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-dateTime(xs:dateTime("1999-12-31T12:00:00"))</code> returns <code>12</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-dateTime(xs:dateTime("1999-12-31T24:00:00"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-minutes-from-dateTime"></a>9.5.5 fn:minutes-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the minute component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:minutes-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> value between 0 and 59, both
                           inclusive, representing the minute component in the local value of
                           <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:minutes-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))</code> returns <code>20</code>.
                           </p>
                           <p>The expression <code>fn:minutes-from-dateTime(xs:dateTime("1999-05-31T13:30:00+05:30"))</code> returns <code>30</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-seconds-from-dateTime"></a>9.5.6 fn:seconds-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the seconds component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:seconds-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:decimal?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:decimal</code> value greater than or equal
                           to zero and less than 60, representing the seconds and fractional seconds in the local
                           value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:seconds-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-timezone-from-dateTime"></a>9.5.7 fn:timezone-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the timezone component of an <code>xs:dateTime</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:timezone-from-dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns the timezone component of <code>$arg</code>, if any. If
                           <code>$arg</code> has a timezone component, then the result is an
                           <code>xs:dayTimeDuration</code> that indicates deviation from UTC; its value may
                           range from +14:00 to -14:00 hours, both inclusive. If <code>$arg</code> has no timezone
                           component, the result is the empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:timezone-from-dateTime(xs:dateTime("1999-05-31T13:20:00-05:00"))</code> returns <code>xs:dayTimeDuration("-PT5H")</code>.
                           </p>
                           <p>The expression <code>fn:timezone-from-dateTime(xs:dateTime("2000-06-12T13:20:00Z"))</code> returns <code>xs:dayTimeDuration("PT0S")</code>.
                           </p>
                           <p>The expression <code>fn:timezone-from-dateTime(xs:dateTime("2004-08-27T00:00:00"))</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-year-from-date"></a>9.5.8 fn:year-from-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the year component of an <code>xs:date</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:year-from-date</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> representing the year in the
                           local value of <code>$arg</code>. The value may be negative. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The year returned is the same numeric value that appears in the lexical
                           representation, which for negative years means the meaning may vary depending on whether
                           XSD 1.0 or XSD 1.1 conventions are in use.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:year-from-date(xs:date("1999-05-31"))</code> returns <code>1999</code>.
                           </p>
                           <p>The expression <code>fn:year-from-date(xs:date("2000-01-01+05:00"))</code> returns <code>2000</code>.
                           </p>
                           <p>The expression <code>fn:year-from-date(xs:date("-0002-06-01"))</code> returns <code>-2</code>. <em>(The result is the same whether XSD 1.0 or 1.1 is in use, despite
                                 the absence of a year 0 in the XSD 1.0 value space.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-month-from-date"></a>9.5.9 fn:month-from-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the month component of an <code>xs:date</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:month-from-date</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> between 1 and 12, both
                           inclusive, representing the month component in the local value of <code>$arg</code>.
                           
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:month-from-date(xs:date("1999-05-31-05:00"))</code> returns <code>5</code>.
                           </p>
                           <p>The expression <code>fn:month-from-date(xs:date("2000-01-01+05:00"))</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-day-from-date"></a>9.5.10 fn:day-from-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the day component of an <code>xs:date</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:day-from-date</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> between 1 and 31, both
                           inclusive, representing the day component in the localized value of
                           <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:day-from-date(xs:date("1999-05-31-05:00"))</code> returns <code>31</code>.
                           </p>
                           <p>The expression <code>fn:day-from-date(xs:date("2000-01-01+05:00"))</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-timezone-from-date"></a>9.5.11 fn:timezone-from-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the timezone component of an <code>xs:date</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:timezone-from-date</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns the timezone component of <code>$arg</code>, if any. If
                           <code>$arg</code> has a timezone component, then the result is an
                           <code>xs:dayTimeDuration</code> that indicates deviation from UTC; its value may
                           range from +14:00 to -14:00 hours, both inclusive. If <code>$arg</code> has no timezone
                           component, the result is the empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:timezone-from-date(xs:date("1999-05-31-05:00"))</code> returns <code>xs:dayTimeDuration("-PT5H")</code>.
                           </p>
                           <p>The expression <code>fn:timezone-from-date(xs:date("2000-06-12Z"))</code> returns <code>xs:dayTimeDuration("PT0S")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-hours-from-time"></a>9.5.12 fn:hours-from-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the hours component of an <code>xs:time</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:hours-from-time</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> between 0 and 23, both
                           inclusive, representing the value of the hours component in the local value of
                           <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>. 
                           </p>
                           <p>The expression <code>fn:hours-from-time(xs:time("11:23:00"))</code> returns <code>11</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-time(xs:time("21:23:00"))</code> returns <code>21</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-time(xs:time("01:23:00+05:00"))</code> returns <code>1</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-time(fn:adjust-time-to-timezone(xs:time("01:23:00+05:00"),
                                 xs:dayTimeDuration("PT0S")))</code> returns <code>20</code>.
                           </p>
                           <p>The expression <code>fn:hours-from-time(xs:time("24:00:00"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-minutes-from-time"></a>9.5.13 fn:minutes-from-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the minutes component of an <code>xs:time</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:minutes-from-time</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:integer</code> value between 0 and 59, both
                           inclusive, representing the value of the minutes component in the local value of
                           <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:minutes-from-time(xs:time("13:00:00Z"))</code> returns <code>0</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-seconds-from-time"></a>9.5.14 fn:seconds-from-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the seconds component of an <code>xs:time</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:seconds-from-time</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:decimal?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:decimal</code> value greater than or equal
                           to zero and less than 60, representing the seconds and fractional seconds in the local
                           value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:seconds-from-time(xs:time("13:20:10.5"))</code> returns <code>10.5</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-timezone-from-time"></a>9.5.15 fn:timezone-from-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the timezone component of an <code>xs:time</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:timezone-from-time</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns the timezone component of <code>$arg</code>, if any. If
                           <code>$arg</code> has a timezone component, then the result is an
                           <code>xs:dayTimeDuration</code> that indicates deviation from UTC; its value may
                           range from +14:00 to -14:00 hours, both inclusive. If <code>$arg</code> has no timezone
                           component, the result is the empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:timezone-from-time(xs:time("13:20:00-05:00"))</code> returns <code>xs:dayTimeDuration("-PT5H")</code>.
                           </p>
                           <p>The expression <code>fn:timezone-from-time(xs:time("13:20:00"))</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="timezone.functions"></a>9.6 Timezone adjustment functions on dates and time values
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-dateTime-to-timezone"><code>fn:adjust-dateTime-to-timezone</code></a></td>
                        <td>Adjusts an <code>xs:dateTime</code> value to a specific timezone, or to no timezone at
                           all.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-date-to-timezone"><code>fn:adjust-date-to-timezone</code></a></td>
                        <td>Adjusts an <code>xs:date</code> value to a specific timezone, or to no timezone at all;
                           the result is the date in the target timezone that contains the starting instant of
                           the
                           supplied date.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-adjust-time-to-timezone"><code>fn:adjust-time-to-timezone</code></a></td>
                        <td>Adjusts an <code>xs:time</code> value to a specific timezone, or to no timezone at
                           all.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>These functions adjust the timezone component of an <code>xs:dateTime</code>, <code>xs:date</code> or
                  <code>xs:time</code> value.  The <code>$timezone</code> argument to these functions is defined as an 
                  					<code>xs:dayTimeDuration</code> but must be a valid timezone value.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-adjust-dateTime-to-timezone"></a>9.6.1 fn:adjust-dateTime-to-timezone
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Adjusts an <code>xs:dateTime</code> value to a specific timezone, or to no timezone at
                           all.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:adjust-dateTime-to-timezone</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTime?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:adjust-dateTime-to-timezone</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$timezone</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTime?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p> If <code>$timezone</code> is not specified, then the effective value of
                           <code>$timezone</code> is the value of the implicit timezone in the dynamic
                           context.
                        </p>
                        <p> If <code>$arg</code> is the empty sequence, then the function returns the empty
                           sequence.
                        </p>
                        <p> If <code>$arg</code> does not have a timezone component and <code>$timezone</code> is
                           the empty sequence, then the result is <code>$arg</code>.
                        </p>
                        <p> If <code>$arg</code> does not have a timezone component and <code>$timezone</code> is
                           not the empty sequence, then the result is <code>$arg</code> with <code>$timezone</code>
                           as the timezone component.
                        </p>
                        <p> If <code>$arg</code> has a timezone component and <code>$timezone</code> is the empty
                           sequence, then the result is the local value of <code>$arg</code> without its timezone
                           component.
                        </p>
                        <p> If <code>$arg</code> has a timezone component and <code>$timezone</code> is not the
                           empty sequence, then the result is the <code>xs:dateTime</code> value that is equal to
                           <code>$arg</code> and that has a timezone component equal to
                           <code>$timezone</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p> A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0003" title="err:FODT0003">err:FODT0003</a>] if <code>$timezone</code>
                           is less than <code>-PT14H</code> or greater than <code>PT14H</code> or is not an
                           integral number of minutes.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p> Assume the dynamic context provides an implicit timezone of <code>-05:00
                                 (-PT5H0M)</code>.
                           </p>
                           <div class="exampleInner"><pre>let $tz-10 := xs:dayTimeDuration("-PT10H")</pre></div>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00'))</code> returns <code>xs:dateTime('2002-03-07T10:00:00-05:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'))</code> returns <code>xs:dateTime('2002-03-07T12:00:00-05:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00'),
                                 $tz-10)</code> returns <code>xs:dateTime('2002-03-07T10:00:00-10:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'),
                                 $tz-10)</code> returns <code>xs:dateTime('2002-03-07T07:00:00-10:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'),
                                 xs:dayTimeDuration("PT10H"))</code> returns <code>xs:dateTime('2002-03-08T03:00:00+10:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T00:00:00+01:00'),
                                 xs:dayTimeDuration("-PT8H"))</code> returns <code>xs:dateTime('2002-03-06T15:00:00-08:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00'),
                                 ())</code> returns <code>xs:dateTime('2002-03-07T10:00:00')</code>.
                           </p>
                           <p>The expression <code>fn:adjust-dateTime-to-timezone(xs:dateTime('2002-03-07T10:00:00-07:00'),
                                 ())</code> returns <code>xs:dateTime('2002-03-07T10:00:00')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-adjust-date-to-timezone"></a>9.6.2 fn:adjust-date-to-timezone
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Adjusts an <code>xs:date</code> value to a specific timezone, or to no timezone at all;
                           the result is the date in the target timezone that contains the starting instant of
                           the
                           supplied date.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:adjust-date-to-timezone</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:date?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:adjust-date-to-timezone</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$timezone</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:date?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p> If <code>$timezone</code> is not specified, then the effective value of
                           <code>$timezone</code> is the value of the implicit timezone in the dynamic
                           context.
                        </p>
                        <p> If <code>$arg</code> is the empty sequence, then the function returns the empty
                           sequence.
                        </p>
                        <p> If <code>$arg</code> does not have a timezone component and <code>$timezone</code> is
                           the empty sequence, then the result is the value of <code>$arg</code>.
                        </p>
                        <p> If <code>$arg</code> does not have a timezone component and <code>$timezone</code> is
                           not the empty sequence, then the result is <code>$arg</code> with <code>$timezone</code>
                           as the timezone component.
                        </p>
                        <p> If <code>$arg</code> has a timezone component and <code>$timezone</code> is the empty
                           sequence, then the result is the local value of <code>$arg</code> without its timezone
                           component.
                        </p>
                        <p> If <code>$arg</code> has a timezone component and <code>$timezone</code> is not the
                           empty sequence, then the function returns the value of the expression:
                        </p>
                        <ul>
                           <li>
                              <p>Let <code>$dt</code> be the value of <code>fn:dateTime($arg,
                                    xs:time('00:00:00'))</code>.
                              </p>
                           </li>
                           <li>
                              <p>Let <code>$adt</code> be the value of <code>fn:adjust-dateTime-to-timezone($dt,
                                    $timezone)</code></p>
                           </li>
                           <li>
                              <p>The function returns the value of <code>xs:date($adt)</code></p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0003" title="err:FODT0003">err:FODT0003</a>] if <code>$timezone</code>
                           is less than <code>-PT14H</code> or greater than <code>PT14H</code> or is not an
                           integral number of minutes.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume the dynamic context provides an implicit timezone of <code>-05:00
                                 (-PT5H0M)</code>.
                           </p>
                           <div class="exampleInner"><pre>let $tz-10 := xs:dayTimeDuration("-PT10H")</pre></div>
                           <p>The expression <code>fn:adjust-date-to-timezone(xs:date("2002-03-07"))</code> returns <code>xs:date("2002-03-07-05:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-date-to-timezone(xs:date("2002-03-07-07:00"))</code> returns <code>xs:date("2002-03-07-05:00")</code>. <em>(<code>$arg</code> is converted to
                                 <code>xs:dateTime("2002-03-07T00:00:00-07:00")</code>. This is adjusted to the
                                 implicit timezone, giving <code>"2002-03-07T02:00:00-05:00"</code>.
                                 ).</em></p>
                           <p>The expression <code>fn:adjust-date-to-timezone(xs:date("2002-03-07"),
                                 $tz-10)</code> returns <code>xs:date("2002-03-07-10:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-date-to-timezone(xs:date("2002-03-07-07:00"),
                                 $tz-10)</code> returns <code>xs:date("2002-03-06-10:00")</code>. <em>(<code>$arg</code> is converted to the <code>xs:dateTime
                                    "2002-03-07T00:00:00-07:00"</code>. This is adjusted to the given timezone,
                                 giving <code>"2002-03-06T21:00:00-10:00"</code>. ).</em></p>
                           <p>The expression <code>fn:adjust-date-to-timezone(xs:date("2002-03-07"),
                                 ())</code> returns <code>xs:date("2002-03-07")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-date-to-timezone(xs:date("2002-03-07-07:00"),
                                 ())</code> returns <code>xs:date("2002-03-07")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-adjust-time-to-timezone"></a>9.6.3 fn:adjust-time-to-timezone
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Adjusts an <code>xs:time</code> value to a specific timezone, or to no timezone at
                           all.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:adjust-time-to-timezone</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:time?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:adjust-time-to-timezone</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$timezone</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:time?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p> If <code>$timezone</code> is not specified, then the effective value of
                           <code>$timezone</code> is the value of the implicit timezone in the dynamic
                           context.
                        </p>
                        <p> If <code>$arg</code> is the empty sequence, then the function returns the empty
                           sequence.
                        </p>
                        <p> If <code>$arg</code> does not have a timezone component and <code>$timezone</code> is
                           the empty sequence, then the result is <code>$arg</code>.
                        </p>
                        <p> If <code>$arg</code> does not have a timezone component and <code>$timezone</code> is
                           not the empty sequence, then the result is <code>$arg</code> with <code>$timezone</code>
                           as the timezone component.
                        </p>
                        <p> If <code>$arg</code> has a timezone component and <code>$timezone</code> is the empty
                           sequence, then the result is the localized value of <code>$arg</code> without its
                           timezone component.
                        </p>
                        <p> If <code>$arg</code> has a timezone component and <code>$timezone</code> is not the
                           empty sequence, then:
                        </p>
                        <ul>
                           <li>
                              <p>Let <code>$dt</code> be the <code>xs:dateTime</code> value
                                 <code>fn:dateTime(xs:date('1972-12-31'), $arg)</code>.
                              </p>
                           </li>
                           <li>
                              <p>Let <code>$adt</code> be the value of <code>fn:adjust-dateTime-to-timezone($dt,
                                    $timezone)</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>The function returns the <code>xs:time</code> value
                                 <code>xs:time($adt)</code>.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0003" title="err:FODT0003">err:FODT0003</a>] if <code>$timezone</code>
                           is less than <code>-PT14H</code> or greater than <code>PT14H</code> or if does not
                           contain an integral number of minutes.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume the dynamic context provides an implicit timezone of <code>-05:00
                                 (-PT5H0M)</code>.
                           </p>
                           <div class="exampleInner"><pre>let $tz-10 := xs:dayTimeDuration("-PT10H")</pre></div>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00"))</code> returns <code>xs:time("10:00:00-05:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"))</code> returns <code>xs:time("12:00:00-05:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00"),
                                 $tz-10)</code> returns <code>xs:time("10:00:00-10:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"),
                                 $tz-10)</code> returns <code>xs:time("07:00:00-10:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00"), ())</code> returns <code>xs:time("10:00:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"),
                                 ())</code> returns <code>xs:time("10:00:00")</code>.
                           </p>
                           <p>The expression <code>fn:adjust-time-to-timezone(xs:time("10:00:00-07:00"),
                                 xs:dayTimeDuration("PT10H"))</code> returns <code>xs:time("03:00:00+10:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="dateTime-arithmetic"></a>9.7 Arithmetic operators on durations, dates and times
               </h3>
               <p>These functions support adding or subtracting a duration value to or from an
                  <code>xs:dateTime</code>, an <code>xs:date</code> or an <code>xs:time</code>
                  value. Appendix E of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> describes an algorithm for
                  performing such operations.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dateTimes"><code>op:subtract-dateTimes</code></a></td>
                        <td>Returns an <code>xs:dayTimeDuration</code> representing the amount of elapsed time
                           between the instants <code>arg2</code> and <code>arg1</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dates"><code>op:subtract-dates</code></a></td>
                        <td>Returns the <code>xs:dayTimeDuration</code> that corresponds to the elapsed time between
                           the starting instant of <code>$arg2</code> and the starting instant of
                           <code>$arg2</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-times"><code>op:subtract-times</code></a></td>
                        <td>Returns the <code>xs:dayTimeDuration</code> that corresponds to the elapsed time between
                           the values of <code>$arg2</code> and <code>$arg1</code> treated as times on the same
                           date.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-dateTime"><code>op:add-yearMonthDuration-to-dateTime</code></a></td>
                        <td>Returns the <code>xs:dateTime</code> that is a given duration after a specified
                           <code>xs:dateTime</code> (or before, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-dateTime"><code>op:add-dayTimeDuration-to-dateTime</code></a></td>
                        <td>Returns the <code>xs:dateTime</code> that is a given duration after a specified
                           <code>xs:dateTime</code> (or before, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-yearMonthDuration-from-dateTime"><code>op:subtract-yearMonthDuration-from-dateTime</code></a></td>
                        <td>Returns the <code>xs:dateTime</code> that is a given duration before a specified
                           <code>xs:dateTime</code> (or after, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDuration-from-dateTime"><code>op:subtract-dayTimeDuration-from-dateTime</code></a></td>
                        <td>Returns the <code>xs:dateTime</code> that is a given duration before a specified
                           <code>xs:dateTime</code> (or after, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-date"><code>op:add-yearMonthDuration-to-date</code></a></td>
                        <td>Returns the <code>xs:date</code> that is a given duration after a specified
                           <code>xs:date</code> (or before, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-date"><code>op:add-dayTimeDuration-to-date</code></a></td>
                        <td>Returns the <code>xs:date</code> that is a given duration after a specified
                           <code>xs:date</code> (or before, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-yearMonthDuration-from-date"><code>op:subtract-yearMonthDuration-from-date</code></a></td>
                        <td>Returns the <code>xs:date</code> that is a given duration before a specified
                           <code>xs:date</code> (or after, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDuration-from-date"><code>op:subtract-dayTimeDuration-from-date</code></a></td>
                        <td>Returns the <code>xs:date</code> that is a given duration before a specified
                           <code>xs:date</code> (or after, if the duration is negative).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-time"><code>op:add-dayTimeDuration-to-time</code></a></td>
                        <td>Returns the <code>xs:time</code> value that is a given duration after a specified
                           <code>xs:time</code> (or before, if the duration is negative or causes wrap-around
                           past midnight)
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dayTimeDuration-from-time"><code>op:subtract-dayTimeDuration-from-time</code></a></td>
                        <td>Returns the <code>xs:time</code> value that is a given duration before a specified
                           <code>xs:time</code> (or after, if the duration is negative or causes wrap-around
                           past midnight)
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="duration-limits"></a>9.7.1 Limits and precision
                  </h4>
                  <p>A processor that limits the number of digits in date and time datatype
                     representations may encounter overflow and underflow conditions when it
                     tries to execute the functions in this section. In
                     these situations, the processor <span class="verb">must</span> return P0M or PT0S in
                     case of duration underflow and 00:00:00 in case of time underflow.
                     It <span class="verb">must</span> raise a dynamic error
                     [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0001" title="err:FODT0001">err:FODT0001</a>] in case of overflow.
                  </p>
                  <p>The value spaces of the two totally ordered subtypes of
                     <code>xs:duration</code> described in <a href="https://www.w3.org/TR/xpath-functions-31/#duration-subtypes"><b>8.1 Two totally ordered subtypes of duration</b></a> are
                     <code>xs:integer</code> months for <code>xs:yearMonthDuration</code>
                     and <code>xs:decimal</code> seconds for <code>xs:dayTimeDuration</code>. If
                     a processor limits the number of digits allowed in the representation of
                     <code>xs:integer</code> and <code>xs:decimal</code> then overflow and
                     underflow situations can arise when it tries to execute the functions in
                     <a href="https://www.w3.org/TR/xpath-functions-31/#duration-arithmetic"><b>8.4 Arithmetic operators on durations</b></a>. In these situations the processor
                     <span class="verb">must</span> return zero in case of numeric underflow and P0M
                     or PT0S in case of duration underflow. It <span class="verb">must</span> raise a
                     dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0002" title="err:FODT0002">err:FODT0002</a>] in case of overflow.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-dateTimes"></a>9.7.2 op:subtract-dateTimes
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an <code>xs:dayTimeDuration</code> representing the amount of elapsed time
                           between the instants <code>arg2</code> and <code>arg1</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "-"
                           operator when applied to two <code>xs:dateTime</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:subtract-dateTimes</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If either <code>$arg1</code> or <code>$arg2</code> do not contain an explicit timezone
                           then, for the purpose of the operation, the implicit timezone provided by the dynamic
                           context (See <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                              
                              C.2 Dynamic Context Components
                              </a><sup><small>XP31</small></sup>.) is
                           assumed to be present as part of the value.
                        </p>
                        <p>The function returns the elapsed time between the date/time instant <code>arg2</code>
                           and the date/time instant <code>arg1</code>, computed according to the algorithm given
                           in Appendix E of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, and expressed as a
                           <code>xs:dayTimeDuration</code>.
                        </p>
                        <p>If the normalized value of <code>$arg1</code> precedes in time the normalized value of
                           <code>$arg2</code>, then the returned value is a negative duration.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>.
                           </p>
                           <p>The expression <code>op:subtract-dateTimes(xs:dateTime("2000-10-30T06:12:00"),
                                 xs:dateTime("1999-11-28T09:00:00Z"))</code> returns <code>xs:dayTimeDuration("P337DT2H12M")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-dates"></a>9.7.3 op:subtract-dates
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:dayTimeDuration</code> that corresponds to the elapsed time between
                           the starting instant of <code>$arg2</code> and the starting instant of
                           <code>$arg2</code>.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "-" operator
                           when applied to two <code>xs:date</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:subtract-dates</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If either <code>$arg1</code> or <code>$arg2</code> do not contain an explicit timezone
                           then, for the purpose of the operation, the implicit timezone provided by the dynamic
                           context (See <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                              
                              C.2 Dynamic Context Components
                              </a><sup><small>XP31</small></sup>.) is
                           assumed to be present as part of the value.
                        </p>
                        <p>The starting instant of an <code>xs:date</code> is the <code>xs:dateTime</code> at
                           <code>00:00:00</code> on that date. 
                        </p>
                        <p>The function returns the result of subtracting the two starting instants using
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-subtract-dateTimes"><code>op:subtract-dateTimes</code></a>.
                        </p>
                        <p>If the starting instant of <code>$arg1</code> precedes in time the starting instant of
                           <code>$arg2</code>, then the returned value is a negative duration.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>Z</code>. 
                           </p>
                           <p>The expression <code>op:subtract-dates(xs:date("2000-10-30"),
                                 xs:date("1999-11-28"))</code> returns <code>xs:dayTimeDuration("P337D")</code>. <em>(The normalized values of the two starting instants are <code>{2000,
                                    10, 30, 0, 0, 0, PT0S}</code> and <code>{1999, 11, 28, 0, 0, 0,
                                    PT0S}</code>.)</em></p>
                           <p>Now assume that the dynamic context provides an implicit timezone value of
                              <code>+05:00</code>.
                           </p>
                           <p>The expression <code>op:subtract-dates(xs:date("2000-10-30"),
                                 xs:date("1999-11-28Z"))</code> returns <code>xs:dayTimeDuration("P336DT19H")</code>. <em>( The normalized values of the two starting instants are <code>{2000,
                                    10, 29, 19, 0, 0, PT0S}</code> and <code>{1999, 11, 28, 0, 0, 0,
                                    PT0S}</code>.)</em></p>
                           <p>The expression <code>op:subtract-dates(xs:date("2000-10-15-05:00"),
                                 xs:date("2000-10-10+02:00"))</code> returns <code>xs:dayTimeDuration("P5DT7H")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-times"></a>9.7.4 op:subtract-times
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:dayTimeDuration</code> that corresponds to the elapsed time between
                           the values of <code>$arg2</code> and <code>$arg1</code> treated as times on the same
                           date.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of the "-" operator
                           when applied to two <code>xs:time</code> values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:subtract-times</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of the expression:</p>
                        <div class="exampleInner"><pre class="small">op-subtract-dateTimes(
        fn:dateTime(xs:date('1972-12-31'), $arg1),
        fn:dateTime(xs:date('1972-12-31'), $arg2))</pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Any other reference date would work equally well.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the dynamic context provides an implicit timezone value of
                              <code>-05:00</code>. Assume, also, that the date components of the reference
                              <code>xs:dateTime</code> correspond to <code>"1972-12-31"</code>.
                           </p>
                           <p>The expression <code>op:subtract-times(xs:time("11:12:00Z"),
                                 xs:time("04:00:00"))</code> returns <code>xs:dayTimeDuration("PT2H12M")</code>. <em>(This is obtained by subtracting from the <code>xs:dateTime</code>
                                 value <code>{1972, 12, 31, 11, 12, 0, PT0S}</code> the <code>xs:dateTime</code>
                                 value <code>{1972, 12, 31, 9, 0, 0, PT0S}</code>.)</em></p>
                           <p>The expression <code>op:subtract-times(xs:time("11:00:00-05:00"),
                                 xs:time("21:30:00+05:30"))</code> returns <code>xs:dayTimeDuration("PT0S")</code>. <em>(The two <code>xs:dateTime</code> values are <code>{1972, 12, 31, 11,
                                    0, 0, -PT5H}</code> and <code>{1972, 12, 31, 21, 30, 0, PT5H30M}</code>. These
                                 normalize to <code>{1972, 12, 31, 16, 0, 0, PT0S}</code> and <code>{1972, 12, 31,
                                    16, 0, 0, PT0S}</code>. ).</em></p>
                           <p>The expression <code>op:subtract-times(xs:time("17:00:00-06:00"),
                                 xs:time("08:00:00+09:00"))</code> returns <code>xs:dayTimeDuration("P1D")</code>. <em>(The two normalized <code>xs:dateTime</code> values are <code>{1972,
                                    12, 31, 23, 0, 0, PT0S}</code> and <code>{1972, 12, 30, 23, 0, 0,
                                    PT0S}</code>.)</em></p>
                           <p>The expression <code>op:subtract-times(xs:time("24:00:00"),
                                 xs:time("23:59:59"))</code> returns <code>xs:dayTimeDuration("-PT23H59M59S")</code>. <em>(The two normalized <code>xs:dateTime</code> values are <code>{1972,
                                    12, 31, 0, 0, 0, ()}</code> and <code>{1972, 12, 31, 23, 59, 59.0,
                                    ()}</code>.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-add-yearMonthDuration-to-dateTime"></a>9.7.5 op:add-yearMonthDuration-to-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:dateTime</code> that is a given duration after a specified
                           <code>xs:dateTime</code> (or before, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "+" operator when applied to an <code>xs:dateTime</code> and an
                           <code>xs:yearMonthDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:add-yearMonthDuration-to-dateTime</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dateTime</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:yearMonthDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:dateTime</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of adding <code>$arg2</code> to the value of
                           <code>$arg1</code> using the algorithm described in Appendix E of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, disregarding the rule about leap seconds. If <code>$arg2</code>
                           is negative, then the result <code>xs:dateTime</code> precedes <code>$arg1</code>.
                        </p>
                        <p>The result has the same timezone as <code>$arg1</code>. If <code>$arg1</code> has no
                           timezone, the result has no timezone. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-yearMonthDuration-to-dateTime(xs:dateTime("2000-10-30T11:12:00"),
                                 xs:yearMonthDuration("P1Y2M"))</code> returns <code>xs:dateTime("2001-12-30T11:12:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-add-dayTimeDuration-to-dateTime"></a>9.7.6 op:add-dayTimeDuration-to-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:dateTime</code> that is a given duration after a specified
                           <code>xs:dateTime</code> (or before, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "+" operator when applied to an <code>xs:dateTime</code> and an
                           <code>xs:dayTimeDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:add-dayTimeDuration-to-dateTime</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dateTime</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dayTimeDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:dateTime</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of adding <code>$arg2</code> to the value of
                           <code>$arg1</code> using the algorithm described in Appendix E of <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, disregarding the rule about leap seconds. If <code>$arg2</code>
                           is negative, then the result <code>xs:dateTime</code> precedes <code>$arg1</code>.
                        </p>
                        <p>The result has the same timezone as <code>$arg1</code>. If <code>$arg1</code> has no
                           timezone, the result has no timezone. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-dayTimeDuration-to-dateTime(xs:dateTime("2000-10-30T11:12:00"),
                                 xs:dayTimeDuration("P3DT1H15M"))</code> returns <code>xs:dateTime("2000-11-02T12:27:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-yearMonthDuration-from-dateTime"></a>9.7.7 op:subtract-yearMonthDuration-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:dateTime</code> that is a given duration before a specified
                           <code>xs:dateTime</code> (or after, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the
                           semantics of the "-" operator when applied to an <code>xs:dateTime</code> and an
                           <code>xs:yearMonthDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:subtract-yearMonthDuration-from-dateTime</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dateTime</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:yearMonthDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:dateTime</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the <code>xs:dateTime</code> computed by negating
                           <code>$arg2</code> and adding the result to the value of <code>$arg1</code> using the
                           function <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-dateTime"><code>op:add-yearMonthDuration-to-dateTime</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-yearMonthDuration-from-dateTime(xs:dateTime("2000-10-30T11:12:00"),
                                 xs:yearMonthDuration("P1Y2M"))</code> returns <code>xs:dateTime("1999-08-30T11:12:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-dayTimeDuration-from-dateTime"></a>9.7.8 op:subtract-dayTimeDuration-from-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:dateTime</code> that is a given duration before a specified
                           <code>xs:dateTime</code> (or after, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "-" operator when applied to an <code>xs:dateTime</code> an and
                           <code>xs:dayTimeDuration</code> values
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:subtract-dayTimeDuration-from-dateTime</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dateTime</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dayTimeDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:dateTime</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the <code>xs:dateTime</code> computed by negating
                           <code>$arg2</code> and adding the result to the value of <code>$arg1</code> using the
                           function <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-dateTime"><code>op:add-dayTimeDuration-to-dateTime</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-dayTimeDuration-from-dateTime(xs:dateTime("2000-10-30T11:12:00"),
                                 xs:dayTimeDuration("P3DT1H15M"))</code> returns <code>xs:dateTime("2000-10-27T09:57:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-add-yearMonthDuration-to-date"></a>9.7.9 op:add-yearMonthDuration-to-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:date</code> that is a given duration after a specified
                           <code>xs:date</code> (or before, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "+" operator when applied to an <code>xs:date</code> and an
                           <code>xs:yearMonthDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:add-yearMonthDuration-to-date</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:yearMonthDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:date</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of casting <code>$arg1</code> to an
                           <code>xs:dateTime</code>, adding <code>$arg2</code> using the function
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-dateTime"><code>op:add-yearMonthDuration-to-dateTime</code></a>, and casting the result back to an
                           <code>xs:date</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-yearMonthDuration-to-date(xs:date("2000-10-30"),
                                 xs:yearMonthDuration("P1Y2M"))</code> returns <code>xs:date("2001-12-30")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-add-dayTimeDuration-to-date"></a>9.7.10 op:add-dayTimeDuration-to-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:date</code> that is a given duration after a specified
                           <code>xs:date</code> (or before, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "+" operator when applied to an <code>xs:date</code> and an
                           <code>xs:dayTimeDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:add-dayTimeDuration-to-date</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:date</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of casting <code>$arg1</code> to an
                           <code>xs:dateTime</code>, adding <code>$arg2</code> using the function
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-dateTime"><code>op:add-dayTimeDuration-to-dateTime</code></a>, and casting the result back to an
                           <code>xs:date</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-dayTimeDuration-to-date(xs:date("2004-10-30Z"),
                                 xs:dayTimeDuration("P2DT2H30M0S"))</code> returns <code>xs:date("2004-11-01Z")</code>. <em>( The starting instant of the first argument is the
                                 <code>xs:dateTime</code> value <code>{2004, 10, 30, 0, 0, 0, PT0S}</code>.
                                 Adding the second argument to this gives the <code>xs:dateTime</code> value
                                 <code>{2004, 11, 1, 2, 30, 0, PT0S}</code>. The time components are then
                                 discarded. ).</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-yearMonthDuration-from-date"></a>9.7.11 op:subtract-yearMonthDuration-from-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:date</code> that is a given duration before a specified
                           <code>xs:date</code> (or after, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "-" operator when applied to an <code>xs:date</code> and an
                           <code>xs:yearMonthDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:subtract-yearMonthDuration-from-date</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:date</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:yearMonthDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:date</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Returns the <code>xs:date</code> computed by negating <code>$arg2</code> and adding the
                           result to <code>$arg1</code> using the function
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-yearMonthDuration-to-date"><code>op:add-yearMonthDuration-to-date</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-yearMonthDuration-from-date(xs:date("2000-10-30"),
                                 xs:yearMonthDuration("P1Y2M"))</code> returns <code>xs:date("1999-08-30")</code>.
                           </p>
                           <p>The expression <code>op:subtract-yearMonthDuration-from-date(xs:date("2000-02-29Z"),
                                 xs:yearMonthDuration("P1Y"))</code> returns <code>xs:date("1999-02-28Z")</code>.
                           </p>
                           <p>The expression <code>op:subtract-yearMonthDuration-from-date(xs:date("2000-10-31-05:00"),
                                 xs:yearMonthDuration("P1Y1M"))</code> returns <code>xs:date("1999-09-30-05:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-dayTimeDuration-from-date"></a>9.7.12 op:subtract-dayTimeDuration-from-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:date</code> that is a given duration before a specified
                           <code>xs:date</code> (or after, if the duration is negative).
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "-" operator when applied to an <code>xs:date</code> and an
                           <code>xs:dayTimeDuration</code>. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:subtract-dayTimeDuration-from-date</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:date</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dayTimeDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:date</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Returns the <code>xs:date</code> computed by negating <code>$arg2</code> and adding the
                           result to <code>$arg1</code> using the function
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-date"><code>op:add-dayTimeDuration-to-date</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-dayTimeDuration-from-date(xs:date("2000-10-30"),
                                 xs:dayTimeDuration("P3DT1H15M"))</code> returns <code>xs:date("2000-10-26")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-add-dayTimeDuration-to-time"></a>9.7.13 op:add-dayTimeDuration-to-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:time</code> value that is a given duration after a specified
                           <code>xs:time</code> (or before, if the duration is negative or causes wrap-around
                           past midnight)
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "+" operator when applied to an <code>xs:time</code> and an
                           <code>xs:dayTimeDuration</code> value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:add-dayTimeDuration-to-time</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dayTimeDuration</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:time</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>First, the days component in the canonical lexical representation of <code>$arg2</code>
                           is set to zero (0) and the value of the resulting <code>xs:dayTimeDuration</code> is
                           calculated. Alternatively, the value of <code>$arg2</code> modulus 86,400 is used as the
                           second argument. This value is added to the value of <code>$arg1</code> converted to an
                           <code>xs:dateTime</code> using a reference date such as <code>1972-12-31</code>, and
                           the time component of the result is returned. Note that the <code>xs:time</code>
                           returned may occur in a following or preceding day and may be less than
                           <code>$arg1</code>.
                        </p>
                        <p>The result has the same timezone as <code>$arg1</code>. If <code>$arg1</code> has no
                           timezone, the result has no timezone.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:add-dayTimeDuration-to-time(xs:time("11:12:00"),
                                 xs:dayTimeDuration("P3DT1H15M"))</code> returns <code>xs:time("12:27:00")</code>.
                           </p>
                           <p>The expression <code>op:add-dayTimeDuration-to-time(xs:time("23:12:00+03:00"),
                                 xs:dayTimeDuration("P1DT3H15M"))</code> returns <code>xs:time("02:27:00+03:00")</code>. <em>(That is, <code>{0, 0, 0, 2, 27, 0, PT3H}</code>).</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subtract-dayTimeDuration-from-time"></a>9.7.14 op:subtract-dayTimeDuration-from-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the <code>xs:time</code> value that is a given duration before a specified
                           <code>xs:time</code> (or after, if the duration is negative or causes wrap-around
                           past midnight)
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "-" operator when applied to an <code>xs:time</code> and an
                           <code>xs:dayTimeDuration</code> value. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="small function">op:subtract-dayTimeDuration-from-time</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:time</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="small arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="small as">&nbsp;as&nbsp;</code><code class="small type">xs:dayTimeDuration</code>)<code class="small as">&nbsp;as&nbsp;</code><code class="small return-type">xs:time</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of negating <code>$arg2</code> and adding the result to
                           <code>$arg1</code> using the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-add-dayTimeDuration-to-time"><code>op:add-dayTimeDuration-to-time</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>op:subtract-dayTimeDuration-from-time(xs:time("11:12:00"),
                                 xs:dayTimeDuration("P3DT1H15M"))</code> returns <code>xs:time("09:57:00")</code>.
                           </p>
                           <p>The expression <code>op:subtract-dayTimeDuration-from-time(xs:time("08:20:00-05:00"),
                                 xs:dayTimeDuration("P23DT10H10M"))</code> returns <code>xs:time("22:10:00-05:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="formatting-dates-and-times"></a>9.8 Formatting dates and times
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a></td>
                        <td>Returns a string containing an <code>xs:dateTime</code> value formatted for display.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><code>fn:format-date</code></a></td>
                        <td>Returns a string containing an <code>xs:date</code> value formatted for display.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a></td>
                        <td>Returns a string containing an <code>xs:time</code> value formatted for display.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>Three functions are provided to represent dates and times as a string, using the conventions
                  of a selected calendar,
                  language, and country. The signatures are presented first, followed by the rules which
                  apply to each of the functions.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-format-dateTime"></a>9.8.1 fn:format-dateTime
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a string containing an <code>xs:dateTime</code> value formatted for display.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:format-dateTime</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>, <code class="arg">$picture</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="5"><code class="function">fn:format-dateTime</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:dateTime?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$picture</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$language</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$calendar</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$place</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		default calendar, and default language, and default place, and implicit timezone.
                           	
                        </p>
                        <p>The five-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone, and namespaces.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>See <a href="https://www.w3.org/TR/xpath-functions-31/#rules-for-datetime-formatting"><b>9.8.4 The date/time formatting functions</b></a>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-format-date"></a>9.8.2 fn:format-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a string containing an <code>xs:date</code> value formatted for display.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:format-date</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>, <code class="arg">$picture</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="5"><code class="function">fn:format-date</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:date?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$picture</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$language</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$calendar</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$place</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		default calendar, and default language, and default place, and implicit timezone.
                           	
                        </p>
                        <p>The five-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone, and namespaces.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>See <a href="https://www.w3.org/TR/xpath-functions-31/#rules-for-datetime-formatting"><b>9.8.4 The date/time formatting functions</b></a>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-format-time"></a>9.8.3 fn:format-time
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a string containing an <code>xs:time</code> value formatted for display.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:format-time</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>, <code class="arg">$picture</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="5"><code class="function">fn:format-time</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:time?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$picture</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$language</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$calendar</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$place</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		default calendar, and default language, and default place, and implicit timezone.
                           	
                        </p>
                        <p>The five-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		implicit timezone, and namespaces.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>See <a href="https://www.w3.org/TR/xpath-functions-31/#rules-for-datetime-formatting"><b>9.8.4 The date/time formatting functions</b></a>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="rules-for-datetime-formatting"></a>9.8.4 The date/time formatting functions
                  </h4>
                  <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><code>fn:format-date</code></a>, 
                     and <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a> 
                     functions format <code>$value</code> as a string using 
                     the picture string specified by the <code>$picture</code> argument,
                     the calendar specified by the <code>$calendar</code> argument,
                     the language specified by the <code>$language</code> argument, 
                     and the country or other place name specified by the <code>$place</code> argument.
                     The result of the function is the formatted string representation of the supplied
                     <code>xs:dateTime</code>, <code>xs:date</code>, or <code>xs:time</code> value.
                  </p>
                  <p>
                     <span class="termdef"><a id="dt-date-formatting-function"></a>[Definition]  The three 
                        functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><code>fn:format-date</code></a>, 
                        and <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a> are referred to collectively as the
                        <b>date formatting functions</b>.</span>
                     
                  </p>
                  <p>If <code>$value</code> is the empty sequence, the function returns the empty sequence.
                  </p>
                  <p>Calling the two-argument form of each of the three functions is equivalent
                     to calling the five-argument form with each of the last three arguments set to an
                     empty sequence.
                  </p>
                  <p>For details of the <code>$language</code>, <code>$calendar</code>, and
                     <code>$place</code> arguments, see <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place"><b>9.8.4.8 The language, calendar, and place arguments</b></a>.
                  </p>
                  <p>In general, the use of an invalid <code>$picture</code>, 
                     <code>$language</code>, <code>$calendar</code>, or
                     <code>$place</code> argument results in a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]. By contrast,
                     use of an option in any of these arguments that is valid but not supported by the
                     implementation is
                     not an error, and in these cases the implementation is required to output the value
                     in a fallback
                     representation. More detailed rules are given below.
                  </p>
                  <div class="div4">
                     
                     <h5><a id="date-picture-string"></a>9.8.4.1 The picture string
                     </h5>
                     <p>The picture consists of a sequence of variable markers and literal substrings.
                        A substring enclosed in square brackets is interpreted as a variable marker; substrings
                        not enclosed in square brackets are taken as literal substrings. 
                        The literal substrings are optional and if present are rendered unchanged, including
                        any whitespace. 
                        If an opening or closing square bracket 
                        is required within a literal substring, it <span class="verb">must</span> be doubled.
                        The variable markers are replaced in the result by strings representing 
                        aspects of the date and/or time to be formatted. These are described in detail below.
                     </p>
                     <p>A variable marker consists of a component specifier followed optionally 
                        by one or two presentation modifiers and/or optionally by a width modifier.
                        Whitespace within a variable marker is ignored.
                     </p>
                     <p>The variable marker may be separated into its components
                        by applying the following rules:
                     </p>
                     <ol class="enumar">
                        <li>
                           <p>The component specifier is always present and is always a
                              single letter.
                           </p>
                        </li>
                        <li>
                           <p>The width modifier may be recognized by the presence of a comma.</p>
                        </li>
                        <li>
                           <p>The substring between the component specifier and the comma (if present)
                              or the end of the string (if there is no comma) contains the first and
                              second presentation modifiers, both of which are optional. If this substring
                              contains a single character, this is interpreted as the first presentation modifier.
                              If it contains more than one character, the last character is examined: if it is valid
                              as a second presentation modifier then it is treated as such, and the preceding part
                              of the substring constitutes the first presentation modifier. Otherwise, the second
                              presentation modifier is presumed absent and the whole substring is interpreted as
                              the
                              first presentation modifier.
                           </p>
                        </li>
                     </ol>
                     <p>The <em>component specifier</em> indicates the component of the date or
                        time that is required, and takes the following values:
                     </p>
                     <div class="overlarge"><table class="data">
                        <thead>
                           <tr>
                              <th style="text-align:left">Specifier</th>
                              <th style="text-align:left">Meaning</th>
                              <th style="text-align:left">Default Presentation Modifier</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>Y</td>
                              <td>year (absolute value)</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>M</td>
                              <td>month in year</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>D</td>
                              <td>day in month</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>d</td>
                              <td>day in year</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>F</td>
                              <td>day of week</td>
                              <td>n</td>
                           </tr>
                           <tr>
                              <td>W</td>
                              <td>week in year</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>w</td>
                              <td>week in month</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>H</td>
                              <td>hour in day (24 hours)</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>h</td>
                              <td>hour in half-day (12 hours)</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>P</td>
                              <td>am/pm marker</td>
                              <td>n</td>
                           </tr>
                           <tr>
                              <td>m</td>
                              <td>minute in hour</td>
                              <td>01</td>
                           </tr>
                           <tr>
                              <td>s</td>
                              <td>second in minute</td>
                              <td>01</td>
                           </tr>
                           <tr>
                              <td>f</td>
                              <td>fractional seconds</td>
                              <td>1</td>
                           </tr>
                           <tr>
                              <td>Z</td>
                              <td>timezone</td>
                              <td>01:01</td>
                           </tr>
                           <tr>
                              <td>z</td>
                              <td>timezone (same as Z, but modified where appropriate to include a prefix
                                 as a time offset using GMT, for example GMT+1 or GMT-05:00. For this component there
                                 is a fixed
                                 prefix of <code>GMT</code>, or a localized
                                 variation thereof for the chosen language, and the remainder of the value is formatted
                                 as for specifier <code>Z</code>.
                                 
                              </td>
                              <td>01:01</td>
                           </tr>
                           <tr>
                              <td>C</td>
                              <td>calendar: the name or abbreviation of a calendar name</td>
                              <td>n</td>
                           </tr>
                           <tr>
                              <td>E</td>
                              <td>era: the name of a baseline for the numbering of years, for example
                                 the reign of a monarch
                              </td>
                              <td>n</td>
                           </tr>
                        </tbody>
                     </table></div>
                     <p>A dynamic error is reported [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]
                        if the syntax of the picture is incorrect.
                     </p>
                     <p>A dynamic error is reported [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1350" title="err:FOFD1350">err:FOFD1350</a>]
                        if a component specifier within the picture 
                        refers to components that are not available in the given type of <code>$value</code>,
                        for example if the picture supplied to the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a> refers
                        to the year, month, or day component.
                     </p>
                     <p>It is not an error to include a timezone component when the supplied
                        value has no timezone. In these circumstances the timezone component will be ignored.
                     </p>
                     <p>The first <em>presentation modifier</em> indicates the style in which the
                        value of a component is to be represented. Its value may be
                        either:
                     </p>
                     <ul>
                        <li>
                           <p>any format token permitted as a primary format token in the second argument 
                              of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a> function, indicating
                              that the value of the component is to be output numerically using the specified number
                              format (for example,
                              <code>1</code>, <code>01</code>, <code>i</code>, <code>I</code>, <code>w</code>, <code>W</code>,
                              or <code>Ww</code>) or 
                           </p>
                        </li>
                        <li>
                           <p>the format token <code>n</code>, <code>N</code>,
                              or <code>Nn</code>, indicating that the value of the component is to be output by name,
                              in lower-case, upper-case, or title-case respectively. Components that can be output
                              by name
                              include (but are not limited to) months, days of the week, timezones, and eras. 
                              If the processor cannot output these components by name for the chosen calendar and
                              language 
                              then it must use an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> fallback representation.
                           </p>
                        </li>
                     </ul>
                     <p>If a comma is to be used as a grouping separator within the format token, then there
                        must be a width
                        			   specifier. More specifically: if a variable marker
                        			   contains one or more commas, then the last comma is treated as introducing the
                        width modifier, and all others
                        			   are treated as grouping separators. So <code>[Y9,999,*]</code> will output the year as <code>2,008</code>.
                     </p>
                     <p>It is not possible to use a closing square bracket as a grouping separator within
                        the format token.
                     </p>
                     <p>If the implementation does not support the use of the requested format token, it <span class="verb">must</span>
                        use the default presentation modifier for that component.
                     </p>
                     <p>If the first presentation modifier is present, then it may optionally be followed
                        by
                        a second presentation modifier as follows:
                     </p>
                     <table class="longlastcol">
                        <thead>
                           <tr>
                              <th style="text-align:left">Modifier</th>
                              <th style="text-align:left">Meaning</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>either <code>a</code> or <code>t</code></td>
                              <td>indicates alphabetic or traditional numbering respectively,
                                 the default being <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. 
                                 This has the same meaning as in the second argument of <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a>.
                              </td>
                           </tr>
                           <tr>
                              <td>either <code>c</code> or <code>o</code></td>
                              <td>indicates cardinal or ordinal numbering respectively, for example
                                 <code>7</code> or <code>seven</code> for a cardinal number, or <code>7th</code>,
                                 <code>seventh</code>, or <code>7º</code>
                                 for an ordinal number.
                                 						This has the same meaning as
                                 in the second argument of <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a>. 
                                 The actual representation of the ordinal form of a number
                                 may depend not only on the language, but also on the grammatical context (for example,
                                 in some languages it must agree in gender).
                              </td>
                           </tr>
                        </tbody>
                     </table>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>Although the formatting rules are expressed in terms of the rules
                           for format tokens in <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a>, the formats actually used may be specialized
                           to the numbering of date components where appropriate. For example, in Italian, it
                           is conventional to
                           use an ordinal number (<code>primo</code>) for the first day of the month, and cardinal numbers
                           (<code>due, tre, quattro ...</code>) for the remaining days. A processor may therefore use
                           this convention to number days of the month, ignoring the presence or absence of the
                           ordinal
                           presentation modifier.
                        </p>
                     </div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="width-modifier"></a>9.8.4.2 The Width Modifier
                     </h5>
                     <p>Whether or not a presentation modifier is included, a width modifier may be supplied.
                        This
                        indicates the number of characters to be included in the representation of the value.
                     </p>
                     <p>The width modifier, if present, is introduced by a comma. It takes the form:</p>
                     <p>
                        <code>&nbsp;&nbsp;&nbsp;","&nbsp;&nbsp;min-width ("-" max-width)?</code>
                        
                     </p>
                     <p>where <code>min-width</code> is either an unsigned integer indicating the minimum number of characters to
                        be output, or <code>*</code> indicating that there is no explicit minimum, and 
                        <code>max-width</code> is either an unsigned integer indicating the maximum number of characters to
                        be output, or <code>*</code> indicating that there is no explicit maximum; if <code>max-width</code>
                        is omitted then <code>*</code> is assumed.
                     </p>
                     <p>A dynamic error ([<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]) is raised if 
                        <code>min-width</code> is present and less than one, or if
                        <code>max-width</code> is present and less than one or less than <code>min-width</code>. 
                        
                     </p>
                     <p>A format token containing more than one digit, such as <code>001</code> or <code>9999</code>, sets the
                        minimum and maximum width to the number of digits appearing in the format token; if
                        a width
                        modifier is also present, then the width modifier takes precedence.
                     </p>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="formatting-integer-valued-components"></a>9.8.4.3 Formatting Integer-Valued Date/Time Components
                     </h5>
                     <p>The rules in this section apply to the majority of integer-valued components: specifically
                        <code>M D d F W w H h m s</code>.
                     </p>
                     <p>In the rules below, the term <b>decimal digit pattern</b> has the meaning given in <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><b>4.6.1 fn:format-integer</b></a>.
                     </p>
                     <ol class="enumar">
                        <li>
                           <p>If the first presentation modifier takes the form of a <b>decimal digit pattern</b>:
                           </p>
                           <ol class="enumla">
                              <li>
                                 <p>If there is no width modifier, then the value is formatted according to 
                                    		                      the rules of the <code>format-integer</code> function.
                                 </p>
                              </li>
                              <li>
                                 <p>If there is a width modifier, then the first presentation modifier 
                                    		                      is adjusted as follows:
                                 </p>
                                 <ol class="enumlr">
                                    <li>
                                       <p>If the decimal digit pattern includes a grouping separator, the output is 
                                          		                         implementation-defined (but this is not an error).
                                          		                      
                                       </p>
                                       <div class="note">
                                          <p class="prefix"><b>Note:</b></p>
                                          <p>Use of a width modifier together with grouping separators is inadvisable 
                                             		                            for this reason. It is never necessary to use a width
                                             modifier with a decimal 
                                             		                            digit pattern, since the same effect can be achieved
                                             by use of optional digit signs.
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <p>Otherwise, the number of mandatory-digit-sign characters in the presentation 
                                          		                         modifier is increased if necessary. This is done first
                                          by replacing optional-digit-signs 
                                          		                         with mandatory-digit-signs, starting from the right, and
                                          then prepending mandatory-digit-signs 
                                          		                         to the presentation modifier, until the number of mandatory-digit-signs
                                          is equal to the 
                                          		                         minimum width. Any mandatory-digit-signs that are added
                                          by this process must use the 
                                          		                         same decimal digit family as existing mandatory-digit-signs
                                          in the presentation modifier 
                                          		                         if there are any, or ASCII digits otherwise.
                                          		                      
                                       </p>
                                    </li>
                                    <li>
                                       <p>The maximum width, if specified, is ignored.
                                          		                      
                                       </p>
                                    </li>
                                    <li>
                                       <p>The output is then as defined using the <code>format-integer</code> function with this adjusted decimal digit pattern.
                                          		                      
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>If the first presentation modifiers is one of <code>N</code>, <code>n</code>, or <code>Nn</code>:
                           </p>
                           <ol class="enumla">
                              <li>
                                 <p>Let <var>FN</var> be the full name of the component, that is, the form of the name 
                                    		                     that would be used in the absence of any width modifier.
                                 </p>
                              </li>
                              <li>
                                 <p>If <var>FN</var> is shorter than the minimum width, then it is padded by appending spaces to the end
                                    of the name.
                                    		                  
                                 </p>
                              </li>
                              <li>
                                 <p>If <var>FN</var> is longer than the maximum width, then it is abbreviated, either 
                                    		                     by choosing a conventional abbreviation that fits within the
                                    maximum width (for example, 
                                    		                     "Wednesday" might be abbreviated to "Weds"), or by removing
                                    characters from the end 
                                    		                     of <var>FN</var> until it fits within the maximum width.
                                    		                  
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>For other presentation modifiers:</p>
                           <ol class="enumla">
                              <li>
                                 <p>Any adjustment of the value to fit within the requested width range is implementation-defined.
                                    
                                 </p>
                              </li>
                              <li>
                                 <p>The value should not be truncated if this results in output that will not be meaningful
                                    to users (for example, 
                                    		                     there is no sensible way to truncate Roman numerals).
                                 </p>
                              </li>
                              <li>
                                 <p>If shorter than the minimum width, the value should be padded to the minimum width,
                                    either by appending spaces, 
                                    		                     or in some other way appropriate to the numbering scheme.
                                 </p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="formatting-year-component"></a>9.8.4.4 Formatting the Year Component
                     </h5>
                     <p>The rules for the year component (Y) are the same as those in <a href="https://www.w3.org/TR/xpath-functions-31/#formatting-integer-valued-components"><b>9.8.4.3 Formatting Integer-Valued Date/Time Components</b></a>, 
                        		            except that the value of the year as output is the value of the year
                        component of the supplied value modulo ten to the power 
                        		            <var>N</var> where <var>N</var> is determined as follows: 
                        		         
                     </p>
                     <ol class="enumar">
                        <li>
                           <p>If the width modifier is present and <span>defines a finite maximum width</span>, then that maximum width.
                              		            
                           </p>
                        </li>
                        <li>
                           <p>Otherwise, if the first presentation modifier takes the form of a decimal-digit-pattern,
                              
                              		               then:
                           </p>
                           <ol class="enumla">
                              <li>
                                 <p>Let <var>W</var> be the number of optional-digit-signs and mandatory-digit-signs in that decimal-digit-pattern.
                                 </p>
                              </li>
                              <li>
                                 <p>If <var>W</var> is 2 or more, then <var>W</var>.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Otherwise, <var>N</var> is infinity (that is, the year is output in full).
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="formatting-fractional-seconds"></a>9.8.4.5 Formatting Fractional Seconds
                     </h5>
                     <p>The output for the fractional seconds component (<code>f</code>) is equivalent to the result of the following algorithm: 
                     </p>
                     <ol class="enumar">
                        <li>
                           <p>If the first presentation modifier contains no Unicode digit, then the output is implementation-defined.
                              		            
                           </p>
                        </li>
                        <li>
                           <p>Otherwise, the value of the fractional seconds is output as follows:</p>
                           <ol class="enumla">
                              <li>
                                 <p>If there is no width modifier and the first presentation modifier comprises in its
                                    		                  entirety a single mandatory-digit-sign (for example the default
                                    <code>1</code>), then
                                    		                  the presentation modifier is extended on the right with as many
                                    optional-digit-signs as
                                    		                  are needed to accommodate the actual fractional seconds precision
                                    encountered in the
                                    		                  value to be formatted.
                                    		               
                                 </p>
                              </li>
                              <li>
                                 <p>If there is a width modifier, then the first presentation modifier 
                                    		                  is adjusted as follows:
                                 </p>
                                 <ol class="enumlr">
                                    <li>
                                       <p><span>If a minimum width is specified, and if this exceeds the number of mandatory-digit-sign
                                             characters 
                                             		                        in the first presentation modifier, then the first presentation
                                             modifier is adjusted.</span> 
                                          		                        This is done first by replacing optional-digit-signs 
                                          		                        with mandatory-digit-signs, starting from the left, and
                                          then appending mandatory-digit-signs 
                                          		                        to the presentation modifier, until the number of mandatory-digit-signs
                                          is equal to the 
                                          		                        minimum width. Any mandatory-digit-signs that are added
                                          by this process must use the 
                                          		                        same decimal digit family as existing mandatory-digit-signs
                                          in the presentation modifier.
                                          		                     
                                       </p>
                                    </li>
                                    <li>
                                       <p>If a maximum width is specified, the first presentation modifier is extended on the
                                          right
                                          		                        with as many optional-digit-signs as are needed to ensure
                                          that the number of mandatory-digit-signs
                                          		                        and optional-digit-signs is at least equal to the maximum
                                          width.
                                          		                     
                                       </p>
                                    </li>
                                 </ol>
                              </li>
                              <li>
                                 <p>The sequence of characters in the (adjusted) first presentation modifier is reversed
                                    (for example, 
                                    		                  <code>999'###</code> becomes <code>###'999</code>). 
                                    		                  If the result is not a valid <b>decimal digit pattern</b>, then the output is 
                                    		                  <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                                    		               
                                 </p>
                              </li>
                              <li>
                                 <p>The sequence of digits in the conventional decimal representation of the fractional
                                    seconds component 
                                    		                  is reversed, with insignificant zeroes removed, and the result
                                    is treated as an integer. For example, if the 
                                    		                  seconds value is <code>25.8235</code>, the reversed fractional seconds value is <code>5328</code>.
                                    		               
                                 </p>
                              </li>
                              <li>
                                 <p>The reversed fractional seconds value is formatted using the reversed decimal digit
                                    pattern according to the 
                                    		                  rules of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a> function. Given the examples above, the result is <code>5'328</code>
                                    		               
                                 </p>
                              </li>
                              <li>
                                 <p>The resulting string is reversed. In our example, the result is <code>823'5</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>If the result contains more digits than the number of mandatory-digit-signs and optional-digit-signs
                                    in the 
                                    		                  decimal digit pattern, then excess digits 
                                    		                  are removed from the right hand end (that is, the value is truncated
                                    towards zero rather than being rounded). 
                                    		                  Any grouping separator that immediately precedes a removed digit
                                    
                                    		                  is also removed.
                                 </p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>The reason for presenting the algorithm in this way is that it enables maximum re-use
                           of the rules defined for
                           		            <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a>. Since the fractional seconds value is not properly an integer, the rules do not
                           		            work if used directly: for example, the positions of grouping separators
                           need to be counted from the left rather
                           		            than from the right. Implementations, as always, are free to use a different
                           algorithm that yields the same result.
                        </p>
                     </div>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>A format token consisting of a single digit,
                           		            such as <code>1</code>, does not constrain the number of digits in the output. 
                           		            In the case of fractional seconds in particular, <code>[f001]</code> requests three decimal digits,
                           		            <code>[f01]</code> requests two digits, but <code>[f1]</code> will retain all digits in the
                           		            supplied date/time value (the maximum number of digits is implementation-defined).
                           
                           		            If exactly one digit is required, this can be achieved using the component
                           specifier 
                           		            <code>[f1,1-1]</code>.
                        </p>
                     </div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="formatting-timezones"></a>9.8.4.6 Formatting timezones
                     </h5>
                     <p>Special rules apply to the formatting of timezones. When the component specifiers
                        <code>Z</code>
                        		      or <code>z</code> are used, the rules in this section override any rules given elsewhere in the case
                        of
                        		      discrepancies.
                     </p>
                     <p>If the date/time value to be formatted does not include a timezone offset, then the
                        timezone component
                        		      specifier is generally ignored (results in no output). The exception is where
                        military timezones are used
                        		      (format ZZ) in which case the string "J" is output, indicating local time.
                     </p>
                     <ul>
                        <li>
                           <p>When the component specifier is <code>z</code>, the output is the same as for component specifier
                              		      <code>Z</code>, except that it is prefixed by the characters <code>GMT</code> or some localized
                              		      equivalent. The prefix is omitted, however, in cases where the timezone is
                              identified by name rather than by
                              		      a numeric offset from UTC.
                           </p>
                        </li>
                        <li>
                           <p>If the first <var>presentation modifier</var> is numeric and comprises one or two digits 
                              		         with no <var>grouping-separator</var> (for example <code>1</code>
                              		      or <code>01</code>), then the timezone is formatted as a displacement from UTC in hours, preceded by
                              a plus or minus
                              		      sign: for example <code>-5</code> or <code>+03</code>. If the actual timezone offset is not an integral number of hours,
                              		      then the minutes part of the offset is appended, separated by a colon: for
                              example <code>+10:30</code> or 
                              		         <code>-1:15</code>.
                           </p>
                        </li>
                        <li>
                           <p>If the first <var>presentation modifier</var> is numeric with a <var>grouping-separator</var> (for example <code>1:01</code>
                              		         or <code>01.01</code>), then the timezone offset is output in hours and minutes, separated by the grouping
                              separator,
                              		      even if the number of minutes is zero: for example <code>+5:00</code> or <code>+10.30</code>.
                           </p>
                        </li>
                        <li>
                           <p>If the first <var>presentation modifier</var> is numeric and comprises three or four digits with no
                              		      <var>grouping-separator</var>, for example <code>001</code> or <code>0001</code>, then the timezone offset
                              		      is shown in hours and minutes with no separator, for example <code>-0500</code> or <code>+1030</code>.
                              		      
                           </p>
                        </li>
                        <li>
                           <p>If the first <var>presentation modifier</var> is numeric, in any of the above formats, and the second
                              		      <var>presentation modifier</var> is <code>t</code>, then a zero timezone offset (that is, UTC) is output as <code>Z</code> instead
                              		      of a signed numeric value. In this presentation modifier is absent or if the
                              timezone offset is non-zero, 
                              		      then the displayed timezone offset is preceded by a "-" sign for negative
                              offsets
                              		      or a "+" sign for non-negative offsets.
                           </p>
                        </li>
                        <li>
                           <p>If the first <var>presentation modifier</var> is <code>Z</code>, then the timezone is formatted
                              		         as a military timezone letter, using the convention Z = +00:00, A = +01:00,
                              B = +02:00, ..., M = +12:00, 
                              		         N = -01:00, O = -02:00, ... Y = -12:00. The letter J (meaning local time)
                              is used in the case of a 
                              		         value that does not specify a timezone offset. Timezone offsets that have
                              no representation in this system
                              		         (for example Indian Standard Time, +05:30) are output as if the format
                              <code>01:01</code> had been requested.
                           </p>
                        </li>
                        <li>
                           <p>If the first <var>presentation modifier</var> is <code>N</code>, then the timezone is output
                              		      (where possible) as a timezone name, for example <code>EST</code> or <code>CET</code>. The same timezone
                              		      offset has different names in different places; it is therefore <span class="verb">recommended</span> that this option
                              		      should be used only if a country code (see <a href="https://www.w3.org/TR/xpath-functions-31/#ISO3166">[ISO 3166-1]</a>) or <span>IANA</span> timezone name (see <a href="https://www.w3.org/TR/xpath-functions-31/#olson">[IANA Timezone Database]</a>) is supplied in the <code>$place</code> argument.
                              		      In the absence of this information, the implementation may apply a default,
                              for example by using the timezone
                              		      names that are conventional in North America. If no timezone name can be identified,
                              the timezone offset is
                              		      output using the fallback format <code>+01:01</code>.
                           </p>
                        </li>
                     </ul>
                     <p>The following examples illustrate options for timezone formatting.</p>
                     <div class="overlarge"><table class="small complex data">
                        <thead>
                           <tr>
                              <th>Variable marker</th>
                              <th><code>$place</code></th>
                              <th colspan="5">Timezone offsets (with time = 12:00:00)</th>
                           </tr>
                           <tr>
                              <th>&nbsp;</th>
                              <th>&nbsp;</th>
                              <th>-10:00</th>
                              <th>-05:00</th>
                              <th>+00:00</th>
                              <th>+05:30</th>
                              <th>+13:00</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>[Z]</td>
                              <td>()</td>
                              <td>-10:00</td>
                              <td>-05:00</td>
                              <td>+00:00</td>
                              <td>+05:30</td>
                              <td>+13:00</td>
                           </tr>
                           <tr>
                              <td>[Z0]</td>
                              <td>()</td>
                              <td>-10</td>
                              <td>-5</td>
                              <td>+0</td>
                              <td>+5:30</td>
                              <td>+13</td>
                           </tr>
                           <tr>
                              <td>[Z0:00]</td>
                              <td>()</td>
                              <td>-10:00</td>
                              <td>-5:00</td>
                              <td>+0:00</td>
                              <td>+5:30</td>
                              <td>+13:00</td>
                           </tr>
                           <tr>
                              <td>[Z00:00]</td>
                              <td>()</td>
                              <td>-10:00</td>
                              <td>-05:00</td>
                              <td>+00:00</td>
                              <td>+05:30</td>
                              <td>+13:00</td>
                           </tr>
                           <tr>
                              <td>[Z0000]</td>
                              <td>()</td>
                              <td>-1000</td>
                              <td>-0500</td>
                              <td>+0000</td>
                              <td>+0530</td>
                              <td>+1300</td>
                           </tr>
                           <tr>
                              <td>[Z00:00t]</td>
                              <td>()</td>
                              <td>-10:00</td>
                              <td>-05:00</td>
                              <td>Z</td>
                              <td>+05:30</td>
                              <td>+13:00</td>
                           </tr>
                           <tr>
                              <td>[z]</td>
                              <td>()</td>
                              <td>GMT‑10:00</td>
                              <td>GMT‑05:00</td>
                              <td>GMT+00:00</td>
                              <td>GMT+05:30</td>
                              <td>GMT+13:00</td>
                           </tr>
                           <tr>
                              <td>[ZZ]</td>
                              <td>()</td>
                              <td>W</td>
                              <td>R</td>
                              <td>Z</td>
                              <td>+05:30</td>
                              <td>+13:00</td>
                           </tr>
                           <tr>
                              <td>[ZN]</td>
                              <td>"us"</td>
                              <td>HST</td>
                              <td>EST</td>
                              <td>GMT</td>
                              <td>IST</td>
                              <td>+13:00</td>
                           </tr>
                           <tr>
                              <td>[H00]:[M00] [ZN]</td>
                              <td>"America/New_York"</td>
                              <td>06:00 EST</td>
                              <td>12:00 EST</td>
                              <td>07:00 EST</td>
                              <td>01:30 EST</td>
                              <td>18:00 EST</td>
                           </tr>
                        </tbody>
                     </table></div>
                     <p>If a width specifier is present when formatting a timezone, then the representation
                        as defined in this section is padded to the minimum
                        		      width as described in <a href="https://www.w3.org/TR/xpath-functions-31/#width-modifier"><b>9.8.4.2 The Width Modifier</b></a>, but it is never shortened.
                     </p>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="formatting-other-components"></a>9.8.4.7 Formatting Other Components
                     </h5>
                     <p>This section applies to the remaining components: <code>P</code> (am/pm marker), <code>C</code> (calendar),
                        		      and <code>E</code> (era).
                     </p>
                     <p>The output for these components is entirely <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                        		      The default presentation modifier for these components is <code>n</code>, indicating that they are output as names (or
                        		      conventional abbreviations), and the chosen names will in many cases depend
                        on the chosen language: see <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place"><b>9.8.4.8 The language, calendar, and place arguments</b></a>.
                     </p>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="lang-cal-place"></a>9.8.4.8 The language, calendar, and place arguments
                     </h5>
                     <p>The set of languages, calendars, and places that are supported in the 
                        <a title="date formatting function" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-date-formatting-function"><span class="arrow">·</span>date formatting functions<span class="arrow">·</span></a> is
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. When
                        any of these arguments is omitted or is an empty sequence, an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                        default value is used.
                     </p>
                     <p>If the fallback representation uses a different calendar from that requested,
                        the output string <span class="verb">must</span> identify the calendar actually used, for example by
                        prefixing the string with <code>[Calendar: X]</code> (where X is the calendar actually used),
                        localized as appropriate to the
                        requested language. If the fallback representation uses a different language
                        from that requested, the output string <span class="verb">must</span> identify the language actually
                        used, for example by prefixing the string with <code>[Language: Y]</code> (where Y is the language
                        actually used) localized in an
                        implementation-dependent way. If a particular component of the value cannot be output
                        in
                        the requested format, it <span class="verb">should</span> be output in the default format for
                        that component.
                     </p>
                     <p>The <code>$language</code> argument specifies the language to be used for the result string 
                        of the function. The value of the argument <span class="verb">should</span> be either the empty sequence
                        or a value that would be valid for the <code>xml:lang</code> attribute (see [XML]).
                        Note that this permits the identification of sublanguages
                        based on country codes (from <a href="https://www.w3.org/TR/xpath-functions-31/#ISO3166">[ISO 3166-1]</a>) as well as identification of dialects
                        and of regions within a country.
                     </p>
                     <p>If the <code>$language</code> 
                        argument is omitted or is set to an empty sequence, or if it is set to an invalid
                        value or a
                        value that the implementation does not recognize, 
                        then the processor uses the default language defined in the dynamic context.
                     </p>
                     <p>The language is used to select the appropriate language-dependent forms of:</p>
                     <ul>
                        <li>
                           <p>names (for example, of months)</p>
                        </li>
                        <li>
                           <p>numbers expressed as words or as ordinals (<code>twenty, 20th, twentieth</code>)
                           </p>
                        </li>
                        <li>
                           <p>hour convention (0-23 vs 1-24, 0-11 vs 1-12)</p>
                        </li>
                        <li>
                           <p>first day of week, first week of year</p>
                        </li>
                     </ul>
                     <p>Where appropriate this choice may also take into account the value of the
                        <code>$place</code> argument, though this <span class="verb">should</span> not be used to override the
                        language or any sublanguage that is specified as part of the <code>language</code>
                        argument.
                     </p>
                     <p>The choice of the names and abbreviations used in any given language is 
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. For example,
                        one implementation might abbreviate July as <code>Jul</code> while another uses <code>Jly</code>. In German,
                        one implementation might represent Saturday as <code>Samstag</code> while another
                        uses <code>Sonnabend</code>. Implementations <span class="verb">may</span> provide mechanisms allowing users to
                        control such choices.
                     </p>
                     <p>Where ordinal numbers are used, the selection of the correct representation of the
                        
                        ordinal (for example, the linguistic gender) <span class="verb">may</span> depend on the component being formatted and on its
                        textual context in the picture string.
                     </p>
                     <p>The <code>calendar</code> attribute specifies that the <code>dateTime</code>, <code>date</code>,
                        or <code>time</code> supplied in the <code>$value</code> argument <span class="verb">must</span> be 
                        converted to a value in the specified calendar and then converted to a string using
                        the 
                        conventions of that calendar.
                     </p>
                     <p>The calendar value if present <span class="verb">must</span> be a valid <code>EQName</code> 
                        (dynamic error: [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]).
                        If it is a lexical <code>QName</code> then it is expanded into an expanded QName 
                        using the statically known namespaces; if it has no prefix then it represents an expanded-QName
                        in no namespace.
                        If the expanded QName is in no namespace, 
                        then it <span class="verb">must</span> identify a calendar with a designator specified below 
                        (dynamic error: [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]). 
                        If the expanded QName is in a namespace then it identifies the calendar in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way.
                     </p>
                     <p>If the <code>$calendar</code> argument is omitted or is set to an empty sequence
                        then the default calendar defined in the dynamic context is used.
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>The calendars listed below were known to be in use during the 
                           last hundred years. Many other calendars have been used in the past.
                        </p>
                        <p>This specification does not define any of these calendars, nor the way that they
                           map to the value space of the <code>xs:date</code> datatype in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.
                           There may be ambiguities when dates are recorded using different calendars. 
                           For example, the start of a new day is not simultaneous in different calendars, 
                           and may also vary geographically (for example, based on the time of sunrise or sunset).
                           Translation of dates is therefore more reliable when the time of day is also known,
                           and
                           when the geographic location is known. 
                           When translating dates between
                           one calendar and another, the processor may take account of the values
                           of the <code>$place</code> and/or <code>$language</code> arguments, with the 
                           <code>$place</code>
                           argument taking precedence.
                        </p>
                        <p>Information about some of these calendars, and algorithms for converting between them,
                           may
                           be found in <a href="https://www.w3.org/TR/xpath-functions-31/#CALCALC">[Calendrical Calculations]</a>.
                        </p>
                     </div>
                     <div class="overlarge"><table class="data">
                        <thead>
                           <tr>
                              <th>Designator</th>
                              <th>Calendar</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr>
                              <td>AD</td>
                              <td>Anno Domini (Christian Era)</td>
                           </tr>
                           <tr>
                              <td>AH</td>
                              <td>Anno Hegirae (Muhammedan Era)</td>
                           </tr>
                           <tr>
                              <td>AME</td>
                              <td>Mauludi Era (solar years since Mohammed's birth)</td>
                           </tr>
                           <tr>
                              <td>AM</td>
                              <td>Anno Mundi (Jewish Calendar)</td>
                           </tr>
                           <tr>
                              <td>AP</td>
                              <td>Anno Persici</td>
                           </tr>
                           <tr>
                              <td>AS</td>
                              <td>Aji Saka Era (Java)</td>
                           </tr>
                           <tr>
                              <td>BE</td>
                              <td>Buddhist Era</td>
                           </tr>
                           <tr>
                              <td>CB</td>
                              <td>Cooch Behar Era</td>
                           </tr>
                           <tr>
                              <td>CE</td>
                              <td>Common Era</td>
                           </tr>
                           <tr>
                              <td>CL</td>
                              <td>Chinese Lunar Era</td>
                           </tr>
                           <tr>
                              <td>CS</td>
                              <td>Chula Sakarat Era</td>
                           </tr>
                           <tr>
                              <td>EE</td>
                              <td>Ethiopian Era</td>
                           </tr>
                           <tr>
                              <td>FE</td>
                              <td>Fasli Era</td>
                           </tr>
                           <tr>
                              <td>ISO</td>
                              <td>ISO 8601 calendar</td>
                           </tr>
                           <tr>
                              <td>JE</td>
                              <td>Japanese Calendar</td>
                           </tr>
                           <tr>
                              <td>KE</td>
                              <td>Khalsa Era (Sikh calendar)</td>
                           </tr>
                           <tr>
                              <td>KY</td>
                              <td>Kali Yuga</td>
                           </tr>
                           <tr>
                              <td>ME</td>
                              <td>Malabar Era</td>
                           </tr>
                           <tr>
                              <td>MS</td>
                              <td>Monarchic Solar Era</td>
                           </tr>
                           <tr>
                              <td>NS</td>
                              <td>Nepal Samwat Era</td>
                           </tr>
                           <tr>
                              <td>OS</td>
                              <td>Old Style (Julian Calendar)</td>
                           </tr>
                           <tr>
                              <td>RS</td>
                              <td>Rattanakosin (Bangkok) Era</td>
                           </tr>
                           <tr>
                              <td>SE</td>
                              <td>Saka Era</td>
                           </tr>
                           <tr>
                              <td>SH</td>
                              <td>Mohammedan Solar Era (Iran)</td>
                           </tr>
                           <tr>
                              <td>SS</td>
                              <td>Saka Samvat</td>
                           </tr>
                           <tr>
                              <td>TE</td>
                              <td>Tripurabda Era</td>
                           </tr>
                           <tr>
                              <td>VE</td>
                              <td>Vikrama Era</td>
                           </tr>
                           <tr>
                              <td>VS</td>
                              <td>Vikrama Samvat Era</td>
                           </tr>
                        </tbody>
                     </table></div>
                     <p>At least one of the above calendars <span class="verb">must</span> be supported. It is 
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which
                        calendars are supported.
                     </p>
                     <p>The ISO 8601 calendar (<a href="https://www.w3.org/TR/xpath-functions-31/#ISO8601">[ISO 8601]</a>), 
                        which is included in the above list and designated <code>ISO</code>, 
                        is very similar to the Gregorian calendar designated <code>AD</code>, but it
                        differs in several ways. The ISO calendar
                        is intended to ensure that date and time formats can be read
                        easily by other software, as well as being legible for human
                        users. The ISO calendar
                        prescribes the use of particular numbering conventions as defined in
                        ISO 8601, rather than allowing these to be localized on a per-language basis. 
                        In particular it
                        provides a numeric 'week date' format which identifies dates by
                        year, week of the year, and day in the week; 
                        in the ISO calendar the days of the week are numbered from 1 (Monday) to 7 (Sunday),
                        and
                        week 1 in any calendar year is the week (from Monday to Sunday) that includes the
                        first Thursday
                        of that year. The numeric values of the components year, month, day, hour, minute,
                        and second
                        are the same in the ISO calendar as the values used in the lexical representation
                        of the date and
                        time as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>. The era ("E" component)
                        with this calendar is either a minus sign (for negative years) or a zero-length string
                        (for positive years).
                        For dates before 1 January, AD 1, year numbers in
                        the ISO and AD calendars are off by one from each other: ISO year
                        0000 is 1 BC, -0001 is 2 BC, etc.
                     </p>
                     <p>ISO 8601 does not define a numbering for weeks within a month. When the <code>w</code>
                        component is used, the convention to be adopted is that each Monday-to-Sunday week
                        is considered to
                        fall within a particular month if its Thursday occurs in that month; the weeks that
                        fall in a particular
                        month under this definition are numbered starting from 1. Thus, for example, 
                        29 January 2013 falls in week 5 because the Thursday of the week (31 January 2013)
                        is the fifth Thursday
                        in January, and 1 February 2013 is also in week 5 for the same reason.
                     </p>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>The value space of the date and time datatypes, as defined in XML Schema, is based
                           on
                           absolute points in time. The lexical space of these datatypes defines a 
                           representation of these absolute points in time using the proleptic Gregorian calendar,
                           that is, the modern Western calendar extrapolated into the past and the future; but
                           the value space
                           is calendar-neutral. The
                           <a title="date formatting function" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-date-formatting-function"><span class="arrow">·</span>date formatting functions<span class="arrow">·</span></a> produce a representation
                           of this absolute point in time, but denoted in a possibly different calendar. So,
                           for example, the date whose lexical representation in XML Schema is <code>1502-01-11</code> 
                           (the day on which Pope Gregory XIII was born) might be
                           formatted using the Old Style (Julian) calendar as <code>1 January 1502</code>. This reflects the fact
                           that there was at that time a ten-day difference between the two calendars. It would
                           be
                           incorrect, and would produce incorrect results, to represent this date in an element
                           or attribute 
                           of type <code>xs:date</code> as <code>1502-01-01</code>, even though this might reflect the way 
                           the date was recorded in contemporary documents.
                        </p>
                        <p>When referring to years occurring in antiquity, modern historians generally
                           use a numbering system in which there is no year zero (the year before 1 CE
                           is thus 1 BCE). This is the convention that <span class="verb">should</span> be used when the
                           requested calendar is OS (Julian) or AD (Gregorian). When the requested
                           calendar is ISO, however, the conventions of ISO 8601 <span class="verb">should</span> be followed:
                           here the year before +0001 is numbered zero. In <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> (version 1.0), 
                           the value space for <code>xs:date</code> and <code>xs:dateTime</code>
                           does not include a year zero: however, XSD 1.1 endorses the ISO 8601 convention. This
                           means that the date on
                           which Julius Caesar was assassinated has the ISO 8601 lexical representation
                           -0043-03-13, but will be formatted as 15 March 44 BCE in the Julian calendar
                           or 13 March 44 BCE in the Gregorian calendar (dependant on the chosen
                           localization of the names of months and eras).
                        </p>
                     </div>
                     <p>The intended use of the <code>$place</code> argument is to identify
                        the place where an event
                        represented by the <code>dateTime</code>, <code>date</code>,
                        or <code>time</code> supplied in the <code>$value</code> argument took place or will take place.
                        If the <code>$place</code> argument is omitted or is set
                        to an empty sequence, then the default place defined in the dynamic context is used.
                        If the value is supplied, and is not the empty sequence, then it <span class="verb">should</span> 
                        either be a country code or an <span>IANA</span> timezone name.
                        If the value does not take this form, or if its value is not recognized
                        by the implementation, then the default place defined in the dynamic context is used.
                     </p>
                     <ul>
                        <li>
                           <p>Country codes are defined in <a href="https://www.w3.org/TR/xpath-functions-31/#ISO3166">[ISO 3166-1]</a>. Examples are "de" for Germany
                              and "jp" for Japan. Implementations <span class="verb">may</span> also allow the use
                              of codes representing subdivisions of a country from ISO 3166-2, or codes representing
                              formerly used names of
                              countries from ISO 3166-3
                           </p>
                        </li>
                        <li>
                           <p><span>IANA</span> timezone names are defined in the <span>IANA</span> timezone database <a href="https://www.w3.org/TR/xpath-functions-31/#olson">[IANA Timezone Database]</a>.
                              Examples are "America/New_York" and "Europe/Rome".
                           </p>
                        </li>
                     </ul>
                     <p>This argument is not intended to identify the location of the user 
                        for whom the date or time is being formatted;
                        that should be done by means of the <code>$language</code> attribute. 
                        This information 
                        <span class="verb">may</span> be used to provide additional information when converting dates between
                        calendars or when deciding how individual components of the date and time are to be
                        formatted. 
                        For example, different countries using the Old Style (Julian) calendar started the
                        new year on different
                        days, and some countries used variants of the calendar that were out of synchronization
                        as a result of
                        differences in calculating leap years.
                     </p>
                     <p>The geographical area identified by a country code is defined by the
                        boundaries as they existed at the time of the date to be formatted,
                        or the present-day boundaries for dates in the future.
                     </p>
                     <p>If the <code>$place</code> argument is supplied in the form
                        of an <span>IANA</span> timezone name that is recognized by the implementation, then the date or
                        time being formatted is adjusted to the timezone offset applicable in that timezone.
                        For example, if the <code>xs:dateTime</code> value <code>2010-02-15T12:00:00Z</code>
                        is formatted with the <code>$place</code> argument set to
                        <code>America/New_York</code>, then the output will be as if the value
                        <code>2010-02-15T07:00:00-05:00</code> had been supplied. This adjustment takes daylight
                        savings time into account where possible; if the date in question falls during
                        daylight savings time in New York, then it is adjusted to timezone offset <code>-PT4H</code>
                        rather than <code>-PT5H</code>. Adjustment using daylight savings time is only possible
                        where the value includes a date, and where the date is within the range covered
                        by the timezone database.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="date-time-examples"></a>9.8.5 Examples of date and time formatting
                  </h4>
                  <p>The following examples show a selection of dates and times and the way they might
                     be formatted. These examples assume the use of the Gregorian calendar as the default
                     calendar.
                  </p>
                  <div class="overlarge"><table class="data">
                     <thead>
                        <tr>
                           <th>Required Output</th>
                           <th>Expression</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>
                              <code>2002-12-31</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[Y0001]-[M01]-[D01]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>12-31-2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[M]-[D]-[Y]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td> 
                              <code>31-12-2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[D]-[M]-[Y]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>31 XII 2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[D1] [MI] [Y]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>31st December, 2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[D1o] [MNn], [Y]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>31 DEC 2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[D01] [MN,*-3] [Y0001]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>December 31, 2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[MNn] [D], [Y]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>31 Dezember, 2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[D] [MNn], [Y]", "de", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>Tisdag 31 December 2002</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[FNn] [D] [MNn] [Y]", "sv", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>[2002-12-31]</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[[[Y0001]-[M01]-[D01]]]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>Two Thousand and Three</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[YWw]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>einunddreißigste Dezember</code>
                              
                           </td>
                           <td>
                              <code>format-date($d, "[Dwo] [MNn]", "de", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>3:58 PM</code>
                              
                           </td>
                           <td>
                              <code>format-time($t, "[h]:[m01] [PN]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>3:58:45 pm</code>
                              
                           </td>
                           <td>
                              <code>format-time($t, "[h]:[m01]:[s01] [Pn]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>3:58:45 PM PDT</code>
                              
                           </td>
                           <td>
                              <code>format-time($t, "[h]:[m01]:[s01] [PN] [ZN,*-3]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>3:58:45 o'clock PM PDT</code>
                              
                           </td>
                           <td>
                              <code>format-time($t, "[h]:[m01]:[s01] o'clock [PN] [ZN,*-3]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>15:58</code>
                              
                           </td>
                           <td>
                              <code>format-time($t,"[H01]:[m01]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>15:58:45.762</code>
                              
                           </td>
                           <td>
                              <code>format-time($t,"[H01]:[m01]:[s01].[f001]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>15:58:45 GMT+02:00</code>
                              
                           </td>
                           <td>
                              <code>format-time($t,"[H01]:[m01]:[s01] [z,6-6]", "en", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>15.58 Uhr GMT+2</code>
                              
                           </td>
                           <td>
                              <code>format-time($t,"[H01]:[m01] Uhr [z]", "de", (), ())</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>3.58pm on Tuesday, 31st December</code>
                              
                           </td>
                           <td>
                              <code>format-dateTime($dt, "[h].[m01][Pn] on [FNn], [D1o] [MNn]")</code>
                              
                           </td>
                        </tr>
                        <tr>
                           <td>
                              <code>12/31/2002 at 15:58:45</code>
                              
                           </td>
                           <td>
                              <code>format-dateTime($dt, "[M01]/[D01]/[Y0001] at [H01]:[m01]:[s01]")</code>
                              
                           </td>
                        </tr>
                     </tbody>
                  </table></div>
                  <p>The following examples use calendars other than the Gregorian calendar.</p>
                  <div class="overlarge"><table class="data">
                     <thead>
                        <tr>
                           <th>Description</th>
                           <th>Request</th>
                           <th>Result</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>Islamic</td>
                           <td>
                              <code>format-date($d, "[D&amp;#x0661;] [Mn] [Y&amp;#x0661;]", "ar", "AH", ())</code>
                              
                           </td>
                           <td>٢٦ ﺸﻭّﺍﻝ ١٤٢٣</td>
                        </tr>
                        <tr>
                           <td>Jewish (with Western numbering)</td>
                           <td>
                              <code>format-date($d, "[D] [Mn] [Y]", "he", "AM", ())</code>
                              
                           </td>
                           <td>‏26 טבת 5763</td>
                        </tr>
                        <tr>
                           <td>Jewish (with traditional numbering)</td>
                           <td>
                              <code>format-date($d, "[D&amp;#x05D0;t] [Mn] [Y&amp;#x05D0;t]", "he", "AM", ())</code>
                              
                           </td>
                           <td>כ״ו טבת תשס״ג</td>
                        </tr>
                        <tr>
                           <td>Julian (Old Style)</td>
                           <td>
                              <code>format-date($d, "[D] [MNn] [Y]", "en", "OS", ())</code>
                              
                           </td>
                           <td>18 December 2002</td>
                        </tr>
                        <tr>
                           <td>Thai</td>
                           <td>
                              <code>format-date($d, "[D&amp;#x0E51;] [Mn] [Y&amp;#x0E51;]", "th", "BE", ())</code>
                              
                           </td>
                           <td>๓๑ ธันวาคม 
                              ๒๕๔๕
                           </td>
                        </tr>
                     </tbody>
                  </table></div>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="parsing-dates-and-times"></a>9.9 Parsing dates and times
               </h3>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-ietf-date"><code>fn:parse-ietf-date</code></a></td>
                        <td>Parses a string containing the date and time in IETF format, returning the corresponding
                           <code>xs:dateTime</code> value.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>A function is provided to parse dates and times expressed using syntax that is commonly
                  encountered
                  in internet protocols.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-parse-ietf-date"></a>9.9.1 fn:parse-ietf-date
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Parses a string containing the date and time in IETF format, returning the corresponding
                           <code>xs:dateTime</code> value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:parse-ietf-date</code>(<code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTime?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function accepts a string matching the production <code>input</code> in the
                           following grammar:
                        </p>
                        <table class="scrap">
                           <tbody><tr>
                              <td>
                                 <code>input</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>S? (dayname ","? S)? ((datespec S time) | asctime) S?</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>dayname</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>"Mon" | "Tue" | "Wed" | "Thu" | "Fri" | "Sat" | "Sun" | "Monday | "Tuesday"
                                    | "Wednesday" | "Thursday" | "Friday" | "Saturday" | "Sunday"</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>datespec</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>daynum dsep monthname dsep year</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>asctime</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>monthname dsep daynum S time S year</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>dsep</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>S | (S? "-" S?)</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>daynum</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>digit digit?</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>year</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>digit digit (digit digit)?</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>digit</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>[0-9]</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>monthname</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>"Jan" | "Feb" | "Mar" | "Apr" | "May" | "Jun" | "Jul" | "Aug" | "Sep" |
                                    "Oct" | "Nov" | "Dec"</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>time</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>hours ":" minutes (":" seconds)? (S? timezone)?</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>hours</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <span><code>digit digit?</code></span>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>minutes</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>digit digit</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>seconds</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>digit digit ("." digit+)?</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>timezone</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>tzname | tzoffset (S? "(" S? tzname S? ")")?</code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>tzname</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>"UT" | "UTC" | "GMT" | "EST" | "EDT" | "CST" | "CDT" | "MST" | "MDT" | "PST"
                                    | "PDT" </code>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>tzoffset</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <span><code>("+"|"-") hours ":"? minutes?</code></span>
                                 
                              </td>
                           </tr>
                           <tr>
                              <td>
                                 <code>S</code>
                                 
                              </td>
                              <td><code>::=</code></td>
                              <td>
                                 <code>( x09 | x0A | x0D | x20 )+</code>
                                 
                              </td>
                           </tr>
                        </tbody></table>
                        <p>The input is case-insensitive: upper-case and lower-case distinctions in the above
                           grammar show the conventional usage, but otherwise have no significance.
                        </p>
                        <p>If the input is an empty sequence, the result is an empty sequence.</p>
                        <p>The <code>dayname</code>, if present, is ignored.
                        </p>
                        <p>The <code>daynum</code>, <code>monthname</code>, and <code>year</code> supply the day,
                           month, and year of the resulting <code>xs:dateTime</code> value. A two-digit year
                           <span class="verb">must</span> have 1900 added to it. A year such as 0070 is to be treated
                           as given; negative years are not permitted.
                        </p>
                        <p>The <code>hours</code>, <code>minutes</code>, and <code>seconds</code> (including
                           fractional seconds) values supply the corresponding components of the resulting
                           <code>xs:dateTime</code> value; if the <code>seconds</code> value 
                           <span>or the fractional seconds value</span> is absent then zero
                           is assumed.
                        </p>
                        <p>If both a <code>tzoffset</code> and a <code>tzname</code> are supplied then the
                           <code>tzname</code> is ignored.
                        </p>
                        <p>If a <code>tzoffset</code> is supplied then this defines the hours and minutes parts of the timezone offset:
                        </p>
                        <ul>
                           <li>
                              <p>If it contains a colon, this separates the hours part from the minutes part.</p>
                           </li>
                           <li>
                              <p>Otherwise, the grammar allows a sequence of from one to four digits. These are interpreted
                                 as <code>H</code>, <code>HH</code>, <code>HMM</code>, or <code>HHMM</code> respectively, where <code>H</code>
                                 or <code>HH</code> is the hours part, and <code>MM</code> (if present) is the minutes part.
                              </p>
                           </li>
                           <li>If the minutes part is absent it defaults to <code>00</code>.
                           </li>
                        </ul>
                        <p>If a <code>tzname</code> is supplied with no <code>tzoffset</code> then it is translated
                           to a timezone offset as follows:
                        </p>
                        <div class="overlarge"><table class="data">
                           <thead>
                              <tr>
                                 <th>tzname</th>
                                 <th>Offset</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td>UT, UTC, GMT</td>
                                 <td>00:00</td>
                              </tr>
                              <tr>
                                 <td>EST</td>
                                 <td>-05:00</td>
                              </tr>
                              <tr>
                                 <td>EDT</td>
                                 <td>-04:00</td>
                              </tr>
                              <tr>
                                 <td>CST</td>
                                 <td>-06:00</td>
                              </tr>
                              <tr>
                                 <td>CDT</td>
                                 <td>-05:00</td>
                              </tr>
                              <tr>
                                 <td>MST</td>
                                 <td>-07:00</td>
                              </tr>
                              <tr>
                                 <td>MDT</td>
                                 <td>-06:00</td>
                              </tr>
                              <tr>
                                 <td>PST</td>
                                 <td>-08:00</td>
                              </tr>
                              <tr>
                                 <td>PDT</td>
                                 <td>-07:00</td>
                              </tr>
                           </tbody>
                        </table></div>
                        <p>If neither a <code>tzoffset</code> nor <code>tzname</code> is supplied, a timezone
                           offset of <code>00:00</code> is assumed.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0010" title="err:FORG0010">err:FORG0010</a>] if the input does
                           not match the grammar, or if the resulting date/time value is invalid (for example,
                           31
                           February).
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The <code>parse-ietf-date</code> function attempts to interpret its input as a date
                           in any of the three formats specified by HTTP <a href="https://www.w3.org/TR/xpath-functions-31/#rfc2616">[RFC 2616]</a>.
                        </p>
                        <p class="note">These formats are used widely on the Internet to represent timestamps, and were
                           specified in:
                        </p>
                        <div class="note">
                           <ul>
                              <li><a href="https://www.w3.org/TR/xpath-functions-31/#rfc822">[RFC 822]</a> (electronic mail), extended in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc1123">[RFC 1123]</a> to allow four-digit years;
                              </li>
                              <li><a href="https://www.w3.org/TR/xpath-functions-31/#rfc850">[RFC 850]</a> (Usenet Messages), obsoleted by <a href="https://www.w3.org/TR/xpath-functions-31/#rfc1036">[RFC 1036]</a>;
                              </li>
                              <li>POSIX <code>asctime()</code> format
                              </li>
                           </ul>
                        </div>
                        <p class="note"><a href="https://www.w3.org/TR/xpath-functions-31/#rfc2616">[RFC 2616]</a> (HTTP) officially uses a subset of those three formats restricted to GMT.
                        </p>
                        <p class="note">The grammar for this function is slightly more liberal than the RFCs (reflecting the
                           internet tradition of being liberal in what is accepted).
                           For example the function:
                        </p>
                        <div class="note">
                           <ol class="enumar">
                              <li>
                                 <p>Accepts a single-digit value where appropriate in place of a two-digit value with
                                    a leading zero (so
                                    "Wed 1 Jun" is acceptable in place of "Wed 01 Jun", <span>and the timezone offset "-5:00" is equivalent
                                       to "-05:00")</span></p>
                              </li>
                              <li>
                                 <p>Accepts one or more whitespace characters (x20, x09, x0A, x0D) wherever a single
                                    space is required, and allows whitespace to be omitted where it is not required
                                    for parsing
                                 </p>
                              </li>
                              <li>
                                 <p>Accepts and ignores whitespace characters (x20, x09, x0A, x0D) at the start or end
                                    of the string.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <p class="note">In new protocols IETF recommends the format of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc3339">[RFC 3339]</a> which is based on a profile of
                           ISO 8601 similar to that already used in XPath and XSD, but the "approximate" <a href="https://www.w3.org/TR/xpath-functions-31/#rfc822">[RFC 822]</a>
                           format described here is very widely used.
                        </p>
                        <p class="note">An <a href="https://www.w3.org/TR/xpath-functions-31/#rfc1123">[RFC 1123]</a> date can be generated approximately using <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a> with a picture
                           string of <code>"[FNn3], [D01] [MNn3] [Y04] [H01]:[m01]:[s01] [Z0000]"</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:parse-ietf-date("Wed, 06 Jun 1994 07:29:35 GMT")</code> returns <code>xs:dateTime("1994-06-06T07:29:35Z")</code>.
                           </p>
                           <p>The expression <code>fn:parse-ietf-date("Wed, 6 Jun 94 07:29:35 GMT")</code> returns <code>xs:dateTime("1994-06-06T07:29:35Z")</code>.
                           </p>
                           <p>The expression <code>fn:parse-ietf-date("Wed Jun 06 11:54:45 EST 2013")</code> returns <code>xs:dateTime("2013-06-06T11:54:45-05:00")</code>.
                           </p>
                           <p>The expression <code>fn:parse-ietf-date("Sunday, 06-Nov-94 08:49:37 GMT")</code> returns <code>xs:dateTime("1994-11-06T08:49:37Z")</code>.
                           </p>
                           <p>The expression <code>fn:parse-ietf-date("Wed, 6 Jun 94 07:29:35 +0500")</code> returns <code>xs:dateTime("1994-06-06T07:29:35+05:00")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="QName-funcs"></a>10 Functions related to QNames
            </h2>
            <div class="div2">
               
               <h3><a id="QName-constructors"></a>10.1 Functions to create a QName
               </h3>
               <p>In addition to the <code>xs:QName</code> constructor function, QName values can
                  be constructed by combining a namespace URI, prefix, and local name, or by resolving
                  a lexical QName against the in-scope namespaces of an element node. This section
                  defines these functions. 
                  					Leading and trailing whitespace, if present, is stripped from
                  string arguments before the result is constructed.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-QName"><code>fn:resolve-QName</code></a></td>
                        <td>Returns an <code>xs:QName</code> value (that is, an expanded-QName) by taking an
                           <code>xs:string</code> that has the lexical form of an <code>xs:QName</code> (a
                           string in the form "prefix:local-name" or "local-name") and resolving it using the
                           in-scope namespaces for a given element.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-QName"><code>fn:QName</code></a></td>
                        <td>Returns an <code>xs:QName</code> value formed using a supplied namespace URI and lexical QName.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-resolve-QName"></a>10.1.1 fn:resolve-QName
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an <code>xs:QName</code> value (that is, an expanded-QName) by taking an
                           <code>xs:string</code> that has the lexical form of an <code>xs:QName</code> (a
                           string in the form "prefix:local-name" or "local-name") and resolving it using the
                           in-scope namespaces for a given element.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:resolve-QName</code>(<code class="arg">$qname</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$element</code><code class="as">&nbsp;as&nbsp;</code><code class="type">element()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:QName?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$qname</code> is the empty sequence, returns the empty sequence.
                        </p>
                        <p>More specifically, the function searches the namespace bindings of <code>$element</code>
                           for a binding whose name matches the prefix of <code>$qname</code>, or the zero-length
                           string if it has no prefix, and returns an expanded-QName whose local name is taken
                           from the supplied <code>$qname</code>, and whose namespace URI is taken from the string
                           value of the namespace binding.
                        </p>
                        <p>If the <code>$qname</code> has no prefix, and there is no namespace binding for
                           <code>$element</code> corresponding to the default (unnamed) namespace, then the
                           resulting expanded-QName has no namespace part.
                        </p>
                        <p>The prefix (or absence of a prefix) in the supplied <code>$qname</code> argument is
                           retained in the returned expanded-QName, as described in <a href="https://www.w3.org/TR/xpath-datamodel-31/#terminology">Section 
                              
                              2.1 Terminology
                              </a><sup><small>DM31</small></sup>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>] if <code>$qname</code> does
                           not have the correct lexical form for an instance of <code>xs:QName</code>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFONS0004" title="err:FONS0004">err:FONS0004</a>] if <code>$qname</code> has
                           a prefix and there is no namespace binding for <code>$element</code> that matches this
                           prefix.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Sometimes the requirement is to construct an <code>xs:QName</code> without using the
                           default namespace. This can be achieved by writing:
                        </p>
                        <div class="exampleInner"><pre class="small"> if (contains($qname, ":")) then fn:resolve-QName($qname, $element) else
            fn:QName("", $qname)</pre></div>
                        <p class="note">If the requirement is to construct an <code>xs:QName</code> using the namespaces in the
                           static context, then the <code>xs:QName</code> constructor should be used.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Assume that the element bound to <code>$element</code> has a single namespace binding
                              bound to the prefix <code>eg</code>.
                           </p>
                           <p>
                              <code>fn:resolve-QName("hello", $element)</code> returns a QName with local name
                              "hello" that is in no namespace.
                           </p>
                           <p>
                              <code>fn:resolve-QName("eg:myFunc", $element)</code> returns an <code>xs:QName</code>
                              whose namespace URI is specified by the namespace binding corresponding to the prefix
                              "eg" and whose local name is "myFunc".
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-QName"></a>10.1.2 fn:QName
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an <code>xs:QName</code> value formed using a supplied namespace URI and lexical QName.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:QName</code>(<code class="arg">$paramURI</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$paramQName</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:QName</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The namespace URI in the returned QName is taken from <code>$paramURI</code>. If
                           <code>$paramURI</code> is the zero-length string or the empty sequence, it represents
                           "no namespace".
                        </p>
                        <p>The prefix (or absence of a prefix) in <code>$paramQName</code> is retained in the
                           returned <code>xs:QName</code> value.
                        </p>
                        <p>The local name in the result is taken from the local part of
                           <code>$paramQName</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>] if <code>$paramQName</code>
                           does not have the correct lexical form for an instance of <code>xs:QName</code>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>] if <code>$paramURI</code>
                           is the zero-length string or the empty sequence, and the value of
                           <code>$paramQName</code> contains a colon (<code>:</code>).
                        </p>
                        <p>A dynamic error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>] if
                           <code>$paramURI</code> is not a valid URI (XML Namespaces 1.0) or IRI (XML Namespaces
                           1.1). 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>
                              <code>fn:QName("http://www.example.com/example", "person")</code> returns an
                              <code>xs:QName</code> with namespace URI = "http://www.example.com/example", local
                              name = "person" and prefix = "".
                           </p>
                           <p>
                              <code>fn:QName("http://www.example.com/example", "ht:person")</code> returns an
                              <code>xs:QName</code> with namespace URI = "http://www.example.com/example", local
                              name = "person" and prefix = "ht".
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="QName-functions"></a>10.2 Functions and operators related to QNames
               </h3>
               <p>This section specifies functions on QNames as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-QName-equal"><code>op:QName-equal</code></a></td>
                        <td>Returns <code>true</code> if two supplied QNames have the same namespace URI and the
                           same local part.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-prefix-from-QName"><code>fn:prefix-from-QName</code></a></td>
                        <td>Returns the prefix component of the supplied QName.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-local-name-from-QName"><code>fn:local-name-from-QName</code></a></td>
                        <td>Returns the local part of the supplied QName.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri-from-QName"><code>fn:namespace-uri-from-QName</code></a></td>
                        <td>Returns the namespace URI part of the supplied QName.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri-for-prefix"><code>fn:namespace-uri-for-prefix</code></a></td>
                        <td>Returns the namespace URI of one of the in-scope namespaces for <code>$element</code>,
                           identified by its namespace prefix.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-in-scope-prefixes"><code>fn:in-scope-prefixes</code></a></td>
                        <td>Returns the prefixes of the in-scope namespaces for an element node.</td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-QName-equal"></a>10.2.1 op:QName-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>true</code> if two supplied QNames have the same namespace URI and the
                           same local part.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "eq" and "ne" operators when applied to two values of type <code>xs:QName</code>. 
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:QName-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if the namespace URIs of <code>$arg1</code> and
                           <code>$arg2</code> are equal and the local names of <code>$arg1</code> and
                           <code>$arg2</code> are equal.
                        </p>
                        <p>Otherwise, the function returns <code>false</code>.
                        </p>
                        <p>The namespace URI parts are considered equal if they are both <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>, or if they are both present and equal under the rules
                           of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoint-equal"><code>fn:codepoint-equal</code></a> function.
                        </p>
                        <p>The local parts are also compared under the rules of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoint-equal"><code>fn:codepoint-equal</code></a>
                           function.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The prefix parts of <code>$arg1</code> and <code>$arg2</code>, if any, are ignored.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-prefix-from-QName"></a>10.2.2 fn:prefix-from-QName
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the prefix component of the supplied QName.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:prefix-from-QName</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:NCName?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence the function returns the empty sequence.
                        </p>
                        <p>If <code>$arg</code> has no prefix component the function returns the empty
                           sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:NCName</code> representing the prefix
                           component of <code>$arg</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-local-name-from-QName"></a>10.2.3 fn:local-name-from-QName
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the local part of the supplied QName.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:local-name-from-QName</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:NCName?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:NCName</code> representing the local part of
                           <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:local-name-from-QName(fn:QName("http://www.example.com/example",
                                 "person"))</code> returns <code>"person"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-namespace-uri-from-QName"></a>10.2.4 fn:namespace-uri-from-QName
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the namespace URI part of the supplied QName.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:namespace-uri-from-QName</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence the function returns the empty sequence.
                        </p>
                        <p>Otherwise, the function returns an <code>xs:anyURI</code> representing the namespace URI
                           part of <code>$arg</code>.
                        </p>
                        <p>If <code>$arg</code> is in no namespace, the function returns the zero-length
                           <code>xs:anyURI</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:namespace-uri-from-QName(fn:QName("http://www.example.com/example",
                                 "person"))</code> returns <code>xs:anyURI("http://www.example.com/example")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-namespace-uri-for-prefix"></a>10.2.5 fn:namespace-uri-for-prefix
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the namespace URI of one of the in-scope namespaces for <code>$element</code>,
                           identified by its namespace prefix.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:namespace-uri-for-prefix</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$prefix</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$element</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">element()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$element</code> has an in-scope namespace whose namespace prefix is equal to
                           <code>$prefix</code>, the function returns the namespace URI of that namespace.
                        </p>
                        <p>If <code>$element</code> has no in-scope namespace whose namespace prefix is equal to
                           <code>$prefix</code>, the function returns the empty sequence.
                        </p>
                        <p>If <code>$prefix</code> is the zero-length string or the empty sequence, then if
                           <code>$element</code> has a default namespace (that is, a namespace node with no
                           name), the function returns the namespace URI of the default namespace. If
                           <code>$element</code> has no default namespace, the function returns the empty
                           sequence.
                        </p>
                        <p>Prefixes are equal only if their Unicode codepoints match exactly.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $e := 
&lt;z:a xmlns="http://example.org/one" xmlns:z="http://example.org/two"&gt;
  &lt;b xmlns=""/&gt;
&lt;/z:a&gt;</pre></div>
                           <p>The expression <code>fn:namespace-uri-for-prefix("z", $e)</code> returns <code>"http://example.org/two"</code>.
                           </p>
                           <p>The expression <code>fn:namespace-uri-for-prefix("", $e)</code> returns <code>"http://example.org/one"</code>.
                           </p>
                           <p>The expression <code>fn:namespace-uri-for-prefix((), $e)</code> returns <code>"http://example.org/one"</code>.
                           </p>
                           <p>The expression <code>fn:namespace-uri-for-prefix("xml", $e)</code> returns <code>"http://www.w3.org/XML/1998/namespace"</code>.
                           </p>
                           <p>The expression <code>fn:namespace-uri-for-prefix("xml", $e)</code> returns <code>"http://www.w3.org/XML/1998/namespace"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-in-scope-prefixes"></a>10.2.6 fn:in-scope-prefixes
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the prefixes of the in-scope namespaces for an element node.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:in-scope-prefixes</code>(<code class="arg">$element</code><code class="as">&nbsp;as&nbsp;</code><code class="type">element()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic with respect to ordering" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic-wrt-ordering"><span class="arrow">·</span>nondeterministic-wrt-ordering<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence of strings representing the prefixes of the in-scope
                           namespaces for <code>$element</code>.
                        </p>
                        <p>For namespace bindings that have a prefix, the function returns the prefix as an
                           <code>xs:NCName</code>. For the default namespace, which has no prefix, it returns
                           the zero-length string. 
                        </p>
                        <p>The result sequence contains no duplicates.</p>
                        <p>The ordering of the result sequence is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The XML namespace is in scope for every element, so the result will always include
                           the string "xml".
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="binary-functions"></a>11 Operators on base64Binary and hexBinary
            </h2>
            <div class="div2">
               
               <h3><a id="binary-value-comparisons"></a>11.1 Comparisons of base64Binary and hexBinary values
               </h3>
               <p>The following comparison operators on <code>xs:base64Binary</code> and
                  <code>xs:hexBinary</code> values are defined. Comparisons take two operands of
                  the same type; that is, both operands must be <code>xs:base64Binary</code> or
                  both operands may be <code>xs:hexBinary</code>. Each returns a boolean value.
               </p>
               <p>A value of type <code>xs:hexBinary</code> can be compared with a value of type
                  <code>xs:base64Binary</code> by casting one value to the other type. See
                  <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-binary"><b>19.1.6 Casting to xs:base64Binary and xs:hexBinary</b></a>.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-hexBinary-equal"><code>op:hexBinary-equal</code></a></td>
                        <td>Returns true if two <code>xs:hexBinary</code> values contain the same octet
                           sequence.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-hexBinary-less-than"><code>op:hexBinary-less-than</code></a></td>
                        <td>Returns true if the first argument is less than the second.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-hexBinary-greater-than"><code>op:hexBinary-greater-than</code></a></td>
                        <td>Returns true if the first argument is greater than the second.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-base64Binary-equal"><code>op:base64Binary-equal</code></a></td>
                        <td>Returns true if two <code>xs:base64Binary</code> values contain the same octet
                           sequence.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-base64Binary-less-than"><code>op:base64Binary-less-than</code></a></td>
                        <td>Returns true if the first argument is less than the second.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-base64Binary-greater-than"><code>op:base64Binary-greater-than</code></a></td>
                        <td>Returns true if the first argument is greater than the second.</td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-hexBinary-equal"></a>11.1.1 op:hexBinary-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if two <code>xs:hexBinary</code> values contain the same octet
                           sequence.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "eq" and "ne" operators when applied to two <code>xs:hexBinary</code>
                           values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:hexBinary-equal</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:hexBinary</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$value2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:hexBinary</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if <code>$value1</code> and <code>$value2</code>
                           are of the same length, measured in binary octets, and contain the same octets in
                           the
                           same order. Otherwise, it returns <code>false</code>. 
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-hexBinary-less-than"></a>11.1.2 op:hexBinary-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the first argument is less than the second.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "lt" operator when applied to two <code>xs:hexBinary</code> values. Also used in the
                           definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:hexBinary-less-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:hexBinary</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:hexBinary</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if any of the following conditions is true:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p><code>$arg1</code> is zero-length (contains no octets) and <code>$arg2</code> is
                                 not zero-length.
                              </p>
                           </li>
                           <li>
                              <p>Neither argument is zero-length, and the first octet of <code>$arg1</code> is less
                                 than the first octet of <code>$arg2</code>, treating the value of the octet as an
                                 unsigned integer in the range 0 to 255.
                              </p>
                           </li>
                           <li>
                              <p>Neither argument is zero-length, the first octet of <code>$arg1</code> is equal to
                                 the first octet of <code>$arg2</code>, and the <code>xs:hexBinary</code> value
                                 formed by taking all octets of <code>arg1</code> after the first is less than the
                                 <code>xs:hexBinary</code> value formed by taking all octets of
                                 <code>arg2</code> after the first.
                              </p>
                           </li>
                        </ol>
                        <p>Otherwise, the function returns <code>false</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-hexBinary-greater-than"></a>11.1.3 op:hexBinary-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the first argument is greater than the second.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics of
                           the "gt" operator when applied to two <code>xs:hexBinary</code> values. Also used in the
                           definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:hexBinary-greater-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:hexBinary</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:hexBinary</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:hexBinary-greater-than($A, $B)</code> is defined to return
                           the same result as <code>op:hexBinary-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-base64Binary-equal"></a>11.1.4 op:base64Binary-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if two <code>xs:base64Binary</code> values contain the same octet
                           sequence.
                        </p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "eq" and "ne" operators when applied to two <code>xs:base64Binary</code>
                           values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:base64Binary-equal</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$value1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:base64Binary</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$value2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:base64Binary</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if <code>$value1</code> and <code>$value2</code>
                           are of the same length, measured in binary octets, and contain the same octets in
                           the
                           same order. Otherwise, it returns <code>false</code>. 
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-base64Binary-less-than"></a>11.1.5 op:base64Binary-less-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the first argument is less than the second.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "lt" operator when applied to two <code>xs:base64Binary</code> values. Also used in
                           the definition of the "ge" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:base64Binary-less-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:base64Binary</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:base64Binary</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns <code>true</code> if any of the following conditions is true:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p><code>$arg1</code> is zero-length (contains no octets) and <code>$arg2</code> is
                                 not zero-length.
                              </p>
                           </li>
                           <li>
                              <p>Neither argument is zero-length, and the first octet of <code>$arg1</code> is less
                                 than the first octet of <code>$arg2</code>, treating the value of the octet as an
                                 unsigned integer in the range 0 to 255.
                              </p>
                           </li>
                           <li>
                              <p>Neither argument is zero-length, the first octet of <code>$arg1</code> is equal to
                                 the first octet of <code>$arg2</code>, and the <code>xs:base64Binary</code> value
                                 formed by taking all octets of <code>arg1</code> after the first is less than the
                                 <code>xs:base64Binary</code> value formed by taking all octets of
                                 <code>arg2</code> after the first.
                              </p>
                           </li>
                        </ol>
                        <p>Otherwise, the function returns <code>false</code>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-base64Binary-greater-than"></a>11.1.6 op:base64Binary-greater-than
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the first argument is greater than the second.</p>
                     </dd>
                     <dt class="label">Operator Mapping</dt>
                     <dd>
                        <p>Defines the semantics
                           of the "gt" operator when applied to two <code>xs:base64Binary</code> values. Also used in
                           the definition of the "le" operator.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">op:base64Binary-greater-than</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:base64Binary</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:base64Binary</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function call <code>op:base64Binary-greater-than($A, $B)</code> is defined to return
                           the same result as <code>op:base64Binary-less-than($B, $A)</code></p>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="NOTATION-functions"></a>12 Operators on NOTATION
            </h2>
            <p>This section specifies operators that take <code>xs:NOTATION</code> values as arguments.
            </p>
            <div class="overlarge"><table class="index">
               <thead>
                  <tr>
                     <th>Function</th>
                     <th>Meaning</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-NOTATION-equal"><code>op:NOTATION-equal</code></a></td>
                     <td>Returns <code>true</code> if the two <code>xs:NOTATION</code> values have the same
                        namespace URI and the same local part.
                     </td>
                  </tr>
               </tbody>
            </table></div>
            <div class="div2">
               
               <h3><a id="func-NOTATION-equal"></a>12.1 op:NOTATION-equal
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns <code>true</code> if the two <code>xs:NOTATION</code> values have the same
                        namespace URI and the same local part.
                     </p>
                  </dd>
                  <dt class="label">Operator Mapping</dt>
                  <dd>
                     <p>Defines the
                        semantics of the "eq" and "ne" operators when applied to two values of type
                        <code>xs:NOTATION</code>. 
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">op:NOTATION-equal</code>(<code class="arg">$arg1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:NOTATION</code>, <code class="arg">$arg2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:NOTATION</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function returns <code>true</code> if the namespace URIs of <code>$arg1</code> and
                        <code>$arg2</code> are equal and the local names of <code>$arg1</code> and
                        <code>$arg2</code> are equal.
                     </p>
                     <p>Otherwise, the function returns <code>false</code>.
                     </p>
                     <p>The namespace URI parts are considered equal if they are both <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>, or if they are both present and equal under the rules
                        of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoint-equal"><code>fn:codepoint-equal</code></a> function.
                     </p>
                     <p>The local parts are also compared under the rules of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoint-equal"><code>fn:codepoint-equal</code></a>
                        function.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The prefix parts of <code>$arg1</code> and <code>$arg2</code>, if any, are ignored.
                     </p>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="node-functions"></a>13 Functions and operators on nodes
            </h2>
            <p>This section specifies functions and operators on nodes. Nodes are formally defined
               in <a href="https://www.w3.org/TR/xpath-datamodel-31/#Node">Section 
                  
                  6 Nodes
                  </a><sup><small>DM31</small></sup>.
            </p>
            <div class="overlarge"><table class="index">
               <thead>
                  <tr>
                     <th>Function</th>
                     <th>Meaning</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-name"><code>fn:name</code></a></td>
                     <td>Returns the name of a node, as an <code>xs:string</code> that is either the zero-length
                        string, or has the lexical form of an <code>xs:QName</code>. 
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-local-name"><code>fn:local-name</code></a></td>
                     <td>Returns the local part of the name of <code>$arg</code> as an <code>xs:string</code>
                        that is either the zero-length string, or has the lexical form of an
                        <code>xs:NCName</code>.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-namespace-uri"><code>fn:namespace-uri</code></a></td>
                     <td>Returns the namespace URI part of the name of <code>$arg</code>, as an
                        <code>xs:anyURI</code> value.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-lang"><code>fn:lang</code></a></td>
                     <td>This function tests whether the language of <code>$node</code>, or the context item if
                        the second argument is omitted, as specified by <code>xml:lang</code> attributes is the
                        same as, or is a sublanguage of, the language specified by <code>$testlang</code>.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-root"><code>fn:root</code></a></td>
                     <td>Returns the root of the tree to which <code>$arg</code> belongs. This will usually, but
                        not necessarily, be a document node.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-path"><code>fn:path</code></a></td>
                     <td>Returns a path expression that can be used to select the supplied node relative to
                        the
                        root of its containing document.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-has-children"><code>fn:has-children</code></a></td>
                     <td>Returns true if the supplied node has one or more child nodes (of any kind).</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-innermost"><code>fn:innermost</code></a></td>
                     <td>Returns every node within the input sequence that is not an ancestor of another member
                        of the input sequence; the nodes are returned in document order with duplicates
                        eliminated.
                     </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-outermost"><code>fn:outermost</code></a></td>
                     <td>Returns every node within the input sequence that has no ancestor that is itself a
                        member of the input sequence; the nodes are returned in document order with duplicates
                        eliminated.
                     </td>
                  </tr>
               </tbody>
            </table></div>
            <p>For the illustrative examples below assume an XQuery or transformation operating on
               a
               <code>PurchaseOrder</code> document containing a number of <code>line-item</code> elements. Each line-item has
               child elements called <code>description</code>, <code>price</code>, <code>quantity</code>, etc. whose content is different
               for each <code>line-item</code>. Quantity has simple content of type <code>xs:decimal</code>.
               Further assume that variables <code>$item1</code>, <code>$item2</code>, etc. are
               each bound to single line-item element nodes in the document in sequence and that
               the value of the quantity child of the first line-item is <code>5.0</code>.
            </p>
            <div class="exampleInner"><pre class="small">let $po :=
&lt;PurchaseOrder&gt;
  &lt;line-item&gt;
    &lt;description&gt;Large widget&lt;/description&gt;
    &lt;price&gt;8.95&lt;/price&gt;
    &lt;quantity&gt;5.0&lt;/quantity&gt;
  &lt;/line-item&gt;
  &lt;line-item&gt;
    &lt;description&gt;Small widget&lt;/description&gt;
    &lt;price&gt;3.99&lt;/price&gt;
    &lt;quantity&gt;2.0&lt;/quantity&gt;
  &lt;/line-item&gt;
  &lt;line-item&gt;
    &lt;description&gt;Tiny widget&lt;/description&gt;
    &lt;price&gt;1.49&lt;/price&gt;
    &lt;quantity&gt;805&lt;/quantity&gt;
  &lt;/line-item&gt;
&lt;/PurchaseOrder&gt;</pre></div>
            <div class="exampleInner"><pre>let $item1 := $po/line-item[1]</pre></div>
            <div class="exampleInner"><pre>let $item2 := $po/line-item[2]</pre></div>
            <div class="exampleInner"><pre>let $item3 := $po/line-item[3]</pre></div>
            <div class="div2">
               
               <h3><a id="func-name"></a>13.1 fn:name
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the name of a node, as an <code>xs:string</code> that is either the zero-length
                        string, or has the lexical form of an <code>xs:QName</code>. 
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:name</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     <div class="proto"><code class="function">fn:name</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>If the argument is supplied and is the empty sequence, the function returns the
                        zero-length string.
                     </p>
                     <p>If the node identified by <code>$arg</code> has no name (that is, if it is a document
                        node, a comment, a text node, or a namespace node having no name), the function returns
                        the zero-length string.
                     </p>
                     <p>Otherwise, the function returns the value of the expression
                        <code>fn:string(fn:node-name($arg))</code>.
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Because the result depends on the choice of namespace prefixes in the source document,
                        it is not good practice to use the result of this function for anything other than
                        display
                        purposes. For example, the test <code>name(.) = 'my:profile'</code> will fail if the source
                        document uses an unexpected namespace prefix. Such a test (assuming it relates to
                        an element node) 
                        is better written as <code>boolean(self::my:profile)</code>.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-local-name"></a>13.2 fn:local-name
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the local part of the name of <code>$arg</code> as an <code>xs:string</code>
                        that is either the zero-length string, or has the lexical form of an
                        <code>xs:NCName</code>.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:local-name</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     <div class="proto"><code class="function">fn:local-name</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>If the argument is supplied and is the empty sequence, the function returns the
                        zero-length string.
                     </p>
                     <p>If the node identified by <code>$arg</code> has no name (that is, if it is a document
                        node, a comment, a text node, or a namespace node having no name), the function returns
                        the zero-length string.
                     </p>
                     <p>Otherwise, the function returns the local part of the expanded-QName of the node
                        identified by <code>$arg</code>, as determined by the <code>dm:node-name</code> accessor
                        defined in <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-node-name">Section 
                           
                           5.10 node-name Accessor
                           </a><sup><small>DM31</small></sup>). This will be an
                        <code>xs:string</code> whose lexical form is an <code>xs:NCName</code>.
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-namespace-uri"></a>13.3 fn:namespace-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the namespace URI part of the name of <code>$arg</code>, as an
                        <code>xs:anyURI</code> value.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:namespace-uri</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI</code></div>
                     <div class="proto"><code class="function">fn:namespace-uri</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context node (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>If the node identified by <code>$arg</code> is neither an element nor an attribute node,
                        or if it is an element or attribute node whose expanded-QName (as determined by the
                        <code>dm:node-name</code> accessor in the <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-node-name">Section 
                           
                           5.10 node-name Accessor
                           </a><sup><small>DM31</small></sup>)
                        is in no namespace, then the function returns the zero-length <code>xs:anyURI</code>
                        value.
                     </p>
                     <p>Otherwise, the result will be the namespace URI part of the expanded-QName of the
                        node
                        identified by <code>$arg</code>, as determined by the <code>dm:node-name</code> accessor
                        defined in <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-node-name">Section 
                           
                           5.10 node-name Accessor
                           </a><sup><small>DM31</small></sup>), returned as an
                        <code>xs:anyURI</code> value.
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-lang"></a>13.4 fn:lang
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>This function tests whether the language of <code>$node</code>, or the context item if
                        the second argument is omitted, as specified by <code>xml:lang</code> attributes is the
                        same as, or is a sublanguage of, the language specified by <code>$testlang</code>.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:lang</code>(<code class="arg">$testlang</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     <div class="proto"><code class="function">fn:lang</code>(<code class="arg">$testlang</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The behavior of the function if the second argument is omitted is exactly the same
                        as if
                        the context item (<code>.</code>) had been passed as the second argument.
                     </p>
                     <p>The language of the argument <code>$node</code>, or the context item if the second
                        argument is omitted, is determined by the value of the <code>xml:lang</code> attribute
                        on the node, or, if the node has no such attribute, by the value of the
                        <code>xml:lang</code> attribute on the nearest ancestor of the node that has an
                        <code>xml:lang</code> attribute. If there is no such ancestor, then the function
                        returns <code>false</code>. 
                     </p>
                     <p>If <code>$testlang</code> is the empty sequence it is interpreted as the zero-length
                        string.
                     </p>
                     <p>The relevant <code>xml:lang</code> attribute is determined by the value of the XPath
                        expression:
                     </p>
                     <div class="exampleInner"><pre>(ancestor-or-self::*/@xml:lang)[last()]</pre></div>
                     <p>If this expression returns an empty sequence, the function returns <code>false</code>. 
                     </p>
                     <p>Otherwise, the function returns <code>true</code> if and only if, based on a caseless
                        default match as specified in section 3.13 of <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, either:
                     </p>
                     <ol class="enumar">
                        <li>
                           <p>
                              <code>$testlang</code> is equal to the string-value of the relevant
                              <code>xml:lang</code> attribute, or
                           </p>
                        </li>
                        <li>
                           <p>
                              <code>$testlang</code> is equal to some substring of the string-value of the
                              relevant <code>xml:lang</code> attribute that starts at the start of the
                              string-value and ends immediately before a hyphen, "-" (the character "-" is
                              HYPHEN-MINUS, #x002D).
                           </p>
                        </li>
                     </ol>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>fn:lang("en")</code> would return <code>true</code> if the
                           context node were any of the following four elements:
                        </p>
                        <ul>
                           <li>
                              <p>
                                 <code>&lt;para xml:lang="en"/&gt;</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>
                                 <code>&lt;div xml:lang="en"&gt;&lt;para&gt;And now, and
                                    forever!&lt;/para&gt;&lt;/div&gt;</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>
                                 <code>&lt;para xml:lang="EN"/&gt;</code>
                                 
                              </p>
                           </li>
                           <li>
                              <p>
                                 <code>&lt;para xml:lang="en-us"/&gt;</code>
                                 
                              </p>
                           </li>
                        </ul>
                        <p>The expression <code>fn:lang("fr")</code> would return <code>false</code> if the
                           context node were <code>&lt;para xml:lang="EN"/&gt;</code>
                           
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-root"></a>13.5 fn:root
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the root of the tree to which <code>$arg</code> belongs. This will usually, but
                        not necessarily, be a document node.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:root</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()</code></div>
                     <div class="proto"><code class="function">fn:root</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the function is called without an argument, the context item (<code>.</code>) is used
                        as the default argument. The behavior of the function if the argument is omitted is
                        exactly the same as if the context item had been passed as the argument.
                     </p>
                     <p>The function returns the value of the expression
                        <code>($arg/ancestor-or-self::node())[1]</code>.
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>These examples use some variables which could be defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a>
                           as:
                        </p>
                        <div class="exampleInner"><pre class="small">let $i := &lt;tool&gt;wrench&lt;/tool&gt;
let $o := &lt;order&gt; {$i} &lt;quantity&gt;5&lt;/quantity&gt; &lt;/order&gt;
let $odoc := document {$o}
let $newi := $o/tool</pre></div>
                        <p>Or they could be defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a> as:
                        </p>
                        <div class="exampleInner"><pre class="small">&lt;xsl:variable name="i" as="element()"&gt;
  &lt;tool&gt;wrench&lt;/tool&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="o" as="element()"&gt;
  &lt;order&gt;
    &lt;xsl:copy-of select="$i"/&gt;
    &lt;quantity&gt;5&lt;/quantity&gt;
  &lt;/order&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="odoc"&gt;
  &lt;xsl:copy-of select="$o"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="newi" select="$o/tool"/&gt;</pre></div>
                        <p><code>fn:root($i)</code> returns the element node <code>$i</code>
                           
                        </p>
                        <p><code>fn:root($o/quantity)</code> returns the element node <code>$o</code>
                           
                        </p>
                        <p><code>fn:root($odoc//quantity)</code> returns the document node <code>$odoc</code>
                           
                        </p>
                        <p><code>fn:root($newi)</code> returns the element node <code>$o</code>
                           
                        </p>
                        <p>The final three examples could be made type-safe by wrapping their operands with
                           <code>fn:exactly-one()</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-path"></a>13.6 fn:path
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns a path expression that can be used to select the supplied node relative to
                        the
                        root of its containing document.
                     </p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:path</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                     <div class="proto"><code class="function">fn:path</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The behavior of the function if the argument is omitted is exactly the same as if
                        the
                        context item (<code>.</code>) had been passed as the argument.
                     </p>
                     <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                     </p>
                     <p>If <code>$arg</code> is a document node, the function returns the string
                        <code>"/"</code>.
                     </p>
                     <p>Otherwise, the function returns a string that consists of a sequence of steps, one
                        for each ancestor-or-self of <code>$arg</code> other than the root node. This string is
                        prefixed by <code>"Q{http://www.w3.org/2005/xpath-functions}root()"</code> if the root
                        node is not a document node. Each step consists of the character <code>"/"</code>
                        followed by a string whose form depends on the kind of node selected by that step,
                        as
                        follows:
                     </p>
                     <ol class="enumar">
                        <li>
                           <p>For an element node,
                              <code>Q{<em>uri</em>}<em>local</em>[<em>position</em>]</code>,
                              where <code><em>uri</em></code> is the namespace URI of the node name or the
                              empty string if the node is in no namespace, <code><em>local</em></code> is
                              the local part of the node name, and <code><em>position</em></code> is an
                              integer representing the position of the selected node among its like-named
                              siblings.
                           </p>
                        </li>
                        <li>
                           <p>For an attribute node:</p>
                           <ol class="enumla">
                              <li>
                                 <p>if the node is in no namespace, <code>@<em>local</em></code>, where
                                    <code><em>local</em></code> is the local part of the node name
                                 </p>
                              </li>
                              <li>
                                 <p>otherwise, <code>@Q{<em>uri</em>}<em>local</em></code>, where
                                    <code><em>uri</em></code> is the namespace URI of the node name,
                                    and <code><em>local</em></code> is the local part of the node name
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>For a text node: <code>text()[<em>position</em>]</code> where
                              <code><em>position</em></code> is an integer representing the position
                              of the selected node among its text node siblings
                           </p>
                        </li>
                        <li>
                           <p>For a comment node: <code>comment()[<em>position</em>]</code> where
                              <code><em>position</em></code> is an integer representing the position
                              of the selected node among its comment node siblings
                           </p>
                        </li>
                        <li>
                           <p>For a processing-instruction node:
                              <code>processing-instruction(<em>local</em>)[<em>position</em>]</code>
                              where <code><em>local</em></code> is the name of the processing instruction
                              node and <code><em>position</em></code> is an integer representing the
                              position of the selected node among its like-named processing-instruction node
                              siblings
                           </p>
                        </li>
                        <li>
                           <p>For a namespace node:</p>
                           <ol class="enumla">
                              <li>
                                 <p>If the namespace node has a name:
                                    <code>namespace::<em>prefix</em></code>, where
                                    <code><em>prefix</em></code> is the local part of the name of the
                                    namespace node (which represents the namespace prefix).
                                 </p>
                              </li>
                              <li>
                                 <p>If the namespace node has no name (that is, it represents the default
                                    namespace):
                                    <code>namespace::*[Q{http://www.w3.org/2005/xpath-functions}local-name()=""]</code></p>
                              </li>
                           </ol>
                        </li>
                     </ol>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$arg</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                        </li>
                        <li>
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <div class="exampleInner"><pre class="small">let $e := 
document {            
&lt;p xmlns="http://example.com/one" xml:lang="de" author="Friedrich von Schiller"&gt;
Freude, schöner Götterfunken,&lt;br/&gt;
Tochter aus Elysium,&lt;br/&gt;
Wir betreten feuertrunken,&lt;br/&gt;
Himmlische, dein Heiligtum.&lt;/p&gt;}
         </pre></div>
                        <p>The expression <code>fn:path($e)</code> returns <code>'/'</code>.
                        </p>
                        <p>The expression <code>fn:path($e/*:p)</code> returns <code>'/Q{http://example.com/one}p[1]'</code>.
                        </p>
                        <p>The expression <code>fn:path($e/*:p/@xml:lang)</code> returns <code>'/Q{http://example.com/one}p[1]/@Q{http://www.w3.org/XML/1998/namespace}lang'</code>.
                        </p>
                        <p>The expression <code>fn:path($e/*:p/@author)</code> returns <code>'/Q{http://example.com/one}p[1]/@author'</code>.
                        </p>
                        <p>The expression <code>fn:path($e/*:p/*:br[2])</code> returns <code>'/Q{http://example.com/one}p[1]/Q{http://example.com/one}br[2]'</code>.
                        </p>
                        <p>The expression <code>fn:path($e//text()[starts-with(normalize-space(),
                              'Tochter')])</code> returns <code>'/Q{http://example.com/one}p[1]/text()[2]'</code>.
                        </p>
                        <div class="exampleInner"><pre class="small">let $emp := 
            &lt;employee xml:id="ID21256"&gt;
               &lt;empnr&gt;E21256&lt;/empnr&gt;
               &lt;first&gt;John&lt;/first&gt;
               &lt;last&gt;Brown&lt;/last&gt;
            &lt;/employee&gt;
         </pre></div>
                        <p>The expression <code>fn:path($emp)</code> returns <code>'Q{http://www.w3.org/2005/xpath-functions}root()'</code>.
                        </p>
                        <p>The expression <code>fn:path($emp/@xml:id)</code> returns <code>'Q{http://www.w3.org/2005/xpath-functions}root()/@Q{http://www.w3.org/XML/1998/namespace}id'</code>.
                        </p>
                        <p>The expression <code>fn:path($emp/empnr)</code> returns <code>'Q{http://www.w3.org/2005/xpath-functions}root()/Q{}empnr[1]'</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-has-children"></a>13.7 fn:has-children
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns true if the supplied node has one or more child nodes (of any kind).</p>
                  </dd>
                  <dt class="label">Signatures</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:has-children</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     <div class="proto"><code class="function">fn:has-children</code>(<code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                     <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                        behavior of the function if the argument is omitted is exactly the same as if the
                        context item had been passed as the argument.
                     </p>
                     <p>Provided that the supplied argument <code>$node</code> matches the expected type
                        <code>node()?</code>, the result of the function call
                        <code>fn:has-children($node)</code> is defined to be the same as the result of the
                        expression <code>fn:exists($node/child::node())</code>.
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>The following errors may be raised when <code>$node</code> is omitted:
                     </p>
                     <ul>
                        <li>
                           
                           <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                              dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                           
                        </li>
                        <li>
                           
                           <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                           </p>
                           
                        </li>
                     </ul>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">If <code>$node</code> is an empty sequence the result is false.
                     </p>
                     <p class="note">The motivation for this function is to support streamed evaluation. According to the
                        streaming rules in <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a>, the following construct is not
                        streamable:
                     </p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:if test="exists(row)"&gt;
  &lt;ul&gt;
    &lt;xsl:for-each select="row"&gt;
       &lt;li&gt;&lt;xsl:value-of select="."/&gt;&lt;/li&gt;
    &lt;/xsl:for-each&gt;
  &lt;/ul&gt;
&lt;/xsl:if&gt;  
</pre></div>
                     <p class="note">This is because it makes two downward selections to read the child <code>row</code>
                        elements. The use of <code>fn:has-children</code> in the <code>xsl:if</code> conditional
                        is intended to circumvent this restriction.
                     </p>
                     <p class="note">Although the function was introduced to support streaming use cases, it has general
                        utility as a convenience function.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-innermost"></a>13.8 fn:innermost
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns every node within the input sequence that is not an ancestor of another member
                        of the input sequence; the nodes are returned in document order with duplicates
                        eliminated.
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:innermost</code>(<code class="arg">$nodes</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()*</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The effect of the function call <code>fn:innermost($nodes)</code> is defined to be
                        equivalent to the result of the expression:
                     </p>
                     <div class="exampleInner"><pre>$nodes except $nodes/ancestor::node()</pre></div>
                     <p>That is, the function takes as input a sequence of nodes, and returns every node within
                        the sequence that is not an ancestor of another node within the sequence; the nodes
                        are
                        returned in document order with duplicates eliminated.
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>If the source document contains nested sections represented by <code>div</code>
                           elements, the expression <code>innermost(//div)</code> returns those <code>div</code>
                           elements that do not contain further <code>div</code> elements.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-outermost"></a>13.9 fn:outermost
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns every node within the input sequence that has no ancestor that is itself a
                        member of the input sequence; the nodes are returned in document order with duplicates
                        eliminated.
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:outermost</code>(<code class="arg">$nodes</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()*</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The effect of the function call <code>fn:outermost($nodes)</code> is defined to be
                        equivalent to the result of the expression:
                     </p>
                     <div class="exampleInner"><pre>$nodes[not(ancestor::node() intersect $nodes)]/.</pre></div>
                     <p>That is, the function takes as input a sequence of nodes, and returns every node within
                        the sequence that does not have another node within the sequence as an ancestor; the
                        nodes are returned in document order with duplicates eliminated.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The formulation <code>$nodes except $nodes/descendant::node()</code> might appear to be
                        simpler, but does not correctly account for attribute nodes, as these are not
                        descendants of their parent element.
                     </p>
                     <p class="note">The motivation for the function was based on XSLT streaming use cases. There are cases
                        where the <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a> streaming rules allow the construct
                        <code>outermost(//section)</code> but do not allow <code>//section</code>; the
                        function can therefore be useful in cases where it is known that sections will not
                        be
                        nested, as well as cases where the application actually wishes to process all sections
                        except those that are nested within another.
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>If the source document contains nested sections represented by <code>div</code>
                           elements, the expression <code>outermost(//div)</code> returns those <code>div</code>
                           elements that are not contained within further <code>div</code> elements.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="sequence-functions"></a>14 Functions and operators on sequences
            </h2>
            <p>A <code>sequence</code> is an ordered collection of zero or more <code>items</code>.
               An <code>item</code> is either a node or an atomic value. The terms
               <code>sequence</code> and <code>item</code> are defined formally in <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-31">[XML Path Language (XPath) 3.1]</a>. 
            </p>
            <div class="div2">
               
               <h3><a id="general-seq-funcs"></a>14.1 General functions and operators on sequences
               </h3>
               <p>The following functions are defined on sequences. These functions work on any sequence,
                  without performing
                  any operations that are sensitive to the individual items in the sequence.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-empty"><code>fn:empty</code></a></td>
                        <td>Returns true if the argument is the empty sequence.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-exists"><code>fn:exists</code></a></td>
                        <td>Returns true if the argument is a non-empty sequence.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-head"><code>fn:head</code></a></td>
                        <td>Returns the first item in a sequence. </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-tail"><code>fn:tail</code></a></td>
                        <td>Returns all but the first item in a sequence. </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-insert-before"><code>fn:insert-before</code></a></td>
                        <td>Returns a sequence constructed by inserting an item or a sequence of items at a given
                           position within an existing sequence.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-remove"><code>fn:remove</code></a></td>
                        <td>Returns a new sequence containing all the items of <code>$target</code> except the item
                           at position <code>$position</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-reverse"><code>fn:reverse</code></a></td>
                        <td>Reverses the order of items in a sequence. </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-subsequence"><code>fn:subsequence</code></a></td>
                        <td>Returns the contiguous sequence of items in the value of <code>$sourceSeq</code>
                           beginning at the position indicated by the value of <code>$startingLoc</code> and
                           continuing for the number of items indicated by the value of <code>$length</code>. 
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-unordered"><code>fn:unordered</code></a></td>
                        <td>Returns the items of <code>$sourceSeq</code> in an <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>As in the previous section, for the illustrative examples below, assume an XQuery
                  or transformation operating on a non-empty Purchase Order document containing a
                  number of line-item elements. The variable <code>$seq</code> is bound to the
                  sequence of line-item nodes in document order. The variables
                  <code>$item1</code>, <code>$item2</code>, etc. are bound to separate, individual
                  line-item nodes in the sequence.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-empty"></a>14.1.1 fn:empty
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the argument is the empty sequence.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:empty</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is the empty sequence, the function returns
                           <code>true</code>; otherwise, the function returns <code>false</code>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:empty((1,2,3)[10])</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:empty(fn:remove(("hello", "world"), 1))</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:empty([])</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:empty(map{})</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:empty("")</code> returns <code>false()</code>.
                           </p>
                           <p>Assuming <code>$in</code> is an element with no children:
                           </p>
                           <div class="exampleInner"><pre>               let $break := &lt;br/&gt;
               return fn:empty($break)
            </pre></div>
                           <p>The result is <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-exists"></a>14.1.2 fn:exists
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns true if the argument is a non-empty sequence.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:exists</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the value of <code>$arg</code> is a non-empty sequence, the function returns
                           <code>true</code>; otherwise, the function returns <code>false</code>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:exists(fn:remove(("hello"), 1))</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:exists(fn:remove(("hello", "world"), 1))</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:exists([])</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:exists(map{})</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:exists("")</code> returns <code>true()</code>.
                           </p>
                           <p>Assuming <code>$in</code> is an element with no children:
                           </p>
                           <div class="exampleInner"><pre>               let $break := <br>
               return fn:exists($break)
            </pre></div>
                           <p>The result is <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-head"></a>14.1.3 fn:head
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the first item in a sequence. </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:head</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the value of the expression <code>$arg[1]</code></p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$arg</code> is the empty sequence, the empty sequence is returned. Otherwise
                           the first item in the sequence is returned.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:head(1 to 5)</code> returns <code>1</code>.
                           </p>
                           <p>The expression <code>fn:head(("a", "b", "c"))</code> returns <code>"a"</code>.
                           </p>
                           <p>The expression <code>fn:head(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:head([1,2,3])</code> returns <code>[1,2,3]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-tail"></a>14.1.4 fn:tail
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns all but the first item in a sequence. </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:tail</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the value of the expression <code>subsequence($arg, 2)</code></p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$arg</code> is the empty sequence, or a sequence containing a single item, then
                           the empty sequence is returned. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:tail(1 to 5)</code> returns <code>(2, 3, 4, 5)</code>.
                           </p>
                           <p>The expression <code>fn:tail(("a", "b", "c"))</code> returns <code>("b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:tail("a")</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:tail(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:tail([1,2,3])</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-insert-before"></a>14.1.5 fn:insert-before
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a sequence constructed by inserting an item or a sequence of items at a given
                           position within an existing sequence.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:insert-before</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$target</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$position</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$inserts</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The value returned by the function consists of all items of <code>$target</code> whose
                           index is less than <code>$position</code>, followed by all items of
                           <code>$inserts</code>, followed by the remaining elements of <code>$target</code>, in
                           that order. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$target</code> is the empty sequence, <code>$inserts</code> is returned. If
                           <code>$inserts</code> is the empty sequence, <code>$target</code> is returned.
                        </p>
                        <p class="note">If <code>$position</code> is less than one (1), the first position, the effective value
                           of <code>$position</code> is one (1). If <code>$position</code> is greater than the
                           number of items in <code>$target</code>, then the effective value of
                           <code>$position</code> is equal to the number of items in <code>$target</code> plus
                           1. 
                        </p>
                        <p class="note">The value of <code>$target</code> is not affected by the sequence construction.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $abc := ("a", "b", "c")</pre></div>
                           <p>The expression <code>fn:insert-before($abc, 0, "z")</code> returns <code>("z", "a", "b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:insert-before($abc, 1, "z")</code> returns <code>("z", "a", "b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:insert-before($abc, 2, "z")</code> returns <code>("a", "z", "b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:insert-before($abc, 3, "z")</code> returns <code>("a", "b", "z", "c")</code>.
                           </p>
                           <p>The expression <code>fn:insert-before($abc, 4, "z")</code> returns <code>("a", "b", "c", "z")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-remove"></a>14.1.6 fn:remove
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a new sequence containing all the items of <code>$target</code> except the item
                           at position <code>$position</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:remove</code>(<code class="arg">$target</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$position</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence consisting of all items of <code>$target</code> whose
                           index is less than <code>$position</code>, followed by all items of <code>$target</code>
                           whose index is greater than <code>$position</code>. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$position</code> is less than 1 or greater than the number of items in
                           <code>$target</code>, <code>$target</code> is returned.
                        </p>
                        <p class="note">If <code>$target</code> is the empty sequence, the empty sequence is returned.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $abc := ("a", "b", "c")</pre></div>
                           <p>The expression <code>fn:remove($abc, 0)</code> returns <code>("a", "b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:remove($abc, 1)</code> returns <code>("b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:remove($abc, 6)</code> returns <code>("a", "b", "c")</code>.
                           </p>
                           <p>The expression <code>fn:remove((), 3)</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-reverse"></a>14.1.7 fn:reverse
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Reverses the order of items in a sequence. </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:reverse</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence containing the items in <code>$arg</code> in reverse
                           order.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$arg</code> is the empty sequence, the empty sequence is returned. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $abc := ("a", "b", "c")</pre></div>
                           <p>The expression <code>fn:reverse($abc)</code> returns <code>("c", "b", "a")</code>.
                           </p>
                           <p>The expression <code>fn:reverse(("hello"))</code> returns <code>("hello")</code>.
                           </p>
                           <p>The expression <code>fn:reverse(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:reverse([1,2,3])</code> returns <code>[1,2,3]</code>. <em>(The input is a sequence containing a single item (the array)).</em></p>
                           <p>The expression <code>fn:reverse(([1,2,3],[4,5,6]))</code> returns <code>([4,5,6],[1,2,3])</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-subsequence"></a>14.1.8 fn:subsequence
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the contiguous sequence of items in the value of <code>$sourceSeq</code>
                           beginning at the position indicated by the value of <code>$startingLoc</code> and
                           continuing for the number of items indicated by the value of <code>$length</code>. 
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:subsequence</code>(<code class="arg">$sourceSeq</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$startingLoc</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:subsequence</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$sourceSeq</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$startingLoc</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$length</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:double</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>In the two-argument case, returns:</p>
                        <div class="exampleInner"><pre>$sourceSeq[fn:round($startingLoc) le position()]</pre></div>
                        <p>In the three-argument case, returns:</p>
                        <div class="exampleInner"><pre class="small">$sourceSeq[fn:round($startingLoc) le position() 
         and position() lt fn:round($startingLoc) + fn:round($length)]</pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The first item of a sequence is located at position 1, not position 0.</p>
                        <p class="note">If <code>$sourceSeq</code> is the empty sequence, the empty sequence is returned.
                        </p>
                        <p class="note">In the two-argument case, the function returns a sequence comprising those items of
                           <code>$sourceSeq</code> whose index position (counting from one) 
                           is greater than or equal to the value of <code>$startingLoc</code> (rounded to an integer). No error occurs if <code>$startingLoc</code> is 
                           zero or negative.
                        </p>
                        <p class="note">In the three-argument case, The function returns a sequence comprising those items
                           of <code>$sourceSeq</code> whose index position (counting from one) 
                           is greater than or equal to the value of <code>$startingLoc</code> (rounded to an integer), and 
                           less than the sum of <code>$startingLoc</code> and <code>$length</code> (both rounded to integers). No error occurs if <code>$startingLoc</code> is 
                           zero or negative, or if <code>$startingLoc</code> plus <code>$length</code> exceeds the number of items in the sequence, or if 
                           <code>$length</code> is negative.
                        </p>
                        <p class="note">As a consequence of the general rules, if <code>$startingLoc</code> is
                           <code>-INF</code> and <code>$length</code> is <code>+INF</code>, then
                           <code>fn:round($startingLoc) + fn:round($length)</code> is <code>NaN</code>; since
                           <code>position() lt NaN</code> is always false, the result is an empty sequence.
                        </p>
                        <p class="note">The reason the function accepts arguments of type <code>xs:double</code> is that many
                           computations on untyped data return an <code>xs:double</code> result; and the reason for
                           the rounding rules is to compensate for any imprecision in these floating-point
                           computations.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $seq := ("item1", "item2", "item3", "item4", "item5")</pre></div>
                           <p>The expression <code>fn:subsequence($seq, 4)</code> returns <code>("item4", "item5")</code>.
                           </p>
                           <p>The expression <code>fn:subsequence($seq, 3, 2)</code> returns <code>("item3", "item4")</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-unordered"></a>14.1.9 fn:unordered
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the items of <code>$sourceSeq</code> in an <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:unordered</code>(<code class="arg">$sourceSeq</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic with respect to ordering" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic-wrt-ordering"><span class="arrow">·</span>nondeterministic-wrt-ordering<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the items of <code>$sourceSeq</code> in an <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Query optimizers may be able to do a better job if the order of the output sequence
                           is
                           not specified. For example, when retrieving prices from a purchase order, if an index
                           exists on prices, it may be more efficient to return the prices in index order rather
                           than in document order.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:unordered((1, 2, 3, 4, 5))</code> returns some permutation of <code>(1, 2, 3, 4, 5)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="comparing-sequences"></a>14.2 Functions that compare values in sequences
               </h3>
               <p>The functions in this section rely on comparisons between the items in one or more
                  sequences.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-distinct-values"><code>fn:distinct-values</code></a></td>
                        <td>Returns the values that appear in a sequence, with duplicates eliminated.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-index-of"><code>fn:index-of</code></a></td>
                        <td>Returns a sequence of positive integers giving the positions within the sequence
                           <code>$seq</code> of items that are equal to <code>$search</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-deep-equal"><code>fn:deep-equal</code></a></td>
                        <td> This function assesses whether two sequences are deep-equal to each other. To be
                           deep-equal, they must contain items that are pairwise deep-equal; and for two items
                           to
                           be deep-equal, they must either be atomic values that compare equal, or nodes of the
                           same kind, with the same name, whose children are deep-equal<span>,
                              or maps with matching entries, or arrays with matching members.</span></td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-distinct-values"></a>14.2.1 fn:distinct-values
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the values that appear in a sequence, with duplicates eliminated.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:distinct-values</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:distinct-values</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="nondeterministic with respect to ordering" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic-wrt-ordering"><span class="arrow">·</span>nondeterministic-wrt-ordering<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and implicit timezone.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI, and implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the sequence that results from removing from <code>$arg</code> all
                           but one of a set of values that are considered equal to one another. 
                           <span>Two items <var>$J</var> and <var>$K</var> in the input sequence 
                              (after atomization, as required by the function signature)
                              are considered equal if <code>fn:deep-equal($J, $K, $coll)</code> is true,
                              where <code>$coll</code> is the collation selected according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.</span> This collation is used when string comparison is
                           required.
                        </p>
                        <p>The order in which the sequence of values is returned is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                        <p>Which value of a set of values that compare equal is returned is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>If the input sequence contains values of different numeric types that differ from
                           each
                           other by small amounts, then the eq operator is not transitive, because of rounding
                           effects occurring during type promotion. In the situation where the input contains
                           three
                           values <code>A</code>, <code>B</code>, and <code>C</code> such that <code>A eq B</code>,
                           <code>B eq C</code>, but <code>A ne C</code>, then the number of items in the result
                           of the function (as well as the choice of which items are returned) is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>, subject only to the constraints that (a) no two
                           items in the result sequence compare equal to each other, and (b) every input item
                           that
                           does not appear in the result sequence compares equal to some item that does appear
                           in
                           the result sequence.
                        </p>
                        <p>For example, this arises when computing:</p>
                        <div class="exampleInner"><pre class="small">    distinct-values(
            (xs:float('1.0'),
            xs:decimal('1.0000000000100000000001',
            xs:double( '1.00000000001'))</pre></div>
                        <p>because the values of type <code>xs:float</code> and <code>xs:double</code> both compare
                           equal to the value of type <code>xs:decimal</code> but not equal to each other. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p class="note">Values of type <code>xs:untypedAtomic</code> are compared as if they were of type
                           <code>xs:string</code>.
                        </p>
                        <p class="note">Values that cannot be compared, because the <code>eq</code> operator is not defined for
                           their types, are considered to be distinct.
                        </p>
                        <p class="note">For <code>xs:float</code> and <code>xs:double</code> values, positive zero is equal to
                           negative zero and, although <code>NaN</code> does not equal itself, if <code>$arg</code>
                           contains multiple <code>NaN</code> values a single <code>NaN</code> is returned.
                        </p>
                        <p class="note"> If <code>xs:dateTime</code>, <code>xs:date</code> or <code>xs:time</code> values do not
                           have a timezone, they are considered to have the implicit timezone provided by the
                           dynamic context for the purpose of comparison. Note that <code>xs:dateTime</code>,
                           <code>xs:date</code> or <code>xs:time</code> values can compare equal even if their
                           timezones are different.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:distinct-values((1, 2.0, 3, 2))</code> returns some permutation of <code>(1, 3, 2.0)</code>. <em>(The result may include either the <code>xs:integer</code> 2 or the <code>xs:decimal</code> 2.0).</em></p>
                           <p>The expression <code>fn:distinct-values((xs:untypedAtomic("cherry"),
                                 xs:untypedAtomic("plum"), xs:untypedAtomic("plum")))</code> returns some permutation of <code>(xs:untypedAtomic("cherry"),
                                 xs:untypedAtomic("plum"))</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-index-of"></a>14.2.2 fn:index-of
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a sequence of positive integers giving the positions within the sequence
                           <code>$seq</code> of items that are equal to <code>$search</code>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:index-of</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$seq</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$search</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:index-of</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$seq</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$search</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and implicit timezone.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI, and implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence of positive integers giving the positions within the
                           sequence <code>$seq</code> of items that are equal to <code>$search</code>.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>. This collation is used when string comparison is
                           required.
                        </p>
                        <p>The items in the sequence <code>$seq</code> are compared with <code>$search</code> under
                           the rules for the <code>eq</code> operator. Values of type <code>xs:untypedAtomic</code>
                           are compared as if they were of type <code>xs:string</code>. Values that cannot be
                           compared, because the <code>eq</code> operator is not defined for their types, are
                           considered to be distinct. If an item compares equal, then the position of that item
                           in
                           the sequence <code>$seq</code> is included in the result.
                        </p>
                        <p>The first item in a sequence is at position 1, not position 0.</p>
                        <p>The result sequence is in ascending numeric order.</p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the value of <code>$seq</code> is the empty sequence, or if no item in
                           <code>$seq</code> matches <code>$search</code>, then the function returns the empty
                           sequence.
                        </p>
                        <p class="note">No error occurs if non-comparable values are encountered. So when comparing two atomic
                           values, the effective boolean value of <code>fn:index-of($a, $b)</code> is true if
                           <code>$a</code> and <code>$b</code> are equal, false if they are not equal or not
                           comparable.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:index-of((10, 20, 30, 40), 35)</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:index-of((10, 20, 30, 30, 20, 10), 20)</code> returns <code>(2, 5)</code>.
                           </p>
                           <p>The expression <code>fn:index-of(("a", "sport", "and", "a", "pastime"),
                                 "a")</code> returns <code>(1, 4)</code>.
                           </p>
                           <p>The expression <code>fn:index-of(current-date(), 23)</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:index-of([1, [5, 6], [6, 7]], 6)</code> returns <code>(3, 4)</code>. <em>(The array is atomized to a sequence of five integers).</em></p>
                           <p>If <code>@a</code> is an attribute of type <code>xs:NMTOKENS</code> whose string
                              value is <code>"red green blue"</code>, and whose typed value is therefore
                              <code>("red", "green", "blue")</code>, then <code>fn:index-of(@a, "blue")</code>
                              returns <code>3</code>. This is because the function calling mechanism atomizes the
                              attribute node to produce a sequence of three <code>xs:NMTOKEN</code> values.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-deep-equal"></a>14.2.3 fn:deep-equal
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p> This function assesses whether two sequences are deep-equal to each other. To be
                           deep-equal, they must contain items that are pairwise deep-equal; and for two items
                           to
                           be deep-equal, they must either be atomic values that compare equal, or nodes of the
                           same kind, with the same name, whose children are deep-equal<span>,
                              or maps with matching entries, or arrays with matching members.</span></p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:deep-equal</code>(<code class="arg">$parameter1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$parameter2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:deep-equal</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$parameter1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$parameter2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and implicit timezone.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI, and implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The <code>$collation</code> argument identifies a collation which is used at all levels
                           of recursion when strings are compared (but not when names are compared), according
                           to
                           the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>If the two sequences are both empty, the function returns <code>true</code>.
                        </p>
                        <p>If the two sequences are of different lengths, the function returns
                           <code>false</code>.
                        </p>
                        <p>If the two sequences are of the same length, the function returns <code>true</code> if
                           and only if every item in the sequence <code>$parameter1</code> is deep-equal to the
                           item at the same position in the sequence <code>$parameter2</code>. The rules for
                           deciding whether two items are deep-equal follow.
                        </p>
                        <p>Call the two items <code>$i1</code> and <code>$i2</code> respectively.
                        </p>
                        <p>If <code>$i1</code> and <code>$i2</code> are both atomic values, they are deep-equal if
                           and only if <code>($i1 eq $i2)</code> is <code>true</code>, or if both values are
                           <code>NaN</code>. If the <code>eq</code> operator is not defined for <code>$i1</code>
                           and <code>$i2</code>, the function returns <code>false</code>.
                        </p>
                        <p>If <code>$i1</code> and <code>$i2</code> are both <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>maps<span class="arrow">·</span></a>, the result is <code>true</code> if and only if all the
                           following conditions apply:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>Both maps have the same number of entries.</p>
                           </li>
                           <li>
                              <p>For every entry in the first map, there is an entry in the second map that:</p>
                              <ol class="enumla">
                                 <li>
                                    <p>has the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a> (note that the
                                       collation is not used when comparing keys), and 
                                    </p>
                                 </li>
                                 <li>
                                    <p>has the same associated value (compared using the <code>fn:deep-equal</code>
                                       function, under the collation supplied in the original call to
                                       <code>fn:deep-equal</code>).
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>If <code>$i1</code> and <code>$i2</code> are both <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>arrays<span class="arrow">·</span></a>, the result is <code>true</code> if and only if all
                           the following conditions apply:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>Both arrays have the same number of members (<code>array:size($i1) eq
                                    array:size($i2)</code>).
                              </p>
                           </li>
                           <li>
                              <p>Members in the same position of both arrays are deep-equal to each other, under
                                 the collation supplied in the original call to <code>fn:deep-equal</code>: that is,
                                 <code>every $p in 1 to array:size($i1) satisfies deep-equal($i1($p), $i2($p),
                                    $collation)</code></p>
                           </li>
                        </ol>
                        <p>If <code>$i1</code> and <code>$i2</code> are both nodes, they are compared as described
                           below:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>If the two nodes are of different kinds, the result is <code>false</code>.
                              </p>
                           </li>
                           <li>
                              <p>If the two nodes are both document nodes then they are deep-equal if and only if
                                 the sequence <code>$i1/(*|text())</code> is deep-equal to the sequence
                                 <code>$i2/(*|text())</code>.
                              </p>
                           </li>
                           <li>
                              <p> If the two nodes are both element nodes then they are deep-equal if and only if
                                 all of the following conditions are satisfied:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The two nodes have the same name, that is <code>(node-name($i1) eq
                                          node-name($i2))</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Either both nodes are annotated as having simple content or both nodes
                                       are annotated as having complex content. For this purpose "simple content"
                                       means either a simple type or a complex type with simple content; "complex
                                       content" means a complex type whose variety is mixed, element-only, or
                                       empty.
                                    </p>
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>It is a consequence of this rule that validating a document <var>D</var>
                                          against a schema will usually (but not necessarily) result in a document
                                          that is not deep-equal to <var>D</var>. The exception is when the schema
                                          allows all elements to have mixed content.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <p>The two nodes have the same number of attributes, and for every attribute
                                       <code>$a1</code> in <code>$i1/@*</code> there exists an attribute
                                       <code>$a2</code> in <code>$i2/@*</code> such that <code>$a1</code> and
                                       <code>$a2</code> are deep-equal.
                                    </p>
                                 </li>
                                 <li>
                                    <p> One of the following conditions holds:</p>
                                    <ul>
                                       <li>
                                          <p>Both element nodes are annotated as having simple content (as defined
                                             in 3(b) above), and the typed value of <code>$i1</code> is deep-equal
                                             to the typed value of <code>$i2</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Both element nodes have a type annotation that is a complex type with
                                             variety element-only, and the sequence <code>$i1/*</code> is
                                             deep-equal to the sequence <code>$i2/*</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Both element nodes have a type annotation that is a complex type with
                                             variety mixed, and the sequence <code>$i1/(*|text())</code> is
                                             deep-equal to the sequence <code>$i2/(*|text())</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Both element nodes have a type annotation that is a complex type with
                                             variety empty.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>If the two nodes are both attribute nodes then they are deep-equal if and only if
                                 both the following conditions are satisfied:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The two nodes have the same name, that is <code>(node-name($i1) eq
                                          node-name($i2))</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The typed value of <code>$i1</code> is deep-equal to the typed value of
                                       <code>$i2</code>.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>If the two nodes are both processing instruction nodes, then they are deep-equal
                                 if and only if both the following conditions are satisfied:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The two nodes have the same name, that is <code>(node-name($i1) eq
                                          node-name($i2))</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The string value of <code>$i1</code> is equal to the string value of
                                       <code>$i2</code>.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p> If the two nodes are both namespace nodes, then they are deep-equal if and only
                                 if both the following conditions are satisfied:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The two nodes either have the same name or are both nameless, that is
                                       <code>fn:deep-equal(node-name($i1), node-name($i2))</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>The string value of <code>$i1</code> is equal to the string value of
                                       <code>$i2</code> when compared using the Unicode codepoint collation.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>If the two nodes are both text nodes or comment nodes, then they are deep-equal if
                                 and only if their string-values are equal.
                              </p>
                           </li>
                        </ol>
                        <p>In all other cases the result is false.</p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOTY0015" title="err:FOTY0015">err:FOTY0015</a>] if either input
                           sequence contains a function item <span>that is not a map or
                              array</span>. 
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The two nodes are not required to have the same type annotation, and they are not
                           required to have the same in-scope namespaces. They may also differ in their parent,
                           their base URI, and the values returned by the <code>is-id</code> and
                           <code>is-idrefs</code> accessors (see <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-id">Section 
                              
                              5.5 is-id Accessor
                              </a><sup><small>DM31</small></sup> and
                           <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-idrefs">Section 
                              
                              5.6 is-idrefs Accessor
                              </a><sup><small>DM31</small></sup>). The order of children is significant,
                           but the order of attributes is insignificant. 
                        </p>
                        <p class="note">The contents of comments and processing instructions are significant only if these
                           nodes
                           appear directly as items in the two sequences being compared. The content of a comment
                           or processing instruction that appears as a descendant of an item in one of the
                           sequences being compared does not affect the result. However, the presence of a comment
                           or processing instruction, if it causes a text node to be split into two text nodes,
                           may
                           affect the result.
                        </p>
                        <p class="note">Comparing items of different kind (for example, comparing an atomic
                           value to a node, or a map to an array, or an integer to an <code>xs:date</code>) returns false, it does not return an error. So
                           the result of <code>fn:deep-equal(1, current-dateTime())</code> is <code>false</code>.
                        </p>
                        <p class="note">Comparing a function (other than a map or array) to any other value raises a type
                           error.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $at := &lt;attendees&gt; &lt;name last='Parker'
            first='Peter'/&gt; &lt;name last='Barker' first='Bob'/&gt; &lt;name last='Parker'
            first='Peter'/&gt; &lt;/attendees&gt;</pre></div>
                           <p>The expression <code>fn:deep-equal($at, $at/*)</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:deep-equal($at/name[1], $at/name[2])</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:deep-equal($at/name[1], $at/name[3])</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:deep-equal($at/name[1], 'Peter Parker')</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>fn:deep-equal(map{1:'a', 2:'b'}, map{2:'b', 1:'a'})</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:deep-equal([1, 2, 3], [1, 2, 3])</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>fn:deep-equal((1, 2, 3), [1, 2, 3])</code> returns <code>false()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="cardinality-functions"></a>14.3 Functions that test the cardinality of sequences
               </h3>
               <p>The following functions test the cardinality of their sequence arguments.</p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-zero-or-one"><code>fn:zero-or-one</code></a></td>
                        <td>Returns <code>$arg</code> if it contains zero or one items. Otherwise, raises an
                           error.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-one-or-more"><code>fn:one-or-more</code></a></td>
                        <td>Returns <code>$arg</code> if it contains one or more items. Otherwise, raises an error.
                           
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-exactly-one"><code>fn:exactly-one</code></a></td>
                        <td>Returns <code>$arg</code> if it contains exactly one item. Otherwise, raises an error.
                           
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-zero-or-one"><code>fn:zero-or-one</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-one-or-more"><code>fn:one-or-more</code></a>, and
                  <a href="https://www.w3.org/TR/xpath-functions-31/#func-exactly-one"><code>fn:exactly-one</code></a> defined in this section, check that the cardinality
                  of a sequence is in the expected range. They are particularly useful with regard
                  to static typing. For example, the function call <code>fn:remove($seq, fn:index-of($seq2, 'abc'))</code>
                  requires the result of the call on <a href="https://www.w3.org/TR/xpath-functions-31/#func-index-of"><code>fn:index-of</code></a> to be a singleton integer, 
                  but the static type system cannot infer this; writing the expression as 
                  <code>fn:remove($seq, fn:exactly-one(fn:index-of($seq2, 'abc')))</code> 
                  will provide a suitable static type at query analysis time, and ensures that the length
                  of the sequence is
                  correct with a dynamic check at query execution time.
               </p>
               <p>The type signatures for these functions deliberately declare the argument type as
                  <code>item()*</code>, permitting a sequence of any length. A more restrictive
                  signature would defeat the purpose of the function, which is to defer
                  cardinality checking until query execution time.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-zero-or-one"></a>14.3.1 fn:zero-or-one
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>$arg</code> if it contains zero or one items. Otherwise, raises an
                           error.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:zero-or-one</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Except in error cases, the function returns <code>$arg</code> unchanged.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0003" title="err:FORG0003">err:FORG0003</a>] if <code>$arg</code>
                           contains more than one item.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-one-or-more"></a>14.3.2 fn:one-or-more
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>$arg</code> if it contains one or more items. Otherwise, raises an error.
                           
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:one-or-more</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()+</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Except in error cases, the function returns <code>$arg</code> unchanged.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0004" title="err:FORG0004">err:FORG0004</a>] if <code>$arg</code> is an
                           empty sequence.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-exactly-one"></a>14.3.3 fn:exactly-one
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns <code>$arg</code> if it contains exactly one item. Otherwise, raises an error.
                           
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:exactly-one</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Except in error cases, the function returns <code>$arg</code> unchanged.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0005" title="err:FORG0005">err:FORG0005</a>] if <code>$arg</code> is an
                           empty sequence or a sequence containing more than one item.
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="aggregate-functions"></a>14.4 Aggregate functions
               </h3>
               <p>Aggregate functions take a sequence as argument and return a single value
                  computed from values in the sequence. Except for <a href="https://www.w3.org/TR/xpath-functions-31/#func-count"><code>fn:count</code></a>, the
                  sequence must consist of values of a single type or one if its subtypes, or they
                  must be numeric. <code>xs:untypedAtomic</code> values are permitted in the
                  input sequence and handled by special conversion rules. The type of the items in
                  the sequence must also support certain operations.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-count"><code>fn:count</code></a></td>
                        <td>Returns the number of items in a sequence.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-avg"><code>fn:avg</code></a></td>
                        <td>Returns the average of the values in the input sequence <code>$arg</code>, that is, the
                           sum of the values divided by the number of values.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><code>fn:max</code></a></td>
                        <td>Returns a value that is equal to the highest value appearing in the input sequence.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-min"><code>fn:min</code></a></td>
                        <td>Returns a value that is equal to the lowest value appearing in the input sequence.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-sum"><code>fn:sum</code></a></td>
                        <td>Returns a value obtained by adding together the values in <code>$arg</code>.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-count"></a>14.4.1 fn:count
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of items in a sequence.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:count</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the number of items in the value of <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Returns 0 if <code>$arg</code> is the empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $seq1 := ($item1, $item2)</pre></div>
                           <div class="exampleInner"><pre>let $seq2 := (98.5, 98.3, 98.9)</pre></div>
                           <div class="exampleInner"><pre>let $seq3 := ()</pre></div>
                           <p>The expression <code>fn:count($seq1)</code> returns <code>2</code>.
                           </p>
                           <p>The expression <code>fn:count($seq3)</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>fn:count($seq2)</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>fn:count($seq2[. &gt; 100])</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>fn:count([])</code> returns <code>1</code>.
                           </p>
                           <p>The expression <code>fn:count([1,2,3])</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-avg"></a>14.4.2 fn:avg
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the average of the values in the input sequence <code>$arg</code>, that is, the
                           sum of the values divided by the number of values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:avg</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the empty sequence is returned.
                        </p>
                        <p>If <code>$arg</code> contains values of type <code>xs:untypedAtomic</code> they are cast
                           to <code>xs:double</code>. 
                        </p>
                        <p>Duration values must either all be <code>xs:yearMonthDuration</code> values or must all
                           be <code>xs:dayTimeDuration</code> values. For numeric values, the numeric promotion
                           rules defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a> are used to promote all values to a single
                           common type. After these operations, <code>$arg</code> must satisfy the following condition:
                        </p>
                        <p>There must be a type <var>T</var> such that:
                        </p>
                        <ol class="enumar">
                           <li>every item in <code>$arg</code> is an instance of <var>T</var>.
                           </li>
                           <li><var>T</var> is one of <code>xs:double</code>, <code>xs:float</code>,<code>xs:decimal</code>, <code>xs:yearMonthDuration</code>, or<code>xs:dayTimeDuration</code>.
                           </li>
                        </ol>
                        <p>The function returns the average of the values as <code>sum($arg) div
                              count($arg)</code>; but the implementation may use an otherwise equivalent algorithm
                           that avoids arithmetic overflow.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>] if the input sequence contains
                           items of incompatible types, as described above.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $d1 := xs:yearMonthDuration("P20Y")</pre></div>
                           <div class="exampleInner"><pre>let $d2 := xs:yearMonthDuration("P10M")</pre></div>
                           <div class="exampleInner"><pre>let $seq3 := (3, 4, 5)</pre></div>
                           <p>The expression <code>fn:avg($seq3)</code> returns <code>4.0</code>. <em>(The result is of type <code>xs:decimal</code>.)</em></p>
                           <p>The expression <code>fn:avg(($d1, $d2))</code> returns <code>xs:yearMonthDuration("P10Y5M")</code>.
                           </p>
                           <p><code>fn:avg(($d1, $seq3))</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>]. 
                           </p>
                           <p>The expression <code>fn:avg(())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:avg((xs:float('INF'), xs:float('-INF')))</code> returns <code>xs:float('NaN')</code>.
                           </p>
                           <p>The expression <code>fn:avg(($seq3, xs:float('NaN')))</code> returns <code>xs:float('NaN')</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-max"></a>14.4.3 fn:max
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a value that is equal to the highest value appearing in the input sequence.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:max</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType?</code></div>
                        <div class="proto"><code class="function">fn:max</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>, <code class="arg">$collation</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and implicit timezone.
                           	
                        </p>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI, and implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The following conversions are applied to the input sequence <code>$arg</code>, in order:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>Values of type <code>xs:untypedAtomic</code> in <code>$arg</code> are cast to
                                 <code>xs:double</code>.
                              </p>
                           </li>
                           <li>
                              <p>If the resulting sequence contains values that are instances of more than one primitive
                                 type
                                 (meaning the 19 primitive types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a>), then:
                                 
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>If each value is an instance of one of the types <code>xs:string</code> or <code>xs:anyURI</code>,
                                       then all the values are cast to type <code>xs:string</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If each value is an instance of one of the types <code>xs:decimal</code> or <code>xs:float</code>,
                                       then all the values are cast to type <code>xs:float</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If each value is an instance of one of the types <code>xs:decimal</code>, <code>xs:float</code>,
                                       or <code>xs:double</code>, then all the values are cast to type <code>xs:double</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise, a type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>].
                                    </p>
                                 </li>
                              </ol>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>The primitive type of an <code>xs:integer</code> value for this purpose is <code>xs:decimal</code>.
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <p>The items in the resulting sequence may be reordered in an arbitrary order. The
                           resulting sequence is referred to below as the converted sequence. The function returns
                           an item from the converted sequence rather than the input sequence. 
                        </p>
                        <p>If the converted sequence is empty, the function returns the empty sequence.</p>
                        <p>All items in the converted sequence must be derived from a single base type for which
                           the <code>le</code> operator is defined. In addition, the values in the sequence must
                           have a total order. If date/time values do not have a timezone, they are considered
                           to
                           have the implicit timezone provided by the dynamic context for the purpose of
                           comparison. Duration values must either all be <code>xs:yearMonthDuration</code> values
                           or must all be <code>xs:dayTimeDuration</code> values.
                        </p>
                        <p>If the converted sequence contains the value <code>NaN</code>, the value
                           <code>NaN</code> is returned 
                           <span>(as an <code>xs:float</code> or <code>xs:double</code> as appropriate)</span>.
                        </p>
                        <p>If the items in the converted sequence are of type <code>xs:string</code> or types
                           derived by restriction from <code>xs:string</code>, then the determination of the item
                           with the smallest value is made according to the collation that is used. If the type
                           of
                           the items in the converted sequence is not <code>xs:string</code> and
                           <code>$collation</code> is specified, the collation is ignored.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns the result of the expression:</p>
                        <div class="exampleInner"><pre>   if (every $v in $c satisfies $c[1] ge $v)
   then $c[1] 
   else fn:max(fn:tail($c))</pre></div>
                        <p>evaluated with <code>$collation</code> as the default collation if specified, and with
                           <code>$c</code> as the converted sequence.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>] if the input sequence contains
                           items of incompatible types, as described above.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Because the rules allow the sequence to be reordered, if there are two or more items
                           that are
                           "equal highest", the specific item whose value is returned is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>. This can arise for example if two different strings
                           compare equal under the selected collation, or if two different <code>xs:dateTime</code>
                           values compare equal despite being in different timezones.
                        </p>
                        <p class="note">If the converted sequence contains exactly one value then that value is returned.</p>
                        <p class="note">The default type when the <code>fn:max</code> function is applied to
                           <code>xs:untypedAtomic</code> values is <code>xs:double</code>. This differs from the
                           default type for operators such as <code>gt</code>, and for sorting in XQuery and XSLT,
                           which is <code>xs:string</code>.
                        </p>
                        <p class="note">The rules for the dynamic type of the result are stricter in version 3.1 of the specification
                           than
                           in earlier versions. For example, if all the values in the input sequence belong to
                           types derived from
                           <code>xs:integer</code>, version 3.0 required only that the result be an instance
                           of the least common supertype of the types present in the input sequence; Version
                           3.1
                           requires that the returned value retains its original type. This does not apply, however,
                           where type promotion
                           is needed to convert all the values to a common primitive type.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:max((3,4,5))</code> returns <code>5</code>.
                           </p>
                           <p>The expression <code>fn:max([3,4,5])</code> returns <code>5</code>. <em>(Arrays are atomized).</em></p>
                           <p>The expression <code>fn:max((xs:integer(5), xs:float(5.0), xs:double(0)))</code> returns <code>xs:double(5.0e0)</code>.
                           </p>
                           <p><code>fn:max((3,4,"Zero"))</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>]. 
                           </p>
                           <p>The expression <code>fn:max((fn:current-date(), xs:date("2100-01-01")))</code> returns <code>xs:date("2100-01-01")</code>. <em>(Assuming that the current date is during the 21st
                                 century.)</em></p>
                           <p>The expression <code>fn:max(("a", "b", "c"))</code> returns <code>"c"</code>. <em>(Assuming a typical default collation.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-min"></a>14.4.4 fn:min
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a value that is equal to the lowest value appearing in the input sequence.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:min</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType?</code></div>
                        <div class="proto"><code class="function">fn:min</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>, <code class="arg">$collation</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and implicit timezone.
                           	
                        </p>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations, and static base URI, and implicit timezone.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The following rules are applied to the input sequence:</p>
                        <ul>
                           <li>
                              <p>Values of type <code>xs:untypedAtomic</code> in <code>$arg</code> are cast to
                                 <code>xs:double</code>.
                              </p>
                           </li>
                           <li>
                              <p>If the resulting sequence contains values that are instances of more than one primitive
                                 type
                                 (meaning the 19 primitive types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a>), then:
                                 
                              </p>
                              <ol class="enumar">
                                 <li>
                                    <p>If each value is an instance of one of the types <code>xs:string</code> or <code>xs:anyURI</code>,
                                       then all the values are cast to type <code>xs:string</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If each value is an instance of one of the types <code>xs:decimal</code> or <code>xs:float</code>,
                                       then all the values are cast to type <code>xs:float</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>If each value is an instance of one of the types <code>xs:decimal</code>, <code>xs:float</code>,
                                       or <code>xs:double</code>, then all the values are cast to type <code>xs:double</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise, a type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>].
                                    </p>
                                 </li>
                              </ol>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>The primitive type of an <code>xs:integer</code> value for this purpose is <code>xs:decimal</code>.
                                 </p>
                              </div>
                           </li>
                        </ul>
                        <p>The items in the resulting sequence may be reordered in an arbitrary order. The
                           resulting sequence is referred to below as the converted sequence. The function returns
                           an item from the converted sequence rather than the input sequence. 
                        </p>
                        <p>If the converted sequence is empty, the empty sequence is returned.</p>
                        <p>All items in the converted sequence must be derived from a single base type for which
                           the <code>le</code> operator is defined. In addition, the values in the sequence must
                           have a total order. If date/time values do not have a timezone, they are considered
                           to
                           have the implicit timezone provided by the dynamic context for the purpose of
                           comparison. Duration values must either all be <code>xs:yearMonthDuration</code> values
                           or must all be <code>xs:dayTimeDuration</code> values.
                        </p>
                        <p>If the converted sequence contains the value <code>NaN</code>, the value
                           <code>NaN</code> is returned
                           <span>(as an <code>xs:float</code> or <code>xs:double</code> as appropriate)</span>.
                        </p>
                        <p>If the items in the converted sequence are of type <code>xs:string</code> or types
                           derived by restriction from <code>xs:string</code>, then the determination of the item
                           with the smallest value is made according to the collation that is used. If the type
                           of
                           the items in the converted sequence is not <code>xs:string</code> and
                           <code>$collation</code> is specified, the collation is ignored.
                        </p>
                        <p>The collation used by this function is determined according to the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The function returns the result of the expression:</p>
                        <div class="exampleInner"><pre>   if (every $v in $c satisfies $c[1] le $v) 
   then $c[1] 
   else fn:min(fn:tail($c))</pre></div>
                        <p>evaluated with <code>$collation</code> as the default collation if specified, and with
                           <code>$c</code> as the converted sequence.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>] if the input sequence contains
                           items of incompatible types, as described above.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Because the rules allow the sequence to be reordered, if there are two or items that
                           are
                           "equal lowest", the specific item whose value is returned is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>. This can arise for example if two different strings
                           compare equal under the selected collation, or if two different <code>xs:dateTime</code>
                           values compare equal despite being in different timezones.
                        </p>
                        <p class="note">If the converted sequence contains exactly one value then that value is returned.</p>
                        <p class="note">The default type when the <code>fn:min</code> function is applied to
                           <code>xs:untypedAtomic</code> values is <code>xs:double</code>. This differs from the
                           default type for operators such as <code>lt</code>, and for sorting in XQuery and XSLT,
                           which is <code>xs:string</code>.
                        </p>
                        <p class="note">The rules for the dynamic type of the result are stricter in version 3.1 of the specification
                           than
                           in earlier versions. For example, if all the values in the input sequence belong to
                           types derived from
                           <code>xs:integer</code>, version 3.0 required only that the result be an instance
                           of the least common supertype of the types present in the input sequence; Version
                           3.1
                           requires that the returned value retains its original type. This does not apply, however,
                           where type promotion
                           is needed to convert all the values to a common primitive type.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:min((3,4,5))</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>fn:min([3,4,5])</code> returns <code>3</code>. <em>(Arrays are atomized).</em></p>
                           <p>The expression <code>fn:min((xs:integer(5), xs:float(5), xs:double(10)))</code> returns <code>xs:double(5.0e0)</code>.
                           </p>
                           <p><code>fn:min((3,4,"Zero"))</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>]. 
                           </p>
                           <p><code>fn:min((xs:float(0.0E0), xs:float(-0.0E0)))</code> can return either positive
                              or negative zero. The two items are equal, so it is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> which is returned.
                           </p>
                           <p>The expression <code>fn:min((fn:current-date(), xs:date("1900-01-01")))</code> returns <code>xs:date("1900-01-01")</code>. <em>(Assuming that the current date is set to a reasonable
                                 value.)</em></p>
                           <p>The expression <code>fn:min(("a", "b", "c"))</code> returns <code>"a"</code>. <em>(Assuming a typical default collation.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-sum"></a>14.4.5 fn:sum
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a value obtained by adding together the values in <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:sum</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:sum</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$arg</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$zero</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Any values of type <code>xs:untypedAtomic</code> in <code>$arg</code> are cast to
                           <code>xs:double</code>. The items in the resulting sequence may be reordered in an
                           arbitrary order. The resulting sequence is referred to below as the converted
                           sequence.
                        </p>
                        <p>If the converted sequence is empty, then the single-argument form of the function
                           returns the <code>xs:integer</code> value <code>0</code>; the two-argument form returns
                           the value of the argument <code>$zero</code>.
                        </p>
                        <p>If the converted sequence contains the value <code>NaN</code>, <code>NaN</code> is
                           returned.
                        </p>
                        <p>All items in <code>$arg</code> must be numeric or derived from a single base type. In
                           addition, the type must support addition. Duration values must either all be
                           <code>xs:yearMonthDuration</code> values or must all be
                           <code>xs:dayTimeDuration</code> values. For numeric values, the numeric promotion
                           rules defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a> are used to promote all values to a single
                           common type. The sum of a sequence of integers will therefore be an integer, while
                           the
                           sum of a numeric sequence that includes at least one <code>xs:double</code> will be an
                           <code>xs:double</code>. 
                        </p>
                        <p>The result of the function, using the second signature, is the result of the
                           expression:
                        </p>
                        <div class="exampleInner"><pre class="small">if (fn:count($c) eq 0) then
    $zero
else if (fn:count($c) eq 1) then
    $c[1]
else
    $c[1] + fn:sum(subsequence($c, 2))</pre></div>
                        <p>where <code>$c</code> is the converted sequence.
                        </p>
                        <p>The result of the function, using the first signature, is the result of the expression:
                           <code>fn:sum($arg, 0)</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A type error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>] if the input sequence contains
                           items of incompatible types, as described above.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The second argument allows an appropriate value to be defined to represent the sum
                           of an
                           empty sequence. For example, when summing a sequence of durations it would be
                           appropriate to return a zero-length duration of the appropriate type. This argument
                           is
                           necessary because a system that does dynamic typing cannot distinguish "an empty
                           sequence of integers", for example, from "an empty sequence of durations".
                        </p>
                        <p class="note"> If the converted sequence contains exactly one value then that value is returned.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre>let $d1 := xs:yearMonthDuration("P20Y")</pre></div>
                           <div class="exampleInner"><pre>let $d2 := xs:yearMonthDuration("P10M")</pre></div>
                           <div class="exampleInner"><pre>let $seq1 := ($d1, $d2)</pre></div>
                           <div class="exampleInner"><pre>let $seq3 := (3, 4, 5)</pre></div>
                           <p>The expression <code>fn:sum(($d1, $d2))</code> returns <code>xs:yearMonthDuration("P20Y10M")</code>.
                           </p>
                           <p>The expression <code>fn:sum($seq1[. lt xs:yearMonthDuration('P3M')],
                                 xs:yearMonthDuration('P0M'))</code> returns <code>xs:yearMonthDuration("P0M")</code>.
                           </p>
                           <p>The expression <code>fn:sum($seq3)</code> returns <code>12</code>.
                           </p>
                           <p>The expression <code>fn:sum(())</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>fn:sum((),())</code> returns <code>()</code>.
                           </p>
                           <p>The expression <code>fn:sum((1 to 100)[. lt 0], 0) </code> returns <code>0</code>.
                           </p>
                           <p><code>fn:sum(($d1, 9E1))</code> raises a type error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0006" title="err:FORG0006">err:FORG0006</a>]. 
                           </p>
                           <p>The expression <code>fn:sum(($d1, $d2), "ein Augenblick")</code> returns <code>xs:yearMonthDuration("P20Y10M")</code>. <em>(There is no requirement that the <code>$zero</code> value should be
                                 the same type as the items in <code>$arg</code>, or even that it should belong to
                                 a type that supports addition.)</em></p>
                           <p>The expression <code>fn:sum([1, 2, 3])</code> returns <code>6</code>. <em>(Atomizing an array returns the sequence obtained by atomizing its members.)</em></p>
                           <p>The expression <code>fn:sum([[1, 2], [3, 4]])</code> returns <code>10</code>. <em>(Atomizing an array returns the sequence obtained by atomizing its members.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="fns-on-identifiers"></a>14.5 Functions on node identifiers
               </h3>
               <p>This section defines a number of functions used to find elements by <code>ID</code> or <code>IDREF</code> value, 
                  or to generate IDs.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a></td>
                        <td>Returns the sequence of element nodes that have an <code>ID</code> value matching the
                           value of one or more of the <code>IDREF</code> values supplied in <code>$arg</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-element-with-id"><code>fn:element-with-id</code></a></td>
                        <td> Returns the sequence of element nodes that have an <code>ID</code> value matching the
                           value of one or more of the <code>IDREF</code> values supplied in <code>$arg</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-idref"><code>fn:idref</code></a></td>
                        <td>Returns the sequence of element or attribute nodes with an <code>IDREF</code> value
                           matching the value of one or more of the <code>ID</code> values supplied in
                           <code>$arg</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-generate-id"><code>fn:generate-id</code></a></td>
                        <td>This function returns a string that uniquely identifies a given node. </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-id"></a>14.5.1 fn:id
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the sequence of element nodes that have an <code>ID</code> value matching the
                           value of one or more of the <code>IDREF</code> values supplied in <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:id</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">element()*</code></div>
                        <div class="proto"><code class="function">fn:id</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>, <code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">element()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence, in document order with duplicates eliminated,
                           containing every element node <code>E</code> that satisfies all the following
                           conditions:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>
                                 <code>E</code> is in the target document. The target document is the document
                                 containing <code>$node</code>, or the document containing the context item
                                 (<code>.</code>) if the second argument is omitted. The behavior of the
                                 function if <code>$node</code> is omitted is exactly the same as if the context
                                 item had been passed as <code>$node</code>.
                              </p>
                           </li>
                           <li>
                              <p><code>E</code> has an <code>ID</code> value equal to one of the candidate
                                 <code>IDREF</code> values, where:
                              </p>
                              <ul>
                                 <li>
                                    <p> An element has an <code>ID</code> value equal to <code>V</code> if either
                                       or both of the following conditions are true:
                                    </p>
                                    <ul>
                                       <li>
                                          <p>The <code>is-id</code> property (See <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-id">Section 
                                                
                                                5.5 is-id Accessor
                                                </a><sup><small>DM31</small></sup>.) of the element node is true, and the typed value
                                             of the element node is equal to <code>V</code> under the rules of the
                                             <code>eq</code> operator using the Unicode codepoint collation
                                             (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>).
                                          </p>
                                       </li>
                                       <li>
                                          <p>The element has an attribute node whose <code>is-id</code> property
                                             (See <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-id">Section 
                                                
                                                5.5 is-id Accessor
                                                </a><sup><small>DM31</small></sup>.) is true and whose typed
                                             value is equal to <code>V</code> under the rules of the
                                             <code>eq</code> operator using the Unicode code point collation
                                             (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>).
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p> Each <code>xs:string</code> in <code>$arg</code> is parsed as if it were of
                                       type <code>IDREFS</code>, that is, each <code>xs:string</code> in
                                       <code>$arg</code> is treated as a whitespace-separated sequence of
                                       tokens, each acting as an <code>IDREF</code>. These tokens are then included
                                       in the list of candidate <code>IDREF</code>s. If any of the tokens is not a
                                       lexically valid <code>IDREF</code> (that is, if it is not lexically an
                                       <code>xs:NCName</code>), it is ignored. Formally, the candidate
                                       <code>IDREF</code> values are the strings in the sequence given by the
                                       expression:
                                    </p>
                                    <div class="exampleInner"><pre>for $s in $arg return 
    fn:tokenize(fn:normalize-space($s), ' ')[. castable as xs:IDREF]</pre></div>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If several elements have the same <code>ID</code> value, then <code>E</code> is
                                 the one that is first in document order.
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0001" title="err:FODC0001">err:FODC0001</a>] if
                           <code>$node</code>, or the context item if the second argument is absent, is a node
                           in a tree whose root is not a document node.
                        </p>
                        <p>The following errors may be raised when <code>$node</code> is omitted:
                        </p>
                        <ul>
                           <li>
                              
                              <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                                 dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                              
                           </li>
                           <li>
                              
                              <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                              </p>
                              
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The effect of this function is anomalous in respect of element nodes with the
                           <code>is-id</code> property. For legacy reasons, this function returns the element
                           that has the <code>is-id</code> property, whereas it would be more appropriate to return
                           its parent, that being the element that is uniquely identified by the ID. A new function
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-element-with-id"><code>fn:element-with-id</code></a> has been introduced with the desired
                           behavior.
                        </p>
                        <p class="note"> If the data model is constructed from an Infoset, an attribute will have the
                           <code>is-id</code> property if the corresponding attribute in the Infoset had an
                           attribute type of <code>ID</code>: typically this means the attribute was declared as an
                           <code>ID</code> in a DTD.
                        </p>
                        <p class="note"> If the data model is constructed from a PSVI, an element or attribute will have the
                           <code>is-id</code> property if its typed value is a single atomic value of type
                           <code>xs:ID</code> or a type derived by restriction from <code>xs:ID</code>.
                        </p>
                        <p class="note"> No error is raised in respect of a candidate <code>IDREF</code> value that does not
                           match the <code>ID</code> of any element in the document. If no candidate
                           <code>IDREF</code> value matches the <code>ID</code> value of any element, the
                           function returns the empty sequence.
                        </p>
                        <p class="note"> It is not necessary that the supplied argument should have type <code>xs:IDREF</code>
                           or <code>xs:IDREFS</code>, or that it should be derived from a node with the
                           <code>is-idrefs</code> property.
                        </p>
                        <p class="note"> An element may have more than one <code>ID</code> value. This can occur with synthetic
                           data models or with data models constructed from a PSVI where the element and one
                           of its
                           attributes are both typed as <code>xs:ID</code>.
                        </p>
                        <p class="note"> If the source document is well-formed but not valid, it is possible for two or more
                           elements to have the same <code>ID</code> value. In this situation, the function will
                           select the first such element.
                        </p>
                        <p class="note"> It is also possible in a well-formed but invalid document to have an element or
                           attribute that has the <code>is-id</code> property but whose value does not conform to
                           the lexical rules for the <code>xs:ID</code> type. Such a node will never be selected by
                           this function.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $emp := 
        validate lax{    
          document{
            &lt;employee xml:id="ID21256"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
                      xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
               &lt;empnr xsi:type="xs:ID"&gt;E21256&lt;/empnr&gt;
               &lt;first&gt;John&lt;/first&gt;
               &lt;last&gt;Brown&lt;/last&gt;
            &lt;/employee&gt;
          }
        }
         </pre></div>
                           <p>The expression <code>$emp/id('ID21256')/name()</code> returns <code>"employee"</code>. <em>(The <code>xml:id</code> attribute has the <code>is-id</code> property,
                                 so the employee element is selected.)</em></p>
                           <p>The expression <code>$emp/id('E21256')/name()</code> returns <code>"empnr"</code>. <em>(Assuming the <code>empnr</code> element is given the type
                                 <code>xs:ID</code> as a result of schema validation, the element will have the
                                 <code>is-id</code> property and is therefore selected. Note the difference from
                                 the behavior of <a href="https://www.w3.org/TR/xpath-functions-31/#func-element-with-id"><code>fn:element-with-id</code></a>.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-element-with-id"></a>14.5.2 fn:element-with-id
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p> Returns the sequence of element nodes that have an <code>ID</code> value matching the
                           value of one or more of the <code>IDREF</code> values supplied in <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:element-with-id</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">element()*</code></div>
                        <div class="proto"><code class="function">fn:element-with-id</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>, <code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">element()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>The effect of this function is identical to <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a> in respect of
                              elements that have an attribute with the <code>is-id</code> property. However, it
                              behaves differently in respect of element nodes with the <code>is-id</code> property.
                              Whereas the <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a> function, for legacy reasons, returns the element that has the
                              <code>is-id</code> property, this function returns the element identified by the ID,
                              which is the parent of the element having the <code>is-id</code> property.
                           </p>
                        </div>
                        <p>The function returns a sequence, in document order with duplicates eliminated,
                           containing every element node <code>E</code> that satisfies all the following
                           conditions:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>
                                 <code>E</code> is in the target document. The target document is the document
                                 containing <code>$node</code>, or the document containing the context item
                                 (<code>.</code>) if the second argument is omitted. The behavior of the
                                 function if <code>$node</code> is omitted is exactly the same as if the context
                                 item had been passed as <code>$node</code>.
                              </p>
                           </li>
                           <li>
                              <p><code>E</code> has an <code>ID</code> value equal to one of the candidate
                                 <code>IDREF</code> values, where:
                              </p>
                              <ul>
                                 <li>
                                    <p> An element has an <code>ID</code> value equal to <code>V</code> if either
                                       or both of the following conditions are true:
                                    </p>
                                    <ul>
                                       <li>
                                          <p>The element has an child element node whose <code>is-id</code>
                                             property (See <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-id">Section 
                                                
                                                5.5 is-id Accessor
                                                </a><sup><small>DM31</small></sup>.) is true and
                                             whose typed value is equal to <code>V</code> under the rules of the
                                             <code>eq</code> operator using the Unicode code point collation
                                             (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>).
                                          </p>
                                       </li>
                                       <li>
                                          <p>The element has an attribute node whose <code>is-id</code> property
                                             (See <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-id">Section 
                                                
                                                5.5 is-id Accessor
                                                </a><sup><small>DM31</small></sup>.) is true and whose typed
                                             value is equal to <code>V</code> under the rules of the
                                             <code>eq</code> operator using the Unicode code point collation
                                             (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>).
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>Each <code>xs:string</code> in <code>$arg</code> is parsed as if it were of
                                       type <code>IDREFS</code>, that is, each <code>xs:string</code> in
                                       <code>$arg</code> is treated as a whitespace-separated sequence of
                                       tokens, each acting as an <code>IDREF</code>. These tokens are then included
                                       in the list of candidate <code>IDREF</code>s. If any of the tokens is not a
                                       lexically valid <code>IDREF</code> (that is, if it is not lexically an
                                       <code>xs:NCName</code>), it is ignored. Formally, the candidate
                                       <code>IDREF</code> values are the strings in the sequence given by the
                                       expression:
                                    </p>
                                    <div class="exampleInner"><pre>for $s in $arg return 
   fn:tokenize(fn:normalize-space($s), ' ')[. castable as xs:IDREF]</pre></div>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p> If several elements have the same <code>ID</code> value, then <code>E</code> is
                                 the one that is first in document order.
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0001" title="err:FODC0001">err:FODC0001</a>] if
                           <code>$node</code>, or the context item if the second argument is omitted, is a node
                           in a tree whose root is not a document node.
                        </p>
                        <p>The following errors may be raised when <code>$node</code> is omitted:
                        </p>
                        <ul>
                           <li>
                              
                              <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                                 dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                              
                           </li>
                           <li>
                              
                              <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                              </p>
                              
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This function is equivalent to the <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a> function except when dealing with
                           ID-valued element nodes. Whereas the <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a> function selects the element
                           containing the identifier, this function selects its parent.
                        </p>
                        <p class="note">If the data model is constructed from an Infoset, an attribute will have the
                           <code>is-id</code> property if the corresponding attribute in the Infoset had an
                           attribute type of <code>ID</code>: typically this means the attribute was declared as an
                           <code>ID</code> in a DTD.
                        </p>
                        <p class="note"> If the data model is constructed from a PSVI, an element or attribute will have the
                           <code>is-id</code> property if its typed value is a single atomic value of type
                           <code>xs:ID</code> or a type derived by restriction from <code>xs:ID</code>.
                        </p>
                        <p class="note"> No error is raised in respect of a candidate <code>IDREF</code> value that does not
                           match the <code>ID</code> of any element in the document. If no candidate
                           <code>IDREF</code> value matches the <code>ID</code> value of any element, the
                           function returns the empty sequence.
                        </p>
                        <p class="note"> It is not necessary that the supplied argument should have type <code>xs:IDREF</code>
                           or <code>xs:IDREFS</code>, or that it should be derived from a node with the
                           <code>is-idrefs</code> property.
                        </p>
                        <p class="note"> An element may have more than one <code>ID</code> value. This can occur with synthetic
                           data models or with data models constructed from a PSVI where the element and one
                           of its
                           attributes are both typed as <code>xs:ID</code>.
                        </p>
                        <p class="note"> If the source document is well-formed but not valid, it is possible for two or more
                           elements to have the same <code>ID</code> value. In this situation, the function will
                           select the first such element.
                        </p>
                        <p class="note"> It is also possible in a well-formed but invalid document to have an element or
                           attribute that has the <code>is-id</code> property but whose value does not conform to
                           the lexical rules for the <code>xs:ID</code> type. Such a node will never be selected by
                           this function.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $emp := 
         validate lax{    
          document{
            &lt;employee xml:id="ID21256"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
                      xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
               &lt;empnr xsi:type="xs:ID"&gt;E21256&lt;/empnr&gt;
               &lt;first&gt;John&lt;/first&gt;
               &lt;last&gt;Brown&lt;/last&gt;
            &lt;/employee&gt;
          }
        }
         </pre></div>
                           <p>The expression <code>$emp/fn:element-with-id('ID21256')/name()</code> returns <code>"employee"</code>. <em>(The <code>xml:id</code> attribute has the <code>is-id</code> property,
                                 so the employee element is selected.)</em></p>
                           <p>The expression <code>$emp/fn:element-with-id('E21256')/name()</code> returns <code>"employee"</code>. <em>(Assuming the <code>empnr</code> element is given the type
                                 <code>xs:ID</code> as a result of schema validation, the element will have the
                                 <code>is-id</code> property and is therefore its parent is selected. Note the
                                 difference from the behavior of <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a>.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-idref"></a>14.5.3 fn:idref
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the sequence of element or attribute nodes with an <code>IDREF</code> value
                           matching the value of one or more of the <code>ID</code> values supplied in
                           <code>$arg</code>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:idref</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()*</code></div>
                        <div class="proto"><code class="function">fn:idref</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string*</code>, <code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p> The function returns a sequence, in document order with duplicates eliminated,
                           containing every element or attribute node <code>$N</code> that satisfies all the
                           following conditions:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p><code>$N</code> is in the target document. The target document is the document
                                 containing <code>$node</code> or the document containing the context item
                                 (<code>.</code>) if the second argument is omitted. The behavior of the
                                 function if <code>$node</code> is omitted is exactly the same as if the context
                                 item had been passed as <code>$node</code>.
                              </p>
                           </li>
                           <li>
                              <p><code>$N</code> has an <code>IDREF</code> value equal to one of the candidate
                                 <code>ID</code> values, where:
                              </p>
                              <ul>
                                 <li>
                                    <p>A node <code>$N</code> has an <code>IDREF</code> value equal to
                                       <code>V</code> if both of the following conditions are true:
                                    </p>
                                    <ul>
                                       <li>
                                          <p>The <code>is-idrefs</code> property (see <a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-is-idrefs">Section 
                                                
                                                5.6 is-idrefs Accessor
                                                </a><sup><small>DM31</small></sup>) of <code>$N</code> is <code>true</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The sequence </p>
                                          <div class="exampleInner"><pre>fn:tokenize(fn:normalize-space(fn:string($N)), ' ')</pre></div>
                                          <p>contains a string that is
                                             equal to <code>V</code> under the rules of the <code>eq</code>
                                             operator using the Unicode code point collation
                                             (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>).
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>Each <code>xs:string</code> in <code>$arg</code> is parsed as if it were of
                                       lexically of type <code>xs:ID</code>. These <code>xs:string</code>s are then
                                       included in the list of candidate <code>xs:ID</code>s. If any of the strings
                                       in <code>$arg</code> is not a lexically valid <code>xs:ID</code> (that is,
                                       if it is not lexically an <code>xs:NCName</code>), it is ignored. More
                                       formally, the candidate <code>ID</code> values are the strings in the
                                       sequence:
                                    </p>
                                    <div class="exampleInner"><pre>$arg[. castable as xs:NCName]</pre></div>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0001" title="err:FODC0001">err:FODC0001</a>] if
                           <code>$node</code>, or the context item if the second argument is omitted, is a node
                           in a tree whose root is not a document node. 
                        </p>
                        <p>The following errors may be raised when <code>$node</code> is omitted:
                        </p>
                        <ul>
                           <li>
                              
                              <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                                 dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                              
                           </li>
                           <li>
                              
                              <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                              </p>
                              
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note"> An element or attribute typically acquires the <code>is-idrefs</code> property by being
                           validated against the schema type <code>xs:IDREF</code> or <code>xs:IDREFS</code>, or
                           (for attributes only) by being described as of type <code>IDREF</code> or
                           <code>IDREFS</code> in a DTD.
                        </p>
                        <p class="note">Because the function is sensitive to the way in which the data model
                           is constructed, calls on this function are not always interoperable.
                        </p>
                        <p class="note"> No error is raised in respect of a candidate <code>ID</code> value that does not match
                           the <code>IDREF</code> value of any element or attribute in the document. If no
                           candidate <code>ID</code> value matches the <code>IDREF</code> value of any element or
                           attribute, the function returns the empty sequence.
                        </p>
                        <p class="note"> It is possible for two or more nodes to have an <code>IDREF</code> value that matches a
                           given candidate <code>ID</code> value. In this situation, the function will return all
                           such nodes. However, each matching node will be returned at most once, regardless
                           how
                           many candidate <code>ID</code> values it matches.
                        </p>
                        <p class="note"> It is possible in a well-formed but invalid document to have a node whose
                           <code>is-idrefs</code> property is true but that does not conform to the lexical
                           rules for the <code>xs:IDREF</code> type. The effect of the above rules is that
                           ill-formed candidate <code>ID</code> values and ill-formed <code>IDREF</code> values are
                           ignored.
                        </p>
                        <p class="note">If the data model is constructed from a PSVI, the typed value of a node that has the
                           <code>is-idrefs</code> property will contain at least one atomic value of type
                           <code>xs:IDREF</code> (or a type derived by restriction from <code>xs:IDREF</code>).
                           It may also contain atomic values of other types. These atomic values are treated
                           as
                           candidate <code>ID</code> values <span>if two conditions are met: their lexical form must be valid as an
                              <code>xs:NCName</code>, and there must be at least one instance of <code>xs:IDREF</code>
                              in the typed value of the node. If these conditions are not satisfied, such values
                              are ignored.</span></p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $emp := 
      validate lax {  
        document {    
          &lt;employees xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
                     xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;  
            &lt;employee xml:id="ID21256"&gt;
               &lt;empnr xsi:type="xs:ID"&gt;E21256&lt;/empnr&gt;
               &lt;first&gt;Anil&lt;/first&gt;
               &lt;last&gt;Singh&lt;/last&gt;
               &lt;deputy xsi:type="xs:IDREF"&gt;E30561&lt;/deputy&gt;
            &lt;/employee&gt;
            &lt;employee xml:id="ID30561"&gt;
               &lt;empnr xsi:type="xs:ID"&gt;E30561&lt;/empnr&gt;
               &lt;first&gt;John&lt;/first&gt;
               &lt;last&gt;Brown&lt;/last&gt;
               &lt;manager xsi:type="xs:IDREF"&gt;ID21256&lt;/manager&gt;
            &lt;/employee&gt;
          &lt;/employees&gt;
        }
      }
         </pre></div>
                           <p>The expression <code>$emp/(element-with-id('ID21256')/@xml:id =&gt; fn:idref())/ancestor::employee/last =&gt;
                                 string()</code> returns <code>"Brown"</code>. <em>(Assuming that <code>manager</code> has the is-idref property, the call on <code>fn:idref</code> selects
                                 the <code>manager</code> element. If, instead, the <code>manager</code> had a <code>ref</code>
                                 attribute with the is-idref property, the call on <code>fn:idref</code> would select the attribute node.)</em></p>
                           <p>The expression <code>$emp/(element-with-id('E30561')/empnr =&gt; fn:idref())/ancestor::employee/last =&gt; string()</code> returns <code>"Singh"</code>. <em>(Assuming that <code>employee/deputy</code> has the is-idref property, the call on <code>fn:idref</code> selects
                                 the <code>deputy</code> element.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-generate-id"></a>14.5.4 fn:generate-id
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>This function returns a string that uniquely identifies a given node. </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:generate-id</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto"><code class="function">fn:generate-id</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The zero-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                        </p>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If the argument is omitted, it defaults to the context item (<code>.</code>). The
                           behavior of the function if the argument is omitted is exactly the same as if the
                           context item had been passed as the argument.
                        </p>
                        <p>If the argument is the empty sequence, the result is the zero-length string.</p>
                        <p>In other cases, the function returns a string that uniquely identifies a given node.
                           <span>More formally, it is guaranteed that within a single
                              <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>, 
                              <code>fn:codepoint-equal(fn:generate-id($N), fn:generate-id($M))</code> returns true 
                              if and only if <code>($M is $N)</code> returns true.</span></p>
                        <p>The returned identifier <span class="verb">must</span> consist of ASCII alphanumeric characters
                           and <span class="verb">must</span> start with an alphabetic character. Thus, the string is
                           syntactically an XML name.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>The following errors may be raised when <code>$arg</code> is omitted:
                        </p>
                        <ul>
                           <li>
                              
                              <p>If the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>,
                                 dynamic error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup></p>
                              
                           </li>
                           <li>
                              
                              <p>If the context item is not a node, type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
                              </p>
                              
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">An implementation is free to generate an identifier in any convenient way provided
                           that
                           it always generates the same identifier for the same node and that different identifiers
                           are always generated from different nodes. An implementation is under no obligation
                           to
                           generate the same identifiers each time a document is transformed or queried.
                        </p>
                        <p class="note">There is no guarantee that a generated unique identifier will be distinct from any
                           unique IDs specified in the source document.
                        </p>
                        <p class="note">There is no inverse to this function; it is not directly possible to find the node
                           with
                           a given generated ID. Of course, it is possible to search a given sequence of nodes
                           using an expression such as <code>$nodes[generate-id()=$id]</code>.
                        </p>
                        <p class="note">It is advisable, but not required, for implementations to generate IDs that are distinct
                           even when compared using a case-blind collation.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The primary use case for this function is to generate hyperlinks. For example, when
                              generating HTML, an anchor for a given section <code>$sect</code> can be generated by
                              writing (in either XSLT or XQuery):
                           </p>
                           <p>
                              <code>&lt;a name="{fn:generate-id($sect)}"/&gt;</code>
                              
                           </p>
                           <p>and a link to that section can then be produced with code such as:</p>
                           <p>
                              <code>see &lt;a href="#{fn:generate-id($sect)}"&gt;here&lt;/a&gt;</code>
                              
                           </p>
                           <p>Note that anchors generated in this way will not necessarily be the same each time
                              a
                              document is republished.
                           </p>
                           <p>Since the keys in a map must be atomic values, it is possible to use generated IDs
                              as surrogates for nodes when constructing a map. For example, in some implementations,
                              testing whether a node <code>$N</code> is a member of a large node-set <code>$S</code>
                              using the expression <code>fn:exists($N intersect $S)</code> may be expensive; there
                              may then be performance benefits in creating a map:
                           </p>
                           <p>
                              <code>let $SMap := map:merge($S!map{fn:generate-id(.) : .})</code>
                              
                           </p>
                           <p>and then testing for membership of the node-set using:</p>
                           <p>
                              <code>map:contains($SMap, fn:generate-id($N))</code>
                              
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="fns-on-docs"></a>14.6 Functions giving access to external information
               </h3>
               <p>The functions in this section provide access to resources (such as files) in the external
                  environment.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a></td>
                        <td>Retrieves a document using a URI supplied as an <code>xs:string</code>, and returns the
                           corresponding document node.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-doc-available"><code>fn:doc-available</code></a></td>
                        <td>The function returns true if and only if the function call <code>fn:doc($uri)</code>
                           would return a document node.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a></td>
                        <td>Returns a sequence of items identified by a
                           collection URI; or a default collection if no URI is supplied.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><code>fn:uri-collection</code></a></td>
                        <td>Returns a sequence of <code>xs:anyURI</code> values representing the URIs in a URI
                           collection.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a></td>
                        <td>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function reads an external resource (for example, a
                           file) and returns a string representation of the resource.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines"><code>fn:unparsed-text-lines</code></a></td>
                        <td>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines"><code>fn:unparsed-text-lines</code></a> function reads an external resource (for
                           example, a file) and returns its contents as a sequence of strings, one for each line
                           of
                           text in the string representation of the resource.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-available"><code>fn:unparsed-text-available</code></a></td>
                        <td>Because errors in evaluating the <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function are
                           non-recoverable, these two functions are provided to allow an application to determine
                           whether a call with particular arguments would succeed.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable"><code>fn:environment-variable</code></a></td>
                        <td>Returns the value of a system environment variable, if it exists.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-available-environment-variables"><code>fn:available-environment-variables</code></a></td>
                        <td>Returns a list of environment variable names that are suitable for passing to
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable"><code>fn:environment-variable</code></a>, as a (possibly empty) sequence of strings.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-doc"></a>14.6.1 fn:doc
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Retrieves a document using a URI supplied as an <code>xs:string</code>, and returns the
                           corresponding document node.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:doc</code>(<code class="arg">$uri</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">document-node()?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		available documents, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$uri</code> is the empty sequence, the result is an empty sequence.
                        </p>
                        <p>If <code>$uri</code> is a relative URI reference, it is resolved relative to the value
                           of the <b>static base URI</b> property from the static context. The resulting absolute URI is
                           promoted to an <code>xs:string</code>.
                        </p>
                        <p>If the <b>available documents</b> described in <a href="https://www.w3.org/TR/xpath-31/#eval_context">Section 
                              
                              2.1.2 Dynamic Context
                              </a><sup><small>XP31</small></sup> provides a mapping from this string to a document node, the
                           function returns that document node.
                        </p>
                        <p>The URI may include a fragment identifier.</p>
                        <p>By default, this function is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. Two
                           calls on this function return the same document node if the same URI Reference (after
                           resolution to an absolute URI Reference) is supplied to both calls. Thus, the following
                           expression (if it does not raise an error) will always be true:
                        </p>
                        <div class="exampleInner"><pre>doc("foo.xml") is doc("foo.xml")</pre></div>
                        <p>However, for performance reasons, implementations may provide a user option to evaluate
                           the function without a guarantee of determinism. The manner in which any such option
                           is
                           provided is implementation-defined. If the user has not selected such an option, a
                           call
                           of the function must either return a deterministic result or must raise a dynamic
                           error
                           [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0003" title="err:FODC0003">err:FODC0003</a>].
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>If <code>$uri</code> is read from a source document, it is generally appropriate to
                              resolve it relative to the base URI property of the relevant node in the source
                              document. This can be achieved by calling the <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><code>fn:resolve-uri</code></a> function,
                              and passing the resulting absolute URI as an argument to the <code>fn:doc</code>
                              function.
                           </p>
                        </div>
                        <p>If two calls to this function supply different absolute URI References as arguments,
                           the
                           same document node may be returned if the implementation can determine that the two
                           arguments refer to the same resource.
                        </p>
                        <p> By defining the semantics of this function in terms of a string-to-document-node
                           mapping in the dynamic context, the specification is acknowledging that the results
                           of
                           this function are outside the purview of the language specification itself, and depend
                           entirely on the run-time environment in which the expression is evaluated. This run-time
                           environment includes not only an unpredictable collection of resources ("the web"),
                           but
                           configurable machinery for locating resources and turning their contents into document
                           nodes within the XPath data model. Both the set of resources that are reachable, and
                           the
                           mechanisms by which those resources are parsed and validated, are <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                        <p> One possible processing model for this function is as follows. The resource identified
                           by the URI Reference is retrieved. If the resource cannot be retrieved, a dynamic
                           error
                           is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>]. The data resulting from the retrieval
                           action is then parsed as an XML document and a tree is constructed in accordance with
                           the <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-30">[XQuery and XPath Data Model (XDM) 3.0]</a>. If the top-level media type is known and is
                           "text", the content is parsed in the same way as if the media type were text/xml;
                           otherwise, it is parsed in the same way as if the media type were application/xml.
                           If
                           the contents cannot be parsed successfully, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>]. Otherwise, the result of the function is the document node
                           at the root of the resulting tree. This tree is then optionally validated against
                           a
                           schema.
                        </p>
                        <p>Various aspects of this processing are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                           Implementations may provide external configuration options that allow any aspect of
                           the
                           processing to be controlled by the user. In particular:
                        </p>
                        <ul>
                           <li>
                              <p>The set of URI schemes that the implementation recognizes is
                                 implementation-defined. Implementations may allow the mapping of URIs to resources
                                 to be configured by the user, using mechanisms such as catalogs or user-written
                                 URI handlers.
                              </p>
                           </li>
                           <li>
                              <p>The handling of non-XML media types is implementation-defined. Implementations may
                                 allow instances of the data model to be constructed from non-XML resources, under
                                 user control.
                              </p>
                           </li>
                           <li>
                              <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether DTD validation and/or schema
                                 validation is applied to the source document.
                              </p>
                           </li>
                           <li>
                              <p>Implementations may provide user-defined error handling options that allow
                                 processing to continue following an error in retrieving a resource, or in parsing
                                 and validating its content. When errors have been handled in this way, the
                                 function may return either an empty sequence, or a fallback document provided by
                                 the error handler.
                              </p>
                           </li>
                           <li>
                              <p>Implementations may provide user options that relax the requirement for the
                                 function to return deterministic results.
                              </p>
                           </li>
                           <li>
                              <p>The effect of a fragment identifier in the supplied URI 
                                 is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. One possible interpretation
                                 is to treat the fragment identifier as an ID attribute value, and to return a document
                                 node having the element with the selected ID value as its only child.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error <span class="verb">may</span> be raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0005" title="err:FODC0005">err:FODC0005</a>] if
                           <code>$uri</code> is not a valid URI <span>reference</span>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if a relative URI reference
                           is supplied, and the base-URI property in the static context is absent.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if the <b>available
                              documents</b> provides no mapping for the absolutized URI.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if the resource cannot be
                           retrieved or cannot be parsed successfully as XML.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0003" title="err:FODC0003">err:FODC0003</a>] if the implementation is
                           not able to guarantee that the result of the function will be deterministic, and the
                           user has not indicated that an unstable result is acceptable.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-doc-available"></a>14.6.2 fn:doc-available
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>The function returns true if and only if the function call <code>fn:doc($uri)</code>
                           would return a document node.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:doc-available</code>(<code class="arg">$uri</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		available documents, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$uri</code> is an empty sequence, this function returns <code>false</code>.
                        </p>
                        <p>If a call on <code>fn:doc($uri)</code> would return a document node, this function
                           returns <code>true</code>.
                        </p>
                        <p>In all other cases this function returns <code>false</code>. <span>This
                              includes the case where <span>an invalid URI is supplied, and also the case where </span>
                              a valid relative URI reference is supplied, and cannot be resolved,
                              for example because the static base URI is absent.</span></p>
                        <p>If this function returns <code>true</code>, then calling <code>fn:doc($uri)</code>
                           within the same <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a> must return a document node. However,
                           if nondeterministic processing has been selected for the <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> function,
                           this guarantee is lost.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-collection"></a>14.6.3 fn:collection
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a sequence of items identified by a
                           collection URI; or a default collection if no URI is supplied.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:collection</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                        <div class="proto"><code class="function">fn:collection</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		available collections, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>This function takes an <code>xs:string</code> as argument and returns a sequence of
                           <span>items</span> obtained by interpreting <code>$arg</code> as an <code>xs:anyURI</code> and
                           resolving it according to the mapping specified in <b>available 
                              collections</b> described in <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                              
                              C.2 Dynamic Context Components
                              </a><sup><small>XP31</small></sup>.
                        </p>
                        <p>If <span><b>available collections</b></span> provides a mapping from this string to a
                           sequence of items, the function returns that sequence. If <b>available 
                              collections</b> maps the string to an empty sequence, then the function returns an
                           empty sequence.
                        </p>
                        <p>If <code>$arg</code> is not specified, the function returns the sequence of <span>items</span> in
                           the default collection in the dynamic context. See <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                              
                              C.2 Dynamic Context Components
                              </a><sup><small>XP31</small></sup>. 
                        </p>
                        <p>If the value of <code>$arg</code> is a relative <code>xs:anyURI</code>, it is resolved
                           against the value of the base-URI property from the static context. 
                        </p>
                        <p>If <code>$arg</code> is the empty sequence, the function behaves as if it had been
                           called without an argument. See above.
                        </p>
                        <p>By default, this function is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. This
                           means that repeated calls on the function with the same argument will return the same
                           result. However, for performance reasons, implementations may provide a user option
                           to
                           evaluate the function without a guarantee of determinism. The manner in which any
                           such
                           option is provided is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the user has not
                           selected such an option, a call to this function must either return a deterministic
                           result or must raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0003" title="err:FODC0003">err:FODC0003</a>].
                        </p>
                        <p>There is no requirement that <span>any nodes in the result</span> should be in document order, nor is
                           there a requirement that the result should contain no duplicates.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if no URI is supplied and
                           the value of the default collection is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if a relative URI reference
                           is supplied, and the base-URI property in the static context is absent.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if <b>available node
                              collections</b> provides no mapping for the absolutized URI.
                        </p>
                        <p>A dynamic error <span><span class="verb">may</span> be</span> raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0004" title="err:FODC0004">err:FODC0004</a>] if <code>$arg</code> is not
                           a valid <code>xs:anyURI</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">In earlier releases, the primary use for the <code>fn:collection</code> function
                           was to retrieve a collection of XML documents, perhaps held as lexical XML in operating
                           system filestore, or perhaps held in an XML database. In this release the concept
                           has
                           been generalised to allow other resources to be retrieved: for example JSON documents
                           might
                           be returned as arrays or maps, non-XML text files might be returned as strings, and
                           binary
                           files might be returned as instances of <code>xs:base64Binary</code>.
                        </p>
                        <p class="note">The abstract concept of a collection might be realized in different ways by different
                           implementations, and the ways in which URIs map to collections can be equally variable.
                           
                           Specifying resources using URIs is
                           useful because URIs are dynamic, can be parameterized, and do not rely on an external
                           environment.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-uri-collection"></a>14.6.4 fn:uri-collection
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a sequence of <code>xs:anyURI</code> values representing the URIs in a URI
                           collection.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:uri-collection</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI*</code></div>
                        <div class="proto"><code class="function">fn:uri-collection</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		available URI collections, and static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The zero-argument form of the function returns the URIs in the <b>default URI
                              collection</b> described in <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                              
                              C.2 Dynamic Context Components
                              </a><sup><small>XP31</small></sup>.
                        </p>
                        <p>If the value of <code>$arg</code> is a relative <code>xs:anyURI</code>, it is resolved
                           against the value of the base-URI property from the static context. 
                        </p>
                        <p>If <code>$arg</code> is the empty sequence, the function behaves as if it had been
                           called without an argument. See above.
                        </p>
                        <p>The single-argument form of the function returns the sequence of URIs corresponding
                           to
                           the supplied URI in the <b>available URI collections</b> described in
                           <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                              
                              C.2 Dynamic Context Components
                              </a><sup><small>XP31</small></sup>.
                        </p>
                        <p>By default, this function is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. This
                           means that repeated calls on the function with the same argument will return the same
                           result. However, for performance reasons, implementations may provide a user option
                           to
                           evaluate the function without a guarantee of determinism. The manner in which any
                           such
                           option is provided is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the user has not
                           selected such an option, a call to this function must either return a deterministic
                           result or must raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0003" title="err:FODC0003">err:FODC0003</a>].
                        </p>
                        <p>There is no requirement that the URIs returned by this function should all be distinct,
                           and no assumptions can be made about the order of URIs in the sequence, unless the
                           implementation defines otherwise.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if no URI is supplied (that
                           is, if the function is called with no arguments, or with a single argument that
                           evaluates to an empty sequence), and the value of the default resource collection
                           is
                           <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if a relative URI reference
                           is supplied, and the base-URI property in the static context is absent.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0002" title="err:FODC0002">err:FODC0002</a>] if <b>available resource
                              collections</b> provides no mapping for the absolutized URI.
                        </p>
                        <p>A dynamic error <span><span class="verb">may</span> be</span> raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0004" title="err:FODC0004">err:FODC0004</a>] if <code>$arg</code> is not
                           a valid <code>xs:anyURI</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">In some implementations, there might be a close relationship between <b>collections</b> (as retrieved
                           by the <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> function), and <b>URI collections</b> (as retrieved by this function).
                           For example, a collection might return XML documents, and the corresponding URI collection
                           might return
                           the URIs of those documents. However, this specification does not impose such a close
                           relationship. For example, there
                           may be collection URIs accepted by one of the two functions and not by the other;
                           a collection might contain
                           items that do not have any URI; or a URI collection might contain URIs that cannot
                           be dereferenced to return any 
                           resource.
                        </p>
                        <p class="note">Thus, some implementations might ensure that calling <code>fn:uri-collection</code> and then
                           applying <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> to each of the returned URIs delivers the same result as
                           calling <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> with the same argument; however, this is not
                           guaranteed.
                        </p>
                        <p class="note">In the case where <code>fn:uri-collection</code> returns the URIs of resources that
                           could also be retrieved directly using <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a>, there are several reasons why it 
                           might be appropriate to use this function in preference
                           to the <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> function. For example:
                        </p>
                        <div class="note">
                           <ul>
                              <li>
                                 <p>It allows different URIs for different kinds of resource to be dereferenced in
                                    different ways: for
                                    example, the returned URIs might be referenced using the
                                    <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function rather than the <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>
                                    function.
                                 </p>
                              </li>
                              <li>
                                 <p>In XSLT 3.0 it allows the documents in a collection to be processed in streaming mode
                                    using the
                                    <code>xsl:stream</code> instruction.
                                 </p>
                              </li>
                              <li>
                                 <p>It allows recovery from failures to read, parse, or validate individual documents,
                                    by calling the <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> (or other dereferencing) function within the scope of try/catch.
                                 </p>
                              </li>
                              <li>
                                 <p>It allows selection of which documents to read based on their URI, for example
                                    they can be filtered to select those whose URIs end in <code>.xml</code>, or those
                                    that use the <code>https</code> scheme.
                                 </p>
                              </li>
                              <li>
                                 <p>An application might choose to limit the number of URIs processed in a single run,
                                    for example it might process only the first 50 URIs in the collection; or it might
                                    present the URIs to the user and allow the user to select which of them need to be
                                    further processed.
                                 </p>
                              </li>
                              <li>
                                 <p>It allows the URIs to be modified before they are dereferenced, for example by
                                    adding or removing query parameters, or by redirecting the request to a local
                                    cache or to a mirror site.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p class="note">For some of these use cases, this assumes that the cost of calling
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> might be significant (for example, it might involving
                           retrieving all the documents in the collection over the network and parsing them).
                           This
                           will not necessarily be true of all implementations.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-unparsed-text"></a>14.6.5 fn:unparsed-text
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>The <code>fn:unparsed-text</code> function reads an external resource (for example, a
                           file) and returns a string representation of the resource.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:unparsed-text</code>(<code class="arg">$href</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                        <div class="proto"><code class="function">fn:unparsed-text</code>(<code class="arg">$href</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$encoding</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The <code>$href</code> argument <span class="verb">must</span> be a string in the form of a URI
                           reference, which <span class="verb">must</span> contain no fragment identifier, and
                           <span class="verb">must</span> identify a resource for which a string representation is
                           available. If the URI is a relative URI reference, then it is resolved relative to
                           the
                           <b>static base URI</b> property from the static context.
                        </p>
                        <p>The mapping of URIs to the string representation of a resource is the mapping defined
                           in
                           the <a href="https://www.w3.org/TR/xpath-31/#dt-available-text-resources">available text
                              resources</a><sup><small>XP31</small></sup> component of the dynamic context.
                        </p>
                        <p>If the value of the <code>$href</code> argument is an empty sequence, the function
                           returns an empty sequence.
                        </p>
                        <p>The <code>$encoding</code> argument, if present, is the name of an encoding. The values
                           for this attribute follow the same rules as for the <code>encoding</code> attribute in
                           an XML declaration. The only values which every <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation<span class="arrow">·</span></a> is <span class="verb">required</span> to recognize are
                           <code>utf-8</code> and <code>utf-16</code>.
                        </p>
                        <p>The encoding of the external resource is determined as follows:</p>
                        <ol class="enumar">
                           <li>
                              <p>external encoding information is used if available, otherwise</p>
                           </li>
                           <li>
                              <p>if the media type of the resource is <code>text/xml</code> or
                                 <code>application/xml</code> (see <a href="https://www.w3.org/TR/xpath-functions-31/#rfc2376">[RFC 2376]</a>), or if it matches
                                 the conventions <code>text/*+xml</code> or <code>application/*+xml</code> (see
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7303">[RFC 7303]</a> and/or its successors), then the encoding is recognized
                                 as specified in <a href="https://www.w3.org/TR/xpath-functions-31/#xml">[Extensible Markup Language (XML) 1.0 (Fifth Edition)]</a>, otherwise
                              </p>
                           </li>
                           <li>
                              <p>the value of the <code>$encoding</code> argument is used if present, otherwise
                              </p>
                           </li>
                           <li>
                              <p>the processor <span class="verb">may</span> use <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> heuristics to determine the likely encoding,
                                 otherwise
                              </p>
                           </li>
                           <li>
                              <p>UTF-8 is assumed.</p>
                           </li>
                        </ol>
                        <p>The result of the function is a string containing the string representation of the
                           resource retrieved using the URI.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOUT1170" title="err:FOUT1170">err:FOUT1170</a>] if <code>$href</code>
                           contains a fragment identifier, <span>or if it cannot be resolved
                              to an absolute URI (for example, because the base-URI property in the static context
                              is absent), 
                              </span>or if it cannot be used to retrieve the string
                           representation of a resource. 
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOUT1190" title="err:FOUT1190">err:FOUT1190</a>] if the value of the
                           <code>$encoding</code> argument is not a valid encoding name, if the <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>processor<span class="arrow">·</span></a> does not support the specified encoding, if
                           the string representation of the retrieved resource contains octets that cannot be
                           decoded into Unicode <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> using the specified
                           encoding, or if the resulting characters are not permitted XML characters.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOUT1200" title="err:FOUT1200">err:FOUT1200</a>] if <code>$encoding</code>
                           is absent and the <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>processor<span class="arrow">·</span></a> cannot infer the
                           encoding using external information and the encoding is not UTF-8.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If it is appropriate to use a base URI other than the dynamic base URI (for example,
                           when resolving a relative URI reference read from a source document) then it is
                           advisable to resolve the relative URI reference using the <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><code>fn:resolve-uri</code></a>
                           function before passing it to the <code>fn:unparsed-text</code> function.
                        </p>
                        <p class="note">There is no essential relationship between the sets of URIs accepted by the two
                           functions <code>fn:unparsed-text</code> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> (a URI accepted by one
                           may or may not be accepted by the other), and if a URI is accepted by both there is
                           no
                           essential relationship between the results (different resource representations are
                           permitted by the architecture of the web).
                        </p>
                        <p class="note">There are no constraints on the MIME type of the resource.</p>
                        <p class="note">The fact that the resolution of URIs is defined by a mapping in the dynamic context
                           means that in effect, various aspects of the behavior of this function are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. Implementations may provide external configuration
                           options that allow any aspect of the processing to be controlled by the user. In
                           particular:
                        </p>
                        <div class="note">
                           <ul>
                              <li>
                                 <p>The set of URI schemes that the implementation recognizes is
                                    implementation-defined. Implementations may allow the mapping of URIs to resources
                                    to be configured by the user, using mechanisms such as catalogs or user-written
                                    URI handlers.
                                 </p>
                              </li>
                              <li>
                                 <p>The handling of media types is implementation-defined.</p>
                              </li>
                              <li>
                                 <p>Implementations may provide user-defined error handling options that allow
                                    processing to continue following an error in retrieving a resource, or in reading
                                    its content. When errors have been handled in this way, the function may return a
                                    fallback document provided by the error handler.
                                 </p>
                              </li>
                              <li>
                                 <p>Implementations may provide user options that relax the requirement for the
                                    function to return deterministic results.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p class="note">The rules for determining the encoding are chosen for consistency with <a href="https://www.w3.org/TR/xpath-functions-31/#xinclude">[XML Inclusions (XInclude) Version 1.0 (Second Edition)]</a>. Files with an XML media type are treated specially because there
                           are use cases for this function where the retrieved text is to be included as unparsed
                           XML within a CDATA section of a containing document, and because processors are likely
                           to be able to reuse the code that performs encoding detection for XML external
                           entities.
                        </p>
                        <p class="note">If the text file contains characters such as <code>&lt;</code> and <code>&amp;</code>,
                           these will typically be output as <code>&amp;lt;</code> and <code>&amp;amp;</code> if
                           the string is serialized as XML or HTML. If these characters actually represent markup
                           (for example, if the text file contains HTML), then an XSLT stylesheet can attempt
                           to
                           write them as markup to the output file using the <code>disable-output-escaping</code>
                           attribute of the <code>xsl:value-of</code> instruction. Note, however, that XSLT
                           implementations are not required to support this feature.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>This XSLT example attempts to read a file containing 'boilerplate' HTML and copy it
                              directly to the serialized output file:
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;xsl:output method="html"/&gt;

&lt;xsl:template match="/"&gt;
  &lt;xsl:value-of select="unparsed-text('header.html', 'iso-8859-1')"
                disable-output-escaping="yes"/&gt;
  &lt;xsl:apply-templates/&gt;
  &lt;xsl:value-of select="unparsed-text('footer.html', 'iso-8859-1')"
                disable-output-escaping="yes"/&gt;
&lt;/xsl:template&gt;
</pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-unparsed-text-lines"></a>14.6.6 fn:unparsed-text-lines
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>The <code>fn:unparsed-text-lines</code> function reads an external resource (for
                           example, a file) and returns its contents as a sequence of strings, one for each line
                           of
                           text in the string representation of the resource.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:unparsed-text-lines</code>(<code class="arg">$href</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:unparsed-text-lines</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$href</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$encoding</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The <code>unparsed-text-lines</code> function reads an external resource (for example, a
                           file) and returns its string representation as a sequence of strings, separated at
                           newline boundaries. 
                        </p>
                        <p>The result of the single-argument function is the same as the result of the expression
                           <code>fn:tokenize(fn:unparsed-text($href), '\r\n|\r|\n')[not(position()=last() and
                              .='')]</code>. The result of the two-argument function is the same as the result of
                           the expression <code>fn:tokenize(fn:unparsed-text($href, $encoding),
                              '\r\n|\r|\n')[not(position()=last() and .='')]</code>. 
                        </p>
                        <p>The result is thus a sequence of strings containing the text of the resource retrieved
                           using the URI, each string representing one line of text. Lines are separated by one
                           of
                           the sequences x0A, x0D, or x0Dx0A. The characters representing the newline are not
                           included in the returned strings. If there are two adjacent newline sequences, a
                           zero-length string will be returned to represent the empty line; but if the external
                           resource ends with the sequence x0A, x0D, or x0Dx0A, the result will be as if this
                           final
                           line ending were not present.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>Error conditions are the same as for the <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">See the notes for <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a>.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-unparsed-text-available"></a>14.6.7 fn:unparsed-text-available
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Because errors in evaluating the <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function are
                           non-recoverable, these two functions are provided to allow an application to determine
                           whether a call with particular arguments would succeed.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:unparsed-text-available</code>(<code class="arg">$href</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:unparsed-text-available</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$href</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$encoding</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The <code>fn:unparsed-text-available</code> function determines whether a call
                           on the <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function with identical arguments would
                           return a string.
                        </p>
                        <p>If the first argument is an empty sequence, the function returns false. </p>
                        <p>In other cases, the function returns true if a call on
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> with the same arguments would succeed, and
                           false if a call on <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> with the same arguments would
                           fail with a non-recoverable dynamic error.
                        </p>
                        <p>The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> and
                           <code>fn:unparsed-text-available</code> have the same requirement for
                           <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>determinism<span class="arrow">·</span></a> as the functions
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc-available"><code>fn:doc-available</code></a>. This means that unless the
                           user has explicitly stated a requirement for a reduced level of determinism, either
                           of
                           these functions if called twice with the same arguments during the course of a
                           transformation <span class="verb">must</span> return the same results each time; moreover, the
                           results of a call on <code>fn:unparsed-text-available</code>
                           <span class="verb">must</span> be consistent with the results of a subsequent call on
                           <code>unparsed-text</code> with the same arguments.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This requires that the <code>fn:unparsed-text-available</code> function should
                           actually attempt to read the resource identified by the URI, and check that it is
                           correctly encoded and contains no characters that are invalid in XML. Implementations
                           may avoid the cost of repeating these checks for example by caching the validated
                           contents of the resource, to anticipate a subsequent call on the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> or <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines"><code>fn:unparsed-text-lines</code></a>
                           function. Alternatively, implementations may be able to rewrite an expression such
                           as
                           <code>if (unparsed-text-available(A)) then unparsed-text(A) else ...</code> to
                           generate a single call internally.
                        </p>
                        <p class="note">Since the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines"><code>fn:unparsed-text-lines</code></a> succeeds or fails under
                           exactly the same circumstances as <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a>, the
                           <code>fn:unparsed-text-available</code> function may equally be used to test
                           whether a call on <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text-lines"><code>fn:unparsed-text-lines</code></a> would succeed.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-environment-variable"></a>14.6.8 fn:environment-variable
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value of a system environment variable, if it exists.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:environment-variable</code>(<code class="arg">$name</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		environment variables.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The set of available <a href="https://www.w3.org/TR/xpath-31/#dt-environment-variables">environment
                              variables</a><sup><small>XP31</small></sup> is a set of (name, value) pairs forming part of the dynamic
                           context, in which the name is unique within the set of pairs. The name and value are
                           arbitrary strings.
                        </p>
                        <p>If the <code>$name</code> argument matches the name of one of these pairs, the function
                           returns the corresponding value.
                        </p>
                        <p>If there is no environment variable with a matching name, the function returns the
                           empty
                           sequence.
                        </p>
                        <p>The collation used for matching names is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>, but
                           must be the same as the collation used to ensure that the names of all environment
                           variables are unique.
                        </p>
                        <p>The function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, which means
                           that if it is called several times within the same <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>, with the same arguments, it must return the same
                           result.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">On many platforms, the term "environment variable" has a natural meaning in terms
                           of
                           facilities provided by the operating system. This interpretation of the concept does
                           not
                           exclude other interpretations, such as a mapping to a set of configuration parameters
                           in
                           a database system.
                        </p>
                        <p class="note">Environment variable names are usually case sensitive. Names are usually of the form
                           <code>(letter|_) (letter|_|digit)*</code>, but this varies by platform.
                        </p>
                        <p class="note">On some platforms, there may sometimes be multiple environment variables with the
                           same
                           name; in this case, it is implementation-dependent as to which is returned; see for
                           example <a href="https://www.w3.org/TR/xpath-functions-31/#POSIX.1-2008">[POSIX.1-2008]</a> (Chapter 8, Environment Variables). Implementations
                           <span class="verb">may</span> use prefixes or other naming conventions to disambiguate the
                           names.
                        </p>
                        <p class="note">The requirement to ensure that the function is deterministic means in practice that
                           the
                           implementation must make a snapshot of the environment variables at some time during
                           execution, and return values obtained from this snapshot, rather than using live values
                           that are subject to change at any time.
                        </p>
                        <p class="note">Operating system environment variables may be associated with a particular process,
                           while queries and stylesheets may execute across multiple processes (or multiple
                           machines). In such circumstances implementations <span class="verb">may</span> choose to
                           provide access to the environment variables associated with the process in which the
                           query or stylesheet processing was initiated.
                        </p>
                        <p class="note">Security advice: Queries from untrusted sources should not be permitted unrestricted
                           access to environment variables. For example, the name of the account under which
                           the
                           query is running may be useful information to a would-be intruder. An implementation
                           may
                           therefore choose to restrict access to the environment, or may provide a facility
                           to
                           make <code>fn:environment-variable</code> always return the empty sequence.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-available-environment-variables"></a>14.6.9 fn:available-environment-variables
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a list of environment variable names that are suitable for passing to
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable"><code>fn:environment-variable</code></a>, as a (possibly empty) sequence of strings.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:available-environment-variables</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		environment variables.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns a sequence of strings, being the names of the environment variables
                           in the dynamic context in some <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order.
                        </p>
                        <p>The function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>: that is, the
                           set of available environment variables does not vary during evaluation.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The function returns a list of strings, containing no duplicates.</p>
                        <p class="note">It is intended that the strings in this list should be suitable for passing to
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable"><code>fn:environment-variable</code></a>.
                        </p>
                        <p class="note">See also the note on security under the definition of the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable"><code>fn:environment-variable</code></a> function. If access to environment variables has
                           been disabled, <code>fn:available-environment-variables</code> always returns the empty
                           sequence.
                        </p>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="parsing-and-serializing"></a>14.7 Parsing and serializing
               </h3>
               <p>These functions convert between the lexical representation of XML and the tree representation.</p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a></td>
                        <td>This function takes as input an XML document represented as a string, and returns
                           the
                           document node at the root of an XDM tree representing the parsed document.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml-fragment"><code>fn:parse-xml-fragment</code></a></td>
                        <td>This function takes as input an XML external entity represented as a string, and returns
                           the document node at the root of an XDM tree representing the parsed document
                           fragment.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a></td>
                        <td>This function serializes the supplied input sequence <code>$arg</code> as described in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-xquery-serialization-31">[XSLT and XQuery Serialization 3.1]</a>, returning the serialized representation
                           of the sequence as a string.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-parse-xml"></a>14.7.1 fn:parse-xml
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>This function takes as input an XML document represented as a string, and returns
                           the
                           document node at the root of an XDM tree representing the parsed document.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:parse-xml</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">document-node(element(*))?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>The precise process used to construct the XDM instance is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. In particular, it is implementation-defined whether
                           DTD and/or schema validation is invoked, and it is implementation-defined whether
                           an XML
                           1.0 or XML 1.1 parser is used.
                        </p>
                        <p>The <b>static base URI</b> property from the static context of the <code>fn:parse-xml</code>
                           function call is used both as the base URI used by the XML parser to resolve relative
                           entity references within the document, and as the base URI of the document node that
                           is
                           returned.
                        </p>
                        <p>The document URI of the returned node is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>absent<span class="arrow">·</span></a>.
                        </p>
                        <p>The function is <em>not</em>
                           <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>: that is, if the function is called
                           twice with the same arguments, it is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> whether the same node is returned on both
                           occasions.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0006" title="err:FODC0006">err:FODC0006</a>] if the content of
                           <code>$arg</code> is not a well-formed and namespace-well-formed XML document.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0006" title="err:FODC0006">err:FODC0006</a>] if DTD-based validation is
                           carried out and the content of <code>$arg</code> is not valid against its DTD.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Since the XML document is presented to the parser as a string, rather than as a sequence
                           of octets, the encoding specified within the XML declaration has no meaning. If the
                           XML
                           parser accepts input only in the form of a sequence of octets, then the processor
                           must
                           ensure that the string is encoded as octets in a way that is consistent with rules
                           used
                           by the XML parser to detect the encoding.
                        </p>
                        <p class="note">The primary use case for this function is to handle input documents that contain nested
                           XML documents embedded within CDATA sections. Since the content of the CDATA section
                           are
                           exposed as text, the receiving query or stylesheet may pass this text to the
                           <code>fn:parse-xml</code> function to create a tree representation of the nested
                           document.
                        </p>
                        <p class="note">Similarly, nested XML within comments is sometimes encountered, and lexical XML is
                           sometimes returned by extension functions, for example, functions that access web
                           services or read from databases.
                        </p>
                        <p class="note">A use case arises in XSLT where there is a need to preprocess an input document before
                           parsing. For example, an application might wish to edit the document to remove its
                           DOCTYPE declaration. This can be done by reading the raw text using the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function, editing the resulting string, and then
                           passing it to the <code>fn:parse-xml</code> function.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:parse-xml("&lt;alpha&gt;abcd&lt;/alpha&gt;")</code> returns a newly
                              created document node, having an <code>alpha</code> element as its only child; the
                              <code>alpha</code> element in turn is the parent of a text node whose string value
                              is <code>"abcd"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-parse-xml-fragment"></a>14.7.2 fn:parse-xml-fragment
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>This function takes as input an XML external entity represented as a string, and returns
                           the document node at the root of an XDM tree representing the parsed document
                           fragment.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:parse-xml-fragment</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">document-node()?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$arg</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>The input must be a namespace-well-formed external general parsed entity. More
                           specifically, it must be a string conforming to the production rule <a href="https://www.w3.org/TR/REC-xml/#NT-extParsedEnt">extParsedEnt</a><sup><small>xml</small></sup> in <a href="https://www.w3.org/TR/xpath-functions-31/#xml">[Extensible Markup Language (XML) 1.0 (Fifth Edition)]</a>, it must contain
                           no entity references other than references to predefined entities, and it must satisfy
                           all the rules of <a href="https://www.w3.org/TR/xpath-functions-31/#xml-names">[Namespaces in XML]</a> for namespace-well-formed documents with
                           the exception that the rule requiring it to be a well-formed document is replaced
                           by the
                           rule requiring it to be a well-formed external general parsed entity.
                        </p>
                        <p>The string is parsed to form a sequence of nodes which become children of the new
                           document node, in the same way as the content of any element is converted into a
                           sequence of children for the resulting element node.
                        </p>
                        <p>Schema validation is <em>not</em> invoked, which means that the nodes in the
                           returned document will all be untyped.
                        </p>
                        <p>The precise process used to construct the XDM instance is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. In particular, it is implementation-defined whether
                           an XML 1.0 or XML 1.1 parser is used.
                        </p>
                        <p>The <b>static base URI</b> from the static context of the <code>fn:parse-xml-fragment</code>
                           function call is used as the base URI of the document node that is returned.
                        </p>
                        <p>The document URI of the returned node is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>absent<span class="arrow">·</span></a>.
                        </p>
                        <p>The function is <em>not</em>
                           <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>: that is, if the function is called
                           twice with the same arguments, it is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> whether the same node is returned on both
                           occasions.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0006" title="err:FODC0006">err:FODC0006</a>] if the content of
                           <code>$arg</code> is not a well-formed external general parsed entity, if it contains
                           entity references other than references to predefined entities, or if a document that
                           incorporates this well-formed parsed entity would not be namespace-well-formed.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">See also the notes for the <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a> function.
                        </p>
                        <p class="note">The main differences between <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a> and
                           <code>fn:parse-xml-fragment</code> are that for <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a>, the
                           children of the resulting document node must contain exactly one element node and
                           no
                           text nodes, wheras for <code>fn:parse-xml-fragment</code>, the resulting document node
                           can have any number (including zero) of element and text nodes among its children.
                           An
                           additional difference is that the <em>text declaration</em> at the start of an
                           external entity has slightly different syntax from the <em>XML declaration</em> at
                           the start of a well-formed document.
                        </p>
                        <p class="note">Note that all whitespace outside the <em>text declaration</em> is significant,
                           including whitespace that precedes the first element node.
                        </p>
                        <p class="note">One use case for this function is to handle XML fragments stored in databases, which
                           frequently allow zero-or-more top level element nodes. Another use case is to parse
                           the
                           contents of a <code>CDATA</code> section embedded within another XML document.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression
                              <code>fn:parse-xml-fragment("&lt;alpha&gt;abcd&lt;/alpha&gt;&lt;beta&gt;abcd&lt;/beta&gt;")</code>
                              returns a newly created document node, having two elements named <code>alpha</code>
                              and <code>beta</code> as its children; each of these elements in turn is the parent
                              of a text node.
                           </p>
                           <p>The expression <code>fn:parse-xml-fragment("He was &lt;i&gt;so&lt;/i&gt; kind")</code>
                              returns a newly created document node having three children: a text node whose string
                              value is <code>"He was "</code>, an element node named <code>i</code> having a child
                              text node with string value <code>"so"</code>, and a text node whose string value is
                              <code>" kind"</code>.
                           </p>
                           <p>The expression <code>fn:parse-xml-fragment("")</code> returns a document node having
                              no children.
                           </p>
                           <p>The expression <code>fn:parse-xml-fragment(" ")</code> returns a document node whose
                              children comprise a single text node whose string value is a single space.
                           </p>
                           <p>The expression <code>fn:parse-xml-fragment('&lt;xml version="1.0" encoding="utf8"
                                 standalone="yes"?&gt;&lt;/a&gt;")</code> results in a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0006" title="err:FODC0006">err:FODC0006</a>] because the "standalone" keyword is not permitted in the text
                              declaration that appears at the start of an external general parsed entity. (Thus,
                              it
                              is not the case that any input accepted by the <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a> function
                              will also be accepted by <code>fn:parse-xml-fragment</code>.)
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-serialize"></a>14.7.3 fn:serialize
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>This function serializes the supplied input sequence <code>$arg</code> as described in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-xquery-serialization-31">[XSLT and XQuery Serialization 3.1]</a>, returning the serialized representation
                           of the sequence as a string.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:serialize</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                        <div class="proto"><code class="function">fn:serialize</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$params</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The value of the first argument <code>$arg</code> acts as the input sequence to the serialization process,
                           which starts with sequence normalization.
                        </p>
                        <p>The second argument <code>$params</code>, if present, provides serialization parameters. These may be supplied in either 
                           of two forms:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>As an <code>output:serialization-parameters</code>
                                 element, having the format described in <a href="https://www.w3.org/TR/xslt-xquery-serialization-31/#serparams-in-xdm-instance">Section 
                                    
                                    3.1 Setting Serialization Parameters by Means of a Data Model Instance
                                    </a><sup><small>SER31</small></sup>. In this case the type of the supplied
                                 argument must match the required type <code>element(output:serialization-parameters)</code>.
                              </p>
                           </li>
                           <li>
                              <p>As a map. In this case the type of the supplied argument must match the required type
                                 <code>map(*)</code></p>
                           </li>
                        </ol>
                        <p>The single-argument version of this function has the same effect as the two-argument
                           version called with <code>$params</code> set to an empty sequence. This in turn is the
                           same as the effect of passing an <code>output:serialization-parameters</code> element
                           with no child elements.
                        </p>
                        <p>The final stage of serialization, that is, encoding, is skipped. If the serializer
                           does
                           not allow this phase to be skipped, then the sequence of octets returned by the
                           serializer is decoded into a string by reversing the character encoding performed
                           in the
                           final stage.
                        </p>
                        <p>If the second argument is omitted, or is supplied in the form of an <code>output:serialization-parameters</code>
                           element, then the values of any serialization parameters that are not explicitly specified
                           is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>,
                           and may depend on the context.
                        </p>
                        <p>If the second argument is supplied as a map, then the <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a>
                           apply. In this case:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>Each entry in the map defines one serialization parameter.</p>
                           </li>
                           <li>
                              <p>The key of the entry is an <code>xs:string</code> value in the cases of parameter names defined in these specifications, or an
                                 <code>xs:QName</code> (with non-absent namespace) in the case of implementation-defined serialization parameters.
                              </p>
                           </li>
                           <li>
                              <p>The required type of each parameter, and its default value, are defined by the following
                                 table. The default
                                 value is used when the map contains no entry for the parameter in question, and also
                                 when an entry is present, with the
                                 empty sequence as its value. The table also indicates how the value of the map entry
                                 is to be interpreted in cases
                                 where further explanation is needed.
                              </p>
                           </li>
                        </ol>
                        <div class="overlarge"><table class="no-code-break data">
                           <thead>
                              <tr>
                                 <th>Parameter</th>
                                 <th>Required type</th>
                                 <th>Interpretation</th>
                                 <th>Default Value</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td><code>allow-duplicate-names</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>no</code></td>
                              </tr>
                              <tr>
                                 <td><code>byte-order-mark</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>no</code></td>
                              </tr>
                              <tr>
                                 <td><code>cdata-section-elements</code></td>
                                 <td><code>xs:QName*</code></td>
                                 <td></td>
                                 <td><code>()</code></td>
                              </tr>
                              <tr>
                                 <td><code>doctype-public</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td>Zero-length string and <code>()</code> both represent "absent"
                                 </td>
                                 <td>absent</td>
                              </tr>
                              <tr>
                                 <td><code>doctype-system</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td>Zero-length string and <code>()</code> both represent "absent"
                                 </td>
                                 <td>absent</td>
                              </tr>
                              <tr>
                                 <td><code>encoding</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td></td>
                                 <td><code>utf-8</code></td>
                              </tr>
                              <tr>
                                 <td><code>escape-uri-attributes</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>yes</code></td>
                              </tr>
                              <tr>
                                 <td><code>html-version</code></td>
                                 <td><code>xs:decimal?</code></td>
                                 <td></td>
                                 <td><code>5</code></td>
                              </tr>
                              <tr>
                                 <td><code>include-content-type</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>yes</code></td>
                              </tr>
                              <tr>
                                 <td><code>indent</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>no</code></td>
                              </tr>
                              <tr>
                                 <td><code>item-separator</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td></td>
                                 <td>absent</td>
                              </tr>
                              <tr>
                                 <td><code>json-node-output-method</code></td>
                                 <td><code>union(xs:string, xs:QName)?</code></td>
                                 <td>See Notes 1, 2</td>
                                 <td><code>xml</code></td>
                              </tr>
                              <tr>
                                 <td><code>media-type</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td></td>
                                 <td>(a media type suitable for the chosen <code>method</code>)
                                 </td>
                              </tr>
                              <tr>
                                 <td><code>method</code></td>
                                 <td><code>union(xs:string, xs:QName)?</code></td>
                                 <td>See Notes 1, 2</td>
                                 <td><code>xml</code></td>
                              </tr>
                              <tr>
                                 <td><code>normalization-form</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td></td>
                                 <td><code>none</code></td>
                              </tr>
                              <tr>
                                 <td><code>omit-xml-declaration</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>yes</code></td>
                              </tr>
                              <tr>
                                 <td><code>standalone</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no", <code>()</code> means "omit"
                                 </td>
                                 <td><code>omit</code></td>
                              </tr>
                              <tr>
                                 <td><code>suppress-indentation</code></td>
                                 <td><code>xs:QName*</code></td>
                                 <td></td>
                                 <td><code>()</code></td>
                              </tr>
                              <tr>
                                 <td><code>undeclare-prefixes</code></td>
                                 <td><code>xs:boolean?</code></td>
                                 <td><code>true()</code> means "yes", <code>false()</code> means "no"
                                 </td>
                                 <td><code>no</code></td>
                              </tr>
                              <tr>
                                 <td><code>use-character-maps</code></td>
                                 <td><code>map(xs:string, xs:string)?</code></td>
                                 <td>See Note 3</td>
                                 <td><code>map{}</code></td>
                              </tr>
                              <tr>
                                 <td><code>version</code></td>
                                 <td><code>xs:string?</code></td>
                                 <td></td>
                                 <td><code>1.0</code></td>
                              </tr>
                           </tbody>
                        </table></div>
                        <p>Notes to the table:</p>
                        <ol class="enumar">
                           <li>
                              <p>The notation <code>union(A, B)</code> is used to represent a union type whose member types are <code>A</code>
                                 and <code>B</code>.
                              </p>
                           </li>
                           <li>
                              <p>If an <code>xs:QName</code> is supplied <span>for the <code>method</code> or <code>json-node-output-method</code> 
                                    options,</span> then it must have a non-absent namespace URI. This
                                 means that system-defined serialization methods such as <code>xml</code> and <code>json</code>
                                 are defined as strings, not as <code>xs:QName</code> values.
                              </p>
                           </li>
                           <li>
                              <p><span>For the <code>use-character-maps</code> option</span>, the value is a map, whose keys 
                                 are the characters to be mapped (as <code>xs:string</code> instances),
                                 and whose corresponding values are the strings to be substituted for these characters.
                                 
                                 
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup> occurs if the second argument
                           is present and does not match either of the types <code>element(output:serialization-parameters)?</code>
                           or <code>map(*)</code>.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>This is defined as a type error so that it can be enforced via the function signature
                              by implementations
                              that generalize the type system in a suitable way.
                           </p>
                        </div>
                        <p>If the host language makes serialization an optional feature and the implementation
                           does
                           not support serialization, then a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0010" title="err:FODC0010">err:FODC0010</a>] is
                           raised.
                        </p>
                        <p>The serialization process will raise an error if <code>$arg</code> is an attribute or
                           namespace node.
                        </p>
                        <p>When the second argument is supplied as a map, 
                           and the supplied value is of the wrong type for the particular parameter, for example
                           if the value of <code>indent</code>
                           is a string rather than a boolean, then as defined by the <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a>,
                           a type error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup> is raised. 
                           If the value is of the correct type, but does not satisfy the rules for that
                           parameter defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-xquery-serialization-31">[XSLT and XQuery Serialization 3.1]</a>, then a dynamic error 
                           [<a href="https://www.w3.org/TR/xslt-xquery-serialization-31/#ERRSEPM0016" title="err:SEPM0016">err:SEPM0016</a>]<sup><small>SER31</small></sup> is raised. (For example, this occurs if the map supplied to
                           <code>use-character-maps</code> includes a key that is a string whose length is not one (1)).
                        </p>
                        <p>If any serialization error occurs, including the detection of an invalid value for
                           a
                           serialization parameter as described above, this results in the <code>fn:serialize</code> call failing with
                           a dynamic error.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">One use case for this function arises when there is a need to construct an XML document
                           containing nested XML documents within a CDATA section (or on occasions within a
                           comment). See <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a> for further details.
                        </p>
                        <p class="note">Another use case arises when there is a need to call an extension function that expects
                           a lexical XML document as input.
                        </p>
                        <p class="note">There are also use cases where the application wants to post-process the output of
                           a
                           query or transformation, for example by adding an internal DTD subset, or by inserting
                           proprietary markup delimiters such as the <code>&lt;% ... %&gt;</code> used by some
                           templating languages.
                        </p>
                        <p class="note">The ability to specify the serialization parameters in an <code>output:serialization-parameters</code>
                           element provides backwards compatibility with the 3.0 version of this specification;
                           the ability to
                           use a map takes advantage of new features in the 3.1 version. The default parameter
                           values are
                           implementation-defined when an <code>output:serialization-parameters</code>
                           element is used (or when the argument is omitted), but are fixed by this specification
                           in the
                           case where a map (including an empty map) is supplied for the argument.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>Given the variables:</p>
                           <div class="exampleInner"><pre class="small">let $params := 
&lt;output:serialization-parameters 
        xmlns:output="http://www.w3.org/2010/xslt-xquery-serialization"&gt;
  &lt;output:omit-xml-declaration value="yes"/&gt;
&lt;/output:serialization-parameters&gt;
         </pre></div>
                           <div class="exampleInner"><pre>let $data := 
&lt;a b="3"/&gt;
         </pre></div>
                           <p>The following call might produce the output shown:</p>
                           <p>The expression <code>fn:serialize($data, $params)</code> returns <code>'&lt;a b="3"/&gt;'</code>.
                           </p>
                           <p>The following call would also produce the output shown (though the second argument
                              could equally well be supplied
                              as an empty map (<code>map{}</code>), since both parameters are given their default values):
                           </p>
                           <p>The expression <code>fn:serialize($data, map{"method":"xml", "omit-xml-declaration":true()})</code> returns <code>'&lt;a b="3"/&gt;'</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="context"></a>15 Context functions
            </h2>
            <p>The following functions are defined to obtain information from the 
               static or dynamic context.
            </p>
            <div class="overlarge"><table class="index">
               <thead>
                  <tr>
                     <th>Function</th>
                     <th>Meaning</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-position"><code>fn:position</code></a></td>
                     <td>Returns the context position from the dynamic context.</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-last"><code>fn:last</code></a></td>
                     <td>Returns the context size from the dynamic context.</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime"><code>fn:current-dateTime</code></a></td>
                     <td>Returns the current date and time (with timezone).</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-current-date"><code>fn:current-date</code></a></td>
                     <td>Returns the current date.</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-current-time"><code>fn:current-time</code></a></td>
                     <td>Returns the current time.</td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-implicit-timezone"><code>fn:implicit-timezone</code></a></td>
                     <td>Returns the value of the implicit timezone property from the dynamic context. </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-default-collation"><code>fn:default-collation</code></a></td>
                     <td>Returns the value of the default collation property from the static context. </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-default-language"><code>fn:default-language</code></a></td>
                     <td>Returns the value of the default language property from the dynamic context. </td>
                  </tr>
                  <tr>
                     <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-static-base-uri"><code>fn:static-base-uri</code></a></td>
                     <td>This function returns the value of the <b>static base URI</b> property from the static
                        context.
                     </td>
                  </tr>
               </tbody>
            </table></div>
            <div class="div2">
               
               <h3><a id="func-position"></a>15.1 fn:position
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the context position from the dynamic context.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:position</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the context position from the dynamic context. (See <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                           
                           C.2 Dynamic Context Components
                           </a><sup><small>XP31</small></sup>.)
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup> if
                        the context item is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-last"></a>15.2 fn:last
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the context size from the dynamic context.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:last</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>. 
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the context size from the dynamic context. (See <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                           
                           C.2 Dynamic Context Components
                           </a><sup><small>XP31</small></sup>.)
                     </p>
                  </dd>
                  <dt class="label">Error Conditions</dt>
                  <dd>
                     <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-31/#ERRXPDY0002" title="err:XPDY0002">err:XPDY0002</a>]<sup><small>XP31</small></sup> if
                        the context <span>size</span> is <a href="https://www.w3.org/TR/xpath-datamodel-31/#dt-absent">absent</a><sup><small>DM31</small></sup>.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">Under most circumstances, the context size is absent only if the context item is absent.
                        However, XSLT 3.0 with
                        streaming defines situations in which the context item and context position are known,
                        but the context size is unknown.
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p>The expression <code>(1 to 20)[fn:last() - 1]</code> returns <code>19</code>.
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-current-dateTime"></a>15.3 fn:current-dateTime
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the current date and time (with timezone).</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:current-dateTime</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTimeStamp</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		implicit timezone.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the current dateTime (with timezone) from the dynamic context. (See <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                           
                           C.2 Dynamic Context Components
                           </a><sup><small>XP31</small></sup>.) This is an
                        <code>xs:dateTime</code> that is current at some time during the evaluation of a
                        query or transformation in which <code>fn:current-dateTime</code> is executed.
                     </p>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. The precise instant during the query
                        or transformation represented by the value of <code>fn:current-dateTime()</code> is
                        <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                     </p>
                     <p>If the implementation supports data types from XSD 1.1 then the returned value will
                        be
                        an instance of <code>xs:dateTimeStamp</code>. Otherwise, the only guarantees are that it
                        will be an instance of <code>xs:dateTime</code> and will have a timezone component.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The returned <code>xs:dateTime</code> will always have an associated timezone, which
                        will always be the same as the implicit timezone in the dynamic context
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p><code>fn:current-dateTime()</code> returns an <code>xs:dateTimeStamp</code>
                           corresponding to the current date and time. For example, a call of
                           <code>fn:current-dateTime()</code> might return
                           <code>2004-05-12T18:17:15.125Z</code> corresponding to the current time on May 12,
                           2004 in timezone <code>Z</code>. 
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-current-date"></a>15.4 fn:current-date
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the current date.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:current-date</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:date</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		implicit timezone.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns <code>xs:date(fn:current-dateTime())</code>. This is an <code>xs:date</code>
                        (with timezone) that is current at some time during the evaluation of a query or
                        transformation in which <code>fn:current-date</code> is executed.
                     </p>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. The precise instant during the query
                        or transformation represented by the value of <code>fn:current-date</code> is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The returned date will always have an associated timezone, which will always be the
                        same
                        as the implicit timezone in the dynamic context
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p><code>fn:current-date()</code> returns an <code>xs:date</code> corresponding to the
                           current date. For example, a call of <code>fn:current-date()</code> might return
                           <code>2004-05-12+01:00</code>. 
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-current-time"></a>15.5 fn:current-time
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the current time.</p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:current-time</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:time</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		implicit timezone.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns <code>xs:time(fn:current-dateTime())</code>. This is an <code>xs:time</code>
                        (with timezone) that is current at some time during the evaluation of a query or
                        transformation in which <code>fn:current-time</code> is executed.
                     </p>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. The precise instant during the query
                        or transformation represented by the value of <code>fn:current-time()</code> is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The returned time will always have an associated timezone, which will always be the
                        same
                        as the implicit timezone in the dynamic context
                     </p>
                  </dd>
                  <dt class="label">Examples</dt>
                  <dd>
                     <div class="example">
                        <p><code>fn:current-time()</code> returns an <code>xs:time</code> corresponding to the
                           current time. For example, a call of <code>fn:current-time()</code> might return
                           <code>23:17:00.000-05:00</code>. 
                        </p>
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-implicit-timezone"></a>15.6 fn:implicit-timezone
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the value of the implicit timezone property from the dynamic context. </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:implicit-timezone</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		implicit timezone.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the value of the implicit timezone property from the dynamic context. Components
                        of the dynamic context are described in <a href="https://www.w3.org/TR/xpath-31/#id-xp-evaluation-context-components">Section 
                           
                           C.2 Dynamic Context Components
                           </a><sup><small>XP31</small></sup>.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-default-collation"></a>15.7 fn:default-collation
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the value of the default collation property from the static context. </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:default-collation</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		collations.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the value of the default collation property from the static context. Components
                        of the static context are described in <a href="https://www.w3.org/TR/xpath-31/#id-xp-static-context-components">Section 
                           
                           C.1 Static Context
                           Components
                           </a><sup><small>XP31</small></sup>.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The default collation property can never be absent. If it is not explicitly defined,
                        a
                        system defined default can be invoked. If this is not provided, the Unicode codepoint
                        collation (<code>http://www.w3.org/2005/xpath-functions/collation/codepoint</code>) is
                        used. 
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-default-language"></a>15.8 fn:default-language
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>Returns the value of the default language property from the dynamic context. </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:default-language</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:language</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		default language.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>Returns the value of the default language property from the dynamic context. Components
                        of the dynamic context are described in <a href="https://www.w3.org/TR/xpath-31/#eval_context">Section 
                           
                           2.1.2 Dynamic Context
                           </a><sup><small>XP31</small></sup>.
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">The default language property can never be absent. The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a>,
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><code>fn:format-date</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a>, and <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a>
                        are defined to use the default language if no explicit language is supplied. The default
                        language
                        may play a role in selection of a default collation, but this is not a requirement.
                     </p>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="func-static-base-uri"></a>15.9 fn:static-base-uri
               </h3>
               <dl>
                  <dt class="label">Summary</dt>
                  <dd>
                     <p>This function returns the value of the <b>static base URI</b> property from the static
                        context.
                     </p>
                  </dd>
                  <dt class="label">Signature</dt>
                  <dd>
                     <div class="proto"><code class="function">fn:static-base-uri</code>()<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                  </dd>
                  <dt class="label">Properties</dt>
                  <dd>
                     <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                        		static base URI.
                        	
                     </p>
                  </dd>
                  <dt class="label">Rules</dt>
                  <dd>
                     <p>The function returns the value of the <b>static base URI</b> property from the static context.
                        If the property is absent, the empty sequence is returned.
                     </p>
                     <p>Components of the static context are described in <a href="https://www.w3.org/TR/xpath-31/#static_context">Section 
                           
                           2.1.1 Static Context
                           </a><sup><small>XP31</small></sup> .
                     </p>
                  </dd>
                  <dt class="label">Notes</dt>
                  <dd>
                     <p class="note">XQuery 3.0 and XSLT 3.0 give an implementation freedom to use different base URIs
                        during
                        the static analysis phase and the dynamic evaluation phase, that is, for compile-time
                        and run-time resources respectively. This is appropriate when the implementation allows
                        the output of static analysis (a "compiled" query or stylesheet) to be deployed for
                        execution
                        to a different location from the one where static analysis took place. In this situation,
                        the
                        <code>fn:static-base-uri</code> function should return a URI suitable for locating
                        resources needed during dynamic evaluation.
                     </p>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="higher-order-functions"></a>16 Higher-order functions
            </h2>
            <div class="div2">
               
               <h3><a id="functions-on-functions"></a>16.1 Functions on functions
               </h3>
               <p>The functions included in this section operate on function items, that is, values
                  referring to a function.
               </p>
               <p><span class="termdef"><a id="dt-higher-order"></a>[Definition]  Functions that accept functions among their arguments,
                     or that return functions in their result, are described in this specification as <b>higher-order</b>
                     functions.</span> Some host languages may exclude higher-order functions from the set of functions
                  that they support, or may include such functions in an optional conformance feature.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>Some functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> allow the option of supplying a callback function
                     for example to define exception behavior. Where this is not essential to the use of
                     the function,
                     the function has not been classified as higher-order for this purpose; in applications
                     where function items
                     cannot be created, these particular options will not be available.
                  </p>
               </div>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a></td>
                        <td>Returns the function having a given name and arity, if there is one.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-function-name"><code>fn:function-name</code></a></td>
                        <td>Returns the name of the function identified by a function item.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-function-arity"><code>fn:function-arity</code></a></td>
                        <td>Returns the arity of the function identified by a function item.</td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-function-lookup"></a>16.1.1 fn:function-lookup
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the function having a given name and arity, if there is one.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:function-lookup</code>(<code class="arg">$name</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:QName</code>, <code class="arg">$arity</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">function(*)?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-dependent"><span class="arrow">·</span>focus-dependent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>A call to <code>fn:function-lookup</code> returns the function obtained by looking up
                           the expanded QName supplied as <code>$name</code> and the arity supplied as
                           <code>$arity</code> in the named functions component of the dynamic context
                           (specifically, the dynamic context of the call to <code>fn:function-lookup</code>).
                        </p>
                        <p>Furthermore, if that function has an implementation-dependent implementation (see
                           note
                           below), then the implementation of the function returned by
                           <code>fn:function-lookup</code> is associated with the static and dynamic context of
                           the call to <code>fn:function-lookup</code>.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>The above rule deliberately uses the same wording as the corresponding rule for Named
                              Function References. The term "a function [with] an implementation-dependent
                              implementation" essentially means a function whose implementation is provided by the
                              language processor rather than by the stylesheet or query author. This rule is
                              therefore relevant to built-in functions and vendor-supplied extension functions
                              whose result depends on the context of the function call.
                           </p>
                        </div>
                        <p>Otherwise (if no known function can be identified by name and arity), an empty sequence
                           is returned.
                        </p>
                        <p>If the arguments to <code>fn:function-lookup</code> identify a function that is present
                           in the static context of the function call, the function will always return the same
                           function that a static reference to this function would bind to. If there is no such
                           function in the static context, then the results depend on what is present in the
                           dynamic context, which is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This function can be useful where there is a need to make a dynamic decision on which
                           of
                           several statically-known functions to call. It can thus be used as a substitute for
                           polymorphism, in the case where the application has been designed so several functions
                           implement the same interface.
                        </p>
                        <p class="note">The function can also be useful in cases where a query or stylesheet module is written
                           to work with alternative versions of a library module. In such cases the author of
                           the
                           main module might wish to test whether an imported library module contains or does
                           not
                           contain a particular function, and to call a function in that module only if it is
                           available in the version that was imported. A static call would cause a static error
                           if
                           the function is not available, whereas getting the function using
                           <code>fn:function-lookup</code> allows the caller to take fallback action in this
                           situation. 
                        </p>
                        <p class="note">If the function that is retrieved by <code>fn:function-lookup</code> is <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>, that is, if it has
                           dependencies on the static or dynamic context of its caller, the context that applies
                           is
                           the static and/or dynamic context of the call to the <code>fn:function-lookup</code>
                           function itself. The context thus effectively forms part of the closure of the returned
                           function. In practice this applies only where the target of
                           <code>fn:function-lookup</code> is a built-in function, because user-defined
                           functions never depend on the static or dynamic context of the function call. The
                           rule
                           applies recursively, since <code>fn:function-lookup</code> is itself a context-dependent
                           built-in function. 
                        </p>
                        <p class="note">These specifications do not define any circumstances in which the dynamic context
                           will
                           contain functions that are not present in the static context, but neither do they
                           rule
                           this out. For example an API <span class="verb">may</span> provide the ability to add functions
                           to the dynamic context. Equally, these specifications do not define any mechanism
                           for
                           creating context-dependent functions other than the built-in context-dependent
                           functions, but neither do they rule out the existence of such functions. 
                        </p>
                        <p class="note">The mere fact that a function exists and has a name does not of itself mean that the
                           function is present in the dynamic context. For example, functions obtained through
                           use of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> function are not added to the dynamic context.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:function-lookup(xs:QName('fn:substring'), 2)('abcd',
                                 2)</code> returns <code>'bcd'</code>.
                           </p>
                           <p>The expression <code>(fn:function-lookup(xs:QName('xs:dateTimeStamp'), 1),
                                 xs:dateTime#1)[1] ('2011-11-11T11:11:11Z')</code> returns an
                              <code>xs:dateTime</code> value set to the specified date, time, and timezone; if
                              the implementation supports XSD 1.1 then the result will be an instance of the
                              derived type <code>xs:dateTimeStamp</code>. The query is written to ensure that no
                              failure occurs when the implementation does not recognize the type
                              <code>xs:dateTimeStamp</code>.
                           </p>
                           <p>The expression <code>let $f := fn:function-lookup(xs:QName('zip:binary-entry'), 2)
                                 return if (exists($f)) then $f($href, $entry) else ()</code> returns the result of
                              calling <code>zip:binary-entry($href, $entry)</code> if the function is available, or
                              an empty sequence otherwise.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-function-name"></a>16.1.2 fn:function-name
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the name of the function identified by a function item.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:function-name</code>(<code class="arg">$func</code><code class="as">&nbsp;as&nbsp;</code><code class="type">function(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:QName?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$func</code> refers to a named function, <code>fn:function-name($func)</code>
                           returns the name of that function.
                        </p>
                        <p>Otherwise (<code>$func</code> refers to an anonymous function),
                           <code>fn:function-name($func)</code> returns an empty sequence.
                        </p>
                        <p>The prefix part of the returned QName is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:function-name(fn:substring#2)</code> returns <code>fn:QName("http://www.w3.org/2005/xpath-functions",
                                 "fn:substring")</code>. <em>(The namespace prefix of the returned QName is not
                                 predictable.)</em></p>
                           <p>The expression <code>fn:function-name(function($node){count($node/*)})</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-function-arity"></a>16.1.3 fn:function-arity
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the arity of the function identified by a function item.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:function-arity</code>(<code class="arg">$func</code><code class="as">&nbsp;as&nbsp;</code><code class="type">function(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The <code>fn:function-arity</code> function returns the arity (number of arguments) of
                           the function identified by <code>$func</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:function-arity(fn:substring#2)</code> returns <code>2</code>.
                           </p>
                           <p>The expression <code>fn:function-arity(function($node){name($node)})</code> returns <code>1</code>.
                           </p>
                           <p>The expression <code>let $initial := fn:substring(?, 1, 1) return
                                 fn:function-arity($initial)</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="basic-hofs"></a>16.2 Basic higher-order functions
               </h3>
               <p>The following functions take function items as an argument.</p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-for-each"><code>fn:for-each</code></a></td>
                        <td>Applies the function item <var>$action</var> to every item from the sequence <var>$seq</var>
                           in turn, returning the concatenation of the resulting sequences in order.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-filter"><code>fn:filter</code></a></td>
                        <td>Returns those items from the sequence <var>$seq</var> for which the supplied function
                           <var>$f</var> returns true.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-fold-left"><code>fn:fold-left</code></a></td>
                        <td>Processes the supplied sequence from left to right, applying the supplied function
                           repeatedly to each item in turn, together with an accumulated result value.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-fold-right"><code>fn:fold-right</code></a></td>
                        <td>Processes the supplied sequence from right to left, applying the supplied function
                           repeatedly to each item in turn, together with an accumulated result value.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-for-each-pair"><code>fn:for-each-pair</code></a></td>
                        <td>Applies the function item <var>$action</var> to successive pairs of items taken one from
                           <var>$seq1</var> and one from <var>$seq2</var>, returning the concatenation of the
                           resulting sequences in order.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-sort"><code>fn:sort</code></a></td>
                        <td>Sorts a supplied sequence, based on the value of a sort key supplied as a function.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-apply"><code>fn:apply</code></a></td>
                        <td>Makes a dynamic call on a function with an argument list supplied in the form of an
                           array.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>With all these functions, if the caller-supplied function fails with a dynamic error,
                  this error is propagated as an error from the higher-order function itself.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-for-each"></a>16.2.1 fn:for-each
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Applies the function item <var>$action</var> to every item from the sequence <var>$seq</var>
                           in turn, returning the concatenation of the resulting sequences in order.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:for-each</code>(<code class="arg">$seq</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$action</code><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following implementation in XQuery:</p>
                        <div class="exampleInner"><pre class="small">declare function fn:for-each($seq, $action) {
  if (fn:empty($seq))
  then ()
  else ($action(fn:head($seq)), fn:for-each(fn:tail($seq), $action))
};</pre></div>
                        <p>or its equivalent in XSLT:</p>
                        <div class="exampleInner"><pre class="small">&lt;xsl:function name="fn:for-each"&gt;
  &lt;xsl:param name="seq"/&gt;
  &lt;xsl:param name="action"/&gt;
  &lt;xsl:if test="fn:exists($seq)"&gt;
    &lt;xsl:sequence select="$action(fn:head($seq)), fn:for-each(fn:tail($seq), $action)"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;
         </pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The function call <code>fn:for-each($SEQ, $F)</code> is equivalent to the expression
                           <code>for $i in $SEQ return $F($i)</code>, assuming that ordering mode is
                           <code>ordered</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:for-each(1 to 5, function($a) { $a * $a })</code> returns <code>(1, 4, 9, 16, 25)</code>.
                           </p>
                           <p>The expression <code>fn:for-each(("john", "jane"),
                                 fn:string-to-codepoints#1)</code> returns <code>(106, 111, 104, 110, 106, 97, 110, 101)</code>.
                           </p>
                           <p>The expression <code>fn:for-each(("23", "29"), xs:int#1)</code> returns <code>(23, 29)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-filter"></a>16.2.2 fn:filter
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns those items from the sequence <var>$seq</var> for which the supplied function
                           <var>$f</var> returns true.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:filter</code>(<code class="arg">$seq</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$f</code><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()) as xs:boolean</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following implementation in XQuery:</p>
                        <div class="exampleInner"><pre class="small">declare function fn:filter(
        $seq as item()*,
        $f as function(item()) as xs:boolean)
        as item()* {
  if (fn:empty($seq))
  then ()
  else ( fn:head($seq)[$f(.) eq fn:true()], 
         fn:filter(fn:tail($seq), $f)
       )
};</pre></div>
                        <p>or its equivalent in XSLT:</p>
                        <div class="exampleInner"><pre class="small">&lt;xsl:function name="fn:filter" as="item()*"&gt;
  &lt;xsl:param name="seq" as="item()*"/&gt;
  &lt;xsl:param name="f" as="function(item()) as xs:boolean"/&gt;
  &lt;xsl:if test="fn:exists($seq)"&gt;
    &lt;xsl:sequence select="fn:head($seq)[$f(.) eq fn:true()], fn:filter(fn:tail($seq), $f)"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;
         </pre></div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>As a consequence of the function signature and the function calling rules, a type
                           error
                           occurs if the supplied function <var>$f</var> returns anything other than a single
                           <code>xs:boolean</code> item; there is no conversion to an effective boolean
                           value.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The function call <code>fn:filter($SEQ, $F)</code> has a very similar effect to the
                           expression <code>$SEQ[$F(.)]</code>. There are some differences, however. In the case of
                           <code>fn:filter</code>, the function <code>$F</code> is required to return a boolean;
                           there is no special treatment for numeric predicate values, and no conversion to an
                           effective boolean value. Also, with a filter expression <code>$SEQ[$F(.)]</code>, the
                           focus within the predicate is different from that outside; this means that the use
                           of a
                           context-sensitive function such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-lang"><code>fn:lang#1</code></a> will give different results in
                           the two cases.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:filter(1 to 10, function($a) {$a mod 2 = 0})</code> returns <code>(2, 4, 6, 8, 10)</code>.
                           </p>
                           <p>The expression <code>fn:filter((), fn:lang("en", ?))</code> returns <code>()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-fold-left"></a>16.2.3 fn:fold-left
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Processes the supplied sequence from left to right, applying the supplied function
                           repeatedly to each item in turn, together with an accumulated result value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:fold-left</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$seq</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$zero</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$f</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*, item()) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following implementation in XQuery:</p>
                        <div class="exampleInner"><pre class="small">declare function fn:fold-left(
        $seq as item()*,
        $zero as item()*,
        $f as function(item()*, item()) as item()*) 
        as item()* {
  if (fn:empty($seq))
  then $zero
  else fn:fold-left(fn:tail($seq), $f($zero, fn:head($seq)), $f)
};</pre></div>
                        <p>or its equivalent in XSLT:</p>
                        <div class="exampleInner"><pre class="small">&lt;xsl:function name="fn:fold-left" as="item()*"&gt;
  &lt;xsl:param name="seq" as="item()*"/&gt;
  &lt;xsl:param name="zero" as="item()*"/&gt;
  &lt;xsl:param name="f" as="function(item()*, item()) as item()*"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="fn:empty($seq)"&gt;
      &lt;xsl:sequence select="$zero"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fn:fold-left(fn:tail($seq), $f($zero, fn:head($seq)), $f)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;
         </pre></div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>As a consequence of the function signature and the function calling rules, a type
                           error
                           occurs if the supplied function <var>$f</var> cannot be applied to two arguments, where
                           the first argument is either the value of <var>$zero</var> or the result of a previous
                           application of <var>$f</var>, and the second 
                           <span>is any single item from the sequence <var>$seq</var></span>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This operation is often referred to in the functional programming literature as
                           "folding" or "reducing" a sequence. It takes a function that operates on a pair of
                           values, and applies it repeatedly, with an accumulated result as the first argument,
                           and
                           the next item in the sequence as the second argument. The accumulated result is
                           initially set to the value of the <var>$zero</var> argument, which is conventionally a
                           value (such as zero in the case of addition, one in the case of multiplication, or
                           a
                           zero-length string in the case of string concatenation) that causes the function to
                           return the value of the other argument unchanged.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:fold-left(1 to 5, 0, function($a, $b) { $a + $b
                                 })</code> returns <code>15</code>. <em>(This returns the sum of the items in the sequence).</em></p>
                           <p>The expression <code>fn:fold-left((2,3,5,7), 1, function($a, $b) { $a * $b
                                 })</code> returns <code>210</code>. <em>(This returns the product of the items in the sequence).</em></p>
                           <p>The expression <code>fn:fold-left((true(), false(), false()), false(), function($a, $b) {
                                 $a or $b })</code> returns <code>true()</code>. <em>(This returns true if any item in the sequence has an effective boolean
                                 value of true).</em></p>
                           <p>The expression <code>fn:fold-left((true(), false(), false()), false(), function($a, $b) {
                                 $a and $b })</code> returns <code>false()</code>. <em>(This returns true only if every item in the sequence has an effective
                                 boolean value of true).</em></p>
                           <p>The expression <code>fn:fold-left(1 to 5, (), function($a, $b) {($b,
                                 $a)})</code> returns <code>(5,4,3,2,1)</code>. <em>(This reverses the order of the items in a sequence).</em></p>
                           <p>The expression <code>fn:fold-left(1 to 5, "", fn:concat(?, ".", ?))</code> returns <code>".1.2.3.4.5"</code>.
                           </p>
                           <p>The expression <code>fn:fold-left(1 to 5, "$zero", fn:concat("$f(", ?, ", ", ?, ")"))</code> returns <code>"$f($f($f($f($f($zero, 1), 2), 3), 4), 5)"</code>.
                           </p>
                           <p>The expression <code>fn:fold-left(1 to 5, map{}, function($map, $n) {map:put($map, $n, $n*2)})</code> returns <code>map{1:2, 2:4, 3:6, 4:8, 5:10}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-fold-right"></a>16.2.4 fn:fold-right
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Processes the supplied sequence from right to left, applying the supplied function
                           repeatedly to each item in turn, together with an accumulated result value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:fold-right</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$seq</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$zero</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$f</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item(), item()*) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following implementation in XQuery:</p>
                        <div class="exampleInner"><pre class="small">declare function fn:fold-right(
        $seq as item()*, 
        $zero as item()*, 
        $f as function(item(), item()*) as item()*) 
        as item()* {
  if (fn:empty($seq))
  then $zero
  else $f(fn:head($seq), fn:fold-right(fn:tail($seq), $zero, $f))
};</pre></div>
                        <p>or its equivalent in XSLT:</p>
                        <div class="exampleInner"><pre class="small">&lt;xsl:function name="fn:fold-right" as="item()*"&gt;
  &lt;xsl:param name="seq" as="item()*"/&gt;
  &lt;xsl:param name="zero" as="item()*"/&gt;
  &lt;xsl:param name="f" as="function(item(), item()*) as item()*"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="fn:empty($seq)"&gt;
      &lt;xsl:sequence select="$zero"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$f(fn:head($seq), fn:fold-right(fn:tail($seq), $zero, $f))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;
         </pre></div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>As a consequence of the function signature and the function calling rules, a type
                           error
                           occurs if the supplied function <var>$f</var> cannot be applied to two arguments, where
                           the first argument is any item in the sequence <var>$seq</var>, and the second is either
                           the value of <var>$zero</var> or the result of a previous application of
                           <var>$f</var>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">This operation is often referred to in the functional programming literature as
                           "folding" or "reducing" a sequence. It takes a function that operates on a pair of
                           values, and applies it repeatedly, with the next item in the sequence as the first
                           argument, and the result of processing the remainder of the sequence as the second
                           argument. The accumulated result is initially set to the value of the <var>$zero</var>
                           argument, which is conventionally a value (such as zero in the case of addition, one
                           in
                           the case of multiplication, or a zero-length string in the case of string concatenation)
                           that causes the function to return the value of the other argument unchanged.
                        </p>
                        <p class="note">In cases where the function performs an associative operation on its two arguments
                           (such
                           as addition or multiplication), <code>fn:fold-right</code> produces the same result as
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-fold-left"><code>fn:fold-left</code></a>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:fold-right(1 to 5, 0, function($a, $b) { $a + $b
                                 })</code> returns <code>15</code>. <em>(This returns the sum of the items in the sequence).</em></p>
                           <p>The expression <code>fn:fold-right(1 to 5, "", fn:concat(?, ".", ?))</code> returns <code>"1.2.3.4.5."</code>.
                           </p>
                           <p>The expression <code>fn:fold-right(1 to 5, "$zero", concat("$f(", ?, ", ", ?,
                                 ")"))</code> returns <code>"$f(1, $f(2, $f(3, $f(4, $f(5, $zero)))))"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-for-each-pair"></a>16.2.5 fn:for-each-pair
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Applies the function item <var>$action</var> to successive pairs of items taken one from
                           <var>$seq1</var> and one from <var>$seq2</var>, returning the concatenation of the
                           resulting sequences in order.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:for-each-pair</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$seq1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$seq2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$action</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item(), item()) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following implementation in XQuery:</p>
                        <div class="exampleInner"><pre class="small">declare function fn:for-each-pair($seq1, $seq2, $action)
{
   if(fn:exists($seq1) and fn:exists($seq2)) 
   then (
     $action(fn:head($seq1), fn:head($seq2)),
     fn:for-each-pair(fn:tail($seq1), fn:tail($seq2), $action)
   )
   else ()
};</pre></div>
                        <p>or its equivalent in XSLT:</p>
                        <div class="exampleInner"><pre class="small">&lt;xsl:function name="fn:for-each-pair"&gt;
  &lt;xsl:param name="seq1"/&gt;
  &lt;xsl:param name="seq2"/&gt;
  &lt;xsl:param name="action"/&gt;
  &lt;xsl:if test="fn:exists($seq1) and fn:exists($seq2)"&gt;
    &lt;xsl:sequence select="$action(fn:head($seq1), fn:head($seq2))"/&gt;
    &lt;xsl:sequence select="fn:for-each-pair(fn:tail($seq1), fn:tail($seq2), $action)"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;
         </pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If one sequence is longer than the other, excess items in the longer sequence are
                           ignored.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:for-each-pair(("a", "b", "c"), ("x", "y", "z"),
                                 concat#2)</code> returns <code>("ax", "by", "cz")</code>.
                           </p>
                           <p>The expression <code>fn:for-each-pair(1 to 5, 1 to 5, function($a, $b){10*$a + $b})</code> returns <code>(11, 22, 33, 44, 55)</code>.
                           </p>
                           <p>The expression <code>let $s := 1 to 8 return fn:for-each-pair($s, tail($s), function($a, $b){$a*$b})</code> returns <code>(2, 6, 12, 20, 30, 42, 56)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-sort"></a>16.2.6 fn:sort
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Sorts a supplied sequence, based on the value of a sort key supplied as a function.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:sort</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                        <div class="proto"><code class="function">fn:sort</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$collation</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">fn:sort</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$input</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$key</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()) as xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The three-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Calling the single-argument version of the function is equivalent to calling the two-argument
                           form
                           with <code>default-collation()</code> as the second argument: that is, it sorts a sequence of items according
                           to the typed value of the items, using the default collation to compare strings.
                        </p>
                        <p>Calling the two-argument version of the function is equivalent to calling the three-argument
                           form
                           with <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data#1</code></a> as the third argument: that is, it sorts a sequence of items according
                           to the typed value of the items, using a specified collation to compare strings.
                        </p>
                        <p>In the case of both <code>fn:sort#2</code> and <code>fn:sort#3</code>, supplying an empty
                           sequence as the second argument is equivalent to supplying <code>fn:default-collation()</code>. For more
                           information on collations see <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The result of the function is obtained as follows:</p>
                        <ul>
                           <li>
                              <p>For each item in the sequence <code>$input</code>, the function supplied as <code>$key</code> 
                                 is evaluated with that item as its argument. 
                                 The resulting values are the sort keys of the items in the input sequence.
                                 
                              </p>
                           </li>
                           <li>
                              <p>The result sequence contains the same items as the input sequence <code>$input</code>, but generally in a different order.
                              </p>
                           </li>
                           <li>
                              <p>Let <var>$C</var> be the selected collation, or the default collation where applicable.
                              </p>
                           </li>
                           <li>
                              <p>The order of items in the result is such that, given two items <code>$A</code> and <code>$B</code>:
                              </p>
                              <ul>
                                 <li>
                                    <p>If <code>(fn:deep-equal($key($A), $key($B), $C)</code>, then the relative order of <code>$A</code> and <code>$B</code> 
                                       in the output is the same as their relative order in the input (that is, the sort
                                       is stable)
                                       
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise, if <code>(deep-less-than($key($A), $key($B), $C)</code>, then <code>$A</code> precedes <code>$B</code> in the output. 
                                       The function <code>deep-less-than</code> is defined as the boolean result of the expression:
                                       
                                    </p>
                                    <div class="exampleInner"><pre class="small"><code>if (fn:empty($A)) 
     then fn:exists($B)
else if (fn:deep-equal($A[1], $B[1], $C)) 
     then deep-less-than(fn:tail($A), fn:tail($B), $C)
else if ($A[1] ne $A[1] (:that is, $A[1] is NaN:)) 
     then fn:true()
else if (is-string($A[1]) and is-string($B[1]) 
     then fn:compare($A[1], $B[1], $C) lt 0
else $A[1] lt $B[1]</code></pre></div>
                                    <p>where the function <code>is-string($X)</code> returns true if and only if <code>$X</code> is an instance of 
                                       <code>xs:string</code>, <code>xs:anyURI</code>, or <code>xs:untypedAtomic</code>.
                                    </p>
                                    <p>This ordering of sequences is referred to by mathematicians as "lexicographic ordering".
                                       
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>If the set of computed sort keys contains values that are not comparable using the
                           <code>lt</code> operator then the sort 
                           operation will fail with a type error ([<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>).
                           
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">XSLT and XQuery both provide native sorting capability, but previous releases of XPath
                           provided no sorting functionality
                           for use in standalone environments.
                        </p>
                        <p class="note">In addition there are cases where this function may be more flexible than the built-in
                           sorting capability for XQuery or XSLT,
                           for example when the sort key or collation is chosen dynamically, or when the sort
                           key is a sequence of items rather than a single
                           item.
                        </p>
                        <p class="note">The results are compatible with the results of XSLT sorting (using <code>xsl:sort</code>) in the case where the sort key evaluates to a sequence of
                           length zero or one, given the options <code>stable="yes"</code> and <code>order="ascending"</code>.
                        </p>
                        <p class="note">The results are compatible with the results of XQuery sorting (using the <code>order by</code> clause) in the case where the sort key evaluates to a sequence of
                           length zero or one, given the options <code>stable</code>, <code>ascending</code>, and <code>empty least</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:sort((1, 4, 6, 5, 3))</code> returns <code>(1, 3, 4, 5, 6)</code>.
                           </p>
                           <p>The expression <code>fn:sort((1, -2, 5, 10, -10, 10, 8), (), fn:abs#1)</code> returns <code>(1, -2, 5, 8, 10, -10, 10)</code>.
                           </p>
                           <p>To sort a set of strings <code>$in</code> using Swedish collation:
                           </p>
                           <div class="exampleInner"><pre class="small">let $SWEDISH := "http://www.w3.org/2013/collation/UCA?lang=se"
return fn:sort($in, $SWEDISH)
            </pre></div>
                           <p>To sort a sequence of employees by last name as the major sort key and first name
                              as the minor sort key,
                              using the default collation:
                              
                           </p>
                           <div class="exampleInner"><pre>fn:sort($employees, (), function($emp) {$emp/name ! (last, first)})</pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-apply"></a>16.2.7 fn:apply
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Makes a dynamic call on a function with an argument list supplied in the form of an
                           array.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:apply</code>(<code class="arg">$function</code><code class="as">&nbsp;as&nbsp;</code><code class="type">function(*)</code>, <code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result of the function is obtained by invoking the supplied function <code>$function</code> with arguments
                           taken from the members of the supplied array <code>$array</code>. The first argument of the function call is the first
                           member of <code>$array</code>, the second argument is the second member of <code>$array</code>, and so on.
                        </p>
                        <p>The arity of the supplied function <code>$function</code> must be the same as the size of the array <code>$array</code>.
                        </p>
                        <p>The effect of calling <code>fn:apply($f, [$a, $b, $c, ...])</code> is the same as the effect of the dynamic function call 
                           <code>$f($a, $b, $c, ....)</code>. For example, the function conversion rules are applied to the supplied arguments
                           in the usual way.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised if the arity of the function <code>$function</code> is not the same as the size of the
                           array <code>$array</code> ([<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAP0001" title="err:FOAP0001">err:FOAP0001</a>]).
                           
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The function is useful where the arity of a function item is not known statically.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>fn:apply(fn:concat#3, ["a", "b", "c"])</code> returns <code>"abc"</code>.
                           </p>
                           <p>The expression <code>fn:apply($f, array:subarray(["a", "b", "c", "d", "e", "f"], 1, fn:function-arity($f)))</code> 
                              calls the supplied function <code>$f</code> supplying the number of arguments required by its arity.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="dynamic-loading"></a>16.3 Dynamic Loading
               </h3>
               <p>The following functions allow dynamic loading and execution of XQuery queries and
                  XSLT stylesheets.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a></td>
                        <td>Provides access to the public functions and global variables of a dynamically-loaded
                           XQuery library module.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a></td>
                        <td>Invokes a transformation using a dynamically-loaded XSLT stylesheet.</td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-load-xquery-module"></a>16.3.1 fn:load-xquery-module
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Provides access to the public functions and global variables of a dynamically-loaded
                           XQuery library module.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:load-xquery-module</code>(<code class="arg">$module-uri</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                        <div class="proto"><code class="function">fn:load-xquery-module</code>(<code class="arg">$module-uri</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string</code>, <code class="arg">$options</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function loads an implementation-defined set of modules having the target namespace
                           <code>$module-uri</code>.
                        </p>
                        <p>Calling the one-argument version of the function has the same effect as calling the
                           two-argument version with an empty map
                           as the second argument.
                        </p>
                        <p>The <code>$options</code> argument can be used to control the way in which the function operates. 
                           The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> apply.
                        </p>
                        <table style="border-collapse: collapse">
                           <thead>
                              <tr style="border-top: 2px solid black; border-bottom: 2px solid black">
                                 <th style="text-align:left; padding-right: 10px; ">Key</th>
                                 <th style="text-align:left">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>xquery-version</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">The minimum level of the XQuery language that the
                                    processor must support. 
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:decimal</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The version given in the prolog of the library module; or
                                                implementation-defined if this is absent.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>location-hints</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">A sequence of URIs (in the form of <code>xs:string</code> values) which may be used or ignored in an
                                    <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string*</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty sequence</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>context-item</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">The item to be used as the initial context item when evaluating global variables in
                                    the library module. Supplying
                                    an empty sequence is equivalent to omitting the entry from the map, and indicates
                                    the absence of a context item.
                                    If the library module specifies a required type for the context item, then the supplied
                                    value <span class="verb">must</span> conform to
                                    this type, without conversion.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>item()?</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Absent</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>variables</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">Values for external variables defined in the library module. Values <span class="verb">must</span> be supplied
                                    for external variables that have no default value, and <span class="verb">may</span> be supplied for external variables
                                    that do have a default value. The supplied value <span class="verb">must</span> conform to the required type of the variable, without conversion.
                                    The map contains one entry for each external variable: the key is the variable's name,
                                    and the associated value is
                                    the variable's value. The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> do not apply
                                    to this contained map.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>An empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>vendor-options</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">Values for vendor-defined configuration options for the XQuery processor used to process
                                    the request. The key is the
                                    name of an option, expressed as a QName: the namespace URI of the QName <span class="verb">should</span> be a URI controlled
                                    by the vendor of the XQuery processor. The meaning of the associated value is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                                    Implementations <span class="verb">should</span> ignore options whose names are in an unrecognized namespace. 
                                    The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> do not apply
                                    to this contained map.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>An empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <p>The result of the function is a map <var>R</var> with two entries:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>There is an entry whose key is the <code>xs:string</code> value <code>"variables"</code> and whose associated value
                                 is a map <var>V</var>. This map (<var>V</var>) contains one entry for each public global variable declared in the library module.
                                 
                                 The key of the
                                 entry is the name of the variable, as an <code>xs:QName</code> value; the associated value is the value of the variable.
                              </p>
                           </li>
                           <li>
                              <p>There is an entry whose key is the <code>xs:string</code> value <code>"functions"</code> and whose associated value
                                 is a map <var>F</var>. This map (<var>F</var>) contains one entry for each public function declared in the library module, except
                                 that when two functions
                                 have the same name (but different arity), they share the same entry. The key of the
                                 entry is the name of the function(s), as an <code>xs:QName</code> value; the associated value is a map <var>A</var>.
                                 This map (<var>A</var>) contains one entry for each function with the given name; its key is the arity of
                                 the function,
                                 as an <code>xs:integer</code> value, and its associated value is the function itself, as a function item. The function
                                 can be invoked using the rules for dynamic function invocation.
                                 
                              </p>
                           </li>
                        </ol>
                        <p>The static and dynamic context of the library module are established according to
                           the rules in 
                           <a href="https://www.w3.org/TR/xquery-31/#id-xq-context-components">Section 
                              
                              C Context Components
                              </a><sup><small>XQ31</small></sup>.
                        </p>
                        <p>It is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether constructs in the library module 
                           are evaluated in the same <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a> as the calling module.
                        </p>
                        <p>The library module that is loaded may import other modules using an <code>import module</code> declaration. The result of
                           <code>fn:load-xquery-module</code> does not include global variables or functions declared in such a transitively-imported
                           module.
                           However, the <code>options</code> map supplied in the function call <span class="verb">may</span> 
                           (and if no default is defined, <span class="verb">must</span>)
                           supply values for external variables declared in transitively-loaded library modules.
                        </p>
                        <p>The library module that is loaded may import schema declarations using an <code>import schema</code> declaration. It is
                           <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether schema components in the in-scope 
                           schema definitions of the calling module
                           are automatically added to the in-scope schema definitions of the dynamically loaded
                           module. The in-scope schema definitions
                           of the calling and called modules must be consistent, according to the rules defined
                           in 
                           <a href="https://www.w3.org/TR/xquery-31/#id-consistency-constraints">Section 
                              
                              2.2.5 Consistency Constraints
                              </a><sup><small>XQ31</small></sup>.
                        </p>
                        <p>Where nodes are passed to or from the dynamically loaded module, for example as an
                           argument or result of a function, 
                           they <span class="verb">should</span> if possible retain their node identity, their base URI, their type annotations, and
                           their relationships to all other nodes 
                           in the containing tree (including ancestors and siblings). If this is not possible,
                           for example because the only way of passing nodes 
                           to the chosen XQuery implementation is by serializing and re-parsing, then a node
                           <span class="verb">may</span> be passed in the form of a deep 
                           copy, which may lose information about the identity of the node, about its ancestors
                           and siblings, about its base URI, about its type annotations, and about its 
                           relationships to other nodes passed across the interface.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>If <code>$module-uri</code> is a zero length string, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOQM0001" title="err:FOQM0001">err:FOQM0001</a>].
                        </p>
                        <p>If the implementation is not able to find a library module with the specified target
                           namespace, 
                           an error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOQM0002" title="err:FOQM0002">err:FOQM0002</a>].
                        </p>
                        <p>If a static error (including a statically-detected type error) is encountered when
                           processing the library module, 
                           a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOQM0003" title="err:FOQM0003">err:FOQM0003</a>].
                        </p>
                        <p>If a value is supplied for the initial context item or for an external variable and
                           the value does not conform to the required
                           type declared in the dynamically loaded module, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOQM0005" title="err:FOQM0005">err:FOQM0005</a>].
                        </p>
                        <p>If no suitable XQuery processor is available, a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOQM0006" title="err:FOQM0006">err:FOQM0006</a>].
                           This includes (but is not limited to) the following cases:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>No XQuery processor is available;</p>
                           </li>
                           <li>
                              <p>Use of the function has been disabled;</p>
                           </li>
                           <li>
                              <p>No XQuery processor supporting the requested version of XQuery is available;</p>
                           </li>
                           <li>
                              <p>No XQuery processor supporting the optional Module Feature is available.</p>
                           </li>
                        </ol>
                        <p>If a dynamic error (including a dynamically-detected type error) is encountered when
                           processing the module 
                           (for example, when evaluating its global variables), the dynamic error is returned
                           <em>as is</em>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">As with all other functions in this specification, conformance requirements depend
                           on the host language.
                           For example, a host language might specify that provision of this function is optional,
                           or that it is excluded entirely,
                           or that implementations are required to support XQuery modules using a specified version
                           of XQuery.
                        </p>
                        <p class="note">Even where support for this function is mandatory, it is <span class="verb">recommended</span> for security reasons that implementations
                           should provide a user option to disable its use, or to disable aspects of its functionality.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-transform"></a>16.3.2 fn:transform
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Invokes a transformation using a dynamically-loaded XSLT stylesheet.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:transform</code>(<code class="arg">$options</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>This function loads an XSLT stylesheet and invokes it to perform a transformation.</p>
                        <p>The inputs to the transformation are supplied in the form of a map. 
                           The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> apply
                           to this map; they do not apply to any nested map unless otherwise specified.
                        </p>
                        <p>The function first identifies the <b>requested XSLT version</b>, as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If the <code>xslt-version</code>
                                 option is present, the requested XSLT version is the value of that option. 
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, the requested XSLT version
                                 is the value of the <code>[xsl:]version</code> attribute of the outermost element in the supplied stylesheet or package.
                              </p>
                           </li>
                        </ul>
                        <p>The function then attempts to locate an XSLT processor that implements the requested
                           XSLT version.
                        </p>
                        <ul>
                           <li>
                              <p>If a processor that implements the requested XSLT version is available, then it is
                                 used. 
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, if a processor that implements a version later than the requested version
                                 is available, then it is used. 
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, the function fails indicating that no suitable XSLT processor is available.</p>
                           </li>
                        </ul>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>The phrase <em>locate an XSLT processor</em> includes the possibility of locating a software product and
                              configuring it to act as an XSLT processor that implements the requested XSLT version.
                           </p>
                        </div>
                        <p>If more than one XSLT processor is available under the above rules, then the one that
                           is chosen may be selected according to
                           the availability of requested features: see below.
                        </p>
                        <p>Once an XSLT processor has been selected that implements a given version of XSLT,
                           the processor
                           follows the rules of that version of the XSLT specification. This includes any decision
                           to operate in backwards or forwards
                           compatibility mode. For example, if an XSLT 2.0 processor is selected, and the stylesheet
                           specifies <code>version="1.0"</code>,
                           then the processor will operate in backwards compatibility mode; if the same processor
                           is selected and the stylesheet
                           specifies <code>version="3.0"</code>, the processor will operate in forwards compatibility mode.
                        </p>
                        <p>The combinations of options that are relevant to each version of XSLT, other than
                           <code>xslt-version</code> 
                           itself, are listed below. This is followed by a table giving the meaning of each option.
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>For invocation of an XSLT 1.0 processor (see <a href="https://www.w3.org/TR/xpath-functions-31/#xslt10">[XSL Transformations (XSLT) Version 1.0]</a>), 
                                 the supplied options must include all of the following <span>(if anything else is present, it is ignored)</span>:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The stylesheet, provided by supplying exactly one of the following:</p>
                                    <blockquote>
                                       <p><code>stylesheet-location</code><br><code>stylesheet-node</code><br><code>stylesheet-text</code></p>
                                    </blockquote>
                                 </li>
                                 <li>
                                    <p>The source tree, provided as the value of the <code>source-node</code> option.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Zero or more of the following additional options:</p>
                                    <blockquote>
                                       <p><code>stylesheet-base-uri</code><br><code>stylesheet-params</code> (defaults to an empty map)<br><code>initial-mode</code> (defaults to the unnamed mode)<br><code>delivery-format</code> (defaults to <code>document</code>)<br><code>serialization-params</code> (defaults to an empty map)<br><code>enable-messages</code> (default is implementation-defined)<br><code>requested-properties</code> (default is an empty map)<br><code>vendor-options</code> (defaults to an empty map)<br><code>cache</code> (default is implementation-defined)
                                       </p>
                                    </blockquote>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>For invocation of an XSLT 2.0 processor (see <a href="https://www.w3.org/TR/xpath-functions-31/#xslt20">[XSL Transformations (XSLT) Version 2.0]</a>), 
                                 the supplied options must include all of the following <span>(if anything else is present, it is ignored)</span>:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The stylesheet, provided by supplying exactly one of the following:</p>
                                    <blockquote>
                                       <p><code>stylesheet-location</code><br><code>stylesheet-node</code><br><code>stylesheet-text</code></p>
                                    </blockquote>
                                 </li>
                                 <li>
                                    <p>Invocation details, as exactly one of the following:</p>
                                    <ol class="enumlr">
                                       <li>
                                          <p>For apply-templates invocation, all of the following:</p>
                                          <p><code>source-node</code></p>
                                          <p>Optionally, <code>initial-mode</code> (defaults to the unnamed mode)
                                          </p>
                                       </li>
                                       <li>
                                          <p>For call-template invocation, all of the following:</p>
                                          <p><code>initial-template</code></p>
                                          <p>Optionally, <code>source-node</code></p>
                                       </li>
                                    </ol>
                                 </li>
                                 <li>
                                    <p>Zero or more of the following additional options:</p>
                                    <blockquote>
                                       <p><code>stylesheet-base-uri</code><br><code>stylesheet-params</code> (defaults to an empty map)<br><code>base-output-uri</code> (defaults to absent)<br><code>delivery-format</code> (defaults to <code>document</code>)<br><code>serialization-params</code> (defaults to an empty map)<br><code>enable-messages</code> (default is implementation-defined)<br><code>enable-trace</code> (default is implementation-defined)<br><code>requested-properties</code> (default is an empty map)<br><code>vendor-options</code> (defaults to an empty map)<br><code>cache</code> (default is implementation-defined)
                                       </p>
                                    </blockquote>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>For invocation of an XSLT 3.0 processor (see <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a>), 
                                 the supplied options must include all of the following <span>(if anything else is present, it is ignored)</span>:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>The stylesheet, provided either by supplying exactly one of the following:</p>
                                    <blockquote>
                                       <p><code>stylesheet-location</code><br><code>stylesheet-node</code><br><code>stylesheet-text</code></p>
                                    </blockquote>
                                    <p>Or by supplying exactly one of the following:</p>
                                    <blockquote>
                                       <p><code>package-location</code><br><code>package-node</code><br><code>package-text</code><br><code>package-name</code> plus optionally <code>package-version</code></p>
                                    </blockquote>
                                 </li>
                                 <li>
                                    <p>Invocation details, as exactly one of the following combinations:</p>
                                    <ol class="enumlr">
                                       <li>
                                          <p>For apply-templates invocation, all of the following:</p>
                                          <p>Exactly one of <code>source-node</code> or <code>initial-match-selection</code></p>
                                          <p>Optionally, <code>initial-mode</code></p>
                                          <p>Optionally, <code>template-params</code></p>
                                          <p>Optionally, <code>tunnel-params</code></p>
                                       </li>
                                       <li>
                                          <p>For call-template invocation using an explicit template name, all of the following:</p>
                                          <p><code>initial-template</code></p>
                                          <p>Optionally, <code>template-params</code></p>
                                          <p>Optionally, <code>tunnel-params</code></p>
                                          <p>Optionally, <code>source-node</code></p>
                                       </li>
                                       <li>
                                          <p>For call-template invocation using the defaulted template name <code>xsl:initial-template</code>, all of the following:
                                          </p>
                                          <p>Optionally, <code>template-params</code></p>
                                          <p>Optionally, <code>tunnel-params</code></p>
                                          <div class="note">
                                             <p class="prefix"><b>Note:</b></p>
                                             <p>If the <code>source-node</code> option is present and <code>initial-template</code> is absent,
                                                then apply-templates invocation will be used. To use call-template invocation on the
                                                template
                                                named <code>xsl:initial-template</code> while also supplying a context item for use when evaluating
                                                global variables, either (a) supply the context item using the <code>global-context-item</code> option,
                                                or (b) supply <code>source-node</code>, and set the <code>initial-template</code> option explicitly to the 
                                                QName <code>xsl:initial-template</code></p>
                                          </div>
                                       </li>
                                       <li>
                                          <p>For call-function invocation, all of the following:</p>
                                          <p><code>initial-function</code></p>
                                          <p><code>function-params</code></p>
                                       </li>
                                    </ol>
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>The invocation method can be determined as the first of the following which applies:</p>
                                       <ul>
                                          <li>
                                             <p>If <code>initial-function</code> is present, then call-function invocation.
                                             </p>
                                          </li>
                                          <li>
                                             <p>If <code>initial-template</code> is present, then call-template invocation.
                                             </p>
                                          </li>
                                          <li>
                                             <p>If <code>source-node</code> or <code>initial-match-selection</code>
                                                is present, then apply-templates invocation.
                                             </p>
                                          </li>
                                          <li>
                                             <p>Otherwise, <code>call-template</code> invocation using
                                                the default entry point <code>xsl:initial-template</code>.
                                             </p>
                                          </li>
                                       </ul>
                                    </div>
                                 </li>
                                 <li>
                                    <p>Zero or more of the following additional options:</p>
                                    <blockquote>
                                       <p><code>stylesheet-base-uri</code><br><code>static-params</code> (defaults to an empty map)<br><code>stylesheet-params</code> (defaults to an empty map)<br><code>global-context-item</code> (defaults to absent)<br><code>base-output-uri</code> (defaults to absent)<br><code>delivery-format</code><br><code>serialization-params</code> (defaults to an empty map)<br><code>enable-assertions</code> (default is false)<br><code>enable-messages</code> (default is implementation-defined)<br><code>enable-trace</code> (default is implementation-defined)<br><code>requested-properties</code> (default is an empty map)<br><code>vendor-options</code> (defaults to an empty map)<br><code>cache</code> (default is implementation-defined)
                                       </p>
                                    </blockquote>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                        <p>The meanings of each option are defined in the table below.</p>
                        <table style="border-collapse: collapse">
                           <thead>
                              <tr style="border-top: 2px solid black; border-bottom: 2px solid black">
                                 <th style="text-align:left; padding-right: 10px; ">Key</th>
                                 <th style="text-align:left; padding-right: 10px; ">Applies to</th>
                                 <th style="text-align:left; padding-right: 10px; ">Value</th>
                                 <th style="text-align:left">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>base-output-uri</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The URI of the principal result document; also used as the base URI for
                                    resolving relative URIs of secondary result documents. If the value is a relative
                                    
                                    reference, it is resolved against the static base URI of the <code>fn:transform</code> 
                                    function call. 
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The effect of not
                                                supplying a base output URI is defined by the XSLT specification; the implementation
                                                may supply a default, for example the directory containing the
                                                stylesheet, or the current working directory. </code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>cache</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">This option has no effect on the result of the transformation but may affect
                                    efficiency. The value <code>true</code> indicates an expectation that the same
                                    stylesheet is likely to be used for more than one transformation; the value
                                    <code>false</code> indicates an expectation that the stylesheet will be used once
                                    only.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>true()</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="4"><code>delivery-format</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="4">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">The manner in which the transformation results should be delivered. Applies both to
                                    the
                                    principal result document and to secondary result documents created using
                                    <code>xsl:result-document</code>.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>document, unless the relevant
                                                xsl:output or xsl:result-document element specifies
                                                build-tree="no" (applies to XSLT 3.0 only), in which case the default
                                                is raw.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>document</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">The result is delivered as a
                                    document node.
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>serialized</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">The result is delivered as
                                    a string, representing the results of serialization. Note that (as with the
                                    <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> function) the final encoding stage of
                                    serialization (which turns a sequence of characters into a sequence of
                                    octets) is either skipped, or reversed by decoding the octet stream back
                                    into a character stream.
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>raw</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">The result of the initial
                                    template or function is returned as an arbitrary XDM value (after conversion
                                    to the declared type, but without wrapping in a document node, and without
                                    serialization): when this option is chosen, the returned map contains the
                                    raw result.
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>enable-assertions</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">Indicates whether any <code>xsl:assert</code> instructions in the stylesheet
                                    are to be evaluated.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>false()</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>enable-messages</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">Indicates whether any <code>xsl:message</code> instructions in the stylesheet
                                    are to be evaluated. The destination and formatting of any such messages is
                                    implementation-defined.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Implementation-defined</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>enable-trace</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">Indicates whether any <a href="https://www.w3.org/TR/xpath-functions-31/#func-trace"><code>fn:trace</code></a> functions in the stylesheet are to
                                    generate diagnostic messages. The destination and formatting of any such messages
                                    is
                                    implementation-defined.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Implementation-defined</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>function-params</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">An array of values to be used as the arguments to the initial function call.
                                    The value is converted to the required type of the declared parameter using the function
                                    conversion rules.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>array(item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty array</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>global-context-item</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The value of the global context item, as defined in XSLT 3.0
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>item()</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The value of source-node</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>initial-function</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The name of the initial function to be called for call-function invocation. The
                                    arity of the function is inferred from the length of
                                    <code>function-params</code>.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:QName</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>initial-match-selection</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The value of the initial match selection, as defined in XSLT 3.0
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>item()*</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The value of source-node</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>initial-mode</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The name of the initial processing mode.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:QName</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code></code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>initial-template</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The name of a named template in the stylesheet to act as the initial entry
                                    point.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:QName</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>xsl:initial-template</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>package-name</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The name of the top-level stylesheet package to be invoked (an absolute
                                    URI)
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>package-location</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The location of the top-level stylesheet package, as a relative or absolute
                                    URI
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>package-node</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">A document or element node containing the top-level stylesheet
                                    package
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>node()</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>package-text</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The top-level stylesheet package in the form of unparsed lexical
                                    XML.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>package-version</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The version of the top-level stylesheet package to be invoked.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>"*" (any version)</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>post-process</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0 2.0 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">A function that is used to post-process each result document of
                                    the transformation (both the principal result and secondary results), in whatever
                                    form it would otherwise be delivered (document, serialized, or raw). The first 
                                    argument of the function is the key used to identify the result in the map return
                                    by the <code>fn:transform</code> function (for example, this will be the supplied 
                                    base output URI in the case of the principal result, or the string "output" if no
                                    base output URI was supplied). The second argument is the 
                                    actual value. The value that is returned in the result of the <code>fn:transform</code> 
                                    function is the result of applying this post-processing.
                                    
                                    
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>If the implementation provides a way of writing or invoking functions 
                                          with side-effects, this post-processing function might be used to save 
                                          a copy of the result document to persistent storage. For example, if the 
                                          implementation provides access to the EXPath File library <a href="https://www.w3.org/TR/xpath-functions-31/#expath">[EXPath]</a>, 
                                          then a serialized document might be written to filestore by calling the 
                                          <code>file:write</code> function. Similar mechanisms might be used to issue 
                                          an HTTP POST request that posts the result to an HTTP server, or to send 
                                          the document to an email recipient. The semantics of calling functions 
                                          with side-effects are entirely <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                                       </p>
                                       <p>If the primary purpose of the post-processing function is achieved by 
                                          means of such side-effects, and if the actual results are not needed by 
                                          the caller of the <code>fn:transform</code> function, then it does not matter what 
                                          the post-processing function actually returns (it could be an empty 
                                          sequence, for example).
                                       </p>
                                       <p>Calls to <code>fn:transform</code> can potentially have side-effects 
                                          even in the absence of the post-processing option, because the XSLT 
                                          specification allows a stylesheet to invoke extension functions 
                                          that have side-effects. The semantics in this case are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                                       </p>
                                    </div>
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>function(xs:string, item()*) as item()*</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>function($a, $b) { $b }</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>requested-properties</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The keys in the map are QNames that could legitimately be supplied in a call to
                                    the XSLT <code>system-property</code> function; the values in the map are the requested
                                    settings of the corresponding property. The boolean values <code>true()</code> and
                                    <code>false()</code> are equivalent to the string values <code>yes</code> and
                                    <code>no</code>. As a special case, setting a value for <code>xsl:version</code> has
                                    no effect, because of the potential for conflict with other options. For example:
                                    
                                    <ul>
                                       <li>
                                          <p>Setting <code>xsl:product-name</code> to a particular value requests a
                                             particular XSLT software product.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Setting <code>xsl:product-version</code> requests a specific version of
                                             that product.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Setting <code>xsl:is-schema-aware</code> to <code>true()</code> requests a
                                             schema-aware processor.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Setting <code>xsl:xsd-version</code> to <code>"1.1"</code> requests a
                                             processor that supports XML Schema version 1.1.
                                          </p>
                                       </li>
                                    </ul> Setting a boolean property such as <code>xsl:supports-dynamic-evaluation</code>
                                    to <code>false()</code> is interpreted as an explicit request for a processor in which
                                    the value of the property is false. The effect if the requests cannot be precisely
                                    met
                                    is implementation-defined. In some cases it may be appropriate to ignore the request
                                    or
                                    to provide an alternative (for example, a later version of the product than the one
                                    requested); in other cases it may be more appropriate to raise an error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0001" title="err:FOXT0001">err:FOXT0001</a>] indicating that no suitable XSLT processor
                                    is available. 
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, xs:anyAtomicType)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>serialization-params</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">Serialization parameters for the principal result document. The supplied map
                                    follows the same rules that apply to a map supplied as the second argument of
                                    <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a>. 
                                    <ul>
                                       <li>
                                          <p>When a parameter is supplied, the corresponding value overrides or augments
                                             the value specified in the unnamed <code>xsl:output</code> declaration (or
                                             its default), following the same rules as when one <code>xsl:output</code>
                                             declaration overrides another with lower import precedence.
                                          </p>
                                       </li>
                                       <li>
                                          <p>When a parameter is supplied and the corresponding value is an empty
                                             sequence (for example, <code>map{"standalone":()}</code>), any value
                                             specified in the unnamed <code>xsl:output</code> declaration is overridden
                                             by the default value. 
                                          </p>
                                       </li>
                                       <li>
                                          <p>When a parameter is not supplied in <code>serialization-params</code> (that
                                             is, when the key is absent) the value that applies is the value appearing in
                                             the unnamed <code>xsl:output</code> declaration, or its default. 
                                          </p>
                                       </li>
                                    </ul>
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:anyAtomicType, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>source-node</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">When <code>source-node</code> is supplied then the
                                    <code>global-context-item</code> (the context item for evaluating global variables)
                                    is the root of the tree containing the supplied node. In addition, for apply-templates
                                    invocation, the <code>source-node</code> acts as the
                                    <code>initial-match-selection</code>, that is, stylesheet execution starts by
                                    applying templates to this node.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>node()</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>static-params</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The values of static parameters defined in the stylesheet; the keys are the
                                    names of the parameters, and the associated values are their values. The value is
                                    converted to the required type of the declared parameter using the function conversion
                                    rules.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>stylesheet-base-uri</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">A string intended to be used as the static base URI of the principal stylesheet
                                    module. This value <span class="verb">must</span> be used if no other static base URI is
                                    available. If the supplied stylesheet already has a base URI (which will generally
                                    be
                                    the case if the stylesheet is supplied using <code>stylesheet-node</code> or
                                    <code>stylesheet-location</code>) then it is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether this
                                    parameter has any effect. If the value is a relative reference, it is resolved against
                                    the static base URI of the <code>fn:transform</code> function call.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>stylesheet-location</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">URI that can be used to locate the principal stylesheet module. If relative, it
                                    is resolved against the static base URI of the <code>fn:transform</code> function call.
                                    The value also acts as the default for stylesheet-base-uri.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>stylesheet-node</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">Root of the tree containing the principal stylesheet module, as a document or
                                    element node. The base URI of the node acts as the default for
                                    stylesheet-base-uri.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>node()</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>stylesheet-params</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">A map holding values to be supplied for stylesheet parameters. The keys are the
                                    parameter names; the values are the corresponding parameter values. The values are
                                    converted if necessary to the required type using the function conversion rules. The
                                    default is an empty map.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>stylesheet-text</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The principal stylesheet module in the form of unparsed lexical
                                    XML.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>n/a</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>template-params</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The values of non-tunnel parameters to be supplied to the initial template,
                                    used with both apply-templates and call-template invocation. Each value is converted
                                    to
                                    the required type of the declared parameter using the function conversion
                                    rules.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code></code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>tunnel-params</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The values of tunnel parameters to be supplied to the initial template, used
                                    with both apply-templates and call-template invocation. Each value is converted to
                                    the
                                    required type of the declared parameter using the function conversion
                                    rules.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map(xs:QName, item()*)</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>vendor-options</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">Values for vendor-defined configuration options for the XSLT processor used to
                                    process the request. The key is the name of an option, expressed as a QName: the
                                    namespace URI of the QName <span class="verb">should</span> be a URI controlled by the vendor
                                    of the XSLT processor. The meaning of the associated value is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. Implementations
                                    <span class="verb">should</span> ignore options whose names are in an unrecognized
                                    namespace. Default is an empty map.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>map{xs:QName, item()*}</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Empty map</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>xslt-version</code></td>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black">1.0, 2.0, 3.0</td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black" colspan="2">The minimum level of the XSLT language that the processor must support.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:decimal</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The [xsl:]version attribute at the outermost level of the
                                                stylesheet.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <p>The result of the transformation is returned as a map. There is one entry in the map
                           for the principal result document, and one
                           for each secondary result document. The key is a URI in the form of an <code>xs:string</code> value. The key for the principal
                           result document is the base output URI if specified, or the string <code>"output"</code> otherwise. The key for secondary
                           result documents is the URI of the document, as an absolute URI. The associated value
                           in each entry depends on the requested
                           delivery format. If the delivery format is <code>document</code>, the value is a document node. If the delivery format is
                           <code>serialized</code>, the value is a string containing the serialized result. If the delivery format is
                           <code>saved</code>,
                           the value is the absolute URI of the location where the serialized result has been
                           saved. The saved document will not be accessible
                           at this location within the current <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a>
                           (this is to prevent any dependency on order of execution).
                        </p>
                        <p>Where nodes are passed to or from the transformation, for example as the value of
                           a stylesheet parameter or the result of a function, 
                           they <span class="verb">should</span> if possible retain their node identity, their base URI, their type annotations, and
                           their relationships to all other nodes 
                           in the containing tree (including ancestors and siblings). If this is not possible,
                           for example because the only way of passing nodes 
                           to the chosen XSLT implementation is by serializing and re-parsing, then a node <span class="verb">may</span> be passed in the form of a deep 
                           copy, which may lose information about the identity of the node, about its ancestors
                           and siblings, about its base URI, about its type annotation, and about its 
                           relationships to other nodes passed across the interface.
                        </p>
                        <p>It is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether the XSLT transformation is executed
                           within the same <a title="execution scope" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#execution-scope"><span class="arrow">·</span>execution scope<span class="arrow">·</span></a> as the calling code.
                        </p>
                        <p>The function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a> in that it is 
                           <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> whether running the function twice against the same
                           inputs produces identical results. The results of two invocations may differ in the
                           identity of any returned nodes; they may also
                           differ in other respects, for example because the value of <a href="https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime"><code>fn:current-dateTime</code></a> is different for the two invocations,
                           or because the contents of external documents accessed using <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> or <code>xsl:source-document</code> change between
                           one invocation and the next.
                        </p>
                        <p>The delivery format <code>saved</code> indicates that the transformation should modify the state of the external environment.
                           
                           This has two noteworthy consequences:
                           
                        </p>
                        <ul>
                           <li>
                              <p>It creates a potential security risk.</p>
                           </li>
                           <li>
                              <p>The <code>fn:transform</code> function ceases to be a pure function, because it has side-effects.
                              </p>
                           </li>
                        </ul>
                        <p>Implementations <span class="verb">may</span> mitigate these problems in a number of ways, including the following:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>Use of the <code>delivery-format=saved</code> option <span class="verb">may</span> be disallowed, either 
                                 completely or at user option.
                                 
                              </p>
                           </li>
                           <li>
                              <p>The environment that the <code>delivery-format=saved</code> option is allowed to modify <span class="verb">may</span> be 
                                 sand-boxed in some way. For example: resources that are created using this option
                                 may be accessible only 
                                 via some special interface; the resource may become available only on completion of
                                 the execution scope 
                                 in which the fn:transform function is evaluated; or the implementation may prevent
                                 the use functions 
                                 such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> to access such resources.
                                 
                              </p>
                           </li>
                           <li>
                              <p>Creating multiple resources with the same URI <span class="verb">may</span> be disallowed.
                              </p>
                           </li>
                           <li>
                              <p>The implementation may define circumstances in which the side-effect of 
                                 creating external resources is thwarted as a consequence of query optimization
                                 (for example, any situation in which a query calls fn:transform but has no functional
                                 
                                 dependency on the result of the call). 
                                 
                              </p>
                           </li>
                           <li>
                              <p>There <span class="verb">may</span> be restrictions on the URIs that can be used to identify saved resources
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0001" title="err:FOXT0001">err:FOXT0001</a>] if the transformation cannot be invoked 
                           because no suitable XSLT processor is available. This includes (but is not limited
                           to) the following cases:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>No XSLT processor is available;</p>
                           </li>
                           <li>
                              <p>No XSLT processor supporting the requested version of XSLT is available;</p>
                           </li>
                           <li>
                              <p>The XSLT processor API does not support some requested feature (for example, the ability
                                 to supply tunnel parameters externally);
                              </p>
                           </li>
                        </ol>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0002" title="err:FOXT0002">err:FOXT0002</a>] if an error is detected in the supplied
                           parameters (for example if two mutually-exclusive parameters are supplied).
                        </p>
                        <p>If a static or dynamic error is reported by the XSLT processor, this function fails
                           with a dynamic error, retaining the XSLT error code.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0003" title="err:FOXT0003">err:FOXT0003</a>] if the XSLT transformation invoked by a call on
                           <code>fn:transform</code> fails with a static or dynamic error, and no more specific error code is available.
                           
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>XSLT 1.0 does not define any error codes, so this is the likely outcome with an XSLT
                              1.0 processor. XSLT 2.0 and 3.0 do
                              define error codes, but some APIs do not expose them. If multiple errors are signaled
                              by the transformation (which is most likely
                              to happen with static errors) then the error code should where possible be that of
                              one of these errors, chosen arbitrarily; the processor
                              may make details of additional errors available to the application in an <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                              way.
                           </p>
                        </div>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0004" title="err:FOXT0004">err:FOXT0004</a>] if the use of this function (or of selected options)
                           has been externally disabled, for example for security reasons.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0005" title="err:FOXT0005">err:FOXT0005</a>] if <code>delivery-format</code> is <code>saved</code>
                           and the results cannot be saved at the specified location.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0006" title="err:FOXT0006">err:FOXT0006</a>] if the transformation produces output containing
                           characters available only in XML 1.1, and the calling processor cannot handle such
                           characters.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOXT0007" title="err:FOXT0007">err:FOXT0007</a>] if the option <code>delivery-format:saved</code>
                           is used in a way that violates any implementation-defined restrictions on its use.
                        </p>
                        <p>Recursive use of the <code>fn:transform</code> function may lead to catastrophic failures such as
                           non-termination or stack overflow. No error code is assigned to such conditions, since
                           they cannot necessarily
                           be detected by the processor.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">As with all other functions in this specification, conformance requirements depend
                           on the host language.
                           For example, a host language might specify that provision of this function is optional,
                           or that it is excluded entirely,
                           or that implementations are required to support a particular set of values for the
                           <code>xslt-version</code>
                           parameter.
                        </p>
                        <p class="note">Even where support for this function is mandatory, it is <span class="verb">recommended</span> for security reasons that implementations
                           should provide a user option to disable its use, or to disable aspects of its functionality
                           such as
                           the ability to write to persistent resources.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The following example loads a stylesheet from the location <code>render.xsl</code>,
                              applies it to a document loaded from <code>test.xml</code>, and uses an XPath expression
                              to examine the result:
                           </p>
                           <div class="exampleInner"><pre class="small">let $result := fn:transform(
  map {
    "stylesheet-location" : "render.xsl",
    "source-node"    : fn:doc('test.xml')
  })
return $result?output//body  
               </pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="maps-and-arrays"></a>17 Maps and Arrays
            </h2>
            <p>Maps and arrays are introduced as new datatypes in XDM 3.1. This section describes
               functions that
               operate on maps and arrays. It also describes functions that operate on JSON data
               structures, which make
               extensive use of maps and arrays.
            </p>
            <div class="div2">
               
               <h3><a id="map-functions"></a>17.1 Functions that Operate on Maps
               </h3>
               <p>The functions defined in this section use a conventional namespace prefix <code>map</code>, which
                  is assumed to be bound to the namespace URI <code>http://www.w3.org/2005/xpath-functions/map</code>.
               </p>
               <p>A map is an additional kind of item.</p>
               <p><span class="termdef"><a id="dt-map"></a>[Definition]  A map consists of a set of entries. Each entry comprises a key 
                     which is an arbitrary atomic value, and an arbitrary sequence called the associated
                     value.</span></p>
               <p><span class="termdef"><a id="dt-same-key"></a>[Definition]  Within a map, no two entries have the <b>same key</b>. 
                     Two atomic values <code>K1</code> and <code>K2</code> are the <b>same key</b>
                     for this purpose if the (internal) function call <code>op:same-key($K1, $K2)</code>
                     returns true.</span></p>
               <p>It is not necessary that all the keys in a map should be
                  of the same type (for example, they can include a mixture of integers and strings).
               </p>
               <p>As with all other values, the functions in this specification treat maps as immutable.
                  
                  For example, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-remove"><code>map:remove</code></a> function <span>returns a map that differs
                     from the supplied map by the omission (typically) of one entry, but the supplied map
                     is not changed by the operation.
                     Two calls on <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-remove"><code>map:remove</code></a> with the same arguments return maps that are
                     indistinguishable from each other; there is no way of asking whether these are "the
                     same map".</span></p>
               <p>The function call <code>map:get($map, $key)</code> can be used to retrieve the value associated with a given key.
               </p>
               <p>A map can also be viewed as a function from keys to associated values. To achieve
                  this, a map is also a 
                  function item. The function corresponding to the map has the signature 
                  <code>function($key as xs:anyAtomicValue) as item()*</code>. Calling the function has the same effect as calling
                  the <code>get</code> function: the expression
                  <code>$map($key)</code> returns the same result as <code>get($map, $key)</code>. For example, if <code>$books-by-isbn</code>
                  is a map whose keys are ISBNs and whose assocated values are <code>book</code> elements, then the expression
                  <code>$books-by-isbn("0470192747")</code> returns the <code>book</code> element with the given ISBN.
                  The fact that a map is a function item allows it to be passed as an argument to higher-order
                  functions 
                  that expect a function item as one of their arguments.
               </p>
               <p>There is no operation to atomize a map or convert it to a string. The function <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> can in some cases
                  be used to produce a JSON representation of a map.
               </p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-same-key"><code>op:same-key</code></a></td>
                        <td>Determines whether two atomic values can coexist as separate keys within a map.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-merge"><code>map:merge</code></a></td>
                        <td>Returns a map that combines the entries from a number of existing maps.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-size"><code>map:size</code></a></td>
                        <td>Returns the number of entries in the supplied map.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-keys"><code>map:keys</code></a></td>
                        <td>Returns a sequence containing all the keys present in a map</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-contains"><code>map:contains</code></a></td>
                        <td>Tests whether a supplied map contains an entry for a given key</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-get"><code>map:get</code></a></td>
                        <td>Returns the value associated with a supplied key in a given map.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-find"><code>map:find</code></a></td>
                        <td>Searches the supplied input sequence and any contained maps and arrays for a map entry
                           with the supplied key,
                           and returns the corresponding values.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-put"><code>map:put</code></a></td>
                        <td>Returns a map containing all the contents of the supplied map, but with an additional
                           entry, which replaces
                           any existing entry for the same key.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-entry"><code>map:entry</code></a></td>
                        <td><span>Returns</span> a map that contains a single entry (a key-value pair).
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-remove"><code>map:remove</code></a></td>
                        <td>Returns a map containing all the entries from a supplied map, except <span>those having a specified key</span>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-for-each"><code>map:for-each</code></a></td>
                        <td>Applies a supplied function to every entry in a map, returning the concatenation of
                           the
                           results.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-same-key"></a>17.1.1 op:same-key
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Determines whether two atomic values can coexist as separate keys within a map.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">op:same-key</code>(<code class="arg">$k1</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>, <code class="arg">$k2</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The internal function <code>op:same-key</code> (which is not available at the user level) is used to assess whether two atomic
                           values are considered to be duplicates when used as keys in a map. A map cannot
                           contain two separate entries whose keys are <b>the same</b> as defined by this function. 
                           The function is also used when matching keys in functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-get"><code>map:get</code></a>
                           and <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-remove"><code>map:remove</code></a>.
                        </p>
                        <p>The function returns true if and only if one of the following conditions is true:</p>
                        <ol class="enumar">
                           <li>
                              <p>All of the following conditions are true:</p>
                              <ol class="enumla">
                                 <li>
                                    <p><code>$k1</code> is an instance of <code>xs:string</code>, <code>xs:anyURI</code>, or <code>xs:untypedAtomic</code></p>
                                 </li>
                                 <li>
                                    <p><code>$k2</code> is an instance of <code>xs:string</code>, <code>xs:anyURI</code>, or <code>xs:untypedAtomic</code></p>
                                 </li>
                                 <li>
                                    <p><code>fn:codepoint-equal($k1, $k2)</code></p>
                                 </li>
                              </ol>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>Strings are compared without any dependency on collations.</p>
                              </div>
                           </li>
                           <li>
                              <p>All of the following conditions are true:</p>
                              <ol class="enumla">
                                 <li>
                                    <p><code>$k1</code> is an instance of <code>xs:decimal</code>, <code>xs:double</code>, or <code>xs:float</code></p>
                                 </li>
                                 <li>
                                    <p><code>$k2</code> is an instance of <code>xs:decimal</code>, <code>xs:double</code>, or <code>xs:float</code></p>
                                 </li>
                                 <li>
                                    <p>One of the following conditions is true:</p>
                                    <ol class="enumlr">
                                       <li>
                                          <p>Both <code>$k1</code> and <code>$k2</code> are <code>NaN</code></p>
                                          <div class="note">
                                             <p class="prefix"><b>Note:</b></p>
                                             <p><code>xs:double('NaN')</code> is the same key as <code>xs:float('NaN')</code></p>
                                          </div>
                                       </li>
                                       <li>
                                          <p>Both <code>$k1</code> and <code>$k2</code> are positive infinity
                                          </p>
                                          <div class="note">
                                             <p class="prefix"><b>Note:</b></p>
                                             <p><code>xs:double('INF')</code> is the same key as <code>xs:float('INF')</code></p>
                                          </div>
                                       </li>
                                       <li>
                                          <p>Both <code>$k1</code> and <code>$k2</code> are negative infinity
                                          </p>
                                          <div class="note">
                                             <p class="prefix"><b>Note:</b></p>
                                             <p><code>xs:double('-INF')</code> is the same key as <code>xs:float('-INF')</code></p>
                                          </div>
                                       </li>
                                       <li>
                                          <p><code>$k1</code> and <code>$k2</code> when converted to decimal numbers with no rounding or loss of precision
                                             are mathematically equal.
                                          </p>
                                          <div class="note">
                                             <p class="prefix"><b>Note:</b></p>
                                             <p>Every instance of <code>xs:double</code>, <code>xs:float</code>, and <code>xs:decimal</code> can be represented
                                                exactly as a decimal number provided enough digits are available both before and after
                                                the decimal point. Unlike the <code>eq</code>
                                                relation, which converts both operands to <code>xs:double</code> values, possibly losing precision in the process, this
                                                comparison is transitive.
                                             </p>
                                          </div>
                                          <div class="note">
                                             <p class="prefix"><b>Note:</b></p>
                                             <p>Positive and negative zero are the same key.</p>
                                          </div>
                                       </li>
                                    </ol>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>All of the following conditions are true:</p>
                              <ol class="enumla">
                                 <li>
                                    <p><code>$k1</code> is an instance of <code>xs:date</code>, <code>xs:time</code>, <code>xs:dateTime</code>,
                                       <code>xs:gYear</code>, <code>xs:gYearMonth</code>, <code>xs:gMonth</code>, <code>xs:gMonthDay</code>, or <code>xs:gDay</code></p>
                                 </li>
                                 <li>
                                    <p><code>$k2</code> is an instance of <code>xs:date</code>, <code>xs:time</code>, <code>xs:dateTime</code>,
                                       <code>xs:gYear</code>, <code>xs:gYearMonth</code>, <code>xs:gMonth</code>, <code>xs:gMonthDay</code>, or <code>xs:gDay</code></p>
                                 </li>
                                 <li>
                                    <p>One of the following conditions is true:</p>
                                    <ol class="enumlr">
                                       <li>
                                          <p>Both <code>$k1</code> and <code>$k2</code> have a timezone
                                          </p>
                                       </li>
                                       <li>
                                          <p>Neither <code>$k1</code> nor <code>$k2</code> has a timezone
                                          </p>
                                       </li>
                                    </ol>
                                 </li>
                                 <li>
                                    <p><code>fn:deep-equal($k1, $k2)</code></p>
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>The use of <code>deep-equal</code> rather than <code>eq</code> ensures that comparing values of different
                                          types yields <code>false</code> rather than an error.
                                       </p>
                                    </div>
                                 </li>
                              </ol>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>Unlike the <code>eq</code> operator, this comparison has no dependency on the implicit timezone, which means
                                    that
                                    the question of whether or not a map contains duplicate keys is not dependent on this
                                    aspect of the dynamic context.
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>All of the following conditions are true:</p>
                              <ol class="enumla">
                                 <li>
                                    <p><code>$k1</code> is an instance of <code>xs:boolean</code>, <code>xs:hexBinary</code>, <code>xs:base64Binary</code>,
                                       <code>xs:duration</code>, <code>xs:QName</code>, or <code>xs:NOTATION</code></p>
                                 </li>
                                 <li>
                                    <p><code>$k2</code> is an instance of <code>xs:boolean</code>, <code>xs:hexBinary</code>, <code>xs:base64Binary</code>,
                                       <code>xs:duration</code>, <code>xs:QName</code>, or <code>xs:NOTATION</code></p>
                                 </li>
                                 <li>
                                    <p><code>fn:deep-equal($k1, $k2)</code></p>
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>The use of <code>deep-equal</code> rather than <code>eq</code> ensures that comparing values of different
                                          types yields <code>false</code> rather than an error.
                                       </p>
                                    </div>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The rules for comparing keys in a map are chosen to ensure that the comparison is:</p>
                        <div class="note">
                           <ul>
                              <li>
                                 <p><b>Context-free</b>: there is no dependency on the static or dynamic context
                                 </p>
                              </li>
                              <li>
                                 <p><b>Error-free</b>: any two atomic values can be compared, and the result is either true or false, never
                                    an error
                                 </p>
                              </li>
                              <li>
                                 <p><b>Transitive</b>: if <var>A</var> is the same key as <var>B</var>, and <var>B</var> is the same key as <var>C</var>, 
                                    then <var>A</var> is the same key as <var>C</var>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p class="note">As always, any algorithm that delivers the right result is acceptable. For example,
                           when testing whether an <code>xs:double</code>
                           value <var>D</var> is the same key as an <code>xs:decimal</code> value that has <var>N</var> significant digits, it is not
                           necessary to know all the digits in the decimal expansion of <var>D</var> to establish the result: computing the first <var>N+1</var> 
                           significant digits (or indeed, simply knowing that there are more than <var>N</var> significant digits) is sufficient.
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-merge"></a>17.1.2 map:merge
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a map that combines the entries from a number of existing maps.</p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">map:merge</code>(<code class="arg">$maps</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                        <div class="proto"><code class="function">map:merge</code>(<code class="arg">$maps</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)*</code>, <code class="arg">$options</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:merge</code> <span>returns a map</span> that
                           is formed by combining the contents of the maps supplied in the <code>$maps</code>
                           argument.
                        </p>
                        <p>Informally, the supplied maps are combined as follows:</p>
                        <ol class="enumar">
                           <li>
                              <p>There is one entry in the returned map for each distinct key present in the union
                                 of the input maps, where two keys are distinct if they are not the <span><a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a></span>.
                              </p>
                           </li>
                           <li>
                              <p>If there are duplicate keys, that is, if two or more maps contain entries having the
                                 <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a>, then the way this is handled is
                                 controlled by the second (<code>$options</code>) argument.
                              </p>
                           </li>
                        </ol>
                        <p>The definitive specification is as follows.</p>
                        <ol class="enumar">
                           <li>
                              <p>The effect of calling the single-argument function is the same as the effect of
                                 calling the two-argument function with an empty map as the value of <code>$options</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <code>$options</code> argument can be used to control the way in which duplicate keys are handled.
                                 The <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> apply.
                                 
                              </p>
                           </li>
                           <li>
                              <p>The entries that may appear in the <code>$options</code> map are as follows:
                              </p>
                              <table style="border-collapse: collapse">
                                 <thead>
                                    <tr style="border-top: 2px solid black; border-bottom: 2px solid black">
                                       <th style="text-align:left; padding-right: 10px; ">Key</th>
                                       <th style="text-align:left; padding-right: 10px; ">Value</th>
                                       <th style="text-align:left">Meaning</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    <tr>
                                       <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="6"><code>duplicates</code></td>
                                       <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines the policy for handling duplicate keys: specifically, the action to be
                                          taken if two maps in the input sequence <code>$maps</code> contain entries with key values
                                          <var>K1</var> and <var>K2</var> where <var>K1</var> and <var>K2</var> are the 
                                          <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>same key<span class="arrow">·</span></a>.
                                          
                                          <ul>
                                             <li>
                                                <p><b>Type: </b><code>xs:string</code></p>
                                             </li>
                                             <li>
                                                <p><b>Default: </b><code>use-first</code></p>
                                             </li>
                                          </ul>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>reject</code></td>
                                       <td style="vertical-align:top; border-bottom: 1px solid black">
                                          An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0003" title="err:FOJS0003">err:FOJS0003</a>] if duplicate keys are encountered.
                                          
                                       </td>
                                    </tr>
                                    <tr>
                                       <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>use-first</code></td>
                                       <td style="vertical-align:top; border-bottom: 1px solid black">
                                          If duplicate keys are present, all but the first of a set of duplicates are ignored,
                                          
                                          where the ordering is based on the order of maps in the <code>$maps</code> argument.
                                          
                                       </td>
                                    </tr>
                                    <tr>
                                       <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>use-last</code></td>
                                       <td style="vertical-align:top; border-bottom: 1px solid black">
                                          If duplicate keys are present, all but the last of a set of duplicates are ignored,
                                          
                                          where the ordering is based on the order of maps in the <code>$maps</code> argument.
                                          
                                       </td>
                                    </tr>
                                    <tr>
                                       <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>use-any</code></td>
                                       <td style="vertical-align:top; border-bottom: 1px solid black">
                                          If duplicate keys are present, all but one of a set of duplicates are ignored, 
                                          and it is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>
                                          which one is retained. 
                                          
                                       </td>
                                    </tr>
                                    <tr>
                                       <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>combine</code></td>
                                       <td style="vertical-align:top; border-bottom: 2px solid black">
                                          If duplicate keys are present, the result map includes an entry for the key whose
                                          
                                          associated value is the sequence-concatenation of all the values associated with the
                                          key, 
                                          retaining order based on the order of maps in the <code>$maps</code> argument.
                                          The key value in the result map that corresponds to such a set of duplicates must
                                          be the <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>same key<span class="arrow">·</span></a> as each of the duplicates, but it is
                                          otherwise unconstrained: for example if the duplicate keys are <code>xs:byte(1)</code>
                                          and <code>xs:short(1)</code>, the key in the result could legitimately be <code>xs:long(1)</code>.
                                          
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
                           </li>
                        </ol>
                        <p>The result of the function call <code>map:merge($MAPS, $OPTIONS)</code>
                           is defined to be consistent with the result of the expression:
                        </p>
                        <div class="exampleInner"><pre class="small">let $FOJS0003 := QName("http://www.w3.org/2005/xqt-errors", "FOJS0003"),

$duplicates-handler := map {
  "use-first":   function($a, $b) {$a},
  "use-last":    function($a, $b) {$b},
  "combine":     function($a, $b) {$a, $b},
  "reject":      function($a, $b) {fn:error($FOJS0003)},
  "use-any": function($a, $b) {fn:random-number-generator()?permute(($a, $b))[1]}
},

$combine-maps := function($A as map(*), $B as map(*), $deduplicator as function(*)) {
    fn:fold-left(map:keys($B), $A, function($z, $k){ 
        if (map:contains($z, $k))
        then map:put($z, $k, $deduplicator($z($k), $B($k)))
        else map:put($z, $k, $B($k))
    })
}
return fn:fold-left($MAPS, map{}, 
    $combine-maps(?, ?, $duplicates-handler(($OPTIONS?duplicates, "use-first")[1]))
            
            </pre></div>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>By way of explanation, <code>$combine-maps</code> is a function that combines
                              two maps by iterating over the keys of the second map, adding each key and its corresponding
                              value to the first map as it proceeds. The second call of <a href="https://www.w3.org/TR/xpath-functions-31/#func-fold-left"><code>fn:fold-left</code></a>
                              in the <code>return</code> clause then iterates over the maps supplied in the call
                              to <code>map:merge</code>, accumulating a single map that absorbs successive maps
                              in the input sequence by calling <code>$combine-maps</code>.
                           </p>
                           <p>This algorithm processes the supplied maps in a defined order, but processes the keys
                              within
                              each map in implementation-dependent order.
                           </p>
                           <p>The use of <a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator"><code>fn:random-number-generator</code></a> represents one possible conformant
                              implementation for <code>"duplicates":"use-any"</code>, but it is not the only conformant
                              implementation and is not intended to be a realistic implementation. The purpose of
                              this
                              option is to allow the implementation to use whatever strategy is most efficient;
                              for example,
                              if the input maps are processed in parallel, then specifying <code>"duplicates":"use-any"</code>
                              means that the implementation does not need to keep track of the original order of
                              the sequence of input
                              maps.
                           </p>
                        </div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0003" title="err:FOJS0003">err:FOJS0003</a>] if the value of 
                           <code>$options</code> indicates that duplicates are to be rejected, and a duplicate key is encountered.
                        </p>
                        <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005" title="err:FOJS0005">err:FOJS0005</a>] if the value of 
                           <code>$options</code> includes an entry whose key is defined 
                           in this specification, and whose value is not a permitted value for that key.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the input is an empty sequence, the result is an empty map.</p>
                        <p class="note">If the input is a sequence of length one, the result map is 
                           <span>indistinguishable from the supplied map</span>.
                        </p>
                        <p class="note">There is no requirement that the supplied input maps should have the same or compatible
                           types. The type of a map (for example <code>map(xs:integer, xs:string)</code>) is
                           descriptive of the entries it currently contains, but is not a constraint on how the
                           map
                           may be combined with other maps.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $week := map{0:"Sonntag", 1:"Montag", 2:"Dienstag",
     3:"Mittwoch", 4:"Donnerstag", 5:"Freitag", 6:"Samstag"}</pre></div>
                           <p>The expression <code>map:merge(())</code> returns <code>map{}</code>. <em>(Returns an empty map).</em></p>
                           <p>The expression <code>map:merge((map:entry(0, "no"), map:entry(1, "yes")))</code> returns <code>map{0:"no", 1:"yes"}</code>. <em>(Returns a map with two entries).</em></p>
                           <p>The expression <code>map:merge(($week, map{7:"Unbekannt"}))</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:"Samstag", 7:"Unbekannt"}</code>. <em>(The value of the existing map is unchanged; the <span>returned map 
                                    contains</span> all the entries from <code>$week</code>, supplemented with an additional
                                 entry.)</em></p>
                           <p>The expression <code>map:merge(($week, map{6:"Sonnabend"}), map{"duplicates":"use-last"})</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:"Sonnabend"}</code>. <em>(The value of the existing map is unchanged; the returned map
                                 contains all the entries from <code>$week</code>, with one entry replaced by a
                                 new entry. Both input maps contain an entry with the key <code>6</code>; the
                                 one used in the result is the one that comes last in the input
                                 sequence.)</em></p>
                           <p>The expression <code>map:merge(($week, map{6:"Sonnabend"}), map{"duplicates":"use-first"})</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:"Samstag"}</code>. <em>(The value of the existing map is unchanged; the returned map
                                 contains all the entries from <code>$week</code>, with one entry replaced by a
                                 new entry. Both input maps contain an entry with the key <code>6</code>; the
                                 one used in the result is the one that comes first in the input
                                 sequence.)</em></p>
                           <p>The expression <code>map:merge(($week, map{6:"Sonnabend"}), map{"duplicates":"combine"})</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:("Samstag", "Sonnabend")}</code>. <em>(The value of the existing map is unchanged; the returned map
                                 contains all the entries from <code>$week</code>, with one entry replaced by a
                                 new entry. Both input maps contain an entry with the key <code>6</code>; the
                                 entry that appears in the result is the sequence-concatenation of the entries
                                 in the input maps, retaining order.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-size"></a>17.1.3 map:size
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of entries in the supplied map.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:size</code>(<code class="arg">$map</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:size</code> takes any <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a>
                           as its <code>$map</code> argument and returns the number of entries that are present
                           in the map.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>map:size(map{})</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>map:size(map{"true":1, "false":0})</code> returns <code>2</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-keys"></a>17.1.4 map:keys
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a sequence containing all the keys present in a map</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:keys</code>(<code class="arg">$map</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic with respect to ordering" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic-wrt-ordering"><span class="arrow">·</span>nondeterministic-wrt-ordering<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:keys</code> takes any <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a>
                           as its <code>$map</code> argument and returns the keys that are present in the map as
                           a sequence of atomic values, in <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order.
                        </p>
                        <p>The function is <b>non-deterministic with respect to ordering</b>
                           (see <a href="https://www.w3.org/TR/xpath-functions-31/#properties-of-functions"><b>1.7.4 Properties of functions</b></a>). This means that two calls with the same argument
                           are not guaranteed to produce the results in the same order.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The number of items in the result will be the same as the number of
                           entries in the map, and the result sequence will contain no duplicate values.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>map:keys(map{1:"yes", 2:"no"})</code> returns some permutation of <code>(1,2)</code>. <em>(The result is in <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-contains"></a>17.1.5 map:contains
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Tests whether a supplied map contains an entry for a given key</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:contains</code>(<code class="arg">$map</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>, <code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:contains</code> returns true if the <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> supplied as <code>$map</code> contains an entry with <span>the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a> as</span> the
                           supplied value of <code>$key</code>; otherwise it returns false.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $week := map{0:"Sonntag", 1:"Montag", 2:"Dienstag",
     3:"Mittwoch", 4:"Donnerstag", 5:"Freitag", 6:"Samstag"}</pre></div>
                           <p>The expression <code>map:contains($week, 2)</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>map:contains($week, 9)</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>map:contains(map{}, "xyz")</code> returns <code>false()</code>.
                           </p>
                           <p>The expression <code>map:contains(map{"xyz":23}, "xyz")</code> returns <code>true()</code>.
                           </p>
                           <p>The expression <code>map:contains(map{"abc":23, "xyz":()}, "xyz")</code> returns <code>true()</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-get"></a>17.1.6 map:get
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value associated with a supplied key in a given map.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:get</code>(<code class="arg">$map</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>, <code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:get</code> attempts to find an entry within the <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> supplied as <code>$map</code> that has <span>the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a> as</span> the supplied
                           value of <code>$key</code>. If there is such an entry, it returns the associated value;
                           otherwise it returns an empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">A return value of <code>()</code> from <code>map:get</code> could indicate that
                           the key is present in the map with an associated value of <code>()</code>, or it could
                           indicate that the key is not present in the map. The two cases can be distinguished
                           by
                           calling <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-contains"><code>map:contains</code></a>.
                        </p>
                        <p class="note">Invoking the <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> as a function item has the same effect
                           as calling <code>get</code>: that is, when <code>$map</code> is a map, the expression
                           <code>$map($K)</code> is equivalent to <code>map:get($map, $K)</code>. Similarly, the
                           expression <code>map:get(map:get(map:get($map, 'employee'), 'name'), 'first')</code> can
                           be written as <code>$map('employee')('name')('first')</code>. 
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $week := map{0:"Sonntag", 1:"Montag", 2:"Dienstag",
     3:"Mittwoch", 4:"Donnerstag", 5:"Freitag", 6:"Samstag"}</pre></div>
                           <p>The expression <code>map:get($week, 4)</code> returns <code>"Donnerstag"</code>.
                           </p>
                           <p>The expression <code>map:get($week, 9)</code> returns <code>()</code>. <em>(When the key is not present, the function returns an empty
                                 sequence.)</em></p>
                           <p>The expression <code>map:get(map:entry(7,()), 7)</code> returns <code>()</code>. <em>(An empty sequence as the result can also signify that the key is
                                 present and the associated value is an empty sequence.)</em></p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-find"></a>17.1.7 map:find
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Searches the supplied input sequence and any contained maps and arrays for a map entry
                           with the supplied key,
                           and returns the corresponding values.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:find</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>, <code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:find</code> searches the sequence supplied as <code>$input</code>
                           looking for map entries whose key is the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a>
                           as <code>$key</code>. The associated value in any such map entry (each being in general a sequence)
                           is returned as a member of the result array.
                        </p>
                        <p>The search processes the <code>$input</code> sequence using the following recursively-defined rules 
                           (any equivalent algorithm may be used provided it delivers
                           the same result, respecting those rules that constrain the order of the result):
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>To process a sequence, process each of its items in order.</p>
                           </li>
                           <li>
                              <p>To process an item that is an array, process each of the array's members in order
                                 
                                 (each member is, in general, a sequence).
                              </p>
                           </li>
                           <li>
                              <p>To process an item that is a map, then for each key-value entry (<var>K</var>, <var>V</var>)
                                 in the map (in <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order)
                                 perform both of the following steps, in order:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>If <var>K</var> is the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a> as <code>$key</code>, 
                                       then add <var>V</var> as a new member to the end of the result array.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Process <var>V</var> (which is, in general, a sequence).
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>To process an item that is neither a map nor an array, do nothing. (Such items are
                                 ignored).
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If <code>$input</code> is an empty sequence, map, or array, or if the requested <code>$key</code> is not found,
                           the result will be a zero-length array.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $responses := [map{0:'no', 1:'yes'}, map{0:'non', 1:'oui'}, 
                  map{0:'nein', 1:('ja', 'doch')}]</pre></div>
                           <p>The expression <code>map:find($responses, 0)</code> returns <code>['no', 'non', 'nein']</code>.
                           </p>
                           <p>The expression <code>map:find($responses, 1)</code> returns <code>['yes', 'oui', ('ja', 'doch')]</code>.
                           </p>
                           <p>The expression <code>map:find($responses, 2)</code> returns <code>[]</code>.
                           </p>
                           <div class="exampleInner"><pre class="small">let $inventory := map{"name":"car", "id":"QZ123", 
      "parts": [map{"name":"engine", "id":"YW678", "parts":[]}]}</pre></div>
                           <p>The expression <code>map:find($inventory, "parts")</code> returns <code>[[map{"name":"engine", "id":"YW678", "parts":[]}], []]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-put"></a>17.1.8 map:put
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a map containing all the contents of the supplied map, but with an additional
                           entry, which replaces
                           any existing entry for the same key.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:put</code>(<code class="arg">$map</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>, <code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>, <code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:put</code> returns <span>a <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> that</span> contains all entries from the supplied <code>$map</code>,
                           with the exception of any entry whose key is the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a> as <code>$key</code>, together with a new
                           entry whose key is <code>$key</code> and whose associated value is <code>$value</code>.
                        </p>
                        <p>The effect of the function call <code>map:put($MAP, $KEY, $VALUE)</code> is equivalent
                           to the result of the following steps:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p><code>let $MAP2 := map:remove($MAP, $KEY)</code></p>
                              <p>This returns a map in which all entries with the same key as <code>$KEY</code> have been removed.
                              </p>
                           </li>
                           <li>
                              <p>Construct and return a map containing:</p>
                              <ol class="enumla">
                                 <li>
                                    <p>All the entries (key/value pairs) in <code>$MAP2</code>, and
                                    </p>
                                 </li>
                                 <li>
                                    <p>The entry <code>map:entry($KEY, $VALUE)</code></p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">There is no requirement that the type of <code>$key</code> and <code>$value</code> be consistent with the types
                           of any existing keys and values in the supplied map.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $week := map{0:"Sonntag", 1:"Montag", 2:"Dienstag",
       3:"Mittwoch", 4:"Donnerstag", 5:"Freitag", 6:"Samstag"}</pre></div>
                           <p>The expression <code>map:put($week, 6, "Sonnabend")</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:"Sonnabend"}</code>.
                           </p>
                           <p>The expression <code>map:put($week, -1, "Unbekannt")</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:"Samstag", -1:"Unbekannt"}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-entry"></a>17.1.9 map:entry
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p><span>Returns</span> a map that contains a single entry (a key-value pair).
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:entry</code>(<code class="arg">$key</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>, <code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:entry</code> returns a <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> which  contains a single
                           entry. The key of the entry in the new map is
                           <code>$key</code>, and its associated value is <code>$value</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The function call <code>map:entry(K, V)</code> produces the same result as the
                           expression <code>map{K : V}</code>.
                        </p>
                        <p class="note">The function <code>map:entry</code> is intended primarily for use in conjunction with
                           the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-merge"><code>map:merge</code></a>. For example, a map containing seven entries may be
                           constructed like this:
                        </p>
                        <div class="exampleInner"><pre class="small">map:merge((
   map:entry("Su", "Sunday"),
   map:entry("Mo", "Monday"),
   map:entry("Tu", "Tuesday"),
   map:entry("We", "Wednesday"),
   map:entry("Th", "Thursday"),
   map:entry("Fr", "Friday"),
   map:entry("Sa", "Saturday")
   ))</pre></div>
                        <p class="note">The <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-merge"><code>map:merge</code></a> function can be used to construct
                           a map with a variable number of entries, for example:
                        </p>
                        <div class="exampleInner"><pre>map:merge(for $b in //book return map:entry($b/isbn, $b))</pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>map:entry("M", "Monday")</code> returns <code>map{"M":"Monday"}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-remove"></a>17.1.10 map:remove
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns a map containing all the entries from a supplied map, except <span>those having a specified key</span>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">map:remove</code>(<code class="arg">$map</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>, <code class="arg">$keys</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">map(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:remove</code> returns a <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> containing all the entries in <code>$map</code> except for any entry whose key is 
                           the <a title="same key" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-same-key"><span class="arrow">·</span>same key<span class="arrow">·</span></a> as <span>an item in</span> <code>$keys</code>.
                        </p>
                        <p>No failure occurs <span>if an item in <code>$keys</code> does not correspond to any entry in <code>$map</code>;
                              that key value is simply ignored</span>.
                        </p>
                        <p>The effect of the function call <code>map:remove($MAP, $KEY)</code> can be described more formally as the result of the expression below:
                        </p>
                        <div class="exampleInner"><pre class="small">map:merge (
    map:for-each (
       $MAP, function($k, $v) { 
               if (some $key in $KEY satisfies (op:same-key($k, $key)) 
               then () 
               else map:entry($k, $v)
             } ) ) </pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <div class="exampleInner"><pre class="small">let $week := map{0:"Sonntag", 1:"Montag", 2:"Dienstag",
       3:"Mittwoch", 4:"Donnerstag", 5:"Freitag", 6:"Samstag"}</pre></div>
                           <p>The expression <code>map:remove($week, 4)</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 5:"Freitag",
                                 6:"Samstag"}</code>.
                           </p>
                           <p>The expression <code>map:remove($week, 23)</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag",
                                 5:"Freitag", 6:"Samstag"}</code>.
                           </p>
                           <p>The expression <code>map:remove($week, (0, 6 to 7))</code> returns <code>map{1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag", 5:"Freitag"}</code>.
                           </p>
                           <p>The expression <code>map:remove($week, ())</code> returns <code>map{0:"Sonntag", 1:"Montag", 2:"Dienstag", 3:"Mittwoch", 4:"Donnerstag", 5:"Freitag",
                                 6:"Samstag"}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-map-for-each"></a>17.1.11 map:for-each
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Applies a supplied function to every entry in a map, returning the concatenation of
                           the
                           results.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">map:for-each</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$map</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$action</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(xs:anyAtomicType, item()*) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic with respect to ordering" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic-wrt-ordering"><span class="arrow">·</span>nondeterministic-wrt-ordering<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function <code>map:for-each</code> takes any <a title="map" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-map"><span class="arrow">·</span>map<span class="arrow">·</span></a> as its <code>$map</code> argument and applies the supplied function
                           to each entry in the map, in <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order; the result is the sequence obtained by
                           concatenating the results of these function calls.
                        </p>
                        <p>The function is <b>non-deterministic with respect to ordering</b>
                           (see <a href="https://www.w3.org/TR/xpath-functions-31/#properties-of-functions"><b>1.7.4 Properties of functions</b></a>). This means that two calls with the same arguments
                           are not guaranteed to process the map entries in the same order.
                        </p>
                        <p>The function supplied as <code>$action</code> takes two arguments. It is called
                           supplying the key of the map entry as the first argument, and the associated value
                           as
                           the second argument.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>map:for-each(map{1:"yes", 2:"no"}, function($k,
                                 $v){$k})</code> returns some permutation of <code>(1,2)</code>. <em>(This function call is equivalent to calling <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-keys"><code>map:keys</code></a>. The
                                 result is in implementation-dependent order.)</em></p>
                           <p>The expression <code>distinct-values(map:for-each(map{1:"yes", 2:"no"}, function($k,
                                 $v){$v}))</code> returns some permutation of <code>("yes", "no")</code>. <em>(This function call returns the distinct values present in the map, in
                                 implementation-dependent order.)</em></p>
                           <p>The expression <code>map:merge(map:for-each(map{"a":1, "b":2}, function($k,
                                 $v){map:entry($k, $v+1)}))</code> returns <code>map{"a":2, "b":3}</code>. <em>(This function call returns a map with the same keys as the input map,
                                 with the value of each entry increased by one.)</em></p>
                           <p>This XQuery example converts the entries in a map to attributes on a newly constructed
                              element node:
                           </p>
                           <div class="exampleInner"><pre class="small">let $dimensions := map{'height': 3, 'width': 4, 'depth': 5};
return
  &lt;box&gt;{
     map:for-each($dimensions, function ($k, $v) { attribute {$k} {$v} })
  }&lt;/box&gt;</pre></div>
                           <p>The result is the element <code>&lt;box height="3" width="4"
                                 depth="5"/&gt;</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="map-operations"></a>17.2 Other Operations on Maps 
               </h3>
               <p>Because a map is a function item, functions that apply to functions also apply
                  to maps. A map is an anonymous function, so <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-name"><code>fn:function-name</code></a> returns the empty
                  sequence; <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-arity"><code>fn:function-arity</code></a> always returns <code>1</code>.
               </p>
               <p>Maps may be compared using the <a href="https://www.w3.org/TR/xpath-functions-31/#func-deep-equal"><code>fn:deep-equal</code></a> function.
               </p>
               <p>There is no function or operator to atomize a map or convert it to a string (other
                  than <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a>,
                  which can be used to serialize some maps as JSON texts).
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="array-functions"></a>17.3 Functions that Operate on Arrays
               </h3>
               <p>An array is an additional kind of item. An array of size <var>N</var> is a mapping from the integers
                  (1 to <var>N</var>) to a set of values, called the members of the array, each of which is an arbitrary
                  sequence. Because an array is an item, and therefore a sequence, arrays can be nested.
               </p>
               <p>The functions defined in this section use a conventional namespace prefix <code>array</code>, which
                  is assumed to be bound to the namespace URI <code>http://www.w3.org/2005/xpath-functions/array</code>.
               </p>
               <p>As with all other values, arrays are treated as immutable. 
                  For example, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-reverse"><code>array:reverse</code></a> function returns an array that differs from the supplied
                  array in the order of its members, but the supplied array is not changed by the operation.
                  Two calls
                  on <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-reverse"><code>array:reverse</code></a> with the same argument will return arrays that are indistinguishable from
                  each other; there is no way of asking whether these are "the same array". Like sequences,
                  arrays have no identity. 
               </p>
               <p>An array acts as a function from integer positions to associated values, so the
                  function call <code>$array($index)</code> can be used to retrieve the array member at a given position.
                  The function corresponding to the array has the signature 
                  <code>function($index as xs:integer) as item()*</code>. 
                  The fact that an array is a function item allows it to be passed as an argument to
                  higher-order functions 
                  that expect a function item as one of their arguments.
               </p>
               <p>In the function definitions that follow, all the array functions are defined in terms
                  of five primitives:
               </p>
               <ul>
                  <li>
                     <p><code>[]</code> represents the zero-length array (an array with no members).
                     </p>
                  </li>
                  <li>
                     <p><code>$array($index)</code> returns the member at position <code>$index</code>.
                     </p>
                  </li>
                  <li>
                     <p><code>array:size($array)</code> returns the number of members in the array.
                     </p>
                  </li>
                  <li>
                     <p><code>op:array-singleton($seq)</code> returns an array of size one whose single member
                        is the supplied sequence <code>$seq</code>. This operation is not directly available
                        as a user-visible function, because the effect can easily be achieved using the syntax
                        <code>[ $seq ]</code>.
                     </p>
                  </li>
                  <li>
                     <p><code>op:array-concat($array1, $array2)</code> returns an array whose members are first the members of 
                        <code>$array1</code> and then the members of <code>$array2</code>. This operation is not directly available
                        as a user-visible function, because the effect can easily be achieved using <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-join"><code>array:join</code></a>.
                     </p>
                  </li>
               </ul>
               <p>There are two operations on arrays for which the XPath language provides custom syntax:</p>
               <ul>
                  <li>
                     <p><code>array { $sequence }</code> constructs an array whose members are the items in <code>$sequence</code>.
                        Every member of this array will be a singleton item.
                        This can be defined as <code>fn:fold-left($sequence, [], function($x, $y){ op:array-concat($x, op:array-singleton($y))</code></p>
                  </li>
                  <li>
                     <p><code>[ E1, E2, E3, ..., En]</code> constructs an array in which <code>E1</code> is the first member,
                        <code>E2</code> is the second member, and so on. If <var>N=0</var>, the value is the empty array <code>[]</code>;
                        if <var>N=1</var>, the value is <code>op:array-concat([], array { E1 })</code>, and if <var>N &gt; 1</var>,
                        the value is <code>op:array-concat(op:array-singleton(E1), [ E2, ... En ])</code>.
                     </p>
                  </li>
               </ul>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-size"><code>array:size</code></a></td>
                        <td>Returns the number of members in the supplied array.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-get"><code>array:get</code></a></td>
                        <td>Returns the value at the specified position in the supplied array (counting from 1).</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-put"><code>array:put</code></a></td>
                        <td>Returns an array containing all the members of a supplied array, except for one member
                           which is replaced with a new value.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-append"><code>array:append</code></a></td>
                        <td>Returns an array containing all the members of a supplied array, plus one additional
                           member at the end.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-subarray"><code>array:subarray</code></a></td>
                        <td>Returns an array containing all members from a supplied array starting at a supplied
                           position, up to a specified length.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-remove"><code>array:remove</code></a></td>
                        <td>Returns an array containing all the members of the supplied array, except for the
                           <span>members at specified positions</span>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-insert-before"><code>array:insert-before</code></a></td>
                        <td>Returns an array containing all the members of the supplied array, with one additional
                           member at a specified position.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-head"><code>array:head</code></a></td>
                        <td>Returns the first member of an array, that is <code>$array(1)</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-tail"><code>array:tail</code></a></td>
                        <td>Returns an array containing all members except the first from a supplied array.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-reverse"><code>array:reverse</code></a></td>
                        <td>Returns an array containing all the members of a supplied array, but in reverse order.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-join"><code>array:join</code></a></td>
                        <td>Concatenates the contents of several arrays into a single array.</td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-for-each"><code>array:for-each</code></a></td>
                        <td>Returns an array whose size is the same as <code>array:size($array)</code>, in which
                           each member is computed by applying <code>$function</code> to the corresponding member of
                           <code>$array</code>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-filter"><code>array:filter</code></a></td>
                        <td>Returns an array containing those members of the <code>$array</code> for which 
                           <code>$function</code> returns true.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-fold-left"><code>array:fold-left</code></a></td>
                        <td>Evaluates the supplied function cumulatively on successive members of the supplied
                           array.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-fold-right"><code>array:fold-right</code></a></td>
                        <td>Evaluates the supplied function cumulatively on successive values of the supplied
                           array.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-for-each-pair"><code>array:for-each-pair</code></a></td>
                        <td>Returns an array obtained by evaluating the supplied function once for each pair of
                           members at the same position in
                           the two supplied arrays.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-sort"><code>array:sort</code></a></td>
                        <td>Returns an array containing all the members of the supplied array, sorted 
                           according to the value of a sort key supplied as a function.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-array-flatten"><code>array:flatten</code></a></td>
                        <td>Replaces any array appearing in a supplied sequence with the members of the array,
                           recursively.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <div class="div3">
                  
                  <h4><a id="func-array-size"></a>17.3.1 array:size
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the number of members in the supplied array.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:size</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>If <code>$array</code> is empty the function returns zero.
                        </p>
                        <p>Otherwise, the function returns the number of members in <code>$array</code>.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Note that because an array is an item, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-count"><code>fn:count</code></a> function when applied to an array always returns 1 (one).
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:size(["a", "b", "c"])</code> returns <code>3</code>.
                           </p>
                           <p>The expression <code>array:size(["a", ["b", "c"]])</code> returns <code>2</code>.
                           </p>
                           <p>The expression <code>array:size([ ])</code> returns <code>0</code>.
                           </p>
                           <p>The expression <code>array:size([[ ]])</code> returns <code>1</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-get"></a>17.3.2 array:get
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the value at the specified position in the supplied array (counting from 1).</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:get</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>, <code class="arg">$position</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is the value of <code>$array($position)</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error occurs [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if <code>$position</code> is not in the range <code>1 to
                              array:size($array)</code> inclusive.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>["a", "b", "c"] =&gt; array:get(2)</code> returns <code>"b"</code>.
                           </p>
                           <p>The expression <code>["a", ["b", "c"]] =&gt; array:get(2)</code> returns <code>["b", "c"]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-put"></a>17.3.3 array:put
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all the members of a supplied array, except for one member
                           which is replaced with a new value.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:put</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$position</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$member</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is an array whose size is <code>array:size($array)</code>, in which all
                           members in positions other than <code>$position</code> are the same as the members in the corresponding position
                           of <code>$array</code>, and the member in position <code>$position</code> is <code>$member</code>.
                        </p>
                        <p>The result is equivalent to the result of the expression
                           <code>$array =&gt; array:remove($position) =&gt; array:insert-before($position, $member)</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error occurs [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if <code>$position</code> is not in the range <code>1 to
                              array:size($array)</code> inclusive.
                        </p>
                        <p>This error will always occur if <code>$array</code> is empty.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:put(["a", "b", "c"], 2, "d")</code> returns <code>["a", "d", "c"]</code>.
                           </p>
                           <p>The expression <code>array:put(["a", "b", "c"], 2, ("d", "e"))</code> returns <code>["a", ("d", "e"), "c"]</code>.
                           </p>
                           <p>The expression <code>array:put(["a"], 1, ["d", "e"])</code> returns <code>[["d", "e"]]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-append"></a>17.3.4 array:append
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all the members of a supplied array, plus one additional
                           member at the end.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:append</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>, <code class="arg">$appendage</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The result is an array whose size is <code>array:size($array) + 1</code>, in which all
                           members in positions 1 to <code>array:size($array)</code> are the same as the members in the corresponding position
                           of <code>$array</code>, and the member in position <code>array:size($array) + 1</code> is <code>$appendage</code>.
                        </p>
                        <p>The result is equivalent to the result of the expression
                           <code>op:array-concat( $array, [$appendage] )</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:append(["a", "b", "c"], "d")</code> returns <code>["a", "b", "c", "d"]</code>.
                           </p>
                           <p>The expression <code>array:append(["a", "b", "c"], ("d", "e"))</code> returns <code>["a", "b", "c", ("d", "e")]</code>.
                           </p>
                           <p>The expression <code>array:append(["a", "b", "c"], ["d", "e"])</code> returns <code>["a", "b", "c", ["d", "e"]]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-subarray"></a>17.3.5 array:subarray
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all members from a supplied array starting at a supplied
                           position, up to a specified length.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">array:subarray</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>, <code class="arg">$start</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:subarray</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$start</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$length</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p><span>Except in error cases,</span> 
                           the two-argument version of the function returns the same result as the three-argument
                           version when called with <code>$length</code> equal to the value of <code>array:size($array) -
                              $start + 1</code>.
                        </p>
                        <p>The result of the three-argument version of the function is given by the expression
                           <code>array:join( ($start to $start + $length - 1) ! [$array(.)] )</code></p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if <code>$start</code> is less than one
                           <span>or greater than <code>array:size($array) + 1</code></span>.
                        </p>
                        <p>For the three-argument version of the function:</p>
                        <ul>
                           <li>
                              <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0002" title="err:FOAY0002">err:FOAY0002</a>] 
                                 if <code>$length</code> is less than zero.
                              </p>
                           </li>
                           <li>
                              <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] 
                                 if <code>$start + $length</code> is greater than <code>array:size($array) + 1</code>.
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The value of <code>$start</code> can be equal to <code>array:size($array) + 1</code> provided that <code>$length</code>
                           is either equal to zero or omitted. In this case the result will be an empty array.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:subarray(["a", "b", "c", "d"], 2)</code> returns <code>["b", "c", "d"]</code>.
                           </p>
                           <p>The expression <code>array:subarray(["a", "b", "c", "d"], 5)</code> returns <code>[ ]</code>.
                           </p>
                           <p>The expression <code>array:subarray(["a", "b", "c", "d"], 2, 0)</code> returns <code>[ ]</code>.
                           </p>
                           <p>The expression <code>array:subarray(["a", "b", "c", "d"], 2, 1)</code> returns <code>["b"]</code>.
                           </p>
                           <p>The expression <code>array:subarray(["a", "b", "c", "d"], 2, 2)</code> returns <code>["b", "c"]</code>.
                           </p>
                           <p>The expression <code>array:subarray(["a", "b", "c", "d"], 5, 0)</code> returns <code>[ ]</code>.
                           </p>
                           <p>The expression <code>array:subarray([ ], 1, 0)</code> returns <code>[ ]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-remove"></a>17.3.6 array:remove
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all the members of the supplied array, except for the
                           <span>members at specified positions</span>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:remove</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>, <code class="arg">$positions</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns an array of size <span><code>array:size($array) - fn:count(fn:distinct-values($positions))</code></span> 
                           containing all members from <code>$array</code>
                           <span>except the members whose position (counting from 1) is present in the sequence <code>$positions</code>.
                              The order of the remaining members is preserved.</span></p>
                        <p>The result of the function, except in error cases, is given by the expression
                           <code>array:join(for $i in (1 to array:size($array))[not(. = $positions)] return [$array($i)])</code>
                           
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if any integer in <code>$positions</code> is not in the range <code>1 to
                              array:size($array)</code> inclusive. By implication, an error occurs if <code>$array</code> is empty, unless <code>$positions</code>
                           is also empty.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:remove(["a", "b", "c", "d"], 1)</code> returns <code>["b", "c", "d"]</code>.
                           </p>
                           <p>The expression <code>array:remove(["a", "b", "c", "d"], 2)</code> returns <code>["a", "c", "d" ]</code>.
                           </p>
                           <p>The expression <code>array:remove(["a"], 1)</code> returns <code>[ ]</code>.
                           </p>
                           <p>The expression <code>array:remove(["a", "b", "c", "d"], 1 to 3)</code> returns <code>["d"]</code>.
                           </p>
                           <p>The expression <code>array:remove(["a", "b", "c", "d"], ())</code> returns <code>["a", "b", "c", "d"]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-insert-before"></a>17.3.7 array:insert-before
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all the members of the supplied array, with one additional
                           member at a specified position.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:insert-before</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$position</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$member</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns an array of size <code>array:size($array) + 1</code> containing all members from <code>$array</code>
                           whose position is less than <code>$position</code>, then a new member given by <code>$member</code>, and
                           then all members from <code>$array</code> whose position is greater than or equal to <code>$position</code>. 
                           Positions are counted from 1.
                        </p>
                        <p>The result is equivalent to the result of the expression
                           <code>array:join( (array:subarray($array, 1, $position - 1), [$member], array:subarray($array,
                              $position)) )</code></p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error occurs [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if <code>$position</code> is not in the range <code>1 to
                              array:size($array) + 1</code> inclusive.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">Setting <code>$position</code> to 1 has the effect of prepending the new member at the start of the array. Setting
                           <code>$position</code>
                           to the value <code>array:size($array) + 1</code> delivers the same result as <code>array:append($array, $member)</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:insert-before(["a", "b", "c", "d"], 3, ("x", "y"))</code> returns <code>["a", "b", ("x", "y"), "c", "d"]</code>.
                           </p>
                           <p>The expression <code>array:insert-before(["a", "b", "c", "d"], 5, ("x", "y"))</code> returns <code>["a", "b", "c", "d", ("x", "y")]</code>.
                           </p>
                           <p>The expression <code>array:insert-before(["a", "b", "c", "d"], 3, ["x", "y"])</code> returns <code>["a", "b", ["x", "y"], "c", "d"]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-head"></a>17.3.8 array:head
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns the first member of an array, that is <code>$array(1)</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:head</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns first member of <code>$array</code>, that is the value of <code>$array(1)</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error occurs [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if <code>$array</code> is empty.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:head([5, 6, 7, 8])</code> returns <code>5</code>.
                           </p>
                           <p>The expression <code>array:head([["a", "b"], ["c", "d"]])</code> returns <code>["a", "b"]</code>.
                           </p>
                           <p>The expression <code>array:head([("a", "b"), ("c", "d")])</code> returns <code>"a", "b"</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-tail"></a>17.3.9 array:tail
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all members except the first from a supplied array.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:tail</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns an array containing all members of the supplied array except
                           the first,
                           that is <code>array:remove($array, 1)</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error occurs [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOAY0001" title="err:FOAY0001">err:FOAY0001</a>] if <code>$array</code> is empty.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the supplied array contains exactly one member, the result will be an empty array.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:tail([5, 6, 7, 8])</code> returns <code>[6, 7, 8]</code>.
                           </p>
                           <p>The expression <code>array:tail([5])</code> returns <code>[ ]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-reverse"></a>17.3.10 array:reverse
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all the members of a supplied array, but in reverse order.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:reverse</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function returns the result of the expression:
                           <code>array:join( fn:reverse(1 to array:size($array)) ! [$array(.)] )</code></p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:reverse(["a", "b", "c", "d"])</code> returns <code>["d", "c", "b", "a"]</code>.
                           </p>
                           <p>The expression <code>array:reverse([("a", "b"), ("c", "d")])</code> returns <code>[("c", "d"), ("a", "b")]</code>.
                           </p>
                           <p>The expression <code>array:reverse([(1 to 5)])</code> returns <code>[(1, 2, 3, 4, 5)]</code>.
                           </p>
                           <p>The expression <code>array:reverse([])</code> returns <code>[]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-join"></a>17.3.11 array:join
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Concatenates the contents of several arrays into a single array.</p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:join</code>(<code class="arg">$arrays</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function can be expressed as follows in XQuery:</p>
                        <div class="exampleInner"><pre class="small"><code>
declare function array:join($arrays as array(*)*) as array(*) {
   if (fn:empty($arrays))
      then []
   else if (fn:count($arrays) eq 1)
      then $arrays
   else 
      op:array-concat(fn:head($arrays), array:join(fn:tail($arrays)))
};</code></pre></div>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:join(())</code> returns <code>[ ]</code>.
                           </p>
                           <p>The expression <code>array:join([1, 2, 3])</code> returns <code>[1, 2, 3]</code>.
                           </p>
                           <p>The expression <code>array:join((["a", "b"], ["c", "d"]))</code> returns <code>["a", "b", "c", "d"]</code>.
                           </p>
                           <p>The expression <code>array:join((["a", "b"], ["c", "d"], [ ]))</code> returns <code>["a", "b", "c", "d"]</code>.
                           </p>
                           <p>The expression <code>array:join((["a", "b"], ["c", "d"], [["e", "f"]]))</code> returns <code>["a", "b", "c", "d", ["e", "f"]]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-for-each"></a>17.3.12 array:for-each
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array whose size is the same as <code>array:size($array)</code>, in which
                           each member is computed by applying <code>$function</code> to the corresponding member of
                           <code>$array</code>.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">array:for-each</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$action</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Returns the result of the expression:
                           <code>array:join( (1 to array:size($array)) ! [ $action($array(.)) ] )</code></p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:for-each(["A", "B", 1, 2], function($z) {$z instance of xs:integer})</code> returns <code>[false(), false(), true(), true()]</code>.
                           </p>
                           <p>The expression <code>array:for-each(["the cat", "sat", "on the mat"], fn:tokenize#1)</code> returns <code>[("the", "cat"), "sat", ("on", "the", "mat")]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-filter"></a>17.3.13 array:filter
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing those members of the <code>$array</code> for which 
                           <code>$function</code> returns true.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">array:filter</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$function</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*) as xs:boolean</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following recursive definition:</p>
                        <div class="exampleInner"><pre class="small">if (array:size($array) eq 0)
then [ ]
else op:array-concat(
        if ($function(array:head($array))) then array:head($array) else [ ],
        array:filter(array:tail($array))
     )
</pre></div>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>As a consequence of the function signature and the function calling rules, a type
                           error occurs if the supplied
                           function <code>$function</code> returns anything other than a single <code>xs:boolean</code> item; there is no conversion 
                           to an effective boolean value.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:filter(["A", "B", 1, 2], function($x) {$x instance of xs:integer})</code> returns <code>[1, 2]</code>.
                           </p>
                           <p>The expression <code>array:filter(["the cat", "sat", "on the mat"], function($s){fn:count(fn:tokenize($s))
                                 gt 1})</code> returns <code>["the cat", "on the mat"]</code>.
                           </p>
                           <p>The expression <code>array:filter(["A", "B", "", 0, 1], boolean#1)</code> returns <code>["A", "B", 1]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-fold-left"></a>17.3.14 array:fold-left
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Evaluates the supplied function cumulatively on successive members of the supplied
                           array.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:fold-left</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$zero</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$function</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*, item()*) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following recursive definition:</p>
                        <div class="exampleInner"><pre class="small">if (array:size($array) eq 0)
then $zero
else array:fold-left(array:tail($array), 
                     $function($zero, array:head($array)), 
                     $function )
         </pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the supplied array is empty, the function returns <code>$zero</code>.
                        </p>
                        <p class="note">If the supplied array contains a single member <code>$m</code>, the function returns <code>$zero =&gt; $function($m)</code>.
                        </p>
                        <p class="note">If the supplied array contains two members <code>$m</code> and <code>$n</code>, the function returns 
                           <code>$zero =&gt; $function($m) =&gt; $function($n)</code>; and similarly for an input array with more than two members.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:fold-left([true(), true(), false()], true(), function($x, $y){$x and $y})</code> returns <code>false()</code>. <em>(Returns true if every member of the input array has an effective boolean value of
                                 <code>true()</code>.)</em></p>
                           <p>The expression <code>array:fold-left([true(), true(), false()], false(), function($x, $y){$x or $y})</code> returns <code>true()</code>. <em>(Returns true if at least one member of the input array has an effective boolean value
                                 of <code>true()</code>.)</em></p>
                           <p>The expression <code>array:fold-left([1,2,3], [], function($x, $y){[$x, $y]})</code> returns <code>[[[[], 1], 2], 3]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-fold-right"></a>17.3.15 array:fold-right
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Evaluates the supplied function cumulatively on successive values of the supplied
                           array.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:fold-right</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$zero</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$function</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*, item()*) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the function is equivalent to the following recursive definition:</p>
                        <div class="exampleInner"><pre class="small">if (array:size($array) eq 0)
then $zero
else $function( array:head($array), 
                array:fold-right(array:tail($array), $zero, $function) 
              )
         </pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the supplied array is empty, the function returns <code>$zero</code>.
                        </p>
                        <p class="note">If the supplied array contains a single member <code>$m</code>, the function returns <code>$function($m, $zero)</code>.
                        </p>
                        <p class="note">If the supplied array contains two members <code>$m</code> and <code>$n</code>, the function returns 
                           <code>$function($m, $function($n, $zero))</code>; and similarly for an input array with more than two members.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:fold-right([true(), true(), false()], true(), function($x, $y){$x and $y})</code> returns <code>false()</code>. <em>(Returns true if every member of the input array has an effective boolean value of
                                 <code>true()</code>.)</em></p>
                           <p>The expression <code>array:fold-right([true(), true(), false()], false(), function($x, $y){$x or $y})</code> returns <code>true()</code>. <em>(Returns true if at least one member of the input array has an effective boolean value
                                 of <code>true()</code>.)</em></p>
                           <p>The expression <code>array:fold-right([1,2,3], [], function($x, $y){[$x, $y]})</code> returns <code>[1, [2, [3, []]]]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-for-each-pair"></a>17.3.16 array:for-each-pair
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array obtained by evaluating the supplied function once for each pair of
                           members at the same position in
                           the two supplied arrays.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:for-each-pair</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array1</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$array2</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$function</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*, item()*) as item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Returns the result of the recursive expression:</p>
                        <div class="exampleInner"><pre class="small"><code>
if (array:size($array1) eq 0 or array:size($array2) eq 0)
then [ ]
else array:concat(
        $function(array:head($array1), array:head($array2)), 
        array:for-each-pair(array:tail($array1), array:tail($array2), $function)
     )
         </code></pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the arrays have different size, excess members in the longer array are ignored.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:for-each-pair(["A", "B", "C"], [1, 2, 3], function($x, $y) { array {$x, $y}})</code> returns <code>[["A", 1], ["B", 2], ["C", 3]]</code>.
                           </p>
                           <p>The expression <code>let $A := ["A", "B", "C", "D"] return array:for-each-pair($A, array:tail($A), concat#2)</code> returns <code>["AB", "BC", "CD"]</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-sort"></a>17.3.17 array:sort
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Returns an array containing all the members of the supplied array, sorted 
                           according to the value of a sort key supplied as a function.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">array:sort</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                        <div class="proto"><code class="function">array:sort</code>(<code class="arg">$array</code><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>, <code class="arg">$collation</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="3"><code class="function">array:sort</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$array</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">array(*)</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$collation</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$key</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">function(item()*) as xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">array(*)</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>The one-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		collations.
                           	
                        </p>
                        <p>The two-argument form of this function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>, <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>,  and <a title="higher-order" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-higher-order"><span class="arrow">·</span>higher-order<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>Calling the single-argument version of the function is equivalent to calling the two-argument
                           form
                           with <code>default-collation()</code> as the second argument: that is, it sorts the members of an array according
                           to the typed value of the items, using the default collation to compare strings.
                        </p>
                        <p>Calling the two-argument version of the function is equivalent to calling the three-argument
                           form
                           with <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data#1</code></a> as the third argument: that is, it sorts the members of an array according
                           to the typed value of the items, using a specified collation to compare strings.
                        </p>
                        <p>In the case of both <code>array:sort#2</code> and <code>array:sort#3</code>, supplying an empty
                           sequence as the second argument is equivalent to supplying <code>fn:default-collation()</code>. For more
                           information on collations see <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation"><b>5.3.5 Choosing a collation</b></a>.
                        </p>
                        <p>The result of the function is obtained as follows:</p>
                        <ul>
                           <li>
                              <p>For each member of the array <code>$array</code>, the function supplied as <code>$key</code> 
                                 is evaluated with that member as its argument. 
                                 The resulting values are the sort keys of the members of the array.
                                 
                              </p>
                           </li>
                           <li>
                              <p>The result array contains the same members as the input array <code>$array</code>, but generally in a different order.
                              </p>
                           </li>
                           <li>
                              <p>Let <var>$C</var> be the selected collation, or the default collation where applicable.
                              </p>
                           </li>
                           <li>
                              <p>The order of items in the result is such that, given two items <code>$A</code> and <code>$B</code>:
                              </p>
                              <ul>
                                 <li>
                                    <p>If <code>(fn:deep-equal($key($A), $key($B), $C)</code>, then the relative order of <code>$A</code> and <code>$B</code> 
                                       in the output is the same as their relative order in the input (that is, the sort
                                       is stable)
                                       
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise, if <code>(deep-less-than($key($A), $key($B), $C)</code>, then <code>$A</code> precedes <code>$B</code> in the output. 
                                       The function <code>deep-less-than</code> is defined as the boolean result of the expression:
                                       
                                    </p>
                                    <div class="exampleInner"><pre class="small"><code>if (fn:empty($A)) 
     then fn:exists($B)
else if (fn:deep-equal($A[1], $B[1], $C)) 
     then deep-less-than(fn:tail($A), fn:tail($B), $C)
else if ($A[1] ne $A[1] (:that is, $A[1] is NaN:)) 
     then fn:true()
else if (is-string($A[1]) and is-string($B[1]) 
     then fn:compare($A[1], $B[1], $C) lt 0
else $A[1] lt $B[1]</code></pre></div>
                                    <p>where the function <code>is-string($X)</code> returns true if and only if <code>$X</code> is an instance of 
                                       <code>xs:string</code>, <code>xs:anyURI</code>, or <code>xs:untypedAtomic</code>.
                                    </p>
                                    <p>This ordering of sequences is referred to by mathematicians as "lexicographic ordering".
                                       
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ul>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>If the set of computed sort keys contains values that are not comparable using the
                           <code>le</code> operator then the sort 
                           operation will fail with a dynamic error.
                           
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:sort([1, 4, 6, 5, 3])</code> returns <code>[1, 3, 4, 5, 6]</code>.
                           </p>
                           <p>The expression <code>array:sort([1, -2, 5, 10, -10, 10, 8], (), fn:abs#1)</code> returns <code>[1, -2, 5, 8, 10, -10, 10]</code>.
                           </p>
                           <p>The expression <code>array:sort([(1,0), (1,1), (0,1), (0,0)])</code> returns <code>[(0,0), (0,1), (1,0), (1,1)]</code>.
                           </p>
                           <p>To sort an array of strings <code>$in</code> using Swedish collation:
                           </p>
                           <div class="exampleInner"><pre class="small">let $SWEDISH := "http://www.w3.org/2013/collation/UCA?lang=se"
return array:sort($in, $SWEDISH)
            </pre></div>
                           <p>To sort an array of maps representing employees, using last name as the major sort
                              key and first name as the minor sort key,
                              with the default collation:
                              
                           </p>
                           <div class="exampleInner"><pre>array:sort($employees, (), function($emp) {$emp?name?last, $emp?name?first})</pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-array-flatten"></a>17.3.18 array:flatten
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Replaces any array appearing in a supplied sequence with the members of the array,
                           recursively.
                        </p>
                     </dd>
                     <dt class="label">Signature</dt>
                     <dd>
                        <div class="proto"><code class="function">array:flatten</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">item()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()*</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The function processes the items in the supplied sequence <code>$input</code> as follows:
                        </p>
                        <ul>
                           <li>
                              <p>An item that is an array is replaced by its members, retaining order.</p>
                           </li>
                           <li>
                              <p>Any other item is retained unchanged.</p>
                           </li>
                        </ul>
                        <p>The process is then repeated so long as the sequence contains an array among its items.</p>
                        <p>The function is equivalent to the following XQuery implementation (assuming static
                           typing is not in force):
                        </p>
                        <div class="exampleInner"><pre class="small"><code>declare function flatten ($S as item()*) {
    for $s in $S return (
      typeswitch($s)
        case $a as array(*) return flatten($a?*)
        default return $s
)}</code></pre></div>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The argument to the function will often be a single array item, but this is not essential.</p>
                        <p class="note">Unlike atomization, this function retains any nodes contained in the array.</p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>array:flatten([1, 4, 6, 5, 3])</code> returns <code>(1, 4, 6, 5, 3)</code>.
                           </p>
                           <p>The expression <code>array:flatten(([1, 2, 5], [[10, 11], 12], [], 13))</code> returns <code>(1, 2, 5, 10, 11, 12, 13)</code>.
                           </p>
                           <p>The expression <code>array:flatten([(1,0), (1,1), (0,1), (0,0)])</code> returns <code>(1, 0, 1, 1, 0, 1, 0, 0)</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="json"></a>17.4 Conversion to and from JSON
               </h3>
               <p>JSON is a popular format for exchange of structured data on the web: it is specified
                  in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>. 
                  This section describes facilities
                  allowing JSON data to be converted to and from XDM values.
               </p>
               <p>This specification describes two ways of representing JSON data losslessly
                  using XDM constructs. The first method uses XDM maps to represent JSON objects, and
                  XDM arrays to
                  represent JSON arrays. The second method represents all JSON constructs using XDM
                  element and attribute nodes.
               </p>
               <div class="div3">
                  
                  <h4><a id="json-to-maps-and-arrays"></a>17.4.1 Representing JSON using maps and arrays
                  </h4>
                  <p>This section defines a mapping from JSON data to XDM maps and arrays. Two functions
                     are available 
                     to support this mapping: <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> (with options
                     selecting JSON as the output method).
                     The <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> function will accept any JSON text as input, and converts it 
                     to XDM data values. The <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> function (with JSON as the output method) will accept any XDM
                     value produced using <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> and convert it back to the original JSON text
                     (subject to insignificant variations such as reordering the properties in a JSON object).
                     
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>The conversion is lossless if recommended JSON good practice is followed. Information
                        may however be lost if
                        (a) JSON numbers are not exactly representable as double-precision floating point,
                        or (b) duplicate key
                        values appear within a JSON object.
                     </p>
                  </div>
                  <p>The representation of JSON data produced by the <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> function
                     has been chosen with ease of manipulation as a design aim. For example, a simple JSON
                     object
                     such as <code>{"Sun":1, "Mon":2, "Tue":3, ...}</code> produces a simple map, so if the result
                     of parsing is held in <code>$weekdays</code>, the number for a given weekday can be extracted
                     using an expression such as <code>$weekdays?Tue</code>. Similarly, a simple array such as
                     <code>["Sun", "Mon", "Tue", ...]</code> produces an array that can be addressed as, for example,
                     <code>$weekdays(3)</code>. A more deeply nested structure can be addressed in a similar way:
                     for example if the JSON text is an array of person objects, each of which has a property
                     named 
                     "phones" which is an array of strings containing phone numbers, then the first phone
                     number of
                     each person in the data can be addressed as <code>$data?phones(1)</code>.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="json-to-xml-mapping"></a>17.4.2 XML Representation of JSON
                  </h4>
                  <p>This section defines a mapping from JSON data to XML (specifically, to XDM element
                     and attribute nodes). A
                     function <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> is provided to take a JSON string as input and convert it
                     to the XML representation, and a second function <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> performs the reverse operation.
                  </p>
                  <p>The XML representation is designed to be capable of representing any valid JSON text
                     including
                     one that uses characters which are not valid in XML. The transformation is normally
                     lossless: that is,
                     distinct JSON texts convert to distinct XML representations. When converting JSON
                     to XML, options are provided
                     to reject unsupported characters, to replace them with a substitute character, or
                     to leave them in
                     backslash-escaped form.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>The conversion is lossless if recommended JSON good practice is followed. Information
                        may however be lost if
                        (a) JSON numbers are not exactly representable as double-precision floating point,
                        or (b) duplicate key
                        values appear within a JSON object.
                     </p>
                  </div>
                  <p>The following example demonstrates the correspondence of a JSON text and the corresponding
                     XML
                     representation. 
                  </p>
                  <div class="example">
                     
                     <div class="exampleHeader"><a id="d5e47542"></a>Example: A JSON Text and its XML Representation
                     </div>
                     <p>Consider the following JSON text:</p>
                     <div class="exampleInner"><pre class="small"> {
    "desc"    : "Distances between several cities, in kilometers.",
    "updated" : "2014-02-04T18:50:45",
    "uptodate": true,
    "author"  : null,
    "cities"  : {
        "Brussels": [
                      {"to": "London",    "distance": 322},
                      {"to": "Paris",     "distance": 265},
                      {"to": "Amsterdam", "distance": 173}
                    ],
        "London": [
                      {"to": "Brussels",  "distance": 322},
                      {"to": "Paris",     "distance": 344},
                      {"to": "Amsterdam", "distance": 358}
                  ],
        "Paris": [
                      {"to": "Brussels",  "distance": 265},
                      {"to": "London",    "distance": 344},
                      {"to": "Amsterdam", "distance": 431}
                 ],
        "Amsterdam": [
                      {"to": "Brussels",  "distance": 173},
                      {"to": "London",    "distance": 358},
                      {"to": "Paris",     "distance": 431}
                     ]
     }
}
                  </pre></div>
                     <p>The XML representation of this text is as follows. Whitespace is included in the XML
                        representation for purposes of illustration, 
                        but it will not necessarily be present in the output of the 
                        <code>json-to-xml</code> function.
                     </p>
                     <div class="exampleInner"><pre class="small">  &lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
    &lt;string key='desc'&gt;Distances between several cities, in kilometers.&lt;/string&gt;
    &lt;string key='updated'&gt;2014-02-04T18:50:45&lt;/string&gt;
    &lt;boolean key="uptodate"&gt;true&lt;/boolean&gt;
    &lt;null key="author"/&gt;
    &lt;map key='cities'&gt;
      &lt;array key="Brussels"&gt;
        &lt;map&gt;
            &lt;string key="to"&gt;London&lt;/string&gt;
            &lt;number key="distance"&gt;322&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;Paris&lt;/string&gt;
            &lt;number key="distance"&gt;265&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;Amsterdam&lt;/string&gt;
            &lt;number key="distance"&gt;173&lt;/number&gt;
        &lt;/map&gt; 
      &lt;/array&gt;
      &lt;array key="London"&gt;
        &lt;map&gt;
            &lt;string key="to"&gt;Brussels&lt;/string&gt;
            &lt;number key="distance"&gt;322&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;Paris&lt;/string&gt;
            &lt;number key="distance"&gt;344&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;Amsterdam&lt;/string&gt;
            &lt;number key="distance"&gt;358&lt;/number&gt;
        &lt;/map&gt; 
      &lt;/array&gt;
      &lt;array key="Paris"&gt;
        &lt;map&gt;
            &lt;string key="to"&gt;Brussels&lt;/string&gt;
            &lt;number key="distance"&gt;265&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;London&lt;/string&gt;
            &lt;number key="distance"&gt;344&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;Amsterdam&lt;/string&gt;
            &lt;number key="distance"&gt;431&lt;/number&gt;
        &lt;/map&gt;  
      &lt;/array&gt;
      &lt;array key="Amsterdam"&gt;
        &lt;map&gt;
            &lt;string key="to"&gt;Brussels&lt;/string&gt;
            &lt;number key="distance"&gt;173&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;London&lt;/string&gt;
            &lt;number key="distance"&gt;358&lt;/number&gt;
        &lt;/map&gt; 
        &lt;map&gt;
            &lt;string key="to"&gt;Paris&lt;/string&gt;
            &lt;number key="distance"&gt;431&lt;/number&gt;
        &lt;/map&gt;
      &lt;/array&gt;
    &lt;/map&gt;  
  &lt;/map&gt;</pre></div>
                  </div>
                  <p>An XSD 1.0 schema for the XML representation is provided in <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><b>C.2 Schema for the result of fn:json-to-xml</b></a>.
                     It is not necessary to import this schema into the static context unless the stylesheet
                     or query
                     makes explicit reference to the components defined in the schema. If the stylesheet
                     or query does import a schema
                     for the namespace <code>http://www.w3.org/2005/xpath-functions</code>, then:
                  </p>
                  <ol class="enumar">
                     <li>
                        <p>Unless the host language specifies otherwise, the processor (if it is schema-aware)
                           
                           <span class="verb">must</span> recognize an import declaration for
                           this namespace, whether or not a schema location is supplied.
                        </p>
                     </li>
                     <li>
                        <p>If a schema location is provided, then the schema document at that location <span class="verb">must</span>
                           be equivalent to the schema document at <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><b>C.2 Schema for the result of fn:json-to-xml</b></a>; the effect if it is not equivalent is
                           <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a></p>
                     </li>
                  </ol>
                  <p>The rules governing the mapping from JSON to XML are as follows. In these rules, the
                     phrase 
                     "an element named N" is to be interpreted as meaning "an element node whose local
                     name is N and whose
                     namespace URI is <code>http://www.w3.org/2005/xpath-functions</code>".
                  </p>
                  <ol class="enumar">
                     <li>
                        <p>The JSON value <code>null</code> is represented by an element named <code>null</code>, with empty content.
                        </p>
                     </li>
                     <li>
                        <p>The JSON values <code>true</code> and <code>false</code> are represented by an element named <code>boolean</code>,
                           with content conforming to the type <code>xs:boolean</code>. When the element is created by the 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> function, the string value of the element will be <code>true</code> or <code>false</code>.
                           The <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> function also recognizes other strings that validate as <code>xs:boolean</code>,
                           for example <code>1</code> and <code>0</code>. Leading and trailing whitespace is accepted.
                           
                        </p>
                     </li>
                     <li>
                        <p>A JSON number is represented by an element named <code>number</code>,
                           with content conforming to the type <code>xs:double</code>, with the additional restriction that the value
                           must not be positive or negative infinity, nor <code>NaN</code>. The
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> function creates an element whose string value is lexically the same as the JSON
                           representation
                           of the number. The <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> function generates a JSON representation that is the result of casting the
                           (typed or untyped) value of the node to <code>xs:double</code> and then casting the result to <code>xs:string</code>.
                           Leading and trailing whitespace is accepted.
                           Since JSON does not impose limits on the range or precision
                           of numbers, these rules mean that conversion from JSON to XML will always succeed,
                           and will retain full precision
                           in the lexical representation unless the data model implementation is one that reconstructs
                           the string value from 
                           the typed value. In the reverse direction, conversion from XML to JSON may fail if
                           the value is infinity or <code>NaN</code>,
                           or if the string value is such that casting to <code>xs:double</code> produces positive or negative infinity.                    
                           
                        </p>
                     </li>
                     <li>
                        <p>A JSON string is represented by an element named <code>string</code>, with
                           content conforming to the type <code>xs:string</code>. The <code>string</code> element has two
                           alternative representations: escaped form, and unescaped form.
                        </p>
                     </li>
                     <li>
                        <p>A JSON array is represented by an element named <code>array</code>. The content is a sequence of
                           child elements representing the members of the array in order, each such element being
                           the representation
                           of the array member obtained by applying these rules recursively.
                        </p>
                     </li>
                     <li>
                        <p>A JSON object is represented by an element named <code>map</code>. The content is a sequence
                           of child elements each of which represents one of the name/value pairs in the object.
                           The representation of the
                           name/value pair <var>N:V</var> is obtained by taking the element that represents the value <var>V</var> (by applying these
                           rules recursively) and adding an attribute with name <code>key</code> (in no namespace), whose
                           value is <var>N</var> as an instance of <code>xs:string</code>. The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> and
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> both retain the order of entries, subject to rules about how duplicate keys are handled.
                           The
                           key may be represented in escaped or unescaped form.
                        </p>
                     </li>
                  </ol>
                  <p>The attribute <code>escaped="true"</code> may be specified on a <code>string</code> element to indicate
                     that the string value contains backslash-escaped characters that are to be interpreted
                     according to the JSON
                     rules. The attribute <code>escaped-key="true"</code> may be specified on any element with a <code>key</code> attribute to indicate
                     that the key contains backslash-escaped characters that are to be interpreted according
                     to the JSON
                     rules. Both attributes have the default value <code>false</code>, signifying that the relevant value is in unescaped form.
                     In unescaped form, the backslash character has no special significance (it represents
                     itself).
                  </p>
                  <p>The JSON grammar for <code>number</code> is a subset of the lexical space of
                     the XSD type <code>xs:double</code>. The mapping from JSON <code>number</code> values to <code>xs:double</code>
                     values is defined by the XPath rules for casting from <code>xs:string</code> to <code>xs:double</code>. Note that
                     these rules will never generate an error for out-of-range values; instead very large
                     or very small values will be
                     converted to <code>+INF</code> or <code>-INF</code>. Since JSON does not impose limits on the range or precision
                     of numbers, the conversion is not guaranteed to retain full precision.
                  </p>
                  <p>Although the order of entries in a JSON object is generally considered to have no
                     significance, the functions
                     <code>json-to-xml</code> and <code>json-to-xml</code> both retain order.
                  </p>
                  <p>The XDM representation of a JSON value may either be untyped (all elements annotated
                     as <code>xs:untyped</code>, attributes
                     as <code>xs:untypedAtomic</code>), or it may be typed. If it is typed, then it <span class="verb">must</span> have the type
                     annotations obtained by validating the untyped representation against the schema given
                     in <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><b>C.2 Schema for the result of fn:json-to-xml</b></a>.
                     If it is untyped, then it <span class="verb">must</span> be an XDM instance such that validation against this schema would succeed;
                     with the proviso that all attributes other than those in no namespace or in namespace
                     <code>http://www.w3.org/2005/xpath-functions</code>
                     are ignored, including attributes such as <code>xsi:type</code> and <code>xsi:nil</code> that would normally influence the process
                     of schema validation.
                  </p>
                  <p>The namespace prefix associated with the namespace <code>http://www.w3.org/2005/xpath-functions</code> (if any) is immaterial.
                     The effect of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> function does not depend on the choice of prefix, and the prefix (if any) generated
                     by the
                     <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> function is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="json-functions"></a>17.5 Functions on JSON Data
               </h3>
               <p>The functions listed parse or serialize JSON data.</p>
               <div class="overlarge"><table class="index">
                  <thead>
                     <tr>
                        <th>Function</th>
                        <th>Meaning</th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a></td>
                        <td>Parses a string supplied in the form of a JSON text, returning the results typically
                           in the form
                           of a map or array.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><code>fn:json-doc</code></a></td>
                        <td>Reads an external resource containing JSON, and returns the result of parsing the
                           resource as JSON.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a></td>
                        <td>Parses a string supplied in the form of a JSON text, returning the results in the
                           form
                           of an XML <span>document node</span>.
                        </td>
                     </tr>
                     <tr>
                        <td style="white-space:nowrap; vertical-align:top"><a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a></td>
                        <td>Converts an XML tree, whose format corresponds to the XML representation of JSON defined
                           in this specification, into a string conforming to the JSON grammar.
                        </td>
                     </tr>
                  </tbody>
               </table></div>
               <p>Note also that the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> has an option to act as the inverse function to <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a>.
               </p>
               <div class="div3">
                  
                  <h4><a id="func-parse-json"></a>17.5.1 fn:parse-json
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Parses a string supplied in the form of a JSON text, returning the results typically
                           in the form
                           of a map or array.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:parse-json</code>(<code class="arg">$json-text</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()?</code></div>
                        <div class="proto"><code class="function">fn:parse-json</code>(<code class="arg">$json-text</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$options</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the one-argument form of this function is the same as calling the
                           two-argument form with an empty map as the value of the <code>$options</code>
                           argument.
                        </p>
                        <p>The first argument is a JSON text as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>, in the form of a string. The function
                           parses this string to return an XDM value.
                        </p>
                        <p>If the value of <code>$json-text</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <div class="note">
                           <p class="prefix"><b>Note:</b></p>
                           <p>The result will also be an empty sequence if <code>$json-text</code> is the string <code>"null"</code>.
                           </p>
                        </div>
                        <p>The <code>$options</code> argument can be used to control the way in which the parsing
                           takes place. The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> apply.
                        </p>
                        <p>The entries that may appear in the <code>$options</code> map are as follows:
                        </p>
                        <table style="border-collapse: collapse">
                           <thead>
                              <tr style="border-top: 2px solid black; border-bottom: 2px solid black">
                                 <th style="text-align:left; padding-right: 10px; ">Key</th>
                                 <th style="text-align:left; padding-right: 10px; ">Value</th>
                                 <th style="text-align:left">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="3"><code>liberal</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines whether deviations from the syntax of RFC7159 are permitted.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>false</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>false</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    The input <span class="verb">must</span> consist of <span>an optional byte order mark (which is ignored) followed by</span> a string
                                    that conforms to the grammar of <code>JSON-text</code> in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>. An error <span class="verb">must</span> be raised
                                    [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0001" title="err:FOJS0001">err:FOJS0001</a>] if the input does not conform to the grammar.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>true</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    The input <span class="verb">may</span> contain deviations from the grammar of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>,
                                    which are handled in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way. (Note: some popular
                                    extensions include allowing quotes on keys to be omitted, allowing a comma
                                    to appear after the last item in an array, allowing leading zeroes in numbers, and
                                    allowing control characters such as
                                    tab and newline to be present in unescaped form.) Since the extensions accepted
                                    are implementation-defined, an error <span class="verb">may</span> be raised
                                    [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0001" title="err:FOJS0001">err:FOJS0001</a>] if the input does not conform to the grammar.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="4"><code>duplicates</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines the policy for handling duplicate keys in a JSON object.
                                    To determine whether keys are duplicates, they are compared using the Unicode codepoint
                                    collation, after expanding escape
                                    sequences, unless the <span><code>escape</code> option is set to <code>true</code></span>, in which
                                    case keys are compared in escaped form. 
                                    
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>use-first</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>reject</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0003" title="err:FOJS0003">err:FOJS0003</a>] if duplicate keys are encountered.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>use-first</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    If duplicate keys are present in a JSON object, all but the first of a set of duplicates
                                    are ignored.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>use-last</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    If duplicate keys are present in a JSON object, all but the last of a set of duplicates
                                    are ignored.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="3"><code>escape</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines whether special characters are represented in the XDM output in backslash-escaped
                                    form.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>true</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>false</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    All characters in the input that are valid
                                    in the version of XML supported by the implementation, whether or not they are represented
                                    
                                    in the input by means of an escape sequence, are represented as unescaped characters
                                    in the result. Any
                                    characters or codepoints that are not valid XML characters 
                                    (for example, unpaired surrogates) <span>are passed to the <code>fallback</code> function
                                       as described below; in the absence of a fallback function, they are replaced by
                                       the Unicode <code>REPLACEMENT CHARACTER</code> (<code>xFFFD</code>)</span>.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>true</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    JSON escape sequences are used in the result to represent special characters in the
                                    JSON input, as defined below, 
                                    whether or not they were represented using JSON escape sequences in the input.
                                    The characters that are considered "special" for this purpose are:
                                    
                                    <ul>
                                       <li>
                                          <p>all codepoints in the range <code>x00</code> to <code>x1F</code> 
                                             or <code>x7F</code> to <code>x9F</code>;
                                          </p>
                                       </li>
                                       <li>
                                          <p>all codepoints that do not represent characters that are valid in the version of XML
                                             supported by the processor,
                                             including codepoints representing unpaired surrogates;
                                          </p>
                                       </li>
                                       <li>
                                          <p>the backslash character itself (<code>x5C</code>).
                                          </p>
                                       </li>
                                    </ul>
                                    
                                    Such characters are represented using a two-character
                                    escape sequence where available (for example, <code>\t</code>), or a six-character escape sequence otherwise
                                    (for example <code>\uDEAD</code>). Characters other than these are not escaped in the result, even if they
                                    were escaped in the input.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="2"><code>fallback</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">
                                    Provides a function which is called when the input contains an escape sequence 
                                    that represents a character that is not valid in the version of XML
                                    supported by the implementation. 
                                    
                                    It is an error to supply the <code>fallback</code> option if the <code>escape</code> option is present
                                    with the value <code>true</code>.
                                    
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>function(xs:string) as xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The default is effectively the function function($s){"&amp;#xFFFD;"}: that is,
                                                a function that replaces the escape sequence with the Unicode REPLACEMENT CHARACTER.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>User-supplied function</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    The function is called when the JSON input contains a special character (as defined
                                    under 
                                    the <code>escape</code> option) that is valid according to the JSON 
                                    grammar, whether the special character is represented in the input directly or as
                                    an escape sequence. 
                                    The function is called once for any surrogate
                                    that is not properly paired with another surrogate. The string supplied as the argument
                                    will always be a two- or six- character escape
                                    sequence, starting with a backslash, that conforms to the rules in the JSON grammar
                                    (as extended by the
                                    implementation if <code>liberal:true()</code> is specified): for example
                                    <code>\b</code> or <code>\uFFFF</code> or <code>\uDEAD</code>. The function is <em>not</em>
                                    called for an escape sequence that is invalid against the grammar (for example <code>\x0A</code>). The function returns a string
                                    which is inserted into the result in place of the invalid character. The
                                    function also has the option of raising a dynamic error by calling <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a>.
                                    
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <p>The various structures that can occur in JSON are transformed recursively to XDM values
                           as follows:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>A JSON <em>object</em> is converted to a map. 
                                 The entries in the map correspond to the key/value
                                 pairs in the JSON object. The key is always of type <code>xs:string</code>; the
                                 associated value may be of any type, and is the result of converting the JSON
                                 value by recursive application of these rules. For example, the JSON text
                                 <code>{"x":2, "y":5}</code> is transformed to the value <code>map{"x":2,
                                    "y":5}</code>.
                              </p>
                              <p>If duplicate keys are encountered in a JSON <em>object</em>, they are handled
                                 as determined by the <code>duplicates</code> option defined above.
                              </p>
                           </li>
                           <li>
                              <p>A JSON <em>array</em> is transformed to an array whose members are the result of converting
                                 the corresponding member of the array by recursive application of these rules. For
                                 example, the JSON text <code>["a", "b", null]</code> is transformed to the value
                                 <code>["a", "b", ()]</code>.
                              </p>
                           </li>
                           <li>
                              <p>A JSON <em>string</em> is converted to an <code>xs:string</code> value. 
                                 <span>The handling of special characters depends on the
                                    <code>escape</code> and <code>fallback</code> options, as described in the table above.</span></p>
                           </li>
                           <li>
                              <p>A JSON <em>number</em> is converted to an <code>xs:double</code> value using
                                 the rules for casting from <code>xs:string</code> to <code>xs:double</code>.
                              </p>
                           </li>
                           <li>
                              <p>The JSON <em>boolean</em> values <code>true</code> and <code>false</code> are
                                 converted to the corresponding <code>xs:boolean</code> values.
                              </p>
                           </li>
                           <li>
                              <p>The JSON value <em>null</em> is converted to the empty sequence.
                              </p>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0001" title="err:FOJS0001">err:FOJS0001</a>] occurs if the value of
                           <code>$input</code> does not conform to the JSON grammar, unless the option
                           <code>"liberal":true()</code> is present and the processor chooses to accept the deviation.
                        </p>
                        <p>A dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0003" title="err:FOJS0003">err:FOJS0003</a>] occurs if the option
                           <code>"duplicates":"reject"</code> is present and the value of
                           <code>$input</code> contains a JSON object with duplicate keys.
                        </p>
                        <p>A dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005" title="err:FOJS0005">err:FOJS0005</a>] occurs if the <code>$options</code>
                           map contains an entry whose key is defined in this specification and whose value is
                           not valid for that key,
                           or if it contains an entry with the key <code>fallback</code> when the option <code>"escape":true()</code>
                           is also present.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The result of the function will be an instance of one of the following types. An
                           <code>instance of</code> test (or in XQuery, <code>typeswitch</code>) can be used to
                           distinguish them:
                        </p>
                        <div class="note">
                           <ul>
                              <li>
                                 <p><code>map(xs:string, item()?)</code> for a JSON object
                                 </p>
                              </li>
                              <li>
                                 <p><code>array(item()?)</code> for a JSON array
                                 </p>
                              </li>
                              <li>
                                 <p><code>xs:string</code> for a JSON string
                                 </p>
                              </li>
                              <li>
                                 <p><code>xs:double</code> for a JSON number
                                 </p>
                              </li>
                              <li>
                                 <p><code>xs:boolean</code> for a JSON boolean
                                 </p>
                              </li>
                              <li>
                                 <p><code>empty-sequence()</code> for a JSON null (or for empty input)
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p class="note">If the input starts with a byte order mark, this function ignores it. The byte order
                           mark may have been added
                           to the data stream in order to facilitate decoding of an octet stream to a character
                           string, but since this function
                           takes a character string as input, the byte order mark serves no useful purpose.
                        </p>
                        <p class="note">The possibility of the input containing characters that are not valid in XML (for
                           example, unpaired surrogates)
                           arises only when such characters are expressed using JSON escape sequences. The is
                           because the input to the function
                           is an instance of <code>xs:string</code>, which by definition can only contain characters that are valid in XML.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>parse-json('{"x":1, "y":[3,4,5]}')</code> returns <code>map{"x":1e0,"y":[3e0,4e0,5e0]}</code>.
                           </p>
                           <p>The expression <code>parse-json('"abcd"')</code> returns <code>"abcd"</code>.
                           </p>
                           <p>The expression <code>parse-json('{"x":"\\", "y":"\u0025"}')</code> returns <code>map{"x":"\","y":"%"}</code>.
                           </p>
                           <p>The expression <code>parse-json('{"x":"\\", "y":"\u0025"}', map{'escape':true()})</code> returns <code>map{"x":"\\","y":"%"}</code>.
                           </p>
                           <p>The expression <code>parse-json('{"x":"\\", "y":"\u0000"}')</code> returns <code>map{"x":"\","y":codepoints-to-string(65533)}</code>.
                           </p>
                           <p>The expression <code>parse-json('{"x":"\\", "y":"\u0000"}', map{'escape':true()})</code> returns <code>map{"x":"\\","y":"\u0000"}</code>.
                           </p>
                           <p>The expression <code>parse-json('{"x":"\\", "y":"\u0000"}', map{'fallback':function($s){'['||$s||']'}})</code> returns <code>map{"x":"\","y":"[\u0000]"}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-json-doc"></a>17.5.2 fn:json-doc
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Reads an external resource containing JSON, and returns the result of parsing the
                           resource as JSON.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:json-doc</code>(<code class="arg">$href</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()?</code></div>
                        <div class="proto"><code class="function">fn:json-doc</code>(<code class="arg">$href</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$options</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">item()?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the single-argument call <code>fn:json-doc($H)</code> is the same as the effect of the two-argument call
                           <code>fn:json-doc($H, map{})</code> where an empty map is supplied as the second argument.
                        </p>
                        <p>The effect of the two-argument function call <code>fn:json-doc($H, $M)</code>is equivalent to the function composition
                           <code>fn:unparsed-text($H) =&gt; fn:parse-json($M)</code>; except that:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>The function <span class="verb">may</span> accept a resource in any encoding. <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a> requires
                                 UTF-8, UTF-16, or UTF-32 to be accepted, but it is not an error if a different encoding
                                 is used. 
                                 Unless external encoding information is available, the function <span class="verb">must</span>
                                 assume that the encoding is one of UTF-8, UTF-16, or UTF-32, and <span class="verb">must</span> distinguish these cases by examination 
                                 of the initial octets of the resource.
                              </p>
                           </li>
                           <li>
                              <p>If the resource contains characters that are not valid in the version of XML used
                                 by the processor,
                                 then rather than raising an error as <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text#1</code></a> does, the function replaces such characters by the equivalent
                                 JSON escape sequence prior to parsing.
                              </p>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>Equivalently, the implementation can use some other internal representation of strings
                                    that allows non-XML characters to
                                    be manipulated.
                                 </p>
                              </div>
                           </li>
                        </ol>
                        <p>If the value of <code>$href</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>The function may raise any error defined for the <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> or <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a>
                           functions.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">If the input cannot be decoded (that is, converted into a sequence of Unicode codepoints,
                           which may or may not represent characters),
                           then a dynamic error occurs as with the <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function.
                        </p>
                        <p class="note">If the input can be decoded,
                           then the possibility still arises that the resulting sequence of codepoints includes
                           codepoints that do not represent characters that are valid in the
                           version of XML that the processor supports. Such codepoints are translated into JSON
                           escape sequences (for example, <code>\uFFFF</code>),
                           and the JSON escape sequence is then passed to the fallback function specified in
                           the <code>$options</code> argument, which in turn
                           defaults to a function that returns the Unicode <code>REPLACEMENT CHARACTER</code> (<code>xFFFD</code>).
                        </p>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-json-to-xml"></a>17.5.3 fn:json-to-xml
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Parses a string supplied in the form of a JSON text, returning the results in the
                           form
                           of an XML <span>document node</span>.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:json-to-xml</code>(<code class="arg">$json-text</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">document-node()?</code></div>
                        <div class="proto">
                           <table class="proto">
                              <tbody><tr>
                                 <td style="vertical-align:baseline" rowspan="2"><code class="function">fn:json-to-xml</code>(
                                 </td>
                                 <td style="vertical-align:baseline"><code class="arg">$json-text</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>,
                                 </td>
                              </tr>
                              <tr>
                                 <td style="vertical-align:baseline"><code class="arg">$options</code></td>
                                 <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">document-node()?</code></td>
                              </tr>
                           </tbody></table>
                        </div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="nondeterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic"><span class="arrow">·</span>nondeterministic<span class="arrow">·</span></a>, <a title="context-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-dependent"><span class="arrow">·</span>context-dependent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>.  It depends on 
                           		static base URI.
                           	
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the one-argument form of this function is the same as calling the
                           two-argument form with an empty map as the value of the <code>$options</code>
                           argument.
                        </p>
                        <p>The first argument is a JSON-text as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>, in the form of a string. The function
                           parses this string to return an XDM node.
                        </p>
                        <p>If <code>$json-text</code> is an empty sequence, the function returns the empty sequence.
                        </p>
                        <p>The <code>$options</code> argument can be used to control the way in which the parsing
                           takes place. The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> apply.
                        </p>
                        <p>The entries that may appear in the <code>$options</code> map are as follows:
                        </p>
                        <table style="border-collapse: collapse">
                           <thead>
                              <tr style="border-top: 2px solid black; border-bottom: 2px solid black">
                                 <th style="text-align:left; padding-right: 10px; ">Key</th>
                                 <th style="text-align:left; padding-right: 10px; ">Value</th>
                                 <th style="text-align:left">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="3"><code>liberal</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines whether deviations from the syntax of RFC7159 are permitted.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>false</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>false</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    The input <span class="verb">must</span> consist of <span>an optional byte order mark (which is ignored) followed by</span> a string
                                    that conforms to the grammar of <code>JSON-text</code> in <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>. An error <span class="verb">must</span> be raised
                                    (see below) if the input does not conform to the grammar.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>true</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    The input <span class="verb">may</span> contain deviations from the grammar of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>,
                                    which are handled in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way. (Note: some popular
                                    extensions include allowing quotes on keys to be omitted, allowing a comma
                                    to appear after the last item in an array, allowing leading zeroes in numbers, and
                                    allowing control characters such as
                                    tab and newline to be present in unescaped form.) Since the extensions accepted
                                    are implementation-defined, an error <span class="verb">may</span> be raised
                                    (see below) if the input does not conform to the grammar.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="4"><code>duplicates</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines the policy for handling duplicate keys in a JSON object.
                                    To determine whether keys are duplicates, they are compared using the Unicode codepoint
                                    collation, after expanding escape
                                    sequences, unless the <span><code>escape</code> option is set to <code>true</code></span>, in which
                                    case keys are compared in escaped form. 
                                    
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>If validate is true then reject, otherwise retain.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>reject</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0003" title="err:FOJS0003">err:FOJS0003</a>] if duplicate keys are encountered.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>use-first</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    If duplicate keys are present in a JSON object, all but the first of a set of duplicates
                                    are ignored.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>retain</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    If duplicate keys are present in a JSON object, the XML result of the function will
                                    also contain duplicates (making
                                    it invalid against the schema). This value is therefore incompatible with the option
                                    <code>validate=true</code> 
                                    [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005" title="err:FOJS0005">err:FOJS0005</a>]
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="3"><code>validate</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines whether the generated XML tree is schema-validated.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>Implementation-defined.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>true</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    Indicates that the resulting XDM instance must be typed; that is, the element
                                    and attribute nodes must carry the type annotations that result from validation
                                    against the schema given at <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><b>C.2 Schema for the result of fn:json-to-xml</b></a>, or against an
                                    <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> schema 
                                    if the <code>liberal</code> option has the value <code>true</code>.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>false</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    Indicates that the resulting XDM instance must be untyped.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="3"><code>escape</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines whether special characters are represented in the XDM output 
                                    in backslash-escaped form. 
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>false</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>false</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    All characters in the input that are valid
                                    in the version of XML supported by the implementation, whether or not they are represented
                                    
                                    in the input by means of an escape sequence, are represented as unescaped characters
                                    in the result. Any
                                    characters or codepoints that are not valid XML characters 
                                    (for example, unpaired surrogates) <span>are passed to the <code>fallback</code> function
                                       as described below; in the absence of a fallback function, they are replaced by
                                       the Unicode <code>REPLACEMENT CHARACTER</code> (<code>xFFFD</code>)</span>.
                                    The attributes <code>escaped</code> and <code>escaped-key</code> will not be present in the XDM output.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>true</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    JSON escape sequences are used in the result to represent special characters in the
                                    JSON input, as defined below, 
                                    whether or not they were represented using JSON escape sequences in the input.
                                    The characters that are considered "special" for this purpose are:
                                    
                                    <ul>
                                       <li>
                                          <p>all codepoints in the range <code>x00</code> to <code>x1F</code> 
                                             or <code>x7F</code> to <code>x9F</code>;
                                          </p>
                                       </li>
                                       <li>
                                          <p>all codepoints that do not represent characters that are valid in the version of XML
                                             supported by the processor,
                                             including codepoints representing unpaired surrogates;
                                          </p>
                                       </li>
                                       <li>
                                          <p>the backslash character itself (<code>x5C</code>).
                                          </p>
                                       </li>
                                    </ul>
                                    
                                    Such characters are represented using a two-character
                                    escape sequence where available (for example, <code>\t</code>), or a six-character escape sequence otherwise
                                    (for example <code>\uDEAD</code>). Characters other than these will not be escaped in the result,
                                    even if they were escaped in the input. In the result:
                                    
                                    
                                    <ul>
                                       <li>
                                          <p>Any <code>string</code> element whose string value contains a
                                             backslash character must have the attribute value <code>escaped="true"</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Any element that contains a <code>key</code> attribute whose string value
                                             contains a backslash character must have the attribute
                                             <code>escaped-key="true"</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The values of the <code>escaped</code> and
                                             <code>escaped-key</code> attributes are immaterial when there is no backslash
                                             present, and it is never necessary to include either attribute when its value
                                             is <code>false</code>.
                                          </p>
                                       </li>
                                    </ul>
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="2"><code>fallback</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">
                                    Provides a function which is called when the input contains an escape sequence 
                                    that represents a character that is not valid in the version of XML
                                    supported by the implementation. 
                                    
                                    It is an error to supply the <code>fallback</code> option if the <code>escape</code> option is present
                                    with the value <code>true</code>.
                                    
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>function(xs:string) as xs:string</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>The default is effectively the function function($s){"&amp;#xFFFD;"}: that is,
                                                a function that replaces the escape sequence with the Unicode REPLACEMENT CHARACTER.</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>User-supplied function</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    The function is called when the JSON input contains an escape sequence that is valid
                                    according to the JSON 
                                    grammar, but which does not represent a character that is valid in the version of
                                    XML supported
                                    by the processor. In the case of surrogates, the function is called once for any six-character
                                    escape sequence
                                    that is not properly paired with another surrogate. The string supplied 
                                    as the argument will always be a two- or six- character escape
                                    sequence, starting with a backslash, that conforms to the rules in the JSON grammar
                                    (as extended by the
                                    implementation if <code>liberal:true()</code> is specified): for example
                                    <code>\b</code> or <code>\uFFFF</code> or <code>\uDEAD</code>. The function is <em>not</em>
                                    called for an escape sequence that is invalid against the grammar (for example <code>\x0A</code>). 
                                    The function returns a string
                                    which is inserted into the result in place of the invalid character. The
                                    function also has the option of raising a dynamic error by calling <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a>.
                                    
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <p>The various structures that can occur in JSON are transformed recursively to XDM values
                           according to the rules given in <a href="https://www.w3.org/TR/xpath-functions-31/#json-to-xml-mapping"><b>17.4.2 XML Representation of JSON</b></a>.
                        </p>
                        <p>The function returns a document node, whose only child
                           is the element node representing the outermost construct in the JSON
                           text.
                        </p>
                        <p>The function is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>non-deterministic with respect to node identity<span class="arrow">·</span></a>: that is, if the function is called twice with the same
                           arguments, it is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> whether the same node is returned on both
                           occasions.
                        </p>
                        <p>The base URI of the returned document node is taken from the static base URI of the
                           function call.
                        </p>
                        <p>The choice of namespace prefix (or absence of a prefix) in the names of constructed
                           nodes is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>implementation-dependant<span class="arrow">·</span></a>.
                        </p>
                        <p>The XDM tree returned by the function does not contain any
                           unnecessary (albeit valid) nodes such as whitespace text nodes, comments, or processing
                           instructions.
                           It does not include any whitespace in the value of <code>number</code> or <code>boolean</code> 
                           element nodes, <span>or in the value of <code>escaped</code> or <code>escaped-key</code>
                              attribute nodes.</span></p>
                        <p>If the result is typed, every element named <code>string</code> will have an attribute named 
                           <code>escaped</code> whose value is either <code>true</code> or <code>false</code>, and every element having 
                           an attribute named <code>key</code> will also have an attribute named <code>escaped-key</code> whose value is either 
                           <code>true</code> or <code>false</code>.
                           
                        </p>
                        <p>If the result is untyped, the attributes <code>escaped</code> and <code>escaped-key</code> will 
                           either be present with the value <code>true</code>, or will be absent. They will never be present with the value <code>false</code>.
                        </p>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0001" title="err:FOJS0001">err:FOJS0001</a>] if the value of
                           <code>$input</code> does not conform to the JSON grammar as defined
                           by <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>, unless the option <code>"liberal":true()</code> is present and
                           the processor chooses to accept the deviation. 
                        </p>
                        <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0004" title="err:FOJS0004">err:FOJS0004</a>] if the value of
                           the <code>validate</code> option is <code>true</code> and the processor does not support
                           schema validation or typed data.
                        </p>
                        <p>An error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005" title="err:FOJS0005">err:FOJS0005</a>] if the value of
                           <code>$options</code> includes an entry whose key is defined in this specification,
                           and whose value is not a permitted value for that key.
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">To read a JSON file, this function can be used in conjunction with the
                           <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text"><code>fn:unparsed-text</code></a> function.
                        </p>
                        <p class="note">Many JSON implementations allow commas to be used after the last item in an object
                           or
                           array, although the specification does not permit it. The option
                           <code>spec="liberal"</code> is provided to allow such deviations from the
                           specification to be accepted. Some JSON implementations also allow constructors such
                           as
                           <code>new Date("2000-12-13")</code> to appear as values: specifying
                           <code>spec="liberal"</code> allows such extensions to be accepted, but does not
                           guarantee it. If such extensions are accepted, the resulting value is
                           implementation-defined, and will not necessarily conform to the schema at <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><b>C.2 Schema for the result of fn:json-to-xml</b></a>.
                        </p>
                        <p class="note">If the input starts with a byte order mark, this function ignores it. The byte order
                           mark may have been added
                           to the data stream in order to facilitate decoding of an octet stream to a character
                           string, but since this function
                           takes a character string as input, the byte order mark serves no useful purpose.
                        </p>
                        <p class="note">The possibility of the input containing characters that are not valid in XML (for
                           example, unpaired surrogates)
                           arises only when such characters are expressed using JSON escape sequences. The is
                           because the input to the function
                           is an instance of <code>xs:string</code>, which by definition can only contain characters that are valid in XML.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The expression <code>json-to-xml('{"x": 1, "y": [3,4,5]}')</code> returns (with whitespace added for legibility):
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
  &lt;number key="x"&gt;1&lt;/number&gt;
  &lt;array key="y"&gt;
   &lt;number&gt;3&lt;/number&gt;
   &lt;number&gt;4&lt;/number&gt;
   &lt;number&gt;5&lt;/number&gt;
  &lt;/array&gt;
&lt;/map&gt;</pre></div>
                           <p>The expression <code>json-to-xml('"abcd"', map{'liberal': false()})</code> returns <code>&lt;string xmlns="http://www.w3.org/2005/xpath-functions"&gt;abcd&lt;/string&gt;</code>.
                           </p>
                           <p>The expression <code>json-to-xml('{"x": "\\", "y": "\u0025"}')</code> returns (with whitespace added for legibility):
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
  &lt;string key="x"&gt;\&lt;/string&gt;
  &lt;string key="y"&gt;%&lt;/string&gt;
&lt;/map&gt;</pre></div>
                           <p>The expression <code>json-to-xml('{"x": "\\", "y": "\u0025"}', map{'escape':
                                 true()})</code> returns (with whitespace added for legibility):
                           </p>
                           <div class="exampleInner"><pre class="small">&lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;
  &lt;string escaped="true" key="x"&gt;\\&lt;/string&gt;
  &lt;string key="y"&gt;%&lt;/string&gt;
&lt;/map&gt;</pre></div>
                           <p>The following example illustrates use of the <code>fallback</code> function to
                              handle characters that are invalid in XML.
                           </p>
                           <div class="exampleInner"><pre class="small"> let 
   $jsonstr := unparsed-text('http://example.com/endpoint'),
   $options := map {
     'liberal': true(),
     'fallback': function($char as xs:string) as xs:string {
       let 
         $c0chars := map {
           '\u0000':'[NUL]',
           '\u0001':'[SOH]',
           '\u0002':'[STX]',
           ...
           '\u001E':'[RS]',
           '\u001F':'[US]'
         },
         $replacement := $c0chars($char)
      return 
        if (exists($replacement))
        then $replacement
        else error(xs:QName('err:invalid-char'), 
          'Error: ' || $char || ' is not a C0 control character.')
     }
   }
 return json-to-xml($jsonstr, $options)</pre></div>
                        </div>
                     </dd>
                  </dl>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-xml-to-json"></a>17.5.4 fn:xml-to-json
                  </h4>
                  <dl>
                     <dt class="label">Summary</dt>
                     <dd>
                        <p>Converts an XML tree, whose format corresponds to the XML representation of JSON defined
                           in this specification, into a string conforming to the JSON grammar.
                        </p>
                     </dd>
                     <dt class="label">Signatures</dt>
                     <dd>
                        <div class="proto"><code class="function">fn:xml-to-json</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                        <div class="proto"><code class="function">fn:xml-to-json</code>(<code class="arg">$input</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>, <code class="arg">$options</code><code class="as">&nbsp;as&nbsp;</code><code class="type">map(*)</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                     </dd>
                     <dt class="label">Properties</dt>
                     <dd>
                        <p>This function is <a title="deterministic" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-deterministic"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>, <a title="context-independent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-context-independent"><span class="arrow">·</span>context-independent<span class="arrow">·</span></a>,  and <a title="focus-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-focus-independent"><span class="arrow">·</span>focus-independent<span class="arrow">·</span></a>. 
                        </p>
                     </dd>
                     <dt class="label">Rules</dt>
                     <dd>
                        <p>The effect of the one-argument form of this function is the same as calling the
                           two-argument form with an empty map as the value of the <code>$options</code>
                           argument.
                        </p>
                        <p>The first argument <code>$input</code> is a node; the subtree rooted at this node will typically be
                           the XML representation of a JSON document as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#json-to-xml-mapping"><b>17.4.2 XML Representation of JSON</b></a>.
                        </p>
                        <p>If <code>$input</code> is the empty sequence, the function returns the empty sequence.
                        </p>
                        <p>The <code>$options</code> argument can be used to control the way in which the conversion
                           takes place. The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> apply.
                        </p>
                        <p>The entries that may appear in the <code>$options</code> map are as follows:
                        </p>
                        <table style="border-collapse: collapse">
                           <thead>
                              <tr style="border-top: 2px solid black; border-bottom: 2px solid black">
                                 <th style="text-align:left; padding-right: 10px; ">Key</th>
                                 <th style="text-align:left; padding-right: 10px; ">Value</th>
                                 <th style="text-align:left">Meaning</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black" rowspan="3"><code>indent</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black" colspan="2">Determines whether additional whitespace should be added to the output to improve
                                    readability.
                                    <ul>
                                       <li>
                                          <p><b>Type: </b><code>xs:boolean</code></p>
                                       </li>
                                       <li>
                                          <p><b>Default: </b><code>false</code></p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 1px solid black"><code>false</code></td>
                                 <td style="vertical-align:top; border-bottom: 1px solid black">
                                    The processor must not insert any insignificant whitespace between JSON tokens.
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="white-space:nowrap; padding-right: 10px; vertical-align:top; border-bottom: 2px solid black"><code>true</code></td>
                                 <td style="vertical-align:top; border-bottom: 2px solid black">
                                    The processor <span class="verb">may</span> insert whitespace between JSON tokens in order to improve readability.
                                    The specification imposes no constraints on how this is done.
                                    
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                        <p>The node supplied as <code>$input</code> must be one of the following: [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0006" title="err:FOJS0006">err:FOJS0006</a>]
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>An element node whose name matches the name of a global element declaration in the
                                 schema given in 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#schema-for-json"><b>C.2 Schema for the result of fn:json-to-xml</b></a> ("the schema") and that is valid as defined below:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>If the type annotation of the element matches the type of the relevant element declaration
                                       
                                       in the schema (indicating that the element has been validated against the schema),
                                       then the element 
                                       is considered valid.
                                       
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise, the processor <span class="verb">may</span> attempt to validate the element against
                                       the schema, in which case it is treated as valid if and only if the outcome of validation
                                       is
                                       <b>valid</b>.
                                       
                                    </p>
                                 </li>
                                 <li>
                                    <p>Otherwise (if the processor does not attempt validation using the schema), 
                                       the processor <span class="verb">must</span> ensure that the content of the element, 
                                       after stripping all attributes (at any depth) in namespaces other than 
                                       <code>http://www.w3.org/2005/xpath-functions</code>, is such that validation 
                                       against the schema would have an outcome of <b>valid</b>.
                                       
                                    </p>
                                    <div class="note">
                                       <p class="prefix"><b>Note:</b></p>
                                       <p>The process described here is not precisely equivalent to schema validation. 
                                          For example, schema validation will fail if there is an invalid <code>xsi:type</code> 
                                          or <code>xsi:nil</code> attribute, whereas this process will ignore such attributes.
                                          
                                       </p>
                                    </div>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>An element node <var>E</var> having a <code>key</code> attribute and/or an <code>escaped-key</code> attribute 
                                 provided that <var>E</var> would satisfy one of the above
                                 conditions if the <code>key</code> and/or <code>escaped-key</code> attributes were removed.
                              </p>
                           </li>
                           <li>
                              <p>A document node having exactly one element child and no text node children, 
                                 where the element child satisfies one of the conditions above.
                              </p>
                           </li>
                        </ol>
                        <p>Furthermore, <code>$input</code> must satisfy the following constraint
                           (which cannot be conveniently expressed in the schema). Every element <var>M</var> that is a descendant-or-self of 
                           <code>$input</code> and has local name <code>map</code> and namespace URI <code>http://www.w3.org/2005/xpath-functions</code>
                           must satisfy the following rule: there must not be two distinct children of <var>M</var> (say <var>C<sub>1</sub></var> and <var>C<sub>2</sub></var>) 
                           such that the normalized key of <var>C<sub>1</sub></var> is equal to the normalized key of <var>C<sub>2</sub></var>. The normalized key 
                           of an element <var>C</var> is as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <var>C</var> has the attribute value <code>escaped-key="true"</code>, then the value of the 
                                 <code>key</code> attribute of <var>C</var>, with all JSON escape sequences replaced by the corresponding Unicode characters
                                 
                                 according to the JSON escaping rules.
                                 
                              </p>
                           </li>
                           <li>
                              <p>Otherwise (the <code>escaped-key</code> attribute of <var>C</var> is absent or set to false), 
                                 the value of the <code>key</code> attribute of <var>C</var>.
                              </p>
                           </li>
                        </ul>
                        <p>Nodes in the input tree are handled by applying the following rules, recursively.
                           In these rules the term
                           "an element named <var>N</var>" means "an element node whose local name is <var>N</var> and whose namespace URI is 
                           <code>http://www.w3.org/2005/xpath-functions</code>".
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>A document node having a single element node child is processed by processing that
                                 child.
                              </p>
                           </li>
                           <li>
                              <p>An element named <code>null</code> results in the output <code>null</code>.
                              </p>
                           </li>
                           <li>
                              <p>An element <code>$E</code> named <code>boolean</code> results in the output <code>true</code> or <code>false</code>
                                 depending on the result of <span><code>xs:boolean(fn:string($E))</code></span>.
                              </p>
                           </li>
                           <li>
                              <p>An element <code>$E</code> named <code>number</code> results in the output of the string 
                                 <span>result of <code>xs:string(xs:double(fn:string($E)))</code></span>
                                 
                              </p>
                           </li>
                           <li>
                              <p>An element named <code>string</code> results in the output of the string value of the element, enclosed in
                                 quotation marks, with any special characters in the string escaped as described below.
                              </p>
                           </li>
                           <li>
                              <p>An element named <code>array</code> results in the output of the children of the <code>array</code> element, 
                                 each processed by applying these rules recursively: the items in the resulting list
                                 are enclosed between square brackets, 
                                 and separated by commas.
                              </p>
                           </li>
                           <li>
                              <p>An element named <code>map</code> results in the output of a sequence of map entries corresponding to 
                                 the children of the <code>map</code> element, enclosed between curly braces and separated by commas. 
                                 Each entry comprises the value of the <code>key</code> attribute of the child element, enclosed in quotation marks 
                                 and escaped as described below, followed by a colon, followed by the result of processing
                                 the child element 
                                 by applying these rules recursively.
                              </p>
                           </li>
                           <li>
                              <p>Comments, processing instructions, and whitespace text node children of <code>map</code> and <code>array</code>
                                 are ignored.
                              </p>
                           </li>
                        </ol>
                        <p>Strings are escaped as follows:</p>
                        <ol class="enumar">
                           <li>
                              <p>If the attribute <code>escaped="true"</code> is present for a string value, or <code>escaped-key="true"</code> for a key value, then:
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>any valid JSON escape sequence present in the string is copied unchanged to the output;</p>
                                 </li>
                                 <li>
                                    <p>any invalid JSON escape sequence results in a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0007" title="err:FOJS0007">err:FOJS0007</a>];
                                    </p>
                                 </li>
                                 <li>
                                    <p>any unescaped occurrence of quotation mark, backspace, form-feed, newline, carriage
                                       return, tab, <span>or solidus</span> is replaced by
                                       <code>\"</code>, <code>\b</code>, <code>\f</code>, <code>\n</code>, <code>\r</code>, <code>\t</code>, <span>or <code>\/</code></span> respectively; 
                                    </p>
                                 </li>
                                 <li>
                                    <p>any other codepoint in the range 1-31 or 127-159 is replaced by an escape in the form
                                       \uHHHH where HHHH 
                                       is the upper-case hexadecimal representation of the codepoint value.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>Otherwise (that is, in the absence of the attribute <code>escaped="true"</code> for a string value, 
                                 or <code>escaped-key="true"</code> for a key value):
                              </p>
                              <ol class="enumla">
                                 <li>
                                    <p>any occurrence of backslash is replaced by <code>\\</code></p>
                                 </li>
                                 <li>
                                    <p>any occurrence of quotation mark, backspace, form-feed, newline, carriage return,
                                       or tab is 
                                       replaced by <code>\"</code>, <code>\b</code>, <code>\f</code>, <code>\n</code>, <code>\r</code>, or <code>\t</code> respectively; 
                                    </p>
                                 </li>
                                 <li>
                                    <p>any other codepoint in the range 1-31 or 127-159 is replaced by an escape in 
                                       the form <code>\uHHHH</code> where <code>HHHH</code> is the upper-case hexadecimal representation of the codepoint value.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                        </ol>
                     </dd>
                     <dt class="label">Error Conditions</dt>
                     <dd>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0005" title="err:FOJS0005">err:FOJS0005</a>] if the value of
                           <code>$options</code> includes an entry whose key is defined in this specification, 
                           and whose value is not a permitted value for that key.
                        </p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0006" title="err:FOJS0006">err:FOJS0006</a>] if the value of
                           <code>$input</code> is not a document or element node or is not valid according to the schema for the
                           XML representation of
                           JSON<span>, or if a <code>map</code> element has two children whose normalized key values are the same.</span></p>
                        <p>A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0007" title="err:FOJS0007">err:FOJS0007</a>] if the value of
                           <code>$input</code> includes a string labeled with <code>escaped="true"</code>, or
                           a key labeled with <code>escaped-key="true"</code>, where the content of the string or key
                           contains an invalid JSON escape sequence: specifically, where it contains a backslash
                           (<code>\</code>) that is not followed by one
                           of the characters <code>"</code>, <code>\</code>, <code>/</code>, <code>b</code>, <code>f</code>, <code>n</code>, 
                           <code>r</code>, <code>t</code>, or <code>u</code>, or where it contains the characters <code>\u</code>
                           not followed by four hexadecimal digits (that is <code>[0-9A-Fa-f]{4}</code>).
                           
                        </p>
                     </dd>
                     <dt class="label">Notes</dt>
                     <dd>
                        <p class="note">The rule requiring schema validity has a number of consequences, including the following:</p>
                        <div class="note">
                           <ol class="enumar">
                              <li>
                                 <p>The input cannot contain no-namespace attributes, or attributes in the namespace <code>http://www.w3.org/2005/xpath-functions</code>,
                                    except where explicitly allowed by the schema. Attributes in other namespaces, however,
                                    are ignored.
                                 </p>
                              </li>
                              <li>
                                 <p>Nodes that do not affect schema validity, such as comments, processing instructions,
                                    namespace nodes, and whitespace text node
                                    children of <code>map</code> and <code>array</code>, are ignored.
                                 </p>
                              </li>
                              <li>
                                 <p>Numeric values are restricted to those that are valid in JSON: 
                                    the schema disallows positive and negative infinity and NaN.
                                 </p>
                              </li>
                              <li>
                                 <p>Duplicate key values are not permitted. <span>Most cases of duplicate keys are prevented by the rules in the schema; 
                                       additional cases (where the keys are equal only after expanding JSON escape sequences)
                                       are prevented by the prose rules 
                                       of this function. For example, the key values <code>\n</code> and <code>\u000A</code> are treated as duplicates even though
                                       the rules in the schema do not treat them as such.</span></p>
                              </li>
                           </ol>
                        </div>
                        <p class="note">The rule allowing the top-level element to have a <code>key</code> attribute (which is ignored)
                           allows any element in the output of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> function
                           to be processed: for example, it is possible to take a JSON document, convert it to
                           XML, select
                           a subtree based on the value of a <code>key</code> attribute, and then convert this subtree
                           back to JSON, perhaps after a transformation. The rule means that an element with
                           the appropriate name will be 
                           accepted if it has been validated against one of the 
                           types <code>mapWithinMapType</code>, <code>arrayWithinMapType</code>, <code>stringWithinMapType</code>, 
                           <code>numberWithinMapType</code>, <code>booleanWithinMapType</code>, or <code>nullWithinMapType</code>.
                        </p>
                     </dd>
                     <dt class="label">Examples</dt>
                     <dd>
                        <div class="example">
                           <p>The input <code>&lt;array xmlns="http://www.w3.org/2005/xpath-functions"&gt;&lt;number&gt;1&lt;/number&gt;&lt;string&gt;is&lt;/string&gt;&lt;boolean&gt;1&lt;/boolean&gt;&lt;/array&gt;</code>
                              produces the result <code>[1,"is",true]</code>.
                           </p>
                           <p>The input <code>&lt;map xmlns="http://www.w3.org/2005/xpath-functions"&gt;&lt;number key="Sunday"&gt;1&lt;/number&gt;&lt;number
                                 key="Monday"&gt;2&lt;/string&gt;&lt;/map&gt;</code>
                              produces the result <code>{"Sunday":1,"Monday":2}</code>.
                           </p>
                        </div>
                     </dd>
                  </dl>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="constructor-functions"></a>18 Constructor functions
            </h2>
            <p>
               This section describes constructor functions corresponding to simple types defined
               in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>. 
               Constructor functions are used to convert a supplied value to a given type. They always
               take a single argument, 
               and the name of the function is the same as the name of the target type.
               
            </p>
            <p>
               Constructor functions are defined for all user-defined named simple types, and for
               most built-in atomic, list, 
               and union types. The only named simple types that have no constructor function are
               those that have no instances 
               other than instances of their derived types: specifically, <code>xs:anySimpleType</code>, <code>xs:anyAtomicType</code>, 
               and <code>xs:NOTATION</code>. 
               
            </p>
            <div class="div2">
               
               <h3><a id="constructor-functions-for-xsd-types"></a>18.1 Constructor functions for XML Schema built-in atomic types
               </h3>
               <p>Every built-in atomic 
                  type that is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>,
                  except <code>xs:anyAtomicType</code> and <code>xs:NOTATION</code>, has an
                  associated constructor function. The type <code>xs:untypedAtomic</code>, defined
                  in <a href="https://www.w3.org/TR/xpath-datamodel-31/#types">Section 
                     
                     2.7 Schema Information
                     </a><sup><small>DM31</small></sup> and the two derived types
                  <code>xs:yearMonthDuration</code> and <code>xs:dayTimeDuration</code> defined
                  in <a href="https://www.w3.org/TR/xpath-datamodel-31/#types">Section 
                     
                     2.7 Schema Information
                     </a><sup><small>DM31</small></sup> also have associated constructor functions.
                  Implementations <span class="verb">may</span> additionally provide
                  a constructor functions for the new datatype <code>xs:dateTimeStamp</code> introduced in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a>.
               </p>
               <p>
                  A constructor function is not defined for <code>xs:anyAtomicType</code> as there are no atomic values with type annotation <code>xs:anyAtomicType</code> at runtime, although this can be a statically inferred type.
                  A constructor function is not defined for <code>xs:NOTATION</code> since it is defined as an abstract type in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.  If the static context (See <a href="https://www.w3.org/TR/xpath-31/#static_context">Section 
                     
                     2.1.1 Static Context
                     </a><sup><small>XP31</small></sup>) contains a type derived from
                  <code>xs:NOTATION</code> then a constructor function is defined for it.
                  See <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-user-defined-types"><b>18.5 Constructor functions for user-defined types</b></a>.
                  
               </p>
               <p> 
                  The form of the constructor function for an atomic type
                  <em>eg:TYPE</em> is:
               </p>
               <div class="proto"><code class="function">eg:TYPE</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">eg:TYPE?</code></div>
               <p>If <code>$arg</code> is the empty sequence, the empty sequence is returned. For
                  example, the signature of the constructor function corresponding to the
                  <code>xs:unsignedInt</code> type defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> is:
               </p>
               <div class="proto"><code class="function">xs:unsignedInt</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:unsignedInt?</code></div>
               <p>Calling the constructor function <code>xs:unsignedInt(12)</code> returns
                  the <code> xs:unsignedInt</code> value 12. Another call of that constructor
                  function that returns the same <code>xs:unsignedInt</code> value is
                  <code>xs:unsignedInt("12")</code>. The same result would also be returned if the
                  constructor function were to be called with a node that had a typed value equal
                  to the <code>xs:unsignedInt</code> 12. The standard features described in
                  <a href="https://www.w3.org/TR/xpath-31/#id-atomization">Section 
                     
                     2.4.2 Atomization
                     </a><sup><small>XP31</small></sup> would atomize the node to
                  extract its typed value and then call the constructor with that value. If the
                  value passed to a constructor is not in the lexical space of the datatype to be constructed,
                  
                  and cannot be converted to a value in the value space of the datatype under the rules
                  in this
                  specification, then an
                  dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>].
               </p>
               <p>The semantics of the constructor function 
                  <code>xs:TYPE(arg)</code>
                  are identical to the semantics of 
                  <code>arg</code> cast as <code>xs:TYPE?</code>
                  . See <a href="https://www.w3.org/TR/xpath-functions-31/#casting"><b>19 Casting</b></a>.
               </p>
               <p>If the argument to a constructor function is a literal, the result of the
                  function <span class="verb">may</span> be evaluated statically; if an error is found during such
                  evaluation, it may be reported as a static error. 
               </p>
               <p>Special rules apply to constructor functions for <code>xs:QName</code> and types derived from <code>xs:QName</code> and <code>xs:NOTATION</code>. See 
                  <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-qname-notation"><b>18.2 Constructor functions for xs:QName and xs:NOTATION</b></a>.
                  
               </p>
               <p>The following constructor functions for the built-in atomic types are supported:</p>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:string</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:boolean</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:boolean?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:decimal</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:decimal?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:float</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:float?</code></div>
                     <p>Implementations <span class="verb">should</span> return negative zero for <code>xs:float("-0.0E0")</code>.  
                        But because <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> does not distinguish between the values positive zero and negative zero,
                        implementations <span class="verb">may</span> return positive zero in this case.
                     </p>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:double</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:double?</code></div>
                     <p>Implementations <span class="verb">should</span> return negative zero for <code>xs:double("-0.0E0")</code>.  
                        But because <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> does not distinguish between the values positive zero and negative zero,
                        implementations <span class="verb">may</span> return positive zero in this case.
                     </p>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:duration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:duration?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:dateTime</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTime?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:time</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:time?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:date</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:date?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:gYearMonth</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:gYearMonth?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:gYear</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:gYear?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:gMonthDay</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:gMonthDay?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:gDay</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:gDay?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:gMonth</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:gMonth?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:hexBinary</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:hexBinary?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:base64Binary</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:base64Binary?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:anyURI</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyURI?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:QName</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:QName?</code></div>
                     <p>
                        See <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-qname-notation"><b>18.2 Constructor functions for xs:QName and xs:NOTATION</b></a> for special rules.
                     </p>
                  </li>
               </ul>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:normalizedString</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:normalizedString?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:token</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:token?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:language</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:language?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:NMTOKEN</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:NMTOKEN?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:Name</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:Name?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:NCName</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:NCName?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:ID</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:ID?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:IDREF</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:IDREF?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:ENTITY</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:ENTITY?</code></div>
                     <p>See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-ENTITY"><b>19.1.9 Casting to xs:ENTITY</b></a> for rules related to constructing values of type <code>xs:ENTITY</code> and types derived from it.
                     </p>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:integer</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:nonPositiveInteger</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:nonPositiveInteger?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:negativeInteger</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:negativeInteger?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:long</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:long?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:int</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:int?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:short</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:short?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:byte</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:byte?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:nonNegativeInteger</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:nonNegativeInteger?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:unsignedLong</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:unsignedLong?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:unsignedInt</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:unsignedInt?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:unsignedShort</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:unsignedShort?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:unsignedByte</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:unsignedByte?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:positiveInteger</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:positiveInteger?</code></div>
                  </li>
               </ul>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:yearMonthDuration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:yearMonthDuration?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:dayTimeDuration</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dayTimeDuration?</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:untypedAtomic</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:untypedAtomic?</code></div>
                  </li>
               </ul>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:dateTimeStamp</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:dateTimeStamp?</code></div>
                     <p><em>Available only if the implementation supports XSD 1.1.</em></p>
                  </li>
               </ul>
            </div>
            <div class="div2">
               
               <h3><a id="constructor-qname-notation"></a>18.2 Constructor functions for xs:QName and xs:NOTATION
               </h3>
               <p>Special rules apply to constructor functions for the types <code>xs:QName</code> and <code>xs:NOTATION</code>, for two reasons:
               </p>
               <ul>
                  <li>
                     <p>
                        Values cannot belong directly to the type <code>xs:NOTATION</code>, only to its subtypes.
                        
                     </p>
                  </li>
                  <li>
                     <p>
                        The lexical representation of these types uses namespace prefixes, whose
                        meaning is context-dependent.
                     </p>
                  </li>
               </ul>
               <p>
                  These constraints result in the following rules:
               </p>
               <ol class="enumar">
                  <li>
                     <p>
                        There is no constructor function for <code>xs:NOTATION</code>. Constructors are defined, however, for <code>xs:QName</code>, 
                        for types derived or constructed from <code>xs:QName</code>, and for types 
                        derived or constructed from <code>xs:NOTATION</code>.
                        
                     </p>
                  </li>
                  <li>
                     <p>When converting from an <code>xs:string</code>, the prefix within the lexical 
                        <code>xs:QName</code> supplied
                        as the argument is resolved to a namespace URI using the statically known
                        namespaces from the static context. If the lexical <code>xs:QName</code>
                        has no prefix, the
                        namespace URI of the resulting expanded-QName is the default element/type
                        namespace from the static context. Components of the static context are
                        defined in <a href="https://www.w3.org/TR/xpath-31/#static_context">Section 
                           
                           2.1.1 Static Context
                           </a><sup><small>XP31</small></sup>. A dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFONS0004" title="err:FONS0004">err:FONS0004</a>]
                        if the prefix is not bound in the static context. As described in
                        <a href="https://www.w3.org/TR/xpath-datamodel-31/#terminology">Section 
                           
                           2.1 Terminology
                           </a><sup><small>DM31</small></sup>, the supplied prefix is retained as part of the
                        expanded-QName value.
                     </p>
                  </li>
               </ol>
               <p>When a constructor function for a namespace-sensitive type is used as a literal function
                  item
                  or in a partial function application (for example, <code>xs:QName#1</code> or <code>xs:QName(?)</code>) the namespace
                  bindings that are relevant are those from the static context of the literal function
                  item or partial function application.
                  When a constructor function for a namespace-sensitive type is obtained by means of
                  the <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a>
                  function, the relevant namespace bindings are those from the static context of the
                  call on <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup"><code>fn:function-lookup</code></a>.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>When the supplied argument to the <code>xs:QName</code> constructor
                     function is a node, the node is atomized in the usual way, and if the result is <code>xs:untypedAtomic</code> it is then
                     converted as if a string had been supplied. The effect might not be what is desired.
                     For example, given the attribute <code>xsi:type="my:type"</code>, the expression 
                     <code>xs:QName(@xsi:type)</code> might fail on the grounds that the prefix <code>my</code>
                     is undeclared. This is because the namespace bindings are taken from the static context
                     (that is, from the query or stylesheet), and not from the source document containing
                     the
                     <code>@xsi:type</code> attribute. The solution to this problem is to use the function call
                     <code>resolve-QName(@xsi:type, .)</code> instead.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="constructor-functions-for-xsd-list-types"></a>18.3 Constructor functions for XML Schema built-in list types
               </h3>
               <p>Each of the three built-in list
                  types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>,
                  namely <code>xs:NMTOKENS</code>, <code>xs:ENTITIES</code>, and <code>xs:IDREFS</code>, has an
                  associated constructor function.
               </p>
               <p>The function signatures are as follows:</p>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:NMTOKENS</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:NMTOKEN*</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:ENTITIES</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:ENTITY*</code></div>
                  </li>
                  <li>
                     <div class="proto"><code class="function">xs:IDREFS</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:IDREF*</code></div>
                  </li>
               </ul>
               <p>The semantics are equivalent to casting to the corresponding types from <code>xs:string</code>.
               </p>
               <p>All three of these types have the facet <code>minLength = 1</code> meaning that there must
                  always be at least one item in the list. The return type, however, allows for the
                  fact that when the argument to
                  the function is an empty sequence, the result is an empty sequence.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>In the case of atomic types, it is possible to use an expression such as 
                     <code>xs:date(@date-of-birth)</code> to convert an attribute value to an instance of <code>xs:date</code>,
                     knowing that this will work both in the case where the attribute is already annotated
                     as <code>xs:date</code>,
                     and also in the case where it is <code>xs:untypedAtomic</code>. This approach does not work with list types,
                     because it is not permitted to use a value of type <code>xs:NMTOKEN*</code> as input to the constructor
                     function <code>xs:NMTOKENS</code>. Instead, it is necessary to use conditional logic that performs the conversion
                     only in the case where the input is untyped: 
                     <code>if (@x instance of attribute(*, xs:untypedAtomic)) then xs:NMTOKENS(@x) else data(@x)</code></p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="constructor-functions-for-xsd-union-types"></a>18.4 Constructor functions for XML Schema built-in union types
               </h3>
               <p>There is a constructor function for the union type <code>xs:numeric</code>
                  defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a>. The function signature is:
               </p>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:numeric</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:numeric?</code></div>
                  </li>
               </ul>
               <p>The semantics are determined by the rules in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-union"><b>19.3.5 Casting to union types</b></a>. These rules have the effect that: 
               </p>
               <ol class="enumar">
                  <li>
                     <p>If the argument is an instance of <code>xs:double</code>, <code>xs:float</code>, or <code>xs:decimal</code>,
                        then the result is an instance of the same primitive type, with the same value;
                     </p>
                  </li>
                  <li>
                     <p>If the argument is an instance of <code>xs:boolean</code>, the result is the <code>xs:double</code> value
                        <code>0.0e0</code> or <code>1.0e0</code>;
                     </p>
                  </li>
                  <li>
                     <p>If the argument is an instance of <code>xs:string</code> or <code>xs:untypedAtomic</code>, then:
                     </p>
                     <ol class="enumla">
                        <li>
                           <p>If the value is in the lexical space of <code>xs:double</code>, the result will be the
                              corresponding <code>xs:double</code> value;
                           </p>
                        </li>
                        <li>
                           <p>Otherwise, a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] occurs;
                           </p>
                        </li>
                     </ol>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>The result will never be an instance of <code>xs:float</code>, <code>xs:decimal</code>,
                           or <code>xs:integer</code>. This is because <code>xs:double</code> appears first in the list of member
                           types of <code>xs:numeric</code>, and its lexical space subsumes the lexical space of the other numeric
                           types. Thus, unlike XPath numeric literals, the result does not depend on the lexical
                           form of the supplied
                           value. The reason for this design choice is to retain compatibility with the function
                           conversion rules:
                           functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-abs"><code>fn:abs</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><code>fn:round</code></a> are declared to expect an instance
                           of <code>xs:numeric</code> as their first or only argument, and compatibility with the function conversion
                           rules defined in earlier versions of these specifications demands that when an untyped
                           atomic value
                           (or untyped node) is supplied as the argument, it is converted to an <code>xs:double</code> value
                           even if its lexical form is that (say) of an integer.
                        </p>
                     </div>
                  </li>
                  <li>
                     <p>In all other cases, a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] occurs.
                     </p>
                  </li>
               </ol>
               <p>In the case of an implementation that supports XSD 1.1, there is a constructor function
                  associated with the built-in union type <code>xs:error</code>.
               </p>
               <p>The function signature is as follows:</p>
               <ul>
                  <li>
                     <div class="proto"><code class="function">xs:error</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:error?</code></div>
                  </li>
               </ul>
               <p>The semantics are equivalent to casting to the corresponding union type (see <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-union"><b>19.3.5 Casting to union types</b></a>).
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>Because <code>xs:error</code> has no member types, and therefore has an empty value space, casting
                     will always fail with a dynamic error except in the case where the supplied argument
                     is an empty
                     sequence, in which case the result is also an empty sequence.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="constructor-functions-for-user-defined-types"></a>18.5 Constructor functions for user-defined types
               </h3>
               <p> For every user-defined simple type in the static context (See <a href="https://www.w3.org/TR/xpath-31/#static_context">Section 
                     
                     2.1.1 Static Context
                     </a><sup><small>XP31</small></sup>), there is a
                  constructor function whose name is the same as the name of the type and whose
                  effect is to create a value of that type from the supplied argument. The rules
                  for constructing user-defined types are defined in the same way as the rules for
                  constructing built-in derived types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-xsd-types"><b>18.1 Constructor functions for XML Schema built-in atomic types</b></a>. 
               </p>
               <p>
                  Special rules apply to constructor functions for namespace-sensitive types, that is,
                  atomic types derived from <code>xs:QName</code> and <code>xs:NOTATION</code>, list types that have
                  a namespace-sensitive item type, and union types that have a namespace-sensitive member
                  type. See <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-qname-notation"><b>18.2 Constructor functions for xs:QName and xs:NOTATION</b></a>.
               </p>
               <p>Consider a situation where the static context contains an atomic type
                  called <code>hatSize</code> defined in a schema whose target namespace is bound
                  to the prefix <code>eg</code>. In such a case the following constructor function is available to users:
               </p>
               <div class="proto"><code class="function">eg:hatSize</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType?</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">my:hatSize?</code></div>
               <p>In the case of an atomic type <var>A</var>, the return type of the function is <code>A?</code>, reflecting
                  the fact that the result will be an empty sequence if the input is an empty sequence.
                  For a union or list type,
                  the return type of the function is specified only as <code>xs:anyAtomicType*</code>. Implementations performing
                  static type checking will often be able to compute a more specific result type. For
                  example, if the target type
                  is a list type whose item type is the atomic type <var>A</var>, the result will always be an instance of <var>A*</var>;
                  if the target type is a pure union type <var>U</var> then the result will always be an instance of <var>U?</var>.
                  In general, however, applications needing interoperable behavior on implementations
                  that do strict static type
                  checking will need to use a <code>treat as</code> expression to assert the specific type of the result.
               </p>
               <p> To construct an instance of a user-defined type 
                  that is not in a namespace, it is <span>possible to use an
                     <code>EQName</code> (for example <code>Q{}hatsize(17)</code>). Alternatives are</span>
                  to use a cast expression (<code>17 cast as hatsize</code>) or <span>(if the host language allows it)</span> 
                  to undeclare the default function namespace. 
               </p>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="casting"></a>19 Casting
            </h2>
            <p> Constructor functions and cast expressions accept an expression and return a value
               of a given type. They both convert a source value, <em>SV</em>, of a source type,
               <em>ST</em>, to a target value, <em>TV</em>, of the given target type,
               <em>TT</em>, with identical semantics and different syntax. The name of the
               constructor function is the same as the name of the built-in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> 
               datatype or the datatype defined in <a href="https://www.w3.org/TR/xpath-datamodel-31/#types">Section 
                  
                  2.7 Schema Information
                  </a><sup><small>DM31</small></sup>
               of <a href="https://www.w3.org/TR/xpath-functions-31/#xpath-datamodel-31">[XQuery and XPath Data Model (XDM) 3.1]</a> (see <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-xsd-types"><b>18.1 Constructor functions for XML Schema built-in atomic types</b></a>) or the user-derived datatype
               (see <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-functions-for-user-defined-types"><b>18.5 Constructor functions for user-defined types</b></a>) that is the
               target for the conversion, and the semantics are exactly the same as for a cast
               expression; for example,
               <code>xs:date("2003-01-01")</code>
               means exactly the same as 
               <code>"2003-01-01"</code> cast as <code>xs:date?</code>.
            </p>
            <p>The cast expression takes a type name to indicate the target type of the conversion.
               See <a href="https://www.w3.org/TR/xpath-31/#id-cast">Section 
                  
                  3.14.2 Cast
                  </a><sup><small>XP31</small></sup>. If the type name allows the empty sequence
               and the expression to be cast is the empty sequence, the empty sequence is returned.
               If the type name does not allow the empty sequence and the expression to be cast is
               the empty sequence, a type error is raised [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
            </p>
            <p>Where the argument to a cast is a literal, the result of the function <span class="verb">may</span> be
               evaluated statically; if an error is encountered during such evaluation, it <span class="verb">may</span> be
               reported as a static error. 
            </p>
            <p>The general rules for casting from primitive types to primitive types are defined
               in
               <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-primitive-to-primitive"><b>19.1 Casting from primitive types to primitive types</b></a>, and subsections describe the rules
               for specific target types.
               The general rules for casting from <code>xs:string</code> (and <code>xs:untypedAtomic</code>)
               follow in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
               Casting to non-primitive types, including atomic types derived by resctriction,
               union types, and list types, is described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-non-primitive-types"><b>19.3 Casting involving non-primitive types</b></a>.  
               Casting from derived types is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-derived-to-parent"><b>19.3.2 Casting from derived types to parent types</b></a>, 
               <a href="https://www.w3.org/TR/xpath-functions-31/#casting-within-branch"><b>19.3.3 Casting within a branch of the type hierarchy</b></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#casting-across-hierarchy"><b>19.3.4 Casting across the type hierarchy</b></a>.
            </p>
            <p><span class="termdef"><a id="dt-cast-primitive-type"></a>[Definition]  Throughout 
                  this section (<a href="https://www.w3.org/TR/xpath-functions-31/#casting"><b>19 Casting</b></a>), the term <b>primitive type</b> means either one of
                  the 19 primitive types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, or one of the types
                  <code>xs:untypedAtomic</code>, <code>xs:integer</code>, <code>xs:yearMonthDuration</code>
                  and <code>xs:dayTimeDuration</code>; and where the text refers to types derived from a particular
                  primitive type <var>T</var>, the reference is to types for which <var>T</var> is the nearest
                  ancestor-or-self primitive type in the type hierarchy.
                  </span></p>
            <p>When casting from <code>xs:string</code> or <code>xs:untypedAtomic</code>
               the semantics in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a> apply, regardless of target type.
            </p>
            <div class="div2">
               
               <h3><a id="casting-from-primitive-to-primitive"></a>19.1 Casting from primitive types to primitive types
               </h3>
               <p>This section defines casting between <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive types<span class="arrow">·</span></a>
                  (specifically, the 19 primitive types defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> as well as <code>xs:untypedAtomic</code>,
                  <code>xs:integer</code> and the two derived types of
                  <code>xs:duration</code>: <code>xs:yearMonthDuration</code>
                  and <code>xs:dayTimeDuration</code> which are treated as primitive types in this section. The type conversions
                  that are supported between primitive atomic types are indicated in the table below;
                  casts between other (non-primitive) types are defined in terms of these primitives.
               </p>
               <p>In this table, there is a
                  row for each <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> acting as the source of the conversion and
                  there is a column for each <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> acting as the target of the conversion. The
                  intersections of rows and columns contain one of three characters:
                  <code>Y</code> indicates that a conversion from values of the type to which
                  the row applies to the type to which the column applies is supported;
                  <code>N</code> indicates that there are no supported conversions from values
                  of the type to which the row applies to the type to which the column applies;
                  and <code>M</code> indicates that a conversion from values of the type to
                  which the row applies to the type to which the column applies may succeed for
                  some values in the value space and fail for others.
               </p>
               <p>
                  <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> defines <code>xs:NOTATION</code> as an abstract type. 
                  Thus, casting to <code>xs:NOTATION</code> from any other type including <code>xs:NOTATION</code>
                  is not permitted and raises a static error [<a href="https://www.w3.org/TR/xpath-31/#ERRXPST0080" title="err:XPST0080">err:XPST0080</a>]<sup><small>XP31</small></sup>.  
                  However, casting from one subtype of <code>xs:NOTATION</code> to another subtype of 
                  <code>xs:NOTATION</code> is permitted.
               </p>
               <p>Casting is not supported to or from <code>xs:anySimpleType</code>. Thus, there is no row
                  or column for this type in the table below. For any node that has not been validated
                  or 
                  has been validated as <code>xs:anySimpleType</code>, the typed value of the node is an 
                  atomic value of type <code>xs:untypedAtomic</code>. There are no atomic values with the 
                  type annotation <code>xs:anySimpleType</code> at runtime. 
                  Casting to
                  <code>xs:anySimpleType</code> is not permitted and raises a static error:
                  [<a href="https://www.w3.org/TR/xpath-31/#ERRXPST0080" title="err:XPST0080">err:XPST0080</a>]<sup><small>XP31</small></sup>.
               </p>
               <p>Similarly, casting is not supported to or from <code>xs:anyAtomicType</code> and will raise 
                  a static error: [<a href="https://www.w3.org/TR/xpath-31/#ERRXPST0080" title="err:XPST0080">err:XPST0080</a>]<sup><small>XP31</small></sup>. There are no atomic values 
                  with the type annotation <code>xs:anyAtomicType</code> at runtime, although this can be a 
                  statically inferred type.
               </p>
               <p>If casting is attempted from an <em>ST</em> to a <em>TT</em> for which
                  casting is not supported, as defined in the table below, a type error is raised [<a href="https://www.w3.org/TR/xpath-31/#ERRXPTY0004" title="err:XPTY0004">err:XPTY0004</a>]<sup><small>XP31</small></sup>.
               </p>
               <p>In the following table, the columns and rows are identified by short codes that
                  identify simple types as follows:
               </p>
               <blockquote>
                  <p>uA = xs:untypedAtomic<br>aURI = xs:anyURI<br>b64 = xs:base64Binary<br>bool = xs:boolean<br>dat = xs:date<br>gDay = xs:gDay<br>dbl = xs:double<br>dec = xs:decimal<br>dT = xs:dateTime<br>dTD = xs:dayTimeDuration<br>dur = xs:duration<br>flt = xs:float<br>hxB = xs:hexBinary<br>gMD = xs:gMonthDay<br>gMon = xs:gMonth<br>int = xs:integer<br>NOT = xs:NOTATION<br>QN = xs:QName<br>str = xs:string<br>tim = xs:time<br>gYM = xs:gYearMonth<br>yMD = xs:yearMonthDuration<br>gYr = xs:gYear
                  </p>
               </blockquote>
               <p>In the following table, the notation "S\T" indicates that the source
                  ("S") of the conversion is indicated in the column below the
                  notation and that the target ("T") is indicated in the row to the
                  right of the notation.
               </p>
               <table class="casting" style="border:1px solid; padding:1px">
                  <colgroup><col style="width:5%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  <col style="width:3%" span="1">
                  </colgroup><thead>
                     <tr>
                        <th><span class="cancast" title="S\T">S\T</span></th>
                        <th><span class="cancast" title="untypedAtomic">uA</span></th>
                        <th><span class="cancast" title="string">str</span></th>
                        <th><span class="cancast" title="float">flt</span></th>
                        <th><span class="cancast" title="double">dbl</span></th>
                        <th><span class="cancast" title="decimal">dec</span></th>
                        <th><span class="cancast" title="integer">int</span></th>
                        <th><span class="cancast" title="duration">dur</span></th>
                        <th><span class="cancast" title="yearMonthDuration">yMD</span></th>
                        <th><span class="cancast" title="dayTimeDuration">dTD</span></th>
                        <th><span class="cancast" title="dateTime">dT</span></th>
                        <th><span class="cancast" title="time">tim</span></th>
                        <th><span class="cancast" title="date">dat</span></th>
                        <th><span class="cancast" title="gYearMonth">gYM</span></th>
                        <th><span class="cancast" title="gYear">gYr</span></th>
                        <th><span class="cancast" title="gMonthDay">gMD</span></th>
                        <th><span class="cancast" title="gDay">gDay</span></th>
                        <th><span class="cancast" title="gMonth">gMon</span></th>
                        <th><span class="cancast" title="boolean">bool</span></th>
                        <th><span class="cancast" title="base64Binary">b64</span></th>
                        <th><span class="cancast" title="hexBinary">hxB</span></th>
                        <th><span class="cancast" title="anyURI">aURI</span></th>
                        <th><span class="cancast" title="QName">QN</span></th>
                        <th><span class="cancast" title="NOTATION">NOT</span></th>
                     </tr>
                  </thead>
                  <tbody>
                     <tr>
                        <th><span class="cancast" title="untypedAtomic">uA</span></th>
                        <td class="castY"><span class="cancast" title="Cast untypedAtomic to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast untypedAtomic to string? Yes">Y</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to float? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to double? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to decimal? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to integer? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to duration? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to yearMonthDuration? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to dayTimeDuration? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to dateTime? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to time? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to date? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to gYearMonth? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to gYear? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to gMonthDay? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to gDay? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to gMonth? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to boolean? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to base64Binary? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to hexBinary? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to anyURI? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to QName? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast untypedAtomic to NOTATION? Maybe">M</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="string">str</span></th>
                        <td class="castY"><span class="cancast" title="Cast string to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast string to string? Yes">Y</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to float? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to double? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to decimal? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to integer? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to duration? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to yearMonthDuration? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to dayTimeDuration? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to dateTime? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to time? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to date? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to gYearMonth? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to gYear? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to gMonthDay? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to gDay? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to gMonth? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to boolean? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to base64Binary? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to hexBinary? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to anyURI? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to QName? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast string to NOTATION? Maybe">M</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="float">flt</span></th>
                        <td class="castY"><span class="cancast" title="Cast float to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast float to string? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast float to float? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast float to double? Yes">Y</span></td>
                        <td class="castM"><span class="cancast" title="Cast float to decimal? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast float to integer? Maybe">M</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to gMonth? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast float to boolean? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast float to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="double">dbl</span></th>
                        <td class="castY"><span class="cancast" title="Cast double to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast double to string? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast double to float? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast double to double? Yes">Y</span></td>
                        <td class="castM"><span class="cancast" title="Cast double to decimal? Maybe">M</span></td>
                        <td class="castM"><span class="cancast" title="Cast double to integer? Maybe">M</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to gMonth? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast double to boolean? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast double to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="decimal">dec</span></th>
                        <td class="castY"><span class="cancast" title="Cast decimal to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast decimal to string? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast decimal to float? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast decimal to double? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast decimal to decimal? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast decimal to integer? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to gMonth? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast decimal to boolean? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast decimal to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="integer">int</span></th>
                        <td class="castY"><span class="cancast" title="Cast integer to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast integer to string? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast integer to float? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast integer to double? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast integer to decimal? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast integer to integer? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to gMonth? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast integer to boolean? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast integer to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="duration">dur</span></th>
                        <td class="castY"><span class="cancast" title="Cast duration to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast duration to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to integer? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast duration to duration? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast duration to yearMonthDuration? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast duration to dayTimeDuration? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast duration to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="yearMonthDuration">yMD</span></th>
                        <td class="castY"><span class="cancast" title="Cast yearMonthDuration to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast yearMonthDuration to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to integer? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast yearMonthDuration to duration? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast yearMonthDuration to yearMonthDuration? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast yearMonthDuration to dayTimeDuration? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast yearMonthDuration to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="dayTimeDuration">dTD</span></th>
                        <td class="castY"><span class="cancast" title="Cast dayTimeDuration to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dayTimeDuration to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to integer? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast dayTimeDuration to duration? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dayTimeDuration to yearMonthDuration? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dayTimeDuration to dayTimeDuration? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dayTimeDuration to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="dateTime">dT</span></th>
                        <td class="castY"><span class="cancast" title="Cast dateTime to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to dayTimeDuration? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to dateTime? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to time? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to date? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to gYearMonth? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to gYear? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to gMonthDay? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to gDay? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast dateTime to gMonth? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast dateTime to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="time">tim</span></th>
                        <td class="castY"><span class="cancast" title="Cast time to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast time to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to dateTime? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast time to time? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast time to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="date">dat</span></th>
                        <td class="castY"><span class="cancast" title="Cast date to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to dayTimeDuration? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to dateTime? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to time? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to date? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to gYearMonth? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to gYear? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to gMonthDay? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to gDay? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast date to gMonth? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast date to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="gYearMonth">gYM</span></th>
                        <td class="castY"><span class="cancast" title="Cast gYearMonth to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast gYearMonth to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to date? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast gYearMonth to gYearMonth? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYearMonth to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="gYear">gYr</span></th>
                        <td class="castY"><span class="cancast" title="Cast gYear to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast gYear to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to gYearMonth? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast gYear to gYear? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gYear to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="gMonthDay">gMD</span></th>
                        <td class="castY"><span class="cancast" title="Cast gMonthDay to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast gMonthDay to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to gYear? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast gMonthDay to gMonthDay? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonthDay to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="gDay">gDay</span></th>
                        <td class="castY"><span class="cancast" title="Cast gDay to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast gDay to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to gMonthDay? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast gDay to gDay? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gDay to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="gMonth">gMon</span></th>
                        <td class="castY"><span class="cancast" title="Cast gMonth to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast gMonth to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to gDay? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast gMonth to gMonth? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast gMonth to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="boolean">bool</span></th>
                        <td class="castY"><span class="cancast" title="Cast boolean to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast boolean to string? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast boolean to float? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast boolean to double? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast boolean to decimal? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast boolean to integer? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to gMonth? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast boolean to boolean? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast boolean to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="base64Binary">b64</span></th>
                        <td class="castY"><span class="cancast" title="Cast base64Binary to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast base64Binary to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to boolean? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast base64Binary to base64Binary? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast base64Binary to hexBinary? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast base64Binary to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="hexBinary">hxB</span></th>
                        <td class="castY"><span class="cancast" title="Cast hexBinary to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast hexBinary to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to boolean? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast hexBinary to base64Binary? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast hexBinary to hexBinary? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to anyURI? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast hexBinary to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="anyURI">aURI</span></th>
                        <td class="castY"><span class="cancast" title="Cast anyURI to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast anyURI to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to hexBinary? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast anyURI to anyURI? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to QName? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast anyURI to NOTATION? No">N</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="QName">QN</span></th>
                        <td class="castY"><span class="cancast" title="Cast QName to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast QName to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast QName to anyURI? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast QName to QName? Yes">Y</span></td>
                        <td class="castM"><span class="cancast" title="Cast QName to NOTATION? Maybe">M</span></td>
                     </tr>
                     <tr>
                        <th><span class="cancast" title="NOTATION">NOT</span></th>
                        <td class="castY"><span class="cancast" title="Cast NOTATION to untypedAtomic? Yes">Y</span></td>
                        <td class="castY"><span class="cancast" title="Cast NOTATION to string? Yes">Y</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to float? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to double? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to decimal? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to integer? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to duration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to yearMonthDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to dayTimeDuration? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to dateTime? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to time? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to date? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to gYearMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to gYear? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to gMonthDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to gDay? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to gMonth? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to boolean? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to base64Binary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to hexBinary? No">N</span></td>
                        <td class="castN"><span class="cancast" title="Cast NOTATION to anyURI? No">N</span></td>
                        <td class="castY"><span class="cancast" title="Cast NOTATION to QName? Yes">Y</span></td>
                        <td class="castM"><span class="cancast" title="Cast NOTATION to NOTATION? Maybe">M</span></td>
                     </tr>
                  </tbody>
               </table>
               <div class="div3">
                  
                  <h4><a id="casting-to-string"></a>19.1.1 Casting to xs:string and xs:untypedAtomic
                  </h4>
                  <p>Casting is permitted from any <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> to the 
                     <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive types<span class="arrow">·</span></a>
                     <code>xs:string</code> and <code>xs:untypedAtomic</code>.
                  </p>
                  <p>When a value of any simple type is cast as <code>xs:string</code>, the
                     derivation of the <code>xs:string</code> value <em>TV</em> depends on
                     the <em>ST</em> and on the <em>SV</em>, as follows.
                  </p>
                  <ul>
                     <li>
                        <p>If <em>ST</em> is <code>xs:string</code> or a type derived from
                           <code>xs:string</code>, <em>TV</em> is <em>SV</em>.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:anyURI</code>, the type conversion is
                           performed without escaping any characters.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:QName</code> or <code>xs:NOTATION</code>:
                        </p>
                        <ul>
                           <li>
                              <p>if the qualified name
                                 has a prefix, then <em>TV</em> is the concatenation of the prefix of <em>SV</em>, 
                                 		  a single colon (:), and the local name of <em>SV</em>.
                              </p>
                           </li>
                           <li>
                              <p>otherwise <em>TV</em> is the local-name.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>If <em>ST</em> is a numeric type, the following rules apply:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:integer</code>,
                                 <em>TV</em> is the canonical lexical representation of
                                 <em>SV</em> as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>. There
                                 is no decimal point.
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:decimal</code>, then:
                              </p>
                              <ul>
                                 <li>
                                    <p>If <em>SV</em> is in the value space of
                                       <code>xs:integer</code>, that is, if there are no
                                       significant digits after the decimal point, then the
                                       value is converted from an <code>xs:decimal</code>
                                       to an <code>xs:integer</code> and the resulting
                                       <code>xs:integer</code> is converted to an
                                       <code>xs:string</code> using the rule above.
                                    </p>
                                 </li>
                                 <li>
                                    <p> Otherwise, the canonical lexical representation of
                                       <em>SV</em> is returned, as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:float</code> or
                                 <code>xs:double</code>, then:
                              </p>
                              <ul>
                                 <li>
                                    <p>
                                       <em>TV</em> will be an <code>xs:string</code> in the lexical space of <code>xs:double</code> or <code>xs:float</code> that when
                                       converted to an <code>xs:double</code> or <code>xs:float</code> under the rules of <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a> produces
                                       a value that is equal to <em>SV</em>, or is <code>NaN</code> if <em>SV</em> is <code>NaN</code>.
                                       In addition, <em>TV</em> must satisfy the constraints in the
                                       following sub-bullets.
                                       											
                                    </p>
                                    <ul>
                                       <li>
                                          <p>If <em>SV</em> has an absolute value that is
                                             greater than or equal to 0.000001 (one millionth)
                                             and less than 1000000 (one million), then the value
                                             is converted to an <code>xs:decimal</code> and the
                                             resulting <code>xs:decimal</code> is converted to an
                                             <code>xs:string</code> according to the rules above, as though using an 
                                             implementation of <code>xs:decimal</code> that imposes no limits on the
                                             <code>totalDigits</code> or
                                             <code>fractionDigits</code> facets.
                                          </p>
                                       </li>
                                       <li>
                                          <p>If <em>SV</em> has the value positive or negative zero, <em>TV</em> is "0" or "-0"
                                             respectively.
                                             
                                          </p>
                                       </li>
                                       <li>
                                          <p>If <em>SV</em> is positive or negative infinity, <em>TV</em> is the string "<code>INF</code>" or "<code>-INF</code>" respectively.
                                             
                                          </p>
                                       </li>
                                       <li>
                                          <p>In other cases, the result consists of a mantissa, which has the lexical form
                                             of an <code>xs:decimal</code>, followed by the letter "E", followed by an exponent which has
                                             the lexical form of an <code>xs:integer</code>. Leading zeroes and "+" signs are prohibited
                                             in the exponent. For the mantissa, there must be a decimal point, and there must
                                             be exactly one digit before the decimal point, which must be non-zero. The  "+"
                                             sign is prohibited. There must be at least one digit after the decimal point.
                                             Apart from this mandatory digit, trailing zero digits are prohibited. 
                                             
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                              <div class="note">
                                 <p class="prefix"><b>Note:</b></p>
                                 <p>The above rules allow more than one representation of the same value. 
                                    For example, the <code>xs:float</code> value whose exact decimal representation is 1.26743223E15
                                    might be represented by any of the strings "1.26743223E15", "1.26743222E15" or
                                    "1.26743224E15" (inter alia). It is implementation-dependent which of these
                                    representations is chosen.
                                    
                                 </p>
                              </div>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:dateTime</code>, <code>xs:date</code>
                           or <code>xs:time</code>, <em>TV</em> is the local value. 
                           The components of <em>TV</em> are individually cast to <code>xs:string</code> using the functions 
                           described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-datetimes">[casting-to-datetimes]</a> 
                           and the results are concatenated together.  The <code>year</code> component is 
                           cast to <code>xs:string</code> using <code>eg:convertYearToString</code>.  
                           The <code>month</code>, <code>day</code>, <code>hour</code> and <code>minute</code> 
                           components are cast to <code>xs:string</code> using <code>eg:convertTo2CharString</code>.  
                           The <code>second</code> component is cast to <code>xs:string</code> using 
                           <code>eg:convertSecondsToString</code>. The timezone component, if present, is 
                           cast to <code>xs:string</code> using <code>eg:convertTZtoString</code>.  
                           
                        </p>
                        <p> 
                           Note that the hours component of the resulting string
                           will never be <code>"24"</code>. Midnight is always represented as <code>"00:00:00"</code>.
                           
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:yearMonthDuration</code> or <code>xs:dayTimeDuration</code>, <em>TV</em> is the 
                           canonical representation of <em>SV</em> as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema11-2">[Schema 1.1 Part 2]</a>.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:duration</code>
                           then let <em>SYM</em> be <em>
                              <code>SV</code>
                              </em> 
                           <code>cast as xs:yearMonthDuration</code>, and let <em>SDT</em> be <em>
                              <code>SV</code>
                              </em> 
                           <code>cast as xs:dayTimeDuration</code>;  Now, let the next intermediate value, <em>TYM</em>, 
                           be <em>
                              <code>SYM</code>
                              </em> 
                           <code>cast as</code> 
                           <em>
                              <code>TT</code>
                              </em>, and let <em>TDT</em> be <em>
                              <code>SDT</code>
                              </em> 
                           <code>cast as</code> 
                           <em>
                              <code>TT</code>
                              </em>.  If <em>TYM</em> is "P0M", then <em>TV</em> is 
                           <em>TDT</em>.  Otherwise, <em>TYM</em> and <em>TDT</em> are merged according to the following rules:
                        </p>
                        <ol class="enumar">
                           <li>
                              <p>If <em>TDT</em> is "PT0S", then <em>TV</em> is <em>TYM</em>.
                              </p>
                           </li>
                           <li>
                              <p>Otherwise, <em>TV</em> is the concatenation of all the characters in <em>TYM</em> and all the
                                 characters except the first "P" and the optional negative sign in <em>TDT</em>.
                              </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>In all other cases, <em>TV</em> is the <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>
                           canonical representation of <em>SV</em>. For datatypes that do
                           not have a canonical lexical representation defined an <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> canonical representation may be used.
                        </p>
                     </li>
                  </ul>
                  <p>To cast as <code>xs:untypedAtomic</code> the value is cast as
                     <code>xs:string</code>, as described above, and the type annotation changed
                     to <code>xs:untypedAtomic</code>.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>The string representations of numeric values are backwards compatible
                        with XPath 1.0 except for the special values positive and negative
                        infinity, negative zero and values outside the range <code>1.0e-6</code> to <code>1.0e+6</code>.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-numerics"></a>19.1.2 Casting to numeric types
                  </h4>
                  <div class="div4">
                     
                     <h5><a id="casting-to-float"></a>19.1.2.1 Casting to xs:float
                     </h5>
                     <p>When a value of any simple type is cast as <code>xs:float</code>, the <code>xs:float</code>
                        <em>TV</em> is derived from the <em>ST</em> and the
                        <em>SV</em> as follows:
                     </p>
                     <ul>
                        <li>
                           <p>If <em>ST</em> is <code>xs:float</code>, then <em>TV</em>
                              is <em>SV</em> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:double</code>, then
                              <em>TV</em> is obtained as follows: 
                           </p>
                           <ul>
                              <li>
                                 <p>if <em>SV</em> is the <code>xs:double</code> value
                                    <code>INF</code>, <code>-INF</code>, <code>NaN</code>,
                                    positive zero, or negative zero, then <em>TV</em> is
                                    the <code>xs:float</code> value <code>INF</code>,
                                    <code>-INF</code>, <code>NaN</code>, positive zero, or
                                    negative zero respectively.
                                 </p>
                              </li>
                              <li>
                                 <p>otherwise, <em>SV</em> can be expressed in the form
                                    <code>m × 2^e</code> where the mantissa
                                    <code>m</code> and exponent <code>e</code> are signed
                                    <code>xs:integer</code>s whose value range is defined in
                                    <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, and the following rules apply:
                                 </p>
                                 <ul>
                                    <li>
                                       <p>if <code>m</code> (the mantissa of
                                          <em>SV</em>) is outside the permitted range
                                          for the mantissa of an <code>xs:float</code>
                                          value <code>(-2^24-1 to +2^24-1)</code>, then it
                                          is divided by <code>2^N</code> where
                                          <code>N</code> is the lowest positive
                                          <code>xs:integer</code> that brings the result
                                          of the division within the permitted range, and
                                          the exponent <code>e</code> is increased by
                                          <code>N</code>. This is integer division (in
                                          effect, the binary value of the mantissa is
                                          truncated on the right). Let <code>M</code> be
                                          the mantissa and <code>E</code> the exponent
                                          after this adjustment.
                                       </p>
                                    </li>
                                    <li>
                                       <p>if <code>E</code> exceeds <code>104</code> (the
                                          maximum exponent value in the value space of
                                          <code>xs:float</code>) then <em>TV</em> is
                                          the <code>xs:float</code> value <code>INF</code>
                                          or <code>-INF</code> depending on the sign of <code>M</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>if <code>E</code> is less than <code>-149</code>
                                          (the minimum exponent value in the value space
                                          of <code>xs:float</code>) then <em>TV</em> is
                                          the <code>xs:float</code> value positive or
                                          negative zero depending on the sign of <code>M</code>
                                          
                                       </p>
                                    </li>
                                    <li>
                                       <p>otherwise, <em>TV</em> is the
                                          <code>xs:float</code> value <code>M × 2^E</code>.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:decimal</code>, or
                              <code>xs:integer</code>, then <em>TV</em> is <code>xs:float(</code>
                              <em>SV</em>
                              <code> cast as xs:string)</code> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:boolean</code>, <em>SV</em> is
                              converted to <code>1.0E0</code> if <em>SV</em> is
                              <code>true</code> and to <code>0.0E0</code> if <em>SV</em>
                              is <code>false</code> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                              or <code>xs:string</code>, see 
                              <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                              
                           </p>
                           <div class="note">
                              <p class="prefix"><b>Note:</b></p>
                              <p>XSD 1.1 adds the value <code>+INF</code> to the lexical space,
                                 as an alternative to <code>INF</code>. XSD 1.1 also adds negative zero
                                 to the value space.
                              </p>
                           </div>
                        </li>
                     </ul>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>Implementations <span class="verb">should</span> return negative zero for <code>xs:float("-0.0E0")</code>.  
                           But because <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> does not distinguish between the values positive zero and negative zero.
                           Implementations <span class="verb">may</span> return positive zero in this case.
                        </p>
                     </div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="casting-to-double"></a>19.1.2.2 Casting to xs:double
                     </h5>
                     <p>When a value of any simple type is cast as <code>xs:double</code>, the
                        <code>xs:double</code> value <em>TV</em> is derived from the
                        <em>ST</em> and the <em>SV</em> as follows:
                     </p>
                     <ul>
                        <li>
                           <p>If <em>ST</em> is <code>xs:double</code>, then
                              <em>TV</em> is <em>SV</em> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:float</code> or a type derived
                              from <code>xs:float</code>, then <em>TV</em> is obtained as follows:
                           </p>
                           <ul>
                              <li>
                                 <p>if <em>SV</em> is the <code>xs:float</code> value
                                    <code>INF</code>, <code>-INF</code>, <code>NaN</code>,
                                    positive zero, or negative zero, then <em>TV</em> is
                                    the <code>xs:double</code> value <code>INF</code>,
                                    <code>-INF</code>, <code>NaN</code>, positive zero, or
                                    negative zero respectively. 
                                 </p>
                              </li>
                              <li>
                                 <p>otherwise, <em>SV</em> can be expressed in the form
                                    <code>m × 2^e</code> where the
                                    mantissa <code>m</code> and exponent <code>e</code> are
                                    signed <code>xs:integer</code> values whose value range
                                    is defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>, and
                                    <em>TV</em> is the <code>xs:double</code> value
                                    <code>m × 2^e</code>. 
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:decimal</code> or
                              <code>xs:integer</code>, then <em>TV</em> is <code>xs:double(</code>
                              <em>SV</em>
                              <code> cast as xs:string)</code> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:boolean</code>, <em>SV</em> is
                              converted to <code>1.0E0</code> if <em>SV</em> is
                              <code>true</code> and to <code>0.0E0</code> if <em>SV</em>
                              is <code>false</code> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                              or <code>xs:string</code>, see 
                              <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                           </p>
                           <div class="note">
                              <p class="prefix"><b>Note:</b></p>
                              <p>XSD 1.1 adds the value <code>+INF</code> to the lexical space,
                                 as an alternative to <code>INF</code>. XSD 1.1 also adds negative zero
                                 to the value space.
                              </p>
                           </div>
                        </li>
                     </ul>
                     <div class="note">
                        <p class="prefix"><b>Note:</b></p>
                        <p>Implementations <span class="verb">should</span> return negative zero for <code>xs:double("-0.0E0")</code>.  
                           But because <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> does not distinguish between the values positive zero and negative zero.
                           Implementations <span class="verb">may</span> return positive zero in this case.
                        </p>
                     </div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="casting-to-decimal"></a>19.1.2.3 Casting to xs:decimal
                     </h5>
                     <p>When a value of any simple type is cast as <code>xs:decimal</code>, the
                        <code>xs:decimal</code> value <em>TV</em> is derived from
                        <em>ST</em> and <em>SV</em> as follows: 
                     </p>
                     <ul>
                        <li>
                           <p>If <em>ST</em> is <code>xs:decimal</code>,
                              <code>xs:integer</code> or a type derived from them, then
                              <em>TV</em> is <em>SV</em>, converted to an
                              <code>xs:decimal</code> value if need be, and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:float</code> or
                              <code>xs:double</code>, then <em>TV</em> is the
                              <code>xs:decimal</code> value, within the set of
                              <code>xs:decimal</code> values that the implementation is
                              capable of representing, that is numerically closest to
                              <em>SV</em>. If two values are equally close, then the one
                              that is closest to zero is chosen. If <em>SV</em> is too
                              large to be accommodated as an <code>xs:decimal</code>, (see
                              <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> for <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> limits on
                              numeric values) a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0001" title="err:FOCA0001">err:FOCA0001</a>]. If <em>SV</em> is one of the special
                              <code>xs:float</code> or <code>xs:double</code> values
                              <code>NaN</code>, <code>INF</code>, or <code>-INF</code>, a dynamic
                              error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>].
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:boolean</code>, <em>SV</em> is
                              converted to <code>1.0</code> if <em>SV</em> is
                              <code>1</code> or <code>true</code> and to <code>0.0</code> if
                              <em>SV</em> is <code>0</code> or <code>false</code> and the
                              conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:untypedAtomic</code>
                              or <code>xs:string</code>, see 
                              <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="casting-to-integer"></a>19.1.2.4 Casting to xs:integer
                     </h5>
                     <p>When a value of any simple type is cast as <code>xs:integer</code>, the
                        <code>xs:integer</code> value <em>TV</em> is derived from
                        <em>ST</em> and <em>SV</em> as follows:
                     </p>
                     <ul>
                        <li>
                           <p>If <em>ST</em> is <code>xs:integer</code>, or a type derived
                              from <code>xs:integer</code>, then <em>TV</em> is
                              <em>SV</em>, converted to an <code>xs:integer</code> value
                              if need be, and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is
                              <code>xs:decimal</code>, <code>xs:float</code> or
                              <code>xs:double</code>, then <em>TV</em> is <em>SV</em>
                              with the fractional part discarded and the value converted to
                              <code>xs:integer</code>. Thus, casting <code>3.1456</code>
                              returns <code>3</code> and <code>-17.89</code> returns
                              <code>-17</code>. Casting <code>3.124E1</code>
                              returns <code>31</code>. If <em>SV</em> is too large to be
                              accommodated as an integer, (see <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> for
                              <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> limits on numeric values) a 
                              dynamic error is
                              raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0003" title="err:FOCA0003">err:FOCA0003</a>]. If <em>SV</em> is
                              one of the special <code>xs:float</code> or
                              <code>xs:double</code> values <code>NaN</code>,
                              <code>INF</code>, or <code>-INF</code>, a dynamic error is raised
                              [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>].
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:boolean</code>, <em>SV</em> is
                              converted to <code>1</code> if <em>SV</em> is <code>1</code>
                              or <code>true</code> and to <code>0</code> if <em>SV</em> is
                              <code>0</code> or <code>false</code> and the conversion is complete.
                           </p>
                        </li>
                        <li>
                           <p>If <em>ST</em> is <code>xs:untypedAtomic</code>
                              or <code>xs:string</code>, see 
                              <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-durations"></a>19.1.3 Casting to duration types
                  </h4>
                  <p>When a value of type <code>xs:untypedAtomic</code>, <code>xs:string</code>,
                     a type derived from <code>xs:string</code>,
                     <code>xs:yearMonthDuration</code> or <code>xs:dayTimeDuration</code> is
                     cast as <code>xs:duration</code>, <code>xs:yearMonthDuration</code> or
                     <code>xs:dayTimeDuration</code>, <em>TV</em> is derived from
                     <em>ST</em> and <em>SV</em> as follows:
                  </p>
                  <ul>
                     <li>
                        <p>If <em>ST</em> is the same as <em>TT</em>, then
                           <em>TV</em> is <em>SV</em>. 
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:duration</code>, or a type derived
                           from <code>xs:duration</code>, but not
                           <code>xs:dayTimeDuration</code> or a type derived from
                           <code>xs:dayTimeDuration</code>, and <em>TT</em> is
                           <code>xs:yearMonthDuration</code>, then <em>TV</em> is derived
                           from <em>SV</em> by removing the day, hour, minute and second
                           components from <em>SV</em>.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:duration</code>, or a type derived
                           from <code>duration</code>, but not
                           <code>xs:yearMonthDuration</code> or a type derived from
                           <code>xs:yearMonthDuration</code>, and <em>TT</em> is
                           <code>xs:dayTimeDuration</code>, then <em>TV</em> is derived
                           from <em>SV</em> by removing the year and month components from <em>SV</em>.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:yearMonthDuration</code>
                           or <code>xs:dayTimeDuration</code>, and <em>TT</em> is
                           <code>xs:duration</code>, then <em>TV</em> is derived from
                           <em>SV</em> as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-derived-to-parent"><b>19.3.2 Casting from derived types to parent types</b></a>.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:yearMonthDuration</code>
                           and <em>TT</em> is
                           <code>xs:dayTimeDuration</code>, the cast is permitted and returns a <code>xs:dayTimeDuration</code> with value 0.0 seconds.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:dayTimeDuration</code>
                           and <em>TT</em> is
                           <code>xs:yearMonthDuration</code>, the cast is permitted and returns a <code>xs:yearMonthDuration</code> with value 0 months.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:untypedAtomic</code>
                           or <code>xs:string</code>, see 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                        </p>
                     </li>
                  </ul>
                  <p>Note that casting from <code>xs:duration</code> to
                     <code>xs:yearMonthDuration</code> or <code>xs:dayTimeDuration</code> loses
                     information. To avoid this, users can cast the <code>xs:duration</code>
                     value to both an <code>xs:yearMonthDuration</code> and an
                     <code>xs:dayTimeDuration</code> and work with both values.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-datetimes"></a>19.1.4 Casting to date and time types
                  </h4>
                  <p>In several situations, casting to date and time types requires the extraction
                     of a component from <em>SV</em> or from the result of
                     <a href="https://www.w3.org/TR/xpath-functions-31/#func-current-dateTime"><code>fn:current-dateTime</code></a> and converting it to an
                     <code>xs:string</code>. These conversions must follow certain rules. For
                     example, converting an <code>xs:integer</code> year value requires
                     converting to an <code>xs:string</code> with four or more characters, preceded
                     by a minus sign if the value is negative.
                  </p>
                  <p>This document defines four functions to perform these conversions. These
                     functions are for illustrative purposes only and make no recommendations as
                     to style or efficiency.  References to these functions from the following text are
                     not normative.
                  </p>
                  <p>The arguments to these functions come from functions defined in this
                     document. Thus, the functions below assume that they are correct and do no
                     range checking on them.
                  </p>
                  <div class="exampleInner"><pre class="small">declare function eg:convertYearToString($year as xs:integer) as xs:string
{
   let $plusMinus := if ($year &gt;= 0) then "" else "-"
   let $yearString := fn:abs($year) cast as xs:string
   let $length := fn:string-length($yearString)
   return
     if ($length = 1)  then fn:concat($plusMinus, "000", $yearString)
     else
     if ($length = 2)  then fn:concat($plusMinus, "00", $yearString)
       else
       if ($length = 3)  then fn:concat($plusMinus, "0", $yearString)
       else fn:concat($plusMinus, $yearString)
}
                    </pre></div>
                  <div class="exampleInner"><pre class="small">declare function eg:convertTo2CharString($value as xs:integer) as xs:string
{
   let $string := $value cast as xs:string
   return 
     if (fn:string-length($string) = 1) then fn:concat("0", $string)
     else $string
}
                    </pre></div>
                  <div class="exampleInner"><pre class="small">declare function eg:convertSecondsToString($seconds as xs:decimal) as xs:string
{
   let $string := $seconds cast as xs:string
   let $intLength := fn:string-length(($seconds cast as xs:integer) cast as xs:string)
   return 
     if ($intLength = 1) then fn:concat("0", $string)
     else $string
}
                    </pre></div>
                  <div class="exampleInner"><pre class="small">declare function eg:convertTZtoString($tz as xs:dayTimeDuration?) as xs:string
{
   if (empty($tz)) 
     then ""
   else if ($tz eq xs:dayTimeDuration('PT0S'))
     then "Z"
   else 
     let $tzh := fn:hours-from-duration($tz)
     let $tzm := fn:minutes-from-duration($tz)
     let $plusMinus := if ($tzh &gt;= 0) then "+" else "-"
     let $tzhString := eg:convertTo2CharString(fn:abs($tzh))
     let $tzmString := eg:convertTo2CharString(fn:abs($tzm))
     return fn:concat($plusMinus, $tzhString, ":", $tzmString)
}

                    </pre></div>
                  <p>Conversion from 
                     <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive types<span class="arrow">·</span></a> to date and time types follows the rules below.
                  </p>
                  <ol class="enumar">
                     <li>
                        <p>When a value of any primitive type is cast as
                           <code>xs:dateTime</code>, the <code>xs:dateTime</code> value
                           <em>TV</em> is derived from <em>ST</em> and <em>SV</em>
                           as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, then let
                                 <em>SYR</em> be <code>eg:convertYearToString( fn:year-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SMO</em> be
                                 <code>eg:convertTo2CharString( fn:month-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SDA</em> be
                                 <code>eg:convertTo2CharString( fn:day-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:dateTime( fn:concat(</code>
                                 <em>SYR</em>
                                 <code>, '-', </code>
                                 <em>SMO</em>
                                 <code>, '-', </code>
                                 <em>SDA</em>
                                 <code>, 'T00:00:00 '</code>, <em>STZ</em>
                                 <code>) )</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code> or
                                 <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as <code>xs:time</code>,
                           the <code>xs:time</code> value <em>TV</em> is derived from
                           <em>ST</em> and <em>SV</em> as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:time</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then
                                 <em>TV</em> is <code>xs:time( fn:concat(
                                    eg:convertTo2CharString( fn:hours-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>)), ':', eg:convertTo2CharString( fn:minutes-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>)), ':', eg:convertSecondsToString( fn:seconds-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>)), eg:convertTZtoString( fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>)) ))</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as <code>xs:date</code>,
                           the <code>xs:date</code> value <em>TV</em> is derived from
                           <em>ST</em> and <em>SV</em> as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then let
                                 <em>SYR</em> be <code>eg:convertYearToString( fn:year-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SMO</em> be
                                 <code>eg:convertTo2CharString( fn:month-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SDA</em> be
                                 <code>eg:convertTo2CharString( fn:day-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be <code>eg:convertTZtoString(fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:date( fn:concat(</code>
                                 <em>SYR</em>
                                 <code>, '-', </code>
                                 <em>SMO</em>
                                 <code>, '-', </code>
                                 <em>SDA</em>, <em>STZ</em>
                                 <code>) )</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as
                           <code>xs:gYearMonth</code>, the <code>xs:gYearMonth</code> value
                           <em>TV</em> is derived from <em>ST</em> and <em>SV</em>
                           as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:gYearMonth</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then let
                                 <em>SYR</em> be <code>eg:convertYearToString( fn:year-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SMO</em> be
                                 <code>eg:convertTo2CharString( fn:month-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gYearMonth( fn:concat(</code>
                                 <em>SYR</em>
                                 <code>, '-', </code>
                                 <em>SMO</em>, <em>STZ</em>
                                 <code>) )</code>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, then let
                                 <em>SYR</em> be <code>eg:convertYearToString( fn:year-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SMO</em> be
                                 <code>eg:convertTo2CharString( fn:month-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gYearMonth( fn:concat(</code>
                                 <em>SYR</em>
                                 <code>, '-', </code>
                                 <em>SMO</em>, <em>STZ</em>
                                 <code>) )</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as <code>xs:gYear</code>,
                           the <code>xs:gYear</code> value <em>TV</em> is derived from
                           <em>ST</em> and <em>SV</em> as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:gYear</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, let
                                 <em>SYR</em> be <code>eg:convertYearToString( fn:year-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gYear(fn:concat(</code>
                                 <em>SYR</em>, <em>STZ</em>
                                 <code>))</code>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, let
                                 <em>SYR</em> be <code>eg:convertYearToString( fn:year-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gYear(fn:concat(</code>
                                 <em>SYR</em>, <em>STZ</em>
                                 <code>))</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as
                           <code>xs:gMonthDay</code>, the <code>xs:gMonthDay</code> value
                           <em>TV</em> is derived from <em>ST</em> and <em>SV</em>
                           as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:gMonthDay</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then let
                                 <em>SMO</em> be <code>eg:convertTo2CharString( fn:month-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SDA</em> be
                                 <code>eg:convertTo2CharString( fn:day-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gYearMonth( fn:concat(</code>
                                 <code> '--', </code>
                                 <em>SMO</em>
                                 <code> '-', </code>
                                 <em>SDA</em>, <em>STZ</em>
                                 <code>) )</code>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, then let
                                 <em>SMO</em> be <code>eg:convertTo2CharString( fn:month-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>, let <em>SDA</em> be
                                 <code>eg:convertTo2CharString( fn:day-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gYearMonth( fn:concat(</code>
                                 <code> '--', </code>
                                 <em>SMO</em>
                                 <code>, '-', </code>
                                 <em>SDA</em>, <em>STZ</em>
                                 <code>) )</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as <code>xs:gDay</code>,
                           the <code>xs:gDay</code> value <em>TV</em> is derived from
                           <em>ST</em> and <em>SV</em> as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:gDay</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then let
                                 <em>SDA</em> be <code>eg:convertTo2CharString( fn:day-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gDay(
                                    fn:concat( '---'</code>, <em>SDA</em>, <em>STZ</em>
                                 <code>))</code>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, then let
                                 <em>SDA</em> be <code>eg:convertTo2CharString( fn:day-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gDay(
                                    fn:concat( '---'</code>, <em>SDA</em>, <em>STZ</em>
                                 <code>))</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>When a value of any primitive type is cast as <code>xs:gMonth</code>,
                           the <code>xs:gMonth</code> value <em>TV</em> is derived from
                           <em>ST</em> and <em>SV</em> as follows:
                        </p>
                        <ul>
                           <li>
                              <p>If <em>ST</em> is <code>xs:gMonth</code>, then
                                 <em>TV</em> is <em>SV</em>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:dateTime</code>, then let
                                 <em>SMO</em> be <code>eg:convertTo2CharString( fn:month-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-dateTime(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gMonth(
                                    fn:concat( '--' </code>, <em>SMO</em>, <em>STZ</em>
                                 <code>))</code>. 
                              </p>
                           </li>
                           <li>
                              <p>If <em>ST</em> is <code>xs:date</code>, then let
                                 <em>SMO</em> be <code>eg:convertTo2CharString( fn:month-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code> and let <em>STZ</em> be
                                 <code>eg:convertTZtoString( fn:timezone-from-date(</code>
                                 <em>SV</em>
                                 <code>))</code>; <em>TV</em> is <code>xs:gMonth(
                                    fn:concat( '--'</code>, <em>SMO</em>, <em>STZ</em>
                                 <code>))</code>. 
                              </p>
                           </li>
                           <li>
                              <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                                 or <code>xs:string</code>, see 
                                 <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                              </p>
                           </li>
                        </ul>
                     </li>
                  </ol>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-boolean"></a>19.1.5 Casting to xs:boolean 
                  </h4>
                  <p>When a value of any <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> is cast as <code>xs:boolean</code>, the
                     <code>xs:boolean</code> value <em>TV</em> is derived from
                     <em>ST</em> and <em>SV</em> as follows:
                  </p>
                  <ul>
                     <li>
                        <p>If <em>ST</em> is <code>xs:boolean</code>, then <em>TV</em>
                           is <em>SV</em>.
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:float</code>, <code>xs:double</code>,
                           <code>xs:decimal</code> or <code>xs:integer</code> and
                           <em>SV</em> is <code>0</code>, <code>+0</code>, <code>-0</code>,
                           <code>0.0</code>, <code>0.0E0</code> or <code>NaN</code>, then
                           <em>TV</em> is <code>false</code>. 
                        </p>
                     </li>
                     <li>
                        <p>If <em>ST</em> is <code>xs:float</code>, <code>xs:double</code>,
                           <code>xs:decimal</code> or <code>xs:integer</code> and
                           <em>SV</em> is not one of the above values, then <em>TV</em>
                           is <code>true</code>. 
                        </p>
                     </li>
                     <li>
                        <p> If <em>ST</em> is <code>xs:untypedAtomic</code>
                           or <code>xs:string</code>, see 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>. 
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-binary"></a>19.1.6 Casting to xs:base64Binary and xs:hexBinary
                  </h4>
                  <p>Values of type <code>xs:base64Binary</code> can be cast as
                     <code>xs:hexBinary</code> and vice versa, since the two types have the same
                     value space. Casting to <code>xs:base64Binary</code> and
                     <code>xs:hexBinary</code> is also supported from the same type and from
                     <code>xs:untypedAtomic</code>, <code>xs:string</code> and subtypes of
                     <code>xs:string</code> using <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> semantics.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-anyuri"></a>19.1.7 Casting to xs:anyURI
                  </h4>
                  <p>Casting to <code>xs:anyURI</code> is supported only from the same type,
                     <code>xs:untypedAtomic</code> or <code>xs:string</code>.
                  </p>
                  <p>When a value of any <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> is cast as <code>xs:anyURI</code>, the
                     <code>xs:anyURI</code> value <em>TV</em> is derived from the
                     <em>ST</em> and <em>SV</em> as follows:
                  </p>
                  <ul>
                     <li>
                        <p>If <em>ST</em> is <code>xs:untypedAtomic</code> or <code>xs:string</code> see 
                           <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                           
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-qname-and-notation"></a>19.1.8 Casting to xs:QName and xs:NOTATION
                  </h4>
                  <p>Casting from <code>xs:string</code> or <code>xs:untypedAtomic</code> to
                     <code>xs:QName</code> or <code>xs:NOTATION</code> is described in 
                     <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                  </p>
                  <p>It is also possible to cast from <code>xs:NOTATION</code> to <code>xs:QName</code>, 
                     or from <code>xs:QName</code> to
                     any type derived by restriction from <code>xs:NOTATION</code>. (Casting to <code>xs:NOTATION</code>
                     itself is not allowed, because <code>xs:NOTATION</code> is an abstract type.) The resulting
                     <code>xs:QName</code> or <code>xs:NOTATION</code> has the same prefix, local name, and namespace URI
                     parts as the supplied value.
                  </p>
                  <div class="note">
                     <p class="prefix"><b>Note:</b></p>
                     <p>See <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-qname-notation"><b>18.2 Constructor functions for xs:QName and xs:NOTATION</b></a> for a discussion of how the combination of
                        atomization and casting might not produce the desired effect.
                     </p>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-ENTITY"></a>19.1.9 Casting to xs:ENTITY
                  </h4>
                  <p>
                     <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> says that "The
                     value space of ENTITY is the set of all strings that match the 
                     NCName production ... and have been
                     declared as an unparsed entity in a document type definition."
                     However,
                     <a href="https://www.w3.org/TR/xpath-functions-31/#xslt-30">[XSL Transformations (XSLT) Version 3.0]</a> and <a href="https://www.w3.org/TR/xpath-functions-31/#xquery-31">[XQuery 3.1: An XML Query Language]</a> do not check that constructed values of type <code>xs:ENTITY</code> match declared unparsed entities.  Thus, this rule is relaxed in this specification
                     and, in casting to <code>xs:ENTITY</code> and types derived from it, no check is made that the values correspond to declared
                     unparsed entities.
                     
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="casting-from-strings"></a>19.2 Casting from xs:string and xs:untypedAtomic
               </h3>
               <p>This section applies when the supplied value <var>SV</var>
                  is an instance of <code>xs:string</code> or <code>xs:untypedAtomic</code>,
                  including types derived from these by restriction. If the value is
                  <code>xs:untypedAtomic</code>, it is treated in exactly the same way as a
                  string containing the same sequence of characters.
               </p>
               <p>The supplied string is mapped to a typed value of the target type as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>. 
                  Whitespace normalization is applied as indicated by the
                  <code>whiteSpace</code> facet for the datatype. The resulting whitespace-normalized string 
                  must be a valid lexical form for the datatype.  The semantics of casting follow the
                  rules of
                  XML Schema validation.  For example, <code>"13" cast as xs:unsignedInt</code> returns 
                  the <code>xs:unsignedInt</code> typed 
                  value <code>13</code>. This could also be written <code>xs:unsignedInt("13")</code>.
               </p>
               <p>The target type can be any simple type other than an
                  abstract type. Specifically, it can be a type whose variety is atomic, union, or list.
                  In each case the effect of casting to the target type is the same as constructing
                  an element
                  with the supplied value as its content, validating the element using the target type
                  as
                  the governing type, and atomizing the element to obtain its typed value.
               </p>
               <p>When the target type is a derived type that is restricted by a pattern facet, the
                  lexical form is first checked against the pattern before further casting
                  is attempted (See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-derived-types"><b>19.3.1 Casting to derived types</b></a>).  If the lexical form does
                  not conform to the pattern, a dynamic 
                  error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] is raised.
               </p>
               <p>For example, consider a user-defined type <code>my:boolean</code> which is derived by
                  restriction from <code>xs:boolean</code> and specifies the pattern facet <code>value="0|1"</code>.
                  The expression <code>"true" cast as my:boolean</code> would fail with a dynamic
                  error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>].
               </p>
               <p>Facets other than <code>pattern</code> are checked <em>after</em> the conversion.
                  For example if there is a user-defined datatype called <code>my:height</code> 
                  defined as a restriction of <code>xs:integer</code> with the facet <code>&lt;maxInclusive value="84"/&gt;</code>,
                  then the expression <code>"100" cast as my:height</code> would fail with a dynamic
                  error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>].
               </p>
               <p>Casting to the types <code>xs:NOTATION</code>, <code>xs:anySimpleType</code>, 
                  or <code>xs:anyAtomicType</code> is not permitted because these types are abstract (they have
                  no immediate instances).
               </p>
               <p>Special rules apply when casting to namespace-sensitive types. The types <code>xs:QName</code>
                  and <code>xs:NOTATION</code> are namespace-sensitive. Any type derived by restriction from 
                  a namespace-sensitive type is itself namespace-sensitive, as is any union type having
                  a
                  namespace-sensitive type among its members, and any list type having a namespace-sensitive
                  type
                  as its item type. For details, see <a href="https://www.w3.org/TR/xpath-functions-31/#constructor-qname-notation"><b>18.2 Constructor functions for xs:QName and xs:NOTATION</b></a>.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>This version of the specification allows casting between <code>xs:QName</code>
                     and <code>xs:NOTATION</code> in either direction; this was not permitted in the previous Recommendation. This
                     version also removes
                     the rule that only a string literal (rather than a dynamic string) may be cast to
                     an <code>xs:QName</code></p>
               </div>
               <p>When casting to a numeric type:</p>
               <ul>
                  <li>
                     <p>If the value is too large or too small to be accurately represented by the implementation,
                        
                        it is handled as an overflow or underflow as defined in <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric"><b>4.2 Arithmetic operators on numeric values</b></a>.
                     </p>
                  </li>
                  <li>
                     <p>If the target type is <code>xs:float</code> or <code>xs:double</code>, the string <code>-0</code> (and equivalents
                        such as <code>-0.0</code> or <code>-000</code>) <span class="verb">should</span> be converted to the value negative zero.
                        However, if the implementation is reliant on an implementation of XML Schema 1.0 in
                        which negative zero
                        is not part of the value space for these types, these lexical forms <span class="verb">may</span> be converted to positive zero.
                     </p>
                  </li>
               </ul>
               <p>
                  In casting to <code>xs:decimal</code> or to a type derived from <code>xs:decimal</code>, 
                  if the value is not too large or too small but nevertheless cannot be represented
                  accurately 
                  with the number of decimal digits available to the implementation, the implementation
                  may round 
                  to the nearest representable value or may raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0006" title="err:FOCA0006">err:FOCA0006</a>]. 
                  The choice of rounding algorithm and the choice between rounding and error behavior
                  and is 
                  <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                  
               </p>
               <p>In casting to <code>xs:date</code>, <code>xs:dateTime</code>, <code>xs:gYear</code>, 
                  or <code>xs:gYearMonth</code> 
                  (or types derived from these), if the value is too large or too 
                  small to be represented by the implementation, a dynamic error 
                  [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0001" title="err:FODT0001">err:FODT0001</a>] is raised.
               </p>
               <p>In casting to a duration value, if the value is too large or too small to be represented
                  by the 
                  implementation, a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODT0002" title="err:FODT0002">err:FODT0002</a>] is raised.
               </p>
               <p> For <code>xs:anyURI</code>, the extent to which an implementation validates the
                  lexical form of <code>xs:anyURI</code> is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
               </p>
               <p>If the cast fails for any other reason, a dynamic error
                  [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] is raised.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="casting-non-primitive-types"></a>19.3 Casting involving non-primitive types
               </h3>
               <p>Casting from <code>xs:string</code> and <code>xs:untypedAtomic</code> to any other type
                  (primitive or non-primitive) has been described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                  This section defines how other casts to non-primitive types operate, including casting
                  to types derived by restriction, to union types, and to list types.
               </p>
               <div class="note">
                  <p class="prefix"><b>Note:</b></p>
                  <p>A <b>non-primitive type</b> here means any type that is not a
                     <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> according
                     to the extended definition used in <a href="https://www.w3.org/TR/xpath-functions-31/#casting"><b>19 Casting</b></a>.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-derived-types"></a>19.3.1 Casting to derived types
                  </h4>
                  <p>Casting a value to a derived type can be separated into four cases. In these rules:</p>
                  <ul>
                     <li>
                        <p>The types <code>xs:untypedAtomic</code>, <code>xs:integer</code>, <code>xs:yearMonthDuration</code>,
                           and <code>xs:dayTimeDuration</code> are treated as primitive types (alongside the 19 primitive types defined in XSD).
                        </p>
                     </li>
                     <li>
                        <p>For any atomic type <var>T</var>, let <var>P(T)</var> denote the most specific primitive type
                           such that <code>itemType-subtype(T, P(T))</code> is true.
                        </p>
                     </li>
                  </ul>
                  <p>The rules are then:</p>
                  <ol class="enumar">
                     <li>
                        <p>When <var>ST</var> is the same type as <var>TT</var>: this case always succeeds, returning <var>SV</var> unchanged.
                        </p>
                     </li>
                     <li>
                        <p>When <code>itemType-subtype(ST, TT)</code> is true: This case is described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-derived-to-parent"><b>19.3.2 Casting from derived types to parent types</b></a>. 
                        </p>
                     </li>
                     <li>
                        <p>When <var>P(ST)</var> is the same type as <var>P(TT)</var>: This case is described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-within-branch"><b>19.3.3 Casting within a branch of the type hierarchy</b></a>.
                        </p>
                     </li>
                     <li>
                        <p>Otherwise (<var>P(ST)</var> is not the same type as <var>P(TT)</var>): This case is described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-across-hierarchy"><b>19.3.4 Casting across the type hierarchy</b></a>.
                        </p>
                     </li>
                  </ol>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-from-derived-to-parent"></a>19.3.2 Casting from derived types to parent types
                  </h4>
                  <p>
                     It is always possible to cast an atomic value <var>A</var> to a type <var>T</var>
                     if the relation <code>A instance of T</code> is true, provided that <var>T</var>
                     is not an abstract type.
                     
                  </p>
                  <p>For example, it is
                     possible to cast an <code>xs:unsignedShort</code> to an
                     <code>xs:unsignedInt</code>, to an <code>xs:integer</code>, to an
                     <code>xs:decimal</code>, or to a union type
                     whose member types are <code>xs:integer</code> and <code>xs:double</code>.
                  </p>
                  <p>Since the value space of the original type is a subset
                     of the value space of the target type, such a cast is always successful.
                  </p>
                  <p>For the expression <code>A instance of T</code> to be true, <var>T</var> must be
                     either an atomic type, or a union type that has no constraining facets. It cannot
                     be a list type, nor a union type derived by restriction from another union type, nor
                     a union type that has a list type among its member types.
                  </p>
                  <p>The
                     result will have the same value as the original, but will have a new type annotation:
                  </p>
                  <ul>
                     <li>
                        <p>If <var>T</var> is an atomic type, then the type annotation of the result is <code>T</code>.
                           
                        </p>
                     </li>
                     <li>
                        <p>If <var>T</var> is a union type, then the type of the result is an atomic type <code>M</code>
                           such that <var>M</var> is one of the atomic types in the transitive membership of
                           the union type <var>T</var> and <code>A instance of M</code> is true; if there is more
                           than one type <var>M</var> that satisfies these conditions (which could happen, for example,
                           if <var>T</var> is the union of two overlapping types such as <code>xs:int</code>
                           and <code>xs:positiveInteger</code>) then the first one is used, taking the member types
                           in the order in which they appear within the definition of the union type.
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-within-branch"></a>19.3.3 Casting within a branch of the type hierarchy
                  </h4>
                  <p>It is possible to cast an <em>SV</em> to a <em>TT</em> if the type of the
                     <em>SV</em> and the <em>TT</em> type are both derived by restriction
                     (directly or indirectly) from the same <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a>, provided that the
                     supplied value conforms to the constraints implied by the facets of the target
                     type.  This includes the case where the target type is derived from the type of the
                     supplied value,
                     as well as the case where the type of the supplied value is derived from the target
                     type.  For example, an instance of <code>xs:byte</code> can be cast as
                     <code>xs:unsignedShort</code>, provided the value is not negative.  
                  </p>
                  <p>If the value does not conform to the facets defined for the target type, then a dynamic
                     error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>]. See <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a>.
                     In the case of the pattern facet (which applies to the lexical space rather than
                     the value space), the pattern is tested against the canonical lexical
                     representation of the value, as defined for the source type (or the result
                     of casting the value to an <code>xs:string</code>, in the case of types that have no canonical
                     lexical representation defined for them).
                  </p>
                  <p>Note that this will cause casts to fail if the pattern excludes the canonical
                     lexical representation of the source type. For example, if the type
                     <code>my:distance</code> is defined as a restriction of <code>xs:decimal</code>
                     with a pattern that requires two digits after the decimal point, casting of an
                     <code>xs:integer</code> to <code>my:distance</code> will always fail, because
                     the canonical representation of an <code>xs:integer</code> does not conform to
                     this pattern.
                  </p>
                  <p>In some cases, casting from a parent type to a derived type requires special
                     rules. See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-durations"><b>19.1.3 Casting to duration types</b></a> for rules regarding casting to
                     <code>xs:yearMonthDuration</code> and <code>xs:dayTimeDuration</code>.  See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-ENTITY"><b>19.1.9 Casting to xs:ENTITY</b></a>, below, for casting to <code>xs:ENTITY</code> and types derived from it.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-across-hierarchy"></a>19.3.4 Casting across the type hierarchy
                  </h4>
                  <p>When the <em>ST</em> and the <em>TT</em> are derived, directly or
                     indirectly, from different <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive types<span class="arrow">·</span></a>, this is called casting across the
                     type hierarchy. Casting across the type hierarchy is logically equivalent to
                     three separate steps performed in order. Errors can occur in either of the
                     latter two steps.
                  </p>
                  <ol class="enumar">
                     <li>
                        <p>Cast the <em>SV</em>, up the hierarchy, to the <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> of the
                           source, as described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-derived-to-parent"><b>19.3.2 Casting from derived types to parent types</b></a>.
                        </p>
                        <ol class="enumla">
                           <li>
                              <p>
                                 If <em>SV</em> is an instance of <code>xs:string</code> or <code>xs:untypedAtomic</code>, check its value against the 
                                 pattern facet of <em>TT</em>, and raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] if the check fails.
                              </p>
                           </li>
                        </ol>
                     </li>
                     <li>
                        <p>Cast the value to the <a title="primitive type" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-cast-primitive-type"><span class="arrow">·</span>primitive type<span class="arrow">·</span></a> of <em>TT</em>, as described in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-primitive-to-primitive"><b>19.1 Casting from primitive types to primitive types</b></a>.
                        </p>
                        <ul>
                           <li>
                              <p>If <em>TT</em> is derived from <code>xs:NOTATION</code>, assume for the
                                 purposes of this rule that casting to <code>xs:NOTATION</code> succeeds.
                                 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Cast the value down to the <em>TT</em>, as described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-within-branch"><b>19.3.3 Casting within a branch of the type hierarchy</b></a>
                           
                        </p>
                     </li>
                  </ol>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-union"></a>19.3.5 Casting to union types
                  </h4>
                  <p>If the target type of a cast expression (or a constructor function) is a type with
                     variety union, the
                     supplied value must be one of the following:
                  </p>
                  <ol class="enumar">
                     <li>
                        <p>A value of type <code>xs:string</code> or <code>xs:untypedAtomic</code>.
                           This case follows the general rules for casting from strings, and has already been
                           described in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                        </p>
                        <p>If the union type has a pattern facet, the pattern is tested against the supplied
                           value after whitespace normalization, using the <code>whiteSpace</code>
                           normalization rules of the member datatype against which validation succeeds.
                        </p>
                     </li>
                     <li>
                        <p>A value that is an instance of one of the atomic types in the transitive
                           membership of the union type, and of the union type itself. This case has already
                           been described in
                           <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-derived-to-parent"><b>19.3.2 Casting from derived types to parent types</b></a></p>
                        <p>This situation only applies when the value is an instance of the union type,
                           which means it will never apply when the union is derived by facet-based restriction
                           from another union type.
                        </p>
                     </li>
                     <li>
                        <p>A value that is castable to one or more of the atomic types in the transitive membership
                           of the union type (in the sense that the <code>castable as</code> operator returns true).
                        </p>
                        <p>In this case the supplied value is cast to each atomic type in the transitive membership
                           of the union type in turn (in the order in which the member types appear in the declaration)
                           until one of these casts is successful; if none of them is successful, a dynamic error
                           occurs
                           [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>]. If the union type has constraining facets then the
                           resulting value must satisfy these facets, otherwise a dynamic error occurs 
                           [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>].
                        </p>
                        <p>If the union type has a pattern facet, the pattern is tested against the canonical
                           representation of the result value.
                        </p>
                        <p>Only the atomic types in the transitive membership of the union type are considered.
                           The
                           union type may have list types in its transitive membership, but (unless the supplied
                           value
                           is of type <code>xs:string</code> or <code>xs:untypedAtomic</code>, in which case the
                           rules in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a> apply), any list types in the membership
                           are effectively ignored.
                        </p>
                     </li>
                  </ol>
                  <p>If more than one of these conditions applies, then the casting is done according to
                     the rules
                     for the first condition that applies.
                  </p>
                  <p>If none of these conditions applies, the cast fails with a dynamic error
                     [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>].
                  </p>
                  <p>Example: consider a type <var>U</var> whose member types are <code>xs:integer</code>
                     and <code>xs:date</code>.
                  </p>
                  <ul>
                     <li>
                        <p>The expression <code>"123" cast as U</code> returns the
                           <code>xs:integer</code> value <code>123</code>.
                        </p>
                     </li>
                     <li>
                        <p>The expression <code>current-date() cast as U</code> returns
                           the current date as an instance of <code>xs:date</code>.
                        </p>
                     </li>
                     <li>
                        <p>The expression <code>23.1 cast as U</code> returns the <code>xs:integer</code>
                           value <code>23</code>.
                        </p>
                     </li>
                  </ul>
                  <p>Example: consider a type <var>V</var> whose member types are <code>xs:short</code>
                     and <code>xs:negativeInteger</code>.
                  </p>
                  <ul>
                     <li>
                        <p>The expression <code>"-123" cast as V</code> returns the
                           <code>xs:short</code> value <code>-123</code>.
                        </p>
                     </li>
                     <li>
                        <p>The expression <code>"-100000" cast as V</code> returns the
                           <code>xs:negativeInteger</code> value <code>-100000</code>.
                        </p>
                     </li>
                     <li>
                        <p>The expression <code>93.7 cast as V</code> returns the
                           <code>xs:short</code> value <code>93</code>.
                        </p>
                     </li>
                     <li>
                        <p>The expression <code>"93.7" cast as V</code> raises
                           a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] on the grounds that the string
                           <code>"93.7"</code> is not in the lexical space of the union type.
                        </p>
                     </li>
                  </ul>
                  <p>Example: consider a type <var>W</var> that is derived from the above type <var>V</var>
                     by restriction, with a pattern facet of <code>-?\d\d</code>.
                  </p>
                  <ul>
                     <li>
                        <p>The expression <code>"12" cast as V</code> returns the
                           <code>xs:short</code> value <code>12</code>.
                        </p>
                     </li>
                     <li>
                        <p>The expression <code>"123" cast as V</code> raises
                           an dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFORG0001" title="err:FORG0001">err:FORG0001</a>] on the grounds that the string
                           <code>"123"</code> does not match the pattern facet.
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="div3">
                  
                  <h4><a id="casting-to-list"></a>19.3.6 Casting to list types
                  </h4>
                  <p>If the target type of a cast expression (or a constructor function) is a
                     type with variety <code>list</code>, the supplied value must be of type <code>xs:string</code> or
                     <code>xs:untypedAtomic</code>. The rules follow the general principle for
                     all casts from <code>xs:string</code> outlined in <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings"><b>19.2 Casting from xs:string and xs:untypedAtomic</b></a>.
                  </p>
                  <p>The semantics of the operation are consistent with validation: that is,
                     the effect of casting a string <var>S</var> to a list type <var>L</var> is the same as
                     constructing an element or attribute node whose string value is <var>S</var>,
                     validating it using <var>L</var> as the governing type, and atomizing the resulting
                     node. The result will always be either failure, or a sequence of zero or
                     more atomic values each of which is an instance of the item type of <var>L</var>
                     (or if the item type of <var>L</var> is a union type, an instance of one of the
                     atomic types in its transitive membership).
                  </p>
                  <p>If the item type of the list type is namespace-sensitive, then the 
                     namespace bindings in the static context will be used to
                     resolve any namespace prefix, in the same way as when the target type is
                     <code>xs:QName</code>.
                  </p>
                  <p>If the list type has a <code>pattern</code> facet, the pattern must match
                     the supplied value after collapsing whitespace (an operation equivalent to the
                     use of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-space"><code>fn:normalize-space</code></a> function).
                  </p>
                  <p>For example, the expression <code>cast "A B C D" as xs:NMTOKENS</code>
                     produces a sequence of four <code>xs:NMTOKEN</code> values, 
                     <code>("A", "B", "C", "D")</code>.
                  </p>
                  <p>For example, given a user-defined type <code>my:coordinates</code> defined
                     as a list of <code>xs:integer</code> with the facet <code>&lt;xs:length value="2"/&gt;</code>,
                     the expression <code>my:coordinates("2 -1")</code> will return a sequence of two
                     xs:integer values <code>(2, -1)</code>, while the expression <code>my:coordinates("1 2 3")</code>
                     will result in a dynamic error because the length of the list does not conform to
                     the
                     <code>length</code> facet. The expression <code>my:coordinates("1.0 3.0")</code>
                     will also fail because the strings <code>1.0</code> and <code>3.0</code> 
                     are not in the lexical space of <code>xs:integer</code>.
                  </p>
               </div>
            </div>
         </div>
      </div>
      <div class="back">
         <div class="div1">
            
            <h2><a id="biblio"></a>A References
            </h2>
            <div class="div2">
               
               <h3><a id="normative-biblio"></a>A.1 Normative references
               </h3>
               <dl>
                  <dt class="label"><span><a id="charmod"></a>Character Model for the World Wide Web 1.0: Fundamentals</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/charmod/"><cite>Character Model for the World Wide Web 1.0:
                              Fundamentals</cite></a>,
                        Martin J. Dürst, François Yergeau, <em>et. al.</em>, Editors.
                        World Wide Web Consortium,
                        15 February 2015.
                        This version is http://www.w3.org/TR/2005/REC-charmod-20050215/.
                        The <a href="https://www.w3.org/TR/charmod/">latest version</a>
                        is available at https://www.w3.org/TR/charmod/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="html5"></a>HTML5: A vocabulary and associated APIs for HTML and XHTML</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/html5/"><cite>HTML5: A vocabulary and associated APIs for HTML and XHTML</cite></a>,
                        Ian Hickson, Robin Berjon, <em>et. al.</em>, Editors.
                        World Wide Web Consortium,
                        28 October 2014.
                        This version is http://www.w3.org/TR/2014/REC-html5-20141028/.
                        The <a href="https://www.w3.org/TR/html5/">latest version</a>
                        is available at https://www.w3.org/TR/html5/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="olson"></a>IANA Timezone Database</span></dt>
                  <dd>
                     <div>
                        The <em>tz</em> timezone database, available at 
                        <a href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a>.
                        It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which version of the database is used.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ieee754-2008"></a>IEEE 754-2008</span></dt>
                  <dd>
                     <div>IEEE. <em>IEEE Standard for
                           Floating-Point Arithmetic.</em>
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ISO3166"></a>ISO 3166-1</span></dt>
                  <dd>
                     <div>ISO (International Organization for Standardization)
                        					<em>Codes for the representation of names of countries
                           					 and their subdivisions - Part 1: Country codes</em> ISO 3166-1:2013.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ISO8601"></a>ISO 8601</span></dt>
                  <dd>
                     <div>ISO (International Organization for
                        Standardization). <em>Representations of dates and times. Third edition,
                           2004-12-01.</em> ISO 8601:2004(E). Available from:
                        <a href="http://www.iso.org/">http://www.iso.org/"</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ISO10967"></a>ISO 10967</span></dt>
                  <dd>
                     <div>ISO (International Organization
                        for Standardization). <em>ISO/IEC 10967-1:2012, Information
                           technology—Language Independent Arithmetic—Part 1:
                           Integer and floating point arithmetic</em> [Geneva]: International
                        Organization for Standardization, 2012. Available from: <a href="http://www.iso.org/">http://www.iso.org/</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ISO15924"></a>ISO 15924</span></dt>
                  <dd>
                     <div>ISO (International Organization for Standardization) 
                        <em>Information and documentation — Codes
                           for the representation of names of scripts</em> ISO 15924:2004, 
                        January 2004.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ISO15924_register"></a>ISO 15924 Register</span></dt>
                  <dd>
                     <div>Unicode Consortium. 
                        <em>Codes for the representation of names of scripts — Alphabetical list of four-letter
                           script codes.</em>
                        See <a href="http://www.unicode.org/iso15924/iso15924-codes.html">http://www.unicode.org/iso15924/iso15924-codes.html</a>.
                        Retrieved February 2013; continually updated.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="LEIRI"></a>Legacy extended IRIs for XML resource identification</span></dt>
                  <dd>
                     <div><em>Legacy extended IRIs for XML resource identification</em>.
                        Henry S. Thomson, Richard Tobin, and Norman Walsh (eds), World Wide Web Consortium.
                        3 November 2008. Available at
                        <a href="http://www.w3.org/TR/leiri/">http://www.w3.org/TR/leiri/</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc2376"></a>RFC 2376</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 2376: XML Media Types. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc2376.txt">http://www.ietf.org/rfc/rfc2376.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc3986"></a>RFC 3986</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 3986: Uniform
                           Resource Identifiers (URI): Generic Syntax. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc3986.txt">http://www.ietf.org/rfc/rfc3986.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc3987"></a>RFC 3987</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 3987:
                           Internationalized Resource Identifiers (IRIs).</em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc3987.txt">http://www.ietf.org/rfc/rfc3987.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc7159"></a>RFC 7159</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 7159: The Javascript Object Notation (JSON) Data Interchange Format</em> Available at:
                        <a href="http://www.rfc-editor.org/rfc/rfc7159.txt">http://www.rfc-editor.org/rfc/rfc7159.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc7303"></a>RFC 7303</span></dt>
                  <dd>
                     <div>H. Thompson and C. Lilley. <em>XML Media Types</em>.
                        IETF RFC 7303. See <a href="http://www.ietf.org/rfc/rfc7303.txt">http://www.ietf.org/rfc/rfc7303.txt</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="UNICODE-TR15"></a>UAX #15</span></dt>
                  <dd>
                     <div><em>Unicode Standard Annex #15: Unicode Normalization
                           Forms</em>. 
                        Ed. Mark Davis and Ken Whistler, Unicode Consortium.
                        The current version is 9.0.0, dated 2016-02-24.
                        As with <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, the version to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                        Available at:
                        <a href="http://www.unicode.org/reports/tr15/">http://www.unicode.org/reports/tr15/</a>.                 
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="Unicode"></a>The Unicode Standard</span></dt>
                  <dd>
                     <div>
                        The Unicode Consortium, Reading, MA, Addison-Wesley, 2016. <em>The Unicode Standard</em>
                        as updated from time to time by the publication of new versions. See 
                        <a href="http://www.unicode.org/standard/versions/">http://www.unicode.org/standard/versions/</a>
                        for the latest version and additional information on versions of the standard and
                        of the Unicode Character Database. 
                        The version of Unicode to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>,
                        but implementations are recommended to use the latest Unicode version;
                        currently, Version 9.0.0.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="UNICODE-TR10"></a>UTS #10</span></dt>
                  <dd>
                     <div><em>Unicode
                           Technical Standard #10: Unicode Collation Algorithm</em>. 
                        Ed. Mark Davis and Ken Whistler, Unicode Consortium. The current version is 9.0.0,
                        dated 2016-05-18.
                        As with <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, the version to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. 
                        Available at: <a href="http://www.unicode.org/reports/tr10/">http://www.unicode.org/reports/tr10/</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="UNICODE-TR35"></a>UTS #35</span></dt>
                  <dd>
                     <div><em>Unicode
                           Technical Standard #35: Unicode Locale Data Markup Language</em>. 
                        Ed Mark Davis <em>et al</em>, Unicode Consortium. The current version is 29, dated 2016-03-15.
                        As with <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, the version to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                        Available at: <a href="http://www.unicode.org/reports/tr35/">http://www.unicode.org/reports/tr35/</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xml"></a>Extensible Markup Language (XML) 1.0 (Fifth Edition)</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/xml/"><cite>Extensible Markup Language (XML) 1.0 (Fifth Edition)</cite></a>, Tim Bray, Jean Paoli, Michael Sperberg-McQueen, <em>et. al.</em>, Editors. World Wide Web Consortium, 26&nbsp;Nov&nbsp;2008. This version is http://www.w3.org/TR/2008/REC-xml-20081126/.
                        The <a href="http://www.w3.org/TR/xml/">latest version</a> is available at http://www.w3.org/TR/xml.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xml11"></a>Extensible Markup Language (XML) 1.1 Recommendation</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/xml11/"><cite>Extensible Markup Language (XML) 1.1 (Second Edition)</cite></a>, Tim Bray, Jean Paoli, Michael Sperberg-McQueen, <em>et. al.</em>, Editors. World Wide Web Consortium, 16&nbsp;Aug&nbsp;2006. This version is http://www.w3.org/TR/2006/REC-xml11-20060816.
                        The <a href="http://www.w3.org/TR/xml11/">latest version</a> is available at http://www.w3.org/TR/xml11/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xpath"></a>XML Path Language (XPath) Version 1.0</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/xpath/"><cite>XML Path Language (XPath) Version 1.0</cite></a>, James Clark and Steven DeRose, Editors. World Wide Web Consortium, 16&nbsp;Nov&nbsp;1999.
                        This version is http://www.w3.org/TR/1999/REC-xpath-19991116. The <a href="http://www.w3.org/TR/xpath/">latest version</a> is available at http://www.w3.org/TR/xpath.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xpath-31"></a>XML Path Language (XPath) 3.1</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xpath-31/"><cite>XML Path Language (XPath) 3.1</cite></a>,
                        Jonathan Robie, Michael Dyck and Josh Spiegel, Editors.
                        World Wide Web Consortium,
                        13 December 2016. 
                        This version is https://www.w3.org/TR/2017/PR-xpath-31-20170117/.
                        The <a href="https://www.w3.org/TR/xpath-31/">latest version</a>
                        is available at https://www.w3.org/TR/xpath-31/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xslt10"></a>XSL Transformations (XSLT) Version 1.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xslt/"><cite>XSL Transformations (XSLT) Version 1.0</cite></a>,
                        James Clark, Editor.
                        World Wide Web Consortium,
                        16 November 1999.
                        This version is https://www.w3.org/TR/1999/REC-xslt-19991116/.
                        The <a href="https://www.w3.org/TR/xslt/">latest version</a>
                        is available at https://www.w3.org/TR/xslt/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xslt20"></a>XSL Transformations (XSLT) Version 2.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xslt20/"><cite>XSL Transformations (XSLT) Version 2.0 (Second Edition)</cite></a>,
                        Michael Kay, Editor.
                        World Wide Web Consortium,
                        23 January 2007.
                        This version is https://www.w3.org/TR/2007/REC-xslt20-20070123/.
                        The <a href="https://www.w3.org/TR/xslt20/">latest version</a>
                        is available at https://www.w3.org/TR/xslt20/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xslt-30"></a>XSL Transformations (XSLT) Version 3.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xslt-30/"><cite>XSL Transformations (XSLT) Version 3.0</cite></a>,
                        Michael Kay, Editor.
                        World Wide Web Consortium,
                        19 November 2015. 
                        This version is https://www.w3.org/TR/2015/CR-xslt-30-20151119/.
                        The <a href="https://www.w3.org/TR/xslt-30/">latest version</a>
                        is available at https://www.w3.org/TR/xslt-30/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xpath-datamodel-30"></a>XQuery and XPath Data Model (XDM) 3.0</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xpath-datamodel-30/"><cite>XQuery and XPath Data Model (XDM) 3.0</cite></a>,
                        Norman Walsh, Anders Berglund, John Snelson, Editors.
                        World Wide Web Consortium,
                        08 April 2014. 
                        This version is https://www.w3.org/TR/2014/REC-xpath-datamodel-30-20140408/.
                        The <a href="https://www.w3.org/TR/xpath-datamodel-30/">latest version</a>
                        is available at https://www.w3.org/TR/xpath-datamodel-30/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xpath-datamodel-31"></a>XQuery and XPath Data Model (XDM) 3.1</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xpath-datamodel-31/"><cite>XQuery and XPath Data Model (XDM) 3.1</cite></a>,
                        Norman Walsh, John Snelson, Andrew Coleman, Editors.
                        World Wide Web Consortium,
                        13 December 2016. 
                        This version is https://www.w3.org/TR/2017/PR-xpath-datamodel-31-20170117/.
                        The <a href="https://www.w3.org/TR/xpath-datamodel-31/">latest version</a>
                        is available at https://www.w3.org/TR/xpath-datamodel-31/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xslt-xquery-serialization-31"></a>XSLT and XQuery Serialization 3.1</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xslt-xquery-serialization-31/"><cite>XSLT and XQuery Serialization 3.1</cite></a>,
                        Andrew Coleman and Michael Sperberg-McQueen, Editors.
                        World Wide Web Consortium,
                        13 December 2016. 
                        This version is https://www.w3.org/TR/2017/PR-xslt-xquery-serialization-31-20170117/.
                        The <a href="https://www.w3.org/TR/xslt-xquery-serialization-31/">latest version</a>
                        is available at https://www.w3.org/TR/xslt-xquery-serialization-31/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xquery-semantics"></a>XQuery 1.0 and XPath 2.0 Formal Semantics</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xquery-semantics/"><cite>XQuery 1.0 and XPath 2.0 Formal Semantics (Second Edition)</cite></a>,
                        Jérôme Siméon, Denise Draper, Peter Frankhauser, <em>et. al.</em>, Editors.
                        World Wide Web Consortium,
                        14 December 2010.
                        This version is https://www.w3.org/TR/2010/REC-xquery-semantics-20101214/.
                        The <a href="https://www.w3.org/TR/xquery-semantics/">latest version</a>
                        is available at https://www.w3.org/TR/xquery-semantics/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xquery-31"></a>XQuery 3.1: An XML Query Language</span></dt>
                  <dd>
                     <div>
                        <a href="https://www.w3.org/TR/xquery-31/"><cite>XQuery 3.1: An XML Query Language</cite></a>,
                        Jonathan Robie, Michael Dyck and Josh Spiegel, Editors.
                        World Wide Web Consortium,
                        13 December 2016. 
                        This version is https://www.w3.org/TR/2017/PR-xquery-31-20170117/.
                        The <a href="https://www.w3.org/TR/xquery-31/">latest version</a>
                        is available at https://www.w3.org/TR/xquery-31/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xinclude"></a>XML Inclusions (XInclude) Version 1.0 (Second Edition)</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/xinclude/"><cite>XML Inclusions (XInclude) Version 1.0 (Second Edition)</cite></a>, Jonathan Marsh, David Orchard, and Daniel Veillard, Editors. World Wide Web Consortium,
                        15&nbsp;Nov&nbsp;2006. This version is http://www.w3.org/TR/2006/REC-xinclude-20061115/. The
                        <a href="http://www.w3.org/TR/xinclude/">latest version</a> is available at http://www.w3.org/TR/xinclude/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xmlschema-2"></a>XML Schema Part 2: Datatypes Second Edition</span></dt>
                  <dd>
                     <div> XML Schema
                        Part 2: Datatypes Second Edition, Oct. 28 2004. Available at: 
                        						<a href="http://www.w3.org/TR/xmlschema-2/">http://www.w3.org/TR/xmlschema-2/</a>
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xmlschema11-2"></a>Schema 1.1 Part 2</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/xmlschema11-2/"><cite>W3C XML Schema Definition Language (XSD) 1.1 Part 2: Datatypes</cite></a>, David Peterson, Sandy Gao, Ashok Malhotra, <em>et. al.</em>, Editors. World Wide Web Consortium, 05&nbsp;Apr&nbsp;2012. This version is http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/.
                        The <a href="http://www.w3.org/TR/xmlschema11-2/">latest version</a> is available at http://www.w3.org/TR/xmlschema11-2/.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="xml-names"></a>Namespaces in XML</span></dt>
                  <dd>
                     <div>
                        <a href="http://www.w3.org/TR/xml-names/"><cite>Namespaces in XML 1.0 (Third Edition)</cite></a>, Tim Bray, Dave Hollander, Andrew Layman, <em>et. al.</em>, Editors. World Wide Web Consortium, 08&nbsp;Dec&nbsp;2009. This version is http://www.w3.org/TR/2009/REC-xml-names-20091208/.
                        The <a href="http://www.w3.org/TR/xml-names/">latest version</a> is available at http://www.w3.org/TR/xml-names/.
                     </div>
                  </dd>
               </dl>
            </div>
            <div class="div2">
               
               <h3><a id="non-normative-biblio"></a>A.2 Non-normative references
               </h3>
               <dl>
                  <dt class="label"><span><a id="CALCALC"></a>Calendrical Calculations</span></dt>
                  <dd>
                     <div>Edward M. Reingold and Nachum Dershowitz.
                        <em>Calendrical Calculations Millennium edition (2nd Edition)</em>. Cambridge University Press, 
                        ISBN 0 521 77752 6.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="CLDR"></a>Unicode CLDR</span></dt>
                  <dd>
                     <div>CLDR - Unicode Common Locale Data Repository. Available at:
                        <a href="http://cldr.unicode.org/">http://cldr.unicode.org</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="charmod-normalization"></a>Character Model for the World Wide Web 1.0: Normalization</span></dt>
                  <dd>
                     <div>Character Model for the World Wide Web
                        1.0: Normalization, Last Call Working Draft. Available at:
                        <a href="http://www.w3.org/TR/2004/WD-charmod-norm-20040225/">http://www.w3.org/TR/2004/WD-charmod-norm-20040225/</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="expath"></a>EXPath</span></dt>
                  <dd>
                     <div>EXPath: Collaboratively Defining Open Standards for Portable XPath Extensions.
                        <a href="http://expath.org/">http://expath.org/</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="exquery"></a>EXQuery</span></dt>
                  <dd>
                     <div>EXQuery: Collaboratively Defining Open Standards for Portable XQuery Extensions.
                        <a href="http://exquery.org/">http://exquery.org/</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="exslt"></a>EXSLT</span></dt>
                  <dd>
                     <div>EXSLT: A Community Initiative to Provide Extensions to XSLT.
                        <a href="http://exslt.org/">http://exslt.org/</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="functx"></a>FunctX</span></dt>
                  <dd>
                     <div>FunctX Functions. 
                        <a href="http://www.functx.com/">http://www.functx.com/</a>.
                     </div>
                  </dd>
                  <dt class="label"><span><a id="HTML40"></a>HTML 4.0</span></dt>
                  <dd>
                     <div>HTML 4.01 Recommendation, 24 December
                        1999. Available at:
                        <a href="http://www.w3.org/TR/REC-html40/">http://www.w3.org/TR/REC-html40/</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="ICU"></a>ICU</span></dt>
                  <dd>
                     <div>ICU - International Components for Unicode. Available at <a href="http://site.icu-project.org/">http://site.icu-project.org</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="POSIX.1-2008"></a>POSIX.1-2008</span></dt>
                  <dd>
                     <div>
                        <em>The Open Group Base Specifications Issue 7 (IEEE Std 1003.1-2008)</em>.
                        Available at: <a href="http://pubs.opengroup.org/onlinepubs/9699919799/">http://pubs.opengroup.org/onlinepubs/9699919799/</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc822"></a>RFC 822</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 822: Standard for the Format of ARPA Internet Text Messages. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc822.txt">http://www.ietf.org/rfc/rfc822.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc850"></a>RFC 850</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 850: Standard for Interchange of USENET Messages. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc850.txt">http://www.ietf.org/rfc/rfc850.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc1036"></a>RFC 1036</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 1036: Standard for Interchange of USENET Messages. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc1036.txt">http://www.ietf.org/rfc/rfc1036.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc1123"></a>RFC 1123</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 1123: Requirements for Internet Hosts -- Application and Support. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc1123.txt">http://www.ietf.org/rfc/rfc1123.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc2616"></a>RFC 2616</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 2616: Hypertext Transfer Protocol -- HTTP/1.1. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc2616.txt">http://www.ietf.org/rfc/rfc2616.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="rfc3339"></a>RFC 3339</span></dt>
                  <dd>
                     <div>IETF. <em>RFC 3339: Date and Time on the Internet: Timestamps. </em> Available at:
                        <a href="http://www.ietf.org/rfc/rfc3339.txt">http://www.ietf.org/rfc/rfc3339.txt</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="UNICODE-TR18"></a>UTS #18</span></dt>
                  <dd>
                     <div><em>Unicode
                           Technical Standard #18: Unicode Regular Expressions</em>. 
                        Ed. Mark Davis and Andy Heniger, Unicode Consortium. The current version is 17, dated
                        2013-11-19. Available at:
                        <a href="http://www.unicode.org/reports/tr18/">http://www.unicode.org/reports/tr18/</a>.
                        
                     </div>
                  </dd>
                  <dt class="label"><span><a id="Working-With-Timezones"></a>Working With Timezones</span></dt>
                  <dd>
                     <div>World Wide Web Consortium Working Group Note. 
                        					 <em>Working With Timezones, October 13, 2005.</em> Available at:
                        <a href="http://www.w3.org/TR/2005/NOTE-timezone-20051013/">http://www.w3.org/TR/2005/NOTE-timezone-20051013/</a>.
                        
                     </div>
                  </dd>
               </dl>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="error-summary"></a>B Error summary
            </h2>
            <p>The error text provided with these errors is non-normative.</p>
            <dl>
               <dt><a id="ERRFOAP0001"></a>err:FOAP0001, Wrong number of arguments.
               </dt>
               <dd>
                  <p>Raised when <a href="https://www.w3.org/TR/xpath-functions-31/#func-apply"><code>fn:apply</code></a> is called and the arity of the supplied function is not
                     the same as the number of members in the supplied array.
                  </p>
               </dd>
               <dt><a id="ERRFOAR0001"></a>err:FOAR0001, Division by zero.
               </dt>
               <dd>
                  <p>This error is raised whenever an attempt is made to divide by zero.</p>
               </dd>
               <dt><a id="ERRFOAR0002"></a>err:FOAR0002, Numeric operation overflow/underflow.
               </dt>
               <dd>
                  <p>This error is raised whenever numeric operations result in an overflow or underflow.</p>
               </dd>
               <dt><a id="ERRFOAY0001"></a>err:FOAY0001, Array index out of bounds.
               </dt>
               <dd>
                  <p>This error is raised when an integer used to select a member of an array is outside
                     the range of values for that array.
                  </p>
               </dd>
               <dt><a id="ERRFOAY0002"></a>err:FOAY0002, Negative array length.
               </dt>
               <dd>
                  <p>This error is raised when the <code>$length</code> argument to <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-subarray"><code>array:subarray</code></a> is negative.
                  </p>
               </dd>
               <dt><a id="ERRFOCA0001"></a>err:FOCA0001, Input value too large for decimal.
               </dt>
               <dd>
                  <p>Raised when casting to <code>xs:decimal</code> if the supplied value exceeds the
                     implementation-defined limits for the datatype.
                  </p>
               </dd>
               <dt><a id="ERRFOCA0002"></a>err:FOCA0002, Invalid lexical value.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-QName"><code>fn:resolve-QName</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-QName"><code>fn:QName</code></a> when a supplied value does not have the lexical
                     form of a QName or URI respectively; and when casting to decimal, if the supplied
                     value is NaN or Infinity.
                  </p>
               </dd>
               <dt><a id="ERRFOCA0003"></a>err:FOCA0003, Input value too large for integer.
               </dt>
               <dd>
                  <p>Raised when casting to <code>xs:integer</code> if the supplied value exceeds the
                     implementation-defined limits for the datatype.
                  </p>
               </dd>
               <dt><a id="ERRFOCA0005"></a>err:FOCA0005, NaN supplied as float/double value.
               </dt>
               <dd>
                  <p>Raised when multiplying or dividing a duration by a number, if the number supplied
                     is NaN.
                  </p>
               </dd>
               <dt><a id="ERRFOCA0006"></a>err:FOCA0006, String to be cast to decimal has too many digits of precision.
               </dt>
               <dd>
                  <p>Raised when casting a string to <code>xs:decimal</code> if the string has more digits of precision
                     than the implementation can represent (the implementation also has the option of rounding).
                  </p>
               </dd>
               <dt><a id="ERRFOCH0001"></a>err:FOCH0001, Codepoint not valid.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-codepoints-to-string"><code>fn:codepoints-to-string</code></a> if the input contains an integer that is not the codepoint
                     of a valid XML character.
                  </p>
               </dd>
               <dt><a id="ERRFOCH0002"></a>err:FOCH0002, Unsupported collation.
               </dt>
               <dd>
                  <p>Raised by any function that uses a collation if the requested collation is not recognized.</p>
               </dd>
               <dt><a id="ERRFOCH0003"></a>err:FOCH0003, Unsupported normalization form.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode"><code>fn:normalize-unicode</code></a> if the requested normalization form is not
                     supported by the implementation.
                  </p>
               </dd>
               <dt><a id="ERRFOCH0004"></a>err:FOCH0004, Collation does not support collation units.
               </dt>
               <dd>
                  <p>Raised by functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-contains"><code>fn:contains</code></a> if the requested collation does
                     not operate on a character-by-character basis.
                  </p>
               </dd>
               <dt><a id="ERRFODC0001"></a>err:FODC0001, No context document.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-id"><code>fn:id</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-idref"><code>fn:idref</code></a>, and <a href="https://www.w3.org/TR/xpath-functions-31/#func-element-with-id"><code>fn:element-with-id</code></a>
                     if the node that identifies the tree to be searched is a node in a tree whose root
                     is not
                     a document node.
                  </p>
               </dd>
               <dt><a id="ERRFODC0002"></a>err:FODC0002, Error retrieving resource.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a>, and <a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><code>fn:uri-collection</code></a>
                     to indicate that either the supplied URI cannot be dereferenced to obtain a resource,
                     or the resource
                     that is returned is not parseable as XML.
                  </p>
               </dd>
               <dt><a id="ERRFODC0003"></a>err:FODC0003, Function not defined as deterministic.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a>, <span>and <a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><code>fn:uri-collection</code></a></span> 
                     to indicate that it is not possible to
                     return a result that is guaranteed deterministic.
                  </p>
               </dd>
               <dt><a id="ERRFODC0004"></a>err:FODC0004, Invalid collection URI.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> <span>and <a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><code>fn:uri-collection</code></a></span> 
                     if the argument is not a valid <code>xs:anyURI</code>.
                  </p>
               </dd>
               <dt><a id="ERRFODC0005"></a>err:FODC0005, Invalid argument to fn:doc or fn:doc-available.
               </dt>
               <dd>
                  <p>Raised (optionally) by <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc-available"><code>fn:doc-available</code></a> if the argument 
                     is not a valid <span>URI reference</span>.
                  </p>
               </dd>
               <dt><a id="ERRFODC0006"></a>err:FODC0006, String passed to fn:parse-xml is not a well-formed XML document.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml"><code>fn:parse-xml</code></a> if the supplied string is not a well-formed and namespace-well-formed XML document;
                     or if DTD validation is requested and the document is not valid against its DTD.
                  </p>
               </dd>
               <dt><a id="ERRFODC0010"></a>err:FODC0010, The processor does not support serialization.
               </dt>
               <dd>
                  <p>Raised when <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> is called and the processor does not support serialization,
                     in cases where the host language makes serialization an optional feature.
                  </p>
               </dd>
               <dt><a id="ERRFODF1280"></a>err:FODF1280, Invalid decimal format name.
               </dt>
               <dd>
                  <p>This error is raised if the decimal format name supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a> is not a valid QName,
                     			   or if the prefix in the QName is undeclared, or if there is no decimal format
                     in the static context with
                     			   a matching name.
                  </p>
               </dd>
               <dt><a id="ERRFODF1310"></a>err:FODF1310, Invalid decimal format picture string.
               </dt>
               <dd>
                  <p>This error is raised if the picture string supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a> <span>or 
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a></span> has invalid syntax.
                  </p>
               </dd>
               <dt><a id="ERRFODT0001"></a>err:FODT0001, Overflow/underflow in date/time operation.
               </dt>
               <dd>
                  <p>Raised when casting to date/time datatypes, or performing arithmetic with date/time
                     values, if
                     arithmetic overflow or underflow occurs.
                  </p>
               </dd>
               <dt><a id="ERRFODT0002"></a>err:FODT0002, Overflow/underflow in duration operation.
               </dt>
               <dd>
                  <p>Raised when casting to duration datatypes, or performing arithmetic with duration
                     values, if
                     arithmetic overflow or underflow occurs.
                  </p>
               </dd>
               <dt><a id="ERRFODT0003"></a>err:FODT0003, Invalid timezone value.
               </dt>
               <dd>
                  <p>Raised by <code>adjust-date-to-timezone</code> and related functions if the supplied timezone is invalid.
                  </p>
               </dd>
               <dt><a id="ERRFOER0000"></a>err:FOER0000, Unidentified error.
               </dt>
               <dd>
                  <p>Error code used by <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a> when no other error code is provided.
                  </p>
               </dd>
               <dt><a id="ERRFOFD1340"></a>err:FOFD1340, Invalid date/time formatting parameters.
               </dt>
               <dd>
                  <p>This error is raised if the picture string or calendar supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><code>fn:format-date</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a>, 
                     			   or <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a> has invalid syntax.
                  </p>
               </dd>
               <dt><a id="ERRFOFD1350"></a>err:FOFD1350, Invalid date/time formatting component.
               </dt>
               <dd>
                  <p>This error is raised if the picture string supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-date"><code>fn:format-date</code></a> 
                     			   selects a component that is not present in a date, or if the picture string
                     supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a> 
                     			   selects a component that is not present in a time.
                  </p>
               </dd>
               <dt><a id="ERRFOJS0001"></a>err:FOJS0001, JSON syntax error.
               </dt>
               <dd>
                  <p>Raised by functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><code>fn:json-doc</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> 
                     <span>or <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a></span> 
                     if the string supplied as input does not conform to the JSON grammar (optionally with
                     implementation-defined extensions).
                  </p>
               </dd>
               <dt><a id="ERRFOJS0003"></a>err:FOJS0003, JSON duplicate keys.
               </dt>
               <dd>
                  <p>Raised by functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-merge"><code>map:merge</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><code>fn:json-doc</code></a>, 
                     <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> <span>or <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a></span> 
                     if the input contains duplicate keys, when the chosen policy is to reject duplicates.
                  </p>
               </dd>
               <dt><a id="ERRFOJS0004"></a>err:FOJS0004, JSON: not schema-aware.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> if validation 
                     is requested when the processor does not support schema validation or typed nodes.
                  </p>
               </dd>
               <dt><a id="ERRFOJS0005"></a>err:FOJS0005, Invalid options.
               </dt>
               <dd>
                  <p>Raised by functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-merge"><code>map:merge</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a>,
                     and <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> if the <code>$options</code> map contains an invalid entry.
                  </p>
               </dd>
               <dt><a id="ERRFOJS0006"></a>err:FOJS0006, Invalid XML representation of JSON.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> if the XML input does not
                     conform to the rules for the XML representation of JSON.
                  </p>
               </dd>
               <dt><a id="ERRFOJS0007"></a>err:FOJS0007, Bad JSON escape sequence.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> if the XML input uses the attribute
                     <code>escaped="true"</code> or <code>escaped-key="true"</code>, and the corresponding string
                     or key contains an invalid JSON escape sequence.
                  </p>
               </dd>
               <dt><a id="ERRFONS0004"></a>err:FONS0004, No namespace found for prefix.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-QName"><code>fn:resolve-QName</code></a> and analogous functions if a supplied QName has a 
                     prefix that has no binding to a namespace.
                  </p>
               </dd>
               <dt><a id="ERRFONS0005"></a>err:FONS0005, Base-uri not defined in the static context.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><code>fn:resolve-uri</code></a> if no base URI is available for resolving a relative URI.
                  </p>
               </dd>
               <dt><a id="ERRFOQM0001"></a>err:FOQM0001, Module URI is a zero-length string.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> if the supplied module URI is zero-length.
                  </p>
               </dd>
               <dt><a id="ERRFOQM0002"></a>err:FOQM0002, Module URI not found.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> if no module can be found with the supplied module URI.
                  </p>
               </dd>
               <dt><a id="ERRFOQM0003"></a>err:FOQM0003, Static error in dynamically-loaded XQuery module.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> if a static error 
                     (including a statically-detected type error) is encountered when processing the library
                     module.
                  </p>
               </dd>
               <dt><a id="ERRFOQM0005"></a>err:FOQM0005, Parameter for dynamically-loaded XQuery module has incorrect type.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> if a value is supplied for the initial context 
                     item or for an external variable, and the value does not conform to the required
                     type declared in the dynamically loaded module.
                  </p>
               </dd>
               <dt><a id="ERRFOQM0006"></a>err:FOQM0006, No suitable XQuery processor available.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> if no XQuery processor is available supporting the requested
                     XQuery version (or if none is available at all).
                  </p>
               </dd>
               <dt><a id="ERRFORG0001"></a>err:FORG0001, Invalid value for cast/constructor.
               </dt>
               <dd>
                  <p>A general-purpose error raised when casting, if a cast between two datatypes is allowed
                     in principle,
                     but the supplied value cannot be converted: for example when attempting to cast the
                     string "nine" to an integer.
                  </p>
               </dd>
               <dt><a id="ERRFORG0002"></a>err:FORG0002, Invalid argument to fn:resolve-uri().
               </dt>
               <dd>
                  <p>Raised when either argument to <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><code>fn:resolve-uri</code></a> is not a valid URI/IRI.
                  </p>
               </dd>
               <dt><a id="ERRFORG0003"></a>err:FORG0003, fn:zero-or-one called with a sequence containing more than one item.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-zero-or-one"><code>fn:zero-or-one</code></a> if the supplied value contains more than one item.
                  </p>
               </dd>
               <dt><a id="ERRFORG0004"></a>err:FORG0004, fn:one-or-more called with a sequence containing no items.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-one-or-more"><code>fn:one-or-more</code></a> if the supplied value is an empty sequence.
                  </p>
               </dd>
               <dt><a id="ERRFORG0005"></a>err:FORG0005, fn:exactly-one called with a sequence containing zero or more than one
                  item.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-exactly-one"><code>fn:exactly-one</code></a> if the supplied value is not a singleton sequence.
                  </p>
               </dd>
               <dt><a id="ERRFORG0006"></a>err:FORG0006, Invalid argument type.
               </dt>
               <dd>
                  <p>Raised by functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><code>fn:max</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-min"><code>fn:min</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-avg"><code>fn:avg</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-sum"><code>fn:sum</code></a>
                     if the supplied sequence contains values inappropriate to this function.
                  </p>
               </dd>
               <dt><a id="ERRFORG0008"></a>err:FORG0008, The two arguments to fn:dateTime have inconsistent timezones.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-dateTime"><code>fn:dateTime</code></a> if the two arguments both have timezones and the timezones are different.
                  </p>
               </dd>
               <dt><a id="ERRFORG0009"></a>err:FORG0009, Error in resolving a relative URI against a base URI in fn:resolve-uri.
               </dt>
               <dd>
                  <p>A catch-all error for <a href="https://www.w3.org/TR/xpath-functions-31/#func-resolve-uri"><code>fn:resolve-uri</code></a>, recognizing that the implementation can choose between a variety
                     of algorithms and that some of these may fail for a variety of reasons.
                  </p>
               </dd>
               <dt><a id="ERRFORG0010"></a>err:FORG0010, Invalid date/time.
               </dt>
               <dd>
                  <p>Raised when the input to <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-ietf-date"><code>fn:parse-ietf-date</code></a> does not match the prescribed
                     grammar, or when it represents an invalid date/time such as 31 February.
                  </p>
               </dd>
               <dt><a id="ERRFORX0001"></a>err:FORX0001, Invalid regular expression flags.
               </dt>
               <dd>
                  <p>Raised by regular expression functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> if the
                     regular expression flags contain a character other than <code>i</code>, <code>m</code>, <code>q</code>, <code>s</code>, or <code>x</code>.
                  </p>
               </dd>
               <dt><a id="ERRFORX0002"></a>err:FORX0002, Invalid regular expression.
               </dt>
               <dd>
                  <p>Raised by regular expression functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-matches"><code>fn:matches</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> if the
                     regular expression is syntactically invalid.
                  </p>
               </dd>
               <dt><a id="ERRFORX0003"></a>err:FORX0003, Regular expression matches zero-length string.
               </dt>
               <dd>
                  <p>For functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-tokenize"><code>fn:tokenize</code></a>, raises an error if
                     the supplied regular expression is capable of matching a zero length string.
                  </p>
               </dd>
               <dt><a id="ERRFORX0004"></a>err:FORX0004, Invalid replacement string.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> to report errors in the replacement string.
                  </p>
               </dd>
               <dt><a id="ERRFOTY0012"></a>err:FOTY0012, Argument to fn:data() contains a node that does not have a typed value.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data</code></a>, or by implicit atomization, if applied to a node with no typed value,
                     the main example being an element validated against a complex type that defines it
                     to have element-only content.
                  </p>
               </dd>
               <dt><a id="ERRFOTY0013"></a>err:FOTY0013, The argument to fn:data() contains a function item.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data</code></a>, or by implicit atomization, if the sequence to be atomized contains
                     a function item.
                  </p>
               </dd>
               <dt><a id="ERRFOTY0014"></a>err:FOTY0014, The argument to fn:string() is a function item.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a>, or by implicit string conversion, if the input sequence contains
                     a function item.
                  </p>
               </dd>
               <dt><a id="ERRFOTY0015"></a>err:FOTY0015, An argument to fn:deep-equal() contains a function item.
               </dt>
               <dd>
                  <p>Raised by <a href="https://www.w3.org/TR/xpath-functions-31/#func-deep-equal"><code>fn:deep-equal</code></a> if either input sequence contains a
                     function item.
                  </p>
               </dd>
               <dt><a id="ERRFOUT1170"></a>err:FOUT1170, Invalid $href argument to fn:unparsed-text() (etc.)
               </dt>
               <dd>
                  <p>A dynamic error is raised if the <code>$href</code> argument
                     contains a fragment identifier, or if it cannot be used to retrieve a resource
                     containing text.
                  </p>
               </dd>
               <dt><a id="ERRFOUT1190"></a>err:FOUT1190, Cannot decode resource retrieved by fn:unparsed-text() (etc.)
               </dt>
               <dd>
                  <p>A dynamic error is raised if the retrieved
                     resource contains octets that cannot be decoded into Unicode <a title="character" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#character"><span class="arrow">·</span>characters<span class="arrow">·</span></a> using the specified encoding, or if the resulting characters
                     are not permitted XML characters. This includes the case where the processor 
                     does not support the requested encoding.
                  </p>
               </dd>
               <dt><a id="ERRFOUT1200"></a>err:FOUT1200, Cannot infer encoding of resource retrieved by fn:unparsed-text() (etc.)
               </dt>
               <dd>
                  <p>A dynamic error is raised if
                     <code>$encoding</code> is absent and the processor cannot infer the encoding using external information
                     and the
                     encoding is not UTF-8.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0001"></a>err:FOXT0001, No suitable XSLT processor available
               </dt>
               <dd>
                  <p>A dynamic error is raised if no XSLT processor suitable for evaluating a call on <code>fn:transform</code>
                     is available.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0002"></a>err:FOXT0002, Invalid parameters to XSLT transformation
               </dt>
               <dd>
                  <p>A dynamic error is raised if the parameters supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> are invalid, for example
                     if two mutually-exclusive parameters are supplied. If a suitable XSLT error code is
                     available (for example in the
                     case where the requested <code>initial-template</code> does not exist in the stylesheet), that error code should
                     be used in preference.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0003"></a>err:FOXT0003, XSLT transformation failed
               </dt>
               <dd>
                  <p>A dynamic error is raised if an XSLT transformation invoked using <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> fails with a
                     static or dynamic error. The XSLT error code is used if available; this error code
                     provides a fallback when no XSLT
                     error code is returned, for example because the processor is an XSLT 1.0 processor.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0004"></a>err:FOXT0004, XSLT transformation has been disabled
               </dt>
               <dd>
                  <p>A dynamic error is raised if the <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> function is invoked when XSLT transformation (or a specific
                     transformation option) has been disabled for security or other reasons.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0005"></a>err:FOXT0005, XSLT output cannot be saved
               </dt>
               <dd>
                  <p>A dynamic error is raised if the <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> function uses <code>delivery-format:saved</code> and
                     the output of the transformation cannot be saved at the requested location.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0006"></a>err:FOXT0006, XSLT output contains non-accepted characters
               </dt>
               <dd>
                  <p>A dynamic error is raised if the result of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> function contains characters available
                     only in XML 1.1 and the calling processor cannot handle such characters.
                  </p>
               </dd>
               <dt><a id="ERRFOXT0007"></a>err:FOXT0007, XSLT delivery-format:saved violates conditions on its use
               </dt>
               <dd>
                  <p>A dynamic error is raised if the the <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> function uses <code>delivery-format:saved</code> in
                     a way that violates implementation-defined conditions on its use.
                  </p>
               </dd>
            </dl>
         </div>
         <div class="div1">
            
            <h2><a id="schemata"></a>C Schemas
            </h2>
            <p>Two functions in this specification, <a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><code>fn:analyze-string</code></a> and
               <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a>, produce results in the form of an XDM node tree that must conform
               to a specified schema. In both cases the elements in the result are in the namespace
               
               <code>http://www.w3.org/2005/xpath-functions</code>, which is therefore the target namespace
               of the relevant schema document.
            </p>
            <p>The schema for this namespace is organized as three schema documents. The first is
               a simple
               umbrella document that includes the other two. A copy can be found at 
               <a href="https://www.w3.org/TR/xpath-functions-31/xpath-functions.xsd">xpath-functions.xsd</a>:
            </p><pre class="small">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    targetNamespace="http://www.w3.org/2005/xpath-functions"&gt;
    
    &lt;!-- 
     * This is a schema for the namespace http://www.w3.org/2005/xpath-functions
     *
     * The schema is made available under the terms of the W3C software notice and license
     * at http://www.w3.org/Consortium/Legal/copyright-software-19980720
     *
     * The schema includes two schema documents, containing definitions of the structure
     * of the results of the fn:analyze-string and fn:json-to-xml functions respectively.
     *
    --&gt;
    
    &lt;xs:include schemaLocation="analyze-string.xsd"/&gt;
    &lt;xs:include schemaLocation="schema-for-json.xsd"/&gt;
&lt;/xs:schema&gt;
</pre><div class="div2">
               
               <h3><a id="schema-for-analyze-string"></a>C.1 Schema for the result of <a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><code>fn:analyze-string</code></a></h3>
               <p>This schema describes the output of the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-analyze-string"><code>fn:analyze-string</code></a>.
               </p>
               <p>The schema is reproduced below, and can also be found in <a href="https://www.w3.org/TR/xpath-functions-31/analyze-string.xsd">analyze-string.xsd</a>:
               </p><pre class="small">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.w3.org/2005/xpath-functions"
    xmlns:fn="http://www.w3.org/2005/xpath-functions"
    elementFormDefault="qualified"&gt;
    
    &lt;!-- 
     * This is a schema for the XML representation of JSON used as the target for the
     * function fn:analyze-string()
     *
     * The schema is made available under the terms of the W3C software notice and license
     * at http://www.w3.org/Consortium/Legal/copyright-software-19980720
     *
    --&gt;

    &lt;xs:element name="analyze-string-result" type="fn:analyze-string-result-type"/&gt;
    &lt;xs:element name="match" type="fn:match-type"/&gt;
    &lt;xs:element name="non-match" type="xs:string"/&gt;
    &lt;xs:element name="group" type="fn:group-type"/&gt;
    
    &lt;xs:complexType name="analyze-string-result-type" mixed="true"&gt;
        &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xs:element ref="fn:match"/&gt;
            &lt;xs:element ref="fn:non-match"/&gt;
        &lt;/xs:choice&gt;
    &lt;/xs:complexType&gt;
        
    &lt;xs:complexType name="match-type" mixed="true"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element ref="fn:group" minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="group-type" mixed="true"&gt;
        &lt;xs:sequence&gt;
            &lt;xs:element ref="fn:group" minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="nr" type="xs:positiveInteger"/&gt;
    &lt;/xs:complexType&gt;    
 
&lt;/xs:schema&gt;
</pre></div>
            <div class="div2">
               
               <h3><a id="schema-for-json"></a>C.2 Schema for the result of <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a></h3>
               <p>This schema describes the output of the function <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a>, and the input to the
                  function <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a>. 
               </p>
               <p>The schema is reproduced below, and can also be found in <a href="https://www.w3.org/TR/xpath-functions-31/schema-for-json.xsd">schema-for-json.xsd</a>:
               </p><pre class="small">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    elementFormDefault="qualified"
    targetNamespace="http://www.w3.org/2005/xpath-functions"
    xmlns:j="http://www.w3.org/2005/xpath-functions"&gt;
    
    &lt;!-- 
     * This is a schema for the XML representation of JSON used as the target for the
     * function fn:json-to-xml()
     *
     * The schema is made available under the terms of the W3C software notice and license
     * at http://www.w3.org/Consortium/Legal/copyright-software-19980720
     *
    --&gt;
    
    &lt;xs:element name="map" type="j:mapType"&gt;
        &lt;xs:unique name="unique-key"&gt;
            &lt;xs:selector xpath="*"/&gt;
            &lt;xs:field xpath="@key"/&gt;
            &lt;xs:field xpath="@escaped-key"/&gt;
        &lt;/xs:unique&gt;
    &lt;/xs:element&gt;
    
    &lt;xs:element name="array" type="j:arrayType"/&gt;
    
    &lt;xs:element name="string" type="j:stringType"/&gt;
    
    &lt;xs:element name="number" type="j:numberType"/&gt;
    
    &lt;xs:element name="boolean" type="j:booleanType"/&gt;
    
    &lt;xs:element name="null" type="j:nullType"/&gt;
    
    &lt;xs:complexType name="nullType"&gt;
        &lt;xs:sequence/&gt;
        &lt;xs:anyAttribute processContents="skip" namespace="##other"/&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="booleanType"&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base="xs:boolean"&gt;
                &lt;xs:anyAttribute processContents="skip" namespace="##other"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="stringType"&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base="xs:string"&gt;
                &lt;xs:attribute name="escaped" type="xs:boolean" use="optional" default="false"/&gt;
                &lt;xs:anyAttribute processContents="skip" namespace="##other"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:simpleType name="finiteNumberType"&gt;
        &lt;xs:restriction base="xs:double"&gt;
            &lt;!-- exclude positive and negative infinity, and NaN --&gt;
            &lt;xs:minExclusive value="-INF"/&gt;
            &lt;xs:maxExclusive value="INF"/&gt;
        &lt;/xs:restriction&gt;
    &lt;/xs:simpleType&gt;
    
    &lt;xs:complexType name="numberType"&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base="j:finiteNumberType"&gt;
                &lt;xs:anyAttribute processContents="skip" namespace="##other"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="arrayType"&gt;
        &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xs:element ref="j:map"/&gt;
            &lt;xs:element ref="j:array"/&gt;
            &lt;xs:element ref="j:string"/&gt;
            &lt;xs:element ref="j:number"/&gt;
            &lt;xs:element ref="j:boolean"/&gt;
            &lt;xs:element ref="j:null"/&gt;
        &lt;/xs:choice&gt;
        &lt;xs:anyAttribute processContents="skip" namespace="##other"/&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="mapWithinMapType"&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base="j:mapType"&gt;
                &lt;xs:attributeGroup ref="j:key-group"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="arrayWithinMapType"&gt;
        &lt;xs:complexContent&gt;
            &lt;xs:extension base="j:arrayType"&gt;
                &lt;xs:attributeGroup ref="j:key-group"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:complexContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="stringWithinMapType"&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base="j:stringType"&gt;
                &lt;xs:attributeGroup ref="j:key-group"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="numberWithinMapType"&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base="j:numberType"&gt;
                &lt;xs:attributeGroup ref="j:key-group"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="booleanWithinMapType"&gt;
        &lt;xs:simpleContent&gt;
            &lt;xs:extension base="j:booleanType"&gt;
                &lt;xs:attributeGroup ref="j:key-group"/&gt;
            &lt;/xs:extension&gt;
        &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="nullWithinMapType"&gt;
        &lt;xs:attributeGroup ref="j:key-group"/&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:complexType name="mapType"&gt;
        &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt;
            &lt;xs:element name="map" type="j:mapWithinMapType"&gt;
                &lt;xs:unique name="unique-key-2"&gt;
                    &lt;xs:selector xpath="*"/&gt;
                    &lt;xs:field xpath="@key"/&gt;
                &lt;/xs:unique&gt;
            &lt;/xs:element&gt;
            &lt;xs:element name="array" type="j:arrayWithinMapType"/&gt;            
            &lt;xs:element name="string" type="j:stringWithinMapType"/&gt;   
            &lt;xs:element name="number" type="j:numberWithinMapType"/&gt;
            &lt;xs:element name="boolean" type="j:booleanWithinMapType"/&gt;
            &lt;xs:element name="null" type="j:nullWithinMapType"/&gt;
        &lt;/xs:choice&gt;
        &lt;xs:anyAttribute processContents="skip" namespace="##other"/&gt;
    &lt;/xs:complexType&gt;
    
    &lt;xs:attributeGroup name="key-group"&gt;
        &lt;xs:attribute name="key" type="xs:string" use="required"/&gt;
        &lt;xs:attribute name="escaped-key" type="xs:boolean" use="optional" default="false"/&gt;
    &lt;/xs:attributeGroup&gt;
    
&lt;/xs:schema&gt;
</pre></div>
         </div>
         <div class="div1">
            
            <h2><a id="other-functions"></a>D Other Functions (Non-Normative)
            </h2>
            <p>This Appendix describes some sources of functions that fall outside the scope of the
               function library defined
               in this specification. It includes both function specifications and function implementations.
               Inclusion of a function
               in this appendix does not constitute any kind of recommendation or endorsement; neither
               is omission from this appendix
               to be construed negatively. This Appendix does not attempt to give any information
               about licensing arrangements for
               these function specifications or implementations.
            </p>
            <div class="div2">
               
               <h3><a id="functions-in-other-w3c-specs"></a>D.1 XPath Functions Defined in Other W3C Recommendations
               </h3>
               <p>A number of W3C Recommendations make use of XPath, and in some cases such Recommmendations
                  define additional
                  functions to be made available when XPath is used in a specific host language.
               </p>
               <div class="div3">
                  
                  <h4><a id="functions-defined-in-XSLT"></a>D.1.1 Functions Defined in XSLT
                  </h4>
                  <p>The various versions of XSLT have all included additional functions intended to be
                     available only when XPath
                     is used within XSLT, and not in other host language environments. Some of these functions
                     were originally defined
                     in XSLT, and subsequently migrated into the core function library defined in this
                     specification.
                  </p>
                  <p>Generally, the reason that functions have been defined in XSLT rather than in the
                     core library has been that
                     they required additional static or dynamic context information.
                  </p>
                  <p>XSLT-defined functions share the core namespace <code>http://www.w3.org/2005/xpath-functions</code> (but in XPath 1.0
                     and XSLT 1.0, no namespace was defined for these functions).
                  </p>
                  <p>The conformance rules for XSLT 3.0 require implementations to support either XPath
                     3.0 or XPath 3.1. Some of the
                     new functions in XPath 3.1, however, must be supported by all XSLT 3.0 implementations
                     whether or not they implement
                     other parts of XPath 3.1.
                  </p>
                  <p>The following table lists all functions that have been defined in XSLT 1.0, 2.0, or
                     3.0, and summarizes their status.
                  </p>
                  <div class="overlarge"><table class="data">
                     <thead>
                        <tr>
                           <th>Function name</th>
                           <th>Availability</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr>
                           <td>fn:accumulator-after</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:accumulator-before</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:available-system-properties</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:collation-key</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:copy-of</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:current</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:current-group</td>
                           <td>XSLT 2.0 and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:current-grouping-key</td>
                           <td>XSLT 2.0 and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:current-merge-group</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:current-merge-key</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:current-output-uri</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:document</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:element-available</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:format-date</td>
                           <td>XSLT 2.0; migrated to XPath 3.0 and 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:format-dateTime</td>
                           <td>XSLT 2.0; migrated to XPath 3.0 and 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:format-number</td>
                           <td>XSLT 1.0 and 2.0; migrated to XPath 3.0 and 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:format-time</td>
                           <td>XSLT 2.0; migrated to XPath 3.0 and 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:function-available</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:generate-id</td>
                           <td>XSLT 1.0 and 2.0; migrated to XPath 3.0 and 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:json-to-xml</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:key</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:regex-group</td>
                           <td>XSLT 2.0 and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:snapshot</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:stream-available</td>
                           <td>XSLT 3.0 only</td>
                        </tr>
                        <tr>
                           <td>fn:system-property</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:type-available</td>
                           <td>XSLT 2.0 and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:unparsed-entity-public-id</td>
                           <td>XSLT 2.0 and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:unparsed-entity-uri</td>
                           <td>XSLT 1.0, 2.0, and 3.0</td>
                        </tr>
                        <tr>
                           <td>fn:unparsed-text</td>
                           <td>XSLT 2.0; migrated to XPath 3.0 and 3.1</td>
                        </tr>
                        <tr>
                           <td>fn:xml-to-json</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:contains</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:entry</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:find</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:for-each</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:get</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:keys</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:merge</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:put</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:remove</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                        <tr>
                           <td>map:size</td>
                           <td>Common to XSLT 3.0 and XPath 3.1</td>
                        </tr>
                     </tbody>
                  </table></div>
               </div>
               <div class="div3">
                  
                  <h4><a id="functions-defined-in-XForms"></a>D.1.2 Functions Defined in XForms
                  </h4>
                  <p>XForms 1.1 is based on XPath 1.0. It adds the following functions to the set defined
                     in XPath 1.0, using the same
                     namespace:
                  </p>
                  <p><code>boolean-from-string</code>, <code>is-card-number</code>, <code>avg</code>, <code>min</code>, <code>max</code>, 
                     <code>count-non-empty</code>, <code>index</code>, <code>power</code>, <code>random</code>, <code>compare</code>,
                     <code>if</code>, <code>property</code>, 
                     <code>digest</code>, <code>hmac</code>, <code>local-date</code>, <code>local-dateTime</code>, <code>now</code>, 
                     <code>days-from-date</code>, <code>days-to-date</code>, <code>seconds-from-dateTime</code>, <code>seconds-to-dateTime</code>,
                     <code>adjust-dateTime-to-timezone</code>, <code>seconds</code>, <code>months</code>, <code>instance</code>, 
                     <code>current</code>, <code>id</code>, <code>context</code>, <code>choose</code>, <code>event</code>.
                  </p>
                  <p>XForms 2.0 was first published as a W3C Working Draft, and subsequently as a W3C Community
                     Group specification. These
                     draft specifications do not include any additional functions beyond those in the core
                     XPath specification.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="xquery-update"></a>D.1.3 Function Defined in XQuery Update 1.0
                  </h4>
                  <p>The XQuery Update 1.0 specification defines one additional function in the core namespace
                     <code>http://www.w3.org/2005/xpath-functions</code>, namely <code>fn:put</code>. This function can be used
                     to write a document to external storage. It is thus unusual in that it has side-effects;
                     the XQuery Update 1.0
                     specification defines semantics for updating expressions including this function.
                  </p>
                  <p>Although XQuery Update 1.0 is defined as an extension of XQuery 1.0, a number of implementors
                     have adapted it,
                     in a fairly intuitive way, to work with later versions of XQuery. At the time of this
                     publication, later versions of the
                     XQuery Update specification remain at Working Draft status.
                  </p>
               </div>
            </div>
            <div class="div2">
               
               <h3><a id="functions-defined-by-community-groups"></a>D.2 Functions Defined by Community Groups
               </h3>
               <p>A number of community groups, with varying levels of formal organization, have defined
                  specifications for
                  additional function libraries to augment the core functions defined in this specification.
                  Many of the resulting
                  function specifications have implementations available for popular XPath, XQuery,
                  and XSLT processors, though
                  the level of support is highly variable.
               </p>
               <p>The first such group was EXSLT. This activity was primarily concerned with augmenting
                  the capability of
                  XSLT 1.0, and many of its specifications were overtaken by core functions that became
                  available in XPath 2.0.
                  EXSLT defined a number of function modules covering:
               </p>
               <blockquote>
                  <p>Dates and Times<br>Dynamic XPath Evaluation<br>Common (containing most notably the widely-used <code>node-set</code> function)<br>Math (<code>max</code>, <code>min</code>, <code>abs</code>, and trigonometric functions)<br>Random Number Generation<br>Regular Expressions<br>Sets (operations on sets of nodes including set intersection and difference)<br>String Manipulation (tokenize, replace, join and split, etc.)
                  </p>
               </blockquote>
               <p>Specifications from the EXSLT group can be found at <a href="https://www.w3.org/TR/xpath-functions-31/#exslt">[EXSLT]</a>.
               </p>
               <p>A renewed attempt to define additional function libraries using XPath 2.0 as its baseline
                  formed
                  under the name EXPath. Again, the specifications are in various states of maturity
                  and stability, and
                  implementation across popular processors is patchy. At the time of this publication
                  the function libraries that
                  exist in stable published form include:
               </p>
               <blockquote>
                  <p>Binary (functions for manipulating binary data)<br>File Handling (reading and writing files)<br>Geospatial (handling of geographic data)<br>HTTP Client (sending HTTP requests)<br>ZIP Facility (reading and creating ZIP files or similar archives)
                  </p>
               </blockquote>
               <p>The EXPath community has also been engaged in other related projects, such as defining
                  packaging
                  standards for distribution of XSLT/XQuery components, and tools for unit testing.
                  Its specifications
                  can be found at <a href="https://www.w3.org/TR/xpath-functions-31/#expath">[EXPath]</a>.
               </p>
               <p>A third activity has operated under the name EXQuery, which as the name suggests has
                  focused
                  on extensions to XQuery. EXQuery has published a single specification, RestXQ, which
                  is primarily a 
                  system of function annotations allowing XQuery functions to act as endpoints for RESTful
                  services.
                  It also includes some simple functions to assist with the creation of such services.
                  The RestXQ specification
                  can be found at <a href="https://www.w3.org/TR/xpath-functions-31/#exquery">[EXQuery]</a>.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="functx-library"></a>D.3 The FunctX Library
               </h3>
               <p>Many useful functions can be written in XSLT or XQuery, and in this case the function
                  implementations
                  themselves can be portable across different XSLT and XQuery processors. This section
                  describes one such library.
               </p>
               <p>FunctX is an open-source library of general-purpose functions, supplied in the form
                  of XQuery 1.0 and XSLT 2.0
                  implementations. It contains over a hundred functions. Typical examples of these functions
                  are:
               </p>
               <blockquote>
                  <p>Test whether a string is all-whitespace<br>Trim leading and trailing whitespace<br>Test whether all the values in a sequence are distinct<br>Capitalize the first character of a string<br>Change the namespace of all elements in a tree<br>Get the number of days in a given month<br>Get the first or last day in a given month<br>Get the date of the preceding or following day<br>Ask whether an element has element-only, mixed, or simple content<br>Find the position of a node in a sequence<br>Count words in a string
                  </p>
               </blockquote>
               <p>The FunctX library can be found at <a href="https://www.w3.org/TR/xpath-functions-31/#functx">[FunctX]</a>.
               </p>
            </div>
            <div class="div2">
               
               <h3><a id="examples"></a>D.4 Illustrative user-written functions
               </h3>
               <p> Certain functions that were proposed for inclusion in this function library have
                  been excluded on the basis that it is straightforward for users to implement these
                  functions themselves using XSLT 2.0 or XQuery 1.0.
               </p>
               <p>This Appendix provides sample implementations of some of these functions.</p>
               <p> To emphasize that these functions are examples of functions that vendors may write,
                  their names carry the prefix 'eg'. Vendors are free to define such functions in any
                  namespace. A group of vendors may also choose to create a collection of such useful
                  functions and put them in a common namespace.
               </p>
               <div class="div3">
                  
                  <h4><a id="if-empty-or-absent"></a>D.4.1 eg:if-empty
                  </h4>
                  <p>In some situations, users may want to provide default values for missing
                     information that may be signaled by elements that are omitted, have no value or
                     have the empty sequence as their value. For example, a missing middle initial
                     may be indicated by omitting the element or a non-existent bonus signaled with
                     an empty sequence. This section includes examples of functions that provide such
                     defaults. These functions return <code>xs:anyAtomicType*</code>. Users may want
                     to write functions that return more specific types.
                  </p>
                  <div class="div4">
                     
                     <h5><a id="if-empty"></a>D.4.1.1 eg:if-empty
                     </h5>
                     <div class="proto"><code class="function">eg:if-empty</code>(<code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>, <code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></div>
                     <p> If the first argument is the empty sequence or an element without simple or
                        complex content, <code>eg:if-empty()</code> returns the second argument; otherwise, it
                        returns the content of the first argument.
                     </p>
                     <p>XSLT implementation</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:if-empty" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="node" as="node()?"/&gt;
  &lt;xsl:param name="value" as="xs:anyAtomicType"/&gt;
  &lt;xsl:sequence select="($node[child::node()], $value)[1]"/&gt;
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:if-empty (
  $node as node()?,
  $value as xs:anyAtomicType) as xs:anyAtomicType* 
{
  ($node[child::node()], $value)[1]
}
                    </pre></div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="if-absent"></a>D.4.1.2 eg:if-absent
                     </h5>
                     <div class="proto"><code class="function">eg:if-absent</code>(<code class="arg">$node</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()?</code>, <code class="arg">$value</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></div>
                     <p> If the first argument is the empty sequence, <code>eg:if-absent()</code> returns the second
                        argument; otherwise, it returns the content of the first argument.
                     </p>
                     <p>XSLT implementation</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:if-absent" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="node" as="node()?"/&gt;
  &lt;xsl:param name="value" as="xs:anyAtomicType"/&gt;
  &lt;xsl:sequence select="($node, $value)[1]"/&gt;
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:if-absent (
  $node as node()?,
  $value as xs:anyAtomicType) as xs:anyAtomicType* 
{
  ($node, $value)[1]
}
                    </pre></div>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="union-intersect-except-on-values"></a>D.4.2 Union, intersection and difference on sequences of values
                  </h4>
                  <div class="div4">
                     
                     <h5><a id="value-union"></a>D.4.2.1 eg:value-union
                     </h5>
                     <div class="proto">
                        <table class="proto">
                           <tbody><tr>
                              <td style="vertical-align:baseline" rowspan="2"><code class="function">eg:value-union</code>(
                              </td>
                              <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                              <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                              </td>
                           </tr>
                           <tr>
                              <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                              <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></td>
                           </tr>
                        </tbody></table>
                     </div>
                     <p> This function returns a sequence containing all the distinct items in <code>$arg1</code>
                        and <code>$arg2</code>, in an arbitrary order.
                     </p>
                     <p>XSLT implementation</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:value-union" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="arg1" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:param name="arg2" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:sequence
     select="fn:distinct-values(($arg1, $arg2))"/&gt; 
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:value-union (
  $arg1 as xs:anyAtomicType*,
  $arg2 as xs:anyAtomicType*) as xs:anyAtomicType* 
{
  fn:distinct-values(($arg1, $arg2))
}
                    </pre></div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="value-intersect"></a>D.4.2.2 eg:value-intersect
                     </h5>
                     <div class="proto">
                        <table class="proto">
                           <tbody><tr>
                              <td style="vertical-align:baseline" rowspan="2"><code class="function">eg:value-intersect</code>(
                              </td>
                              <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                              <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                              </td>
                           </tr>
                           <tr>
                              <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                              <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></td>
                           </tr>
                        </tbody></table>
                     </div>
                     <p> This function returns a sequence containing all the distinct items that
                        appear in both <code>$arg1</code> and <code>$arg2</code>, in an arbitrary order.
                     </p>
                     <p>XSLT implementation&gt;</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:value-intersect" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="arg1" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:param name="arg2" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:sequence 
     select="fn:distinct-values($arg1[.=$arg2])"/&gt;
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:value-intersect (
  $arg1 as xs:anyAtomicType*,
  $arg2 as xs:anyAtomicType* ) as xs:anyAtomicType* 
{
  fn:distinct-values($arg1[.=$arg2])
}
                    </pre></div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="value-except"></a>D.4.2.3 eg:value-except
                     </h5>
                     <div class="proto">
                        <table class="proto">
                           <tbody><tr>
                              <td style="vertical-align:baseline" rowspan="2"><code class="function">eg:value-except</code>(
                              </td>
                              <td style="vertical-align:baseline"><code class="arg">$arg1</code></td>
                              <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>,
                              </td>
                           </tr>
                           <tr>
                              <td style="vertical-align:baseline"><code class="arg">$arg2</code></td>
                              <td style="vertical-align:baseline"><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:anyAtomicType*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:anyAtomicType*</code></td>
                           </tr>
                        </tbody></table>
                     </div>
                     <p> This function returns a sequence containing all the distinct items that
                        appear in <code>$arg1</code> but not in <code>$arg2</code>, in an arbitrary order.
                     </p>
                     <p>XSLT implementation</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:value-except" as="xs:anyAtomicType*"&gt;
  &lt;xsl:param name="arg1" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:param name="arg2" as="xs:anyAtomicType*"/&gt;
  &lt;xsl:sequence
     select="fn:distinct-values($arg1[not(.=$arg2)])"/&gt;
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:value-except (
  $arg1 as xs:anyAtomicType*,
  $arg2 as xs:anyAtomicType*) as xs:anyAtomicType* 
{
  fn:distinct-values($arg1[not(.=$arg2)])
}</pre></div>
                  </div>
               </div>
               <div class="div3">
                  
                  <h4><a id="index-of-node"></a>D.4.3 eg:index-of-node
                  </h4>
                  <div class="proto"><code class="function">eg:index-of-node</code>(<code class="arg">$seq</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()*</code>, <code class="arg">$search</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:integer*</code></div>
                  <p>This function returns a sequence of positive integers giving the positions within
                     the sequence <code>$seq</code> of nodes that are identical to <code>$search</code>.
                  </p>
                  <p>The nodes in the sequence <code>$seq</code> are compared with
                     <code>$search</code> under the rules for the <code>is</code> operator. If a
                     node compares identical, then the position of that node in the sequence
                     <code>$seq</code> is included in the result.
                  </p>
                  <p>If the value of <code>$seq</code> is the empty sequence, or if no node in
                     <code>$seq</code> matches <code>$search</code>, then the empty sequence is returned.
                  </p>
                  <p>The index is 1-based, not 0-based.</p>
                  <p>The result sequence is in ascending numeric order.</p>
                  <p>XSLT implementation</p>
                  <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:index-of-node" as="xs:integer*"&gt;
  &lt;xsl:param name="seq" as="node()*"/&gt;
  &lt;xsl:param name="search" as="node()"/&gt;
  &lt;xsl:sequence select="filter(
      1 to count($seq),
      function($i as xs:integer) as xs:boolean {$seq[$i] is $search}  
    )
  "/&gt;
&lt;/xsl:function&gt;</pre></div>
                  <p>XQuery implementation</p>
                  <div class="exampleInner"><pre class="small">declare function eg:index-of-node($seq as node()*, $search as node()) as xs:integer* 
{
    fn:filter(
      1 to fn:count($seq),
      function($i as xs:integer) as xs:boolean {$seq[$i] is $search}   
    )

}</pre></div>
                  <p>An alternative implementation, which might be faster in systems where indexing into
                     a sequence
                     is slow, is:
                  </p>
                  <div class="exampleInner"><pre class="small">declare function eg:index-of-node($seq as node()*, $search as node()) as xs:integer* 
{
  fn:for-each-pair(
     $seq, 1 to fn:count($seq),
     function($node, $index) {
        if($node is $search) then $index else () 
     })
}</pre></div>
               </div>
               <div class="div3">
                  
                  <h4><a id="string-pad"></a>D.4.4 eg:string-pad
                  </h4>
                  <div class="proto"><code class="function">eg:string-pad</code>(<code class="arg">$padString</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:string?</code>, <code class="arg">$padCount</code><code class="as">&nbsp;as&nbsp;</code><code class="type">xs:integer</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">xs:string</code></div>
                  <p>Returns a <code>xs:string</code> consisting of a given number of copies of an
                     <code>xs:string</code> argument concatenated together.
                  </p>
                  <p>XSLT implementation</p>
                  <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:string-pad" as="xs:string"&gt;
  &lt;xsl:param name="padString" as="xs:string?"/&gt;
  &lt;xsl:param name="padCount" as="xs:integer"/&gt;
  &lt;xsl:sequence select="
     fn:string-join(for $i in 1 to $padCount return $padString)"/&gt;
 &lt;/xsl:function&gt;
                </pre></div>
                  <p>XQuery implementation</p>
                  <div class="exampleInner"><pre class="small">declare function eg:string-pad (
  $padString as xs:string?,
  $padCount as xs:integer) as xs:string 
{
   fn:string-join(for $i in 1 to $padCount return $padString)
}
                </pre></div>
                  <p>This returns the zero-length string if <code>$padString</code> is the empty
                     sequence, which is consistent with the general principle that if an
                     <code>xs:string</code> argument is the empty sequence it is treated as if it
                     were the zero-length string.
                  </p>
               </div>
               <div class="div3">
                  
                  <h4><a id="func-distinct-nodes-stable"></a>D.4.5 eg:distinct-nodes-stable
                  </h4>
                  <div class="proto"><code class="function">eg:distinct-nodes-stable</code>(<code class="arg">$arg</code><code class="as">&nbsp;as&nbsp;</code><code class="type">node()*</code>)<code class="as">&nbsp;as&nbsp;</code><code class="return-type">node()*</code></div>
                  <p>This function illustrates one possible implementation of a distinct-nodes
                     function. It removes duplicate nodes by identity, preserving the first
                     occurrence of each node.
                  </p>
                  <p>XPath</p>
                  <div class="exampleInner"><pre>$arg[empty(subsequence($arg, 1, position()-1) intersect .)]
                </pre></div>
                  <p>XSLT implementation</p>
                  <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:distinct-nodes-stable" as="node()*"&gt;
  &lt;xsl:param name="arg" as="node()*"/&gt;
  &lt;xsl:sequence select=""
    fn:fold-left(
      $arg, (),
      function($foundSoFar as node()*, $this as node()) as node()* {
        if ($foundSoFar intersect $this)
        then $foundSoFar
        else ($foundSoFar, $this)
      })
  "/&gt; 
&lt;/xsl:function&gt;
                </pre></div>
                  <p>XQuery implementation</p>
                  <div class="exampleInner"><pre class="small">declare function eg:distinct-nodes-stable ($arg as node()*) as node()* { 
  fn:fold-left(
      $arg, (),
      function($foundSoFar as node()*, $this as node()) as node()* {
        if ($foundSoFar intersect $this)
        then $foundSoFar
        else ($foundSoFar, $this)
      })

};</pre></div>
               </div>
               <div class="div3">
                  
                  <h4><a id="highest-lowest"></a>D.4.6 Finding minima and maxima
                  </h4>
                  <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-min"><code>fn:min</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><code>fn:max</code></a> functions allow one to determine the smallest and largest
                     values in a set of values, but they do not directly allow one to determine the elements
                     having the smallest
                     or largest value for some property, for example the employees earning the highest
                     or lowest salary. The
                     functions in this section show how this can be achieved.
                  </p>
                  <p>The functions take as input an arbitrary sequence of items (typically but not necessarily
                     a sequence of elements)
                     and a function that computes a property value for each of these items. This must be
                     a value of an atomic type
                     for which order comparisons are defined. The functions return those items from the
                     input sequence that have
                     a higher (or lower) value for the given property than any others in the sequence.
                     If there are several that
                     are joint highest (or lowest) then they are all returned.
                  </p>
                  <div class="div4">
                     
                     <h5><a id="highest"></a>D.4.6.1 eg:highest
                     </h5>
                     <p>The function <code>eg:highest</code> returns the items having the highest value for the supplied function.
                     </p>
                     <p>XSLT implementation</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:highest" as="item()*"&gt;
  &lt;xsl:param name="seq" as="item()*"/&gt;
  &lt;xsl:param name="f" as="function(item()) as xs:anyAtomicType"/&gt;
  &lt;xsl:sequence select="
     fold-left(
       tail($seq), head($seq),
       function($highestSoFar as item()*, $this as item()*) as item()* {
         let $thisValue := $f($this)
         let $highestValue := $f($highestSoFar[1])
         return
           if ($thisValue gt $highestValue)
             then $this
           else if ($thisValue eq $highestValue)
             then ($highestSoFar, $this)
           else $highestSoFar
       })"/&gt;
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:highest(
                     $seq as item()*
                     $f as function(item()) as xs:anyAtomicType)
                  as item()* {
     fn:fold-left(
       fn:tail($seq), fn:head($seq),
       function($highestSoFar as item()*, $this as item()*) as item()* {
         let $thisValue := $f($this)
         let $highestValue := $f($highestSoFar[1])
         return
           if ($thisValue gt $highestValue)
             then $this
           else if ($thisValue eq $highestValue)
             then ($highestSoFar, $this)
           else $highestSoFar
       })
};</pre></div>
                     <p>To find the employees with the highest salary, the function might be called as:</p>
                     <div class="exampleInner"><pre>eg:highest(//employee, function($emp){$emp/salary})</pre></div>
                  </div>
                  <div class="div4">
                     
                     <h5><a id="lowest"></a>D.4.6.2 eg:lowest
                     </h5>
                     <p>The function <code>eg:lowest</code> returns the items having the lowest value for the supplied function.
                     </p>
                     <p>XSLT implementation</p>
                     <div class="exampleInner"><pre class="small">&lt;xsl:function name="eg:lowest" as="item()*"&gt;
  &lt;xsl:param name="seq" as="item()*"/&gt;
  &lt;xsl:param name="f" as="function(item()) as xs:anyAtomicType"/&gt;
  &lt;xsl:sequence select="
     fold-left(
       tail($seq), head($seq),
       function($lowestSoFar as item()*, $this as item()*) as item()* {
         let $thisValue := $f($this)
         let $lowestValue := $f($lowestSoFar[1])
         return
           if ($thisValue lt $lowestValue)
             then $this
           else if ($thisValue eq $lowestValue)
             then ($lowestSoFar, $this)
           else $lowestSoFar
       })"/&gt;
&lt;/xsl:function&gt;</pre></div>
                     <p>XQuery implementation</p>
                     <div class="exampleInner"><pre class="small">declare function eg:lowest(
                     $seq as item()*,
                     $f as function(item()) as xs:anyAtomicType)
                  as item()* {
     fn:fold-left(
       fn:tail($seq), fn:head($seq),
       function($lowestSoFar as item()*, $this as item()*) as item()* {
         let $thisValue := $f($this)
         let $lowestValue := $f($lowestSoFar[1])
         return
           if ($thisValue gt $lowestValue)
             then $this
           else if ($thisValue eq $lowestValue)
             then ($lowestSoFar, $this)
           else $lowestSoFar
       })
};</pre></div>
                     <p>To find the employees with the lowest total number of hours worked, the function might
                        be called as:
                     </p>
                     <div class="exampleInner"><pre>eg:lowest(//employee, function($emp){sum($emp/timesheet/period/hours})</pre></div>
                  </div>
               </div>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="impl-def"></a>E Checklist of implementation-defined features (Non-Normative)
            </h2>
            <ol>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which version of Unicode is supported, 
                     but it is recommended that the most recent version of Unicode be used.  
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#conformance">Conformance</a>.)
                  </p>
               </li>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether the type system is based
                     on XML Schema 1.0 or XML Schema 1.1.  
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#conformance">Conformance</a>.)
                  </p>
               </li>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether definitions that rely on
                     XML (for example, the set of valid XML characters) should use the definitions in XML
                     1.0 or XML 1.1.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#conformance">Conformance</a>.)
                  </p>
               </li>
               <li>
                  <p>It is not an error if the options map contains options with names other than those
                     described in this specification. Implementations <span class="verb">may</span> attach an 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> meaning to such entries,
                     and <span class="verb">may</span> define errors that arise if such entries are present with invalid values.
                     Implementations <span class="verb">must</span> ignore such entries unless they have a specific 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> meaning.
                     Implementations that define additional options in this way <span class="verb">should</span>
                     use values of type <code>xs:QName</code> as the option names, using an appropriate namespace.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#options">Options</a>.)
                  </p>
               </li>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which version of <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a> is supported, but it is recommended that the most recent version of Unicode be used.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#character-terminology">Strings, characters, and codepoints</a>.)
                  </p>
               </li>
               <li>
                  <p><span class="termdef">[Definition]  Some 
                        functions (such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-distinct-values"><code>fn:distinct-values</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-unordered"><code>fn:unordered</code></a>, <span><a href="https://www.w3.org/TR/xpath-functions-31/#func-map-keys"><code>map:keys</code></a>,
                           and <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-for-each"><code>map:for-each</code></a></span>) produce results in an
                        <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> or 
                        <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> order. 
                        In such cases two calls with the same arguments are not guaranteed to produce the
                        results in the same order. These functions are
                        said to be <b>nondeterministic with respect to ordering</b>.</span>
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#dt-nondeterministic-wrt-ordering"></a>.)
                  </p>
               </li>
               <li>
                  <p>Where the results of a function are described as being (to a greater or lesser
                     extent) <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> or 
                     <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>, this does not by
                     itself remove the requirement that the results should be deterministic: that is, that
                     repeated calls with the same explicit and implicit arguments <span class="verb">must</span> return
                     identical results.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#properties-of-functions">Properties of functions</a>.)
                  </p>
               </li>
               <li>
                  <p>In the case of a document node <code>$D</code> returned by the <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>
                     function, or a document node at the root of a tree containing a node returned by the
                     <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> function, it will always be true that either
                     <code>fn:document-uri($D)</code> returns the empty sequence, or that the following
                     expression is true: <code>fn:doc(fn:document-uri($D))</code> is <code>$D</code>. It is
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether this guarantee also holds for
                     document nodes obtained by other means, for example a document node passed as the
                     initial context node of a query or transformation.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-document-uri">fn:document-uri</a>.)
                  </p>
               </li>
               <li>
                  <p>In addition, the values of <code>$value</code>, converted to an <code>xs:string</code>,
                     and <code>$label</code> <span>(if supplied)</span>
                     <span class="verb">may</span> be directed to a trace data set. The destination of the trace
                     output is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. The format of the trace output is
                     <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>. The ordering of output from calls of the
                     <code>fn:trace</code> function is <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-trace">fn:trace</a>.)
                  </p>
               </li>
               <li>
                  <p> They <span class="verb">may</span> provide an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> mechanism that allows users to
                     choose between raising an error and returning a result that is
                     modulo the largest representable integer value. See <a href="https://www.w3.org/TR/xpath-functions-31/#ISO10967">[ISO 10967]</a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric">Arithmetic operators on numeric values</a>.)
                  </p>
               </li>
               <li>
                  <p>For <code>xs:decimal</code> values<span>, let <var>N</var> be the number of digits
                        of precision supported by the implementation, and let <var>M</var> (<code>M &lt;= N</code>) be the minimum limit on the number of digits
                        required for conformance (18 digits for XSD 1.0, 16 digits for XSD 1.1). Then for
                        addition, subtraction, and multiplication
                        operations, the returned result <span class="verb">should</span> be accurate to <var>N</var> digits of precision, and for division and modulus operations,
                        the returned result <span class="verb">should</span> be accurate to at least <var>M</var> digits of precision.</span> 
                     The actual precision is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the number
                     of digits in the mathematical result exceeds the number of digits that the implementation
                     retains for that operation, the result is truncated or rounded in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> manner.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric">Arithmetic operators on numeric values</a>.)
                  </p>
               </li>
               <li>
                  <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification also describes handling of
                     two exception conditions called <code>divideByZero</code> and <code>invalidOperation</code>. The 
                     IEEE <code>divideByZero</code> exception is raised not only by a direct attempt to divide by zero, but also by
                     operations such as <code>log(0)</code>. The IEEE <code>invalidOperation</code> exception is raised by
                     attempts to call a function with an argument that is outside the function's domain
                     (for example,
                     <code>sqrt(-1)</code> or <code>log(-1)</code>). 
                     <span>Although IEEE defines these as exceptions, it also defines "default non-stop exception
                        handling" in 
                        which the operation returns a defined result, typically positive or negative infinity,
                        or NaN. With this 
                        function library,</span>
                     these IEEE exceptions do not cause a dynamic error
                     at the application level; rather they result in the relevant function or operator
                     returning
                     <span>the defined non-error result.</span> 
                     The underlying IEEE exception <span class="verb">may</span> be notified to the application
                     or to the user by some <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                     warning condition, but the observable effect on an application 
                     using the functions and operators defined in this specification is simply to return
                     <span>the defined 
                        result (typically -INF, +INF, or NaN)</span> with no error.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric">Arithmetic operators on numeric values</a>.)
                  </p>
               </li>
               <li>
                  <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#ieee754-2008">[IEEE 754-2008]</a> specification distinguishes two NaN values,
                     a quiet NaN and a signaling NaN. These two values are not distinguishable in the XDM
                     model:
                     the value spaces of <code>xs:float</code> and <code>xs:double</code> each include only a single
                     <code>NaN</code> value. This does not prevent the implementation distinguishing them internally,
                     and triggering different <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                     warning conditions, but such distinctions do not affect the observable behavior of
                     an application 
                     using the functions and operators defined in this specification.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#op.numeric">Arithmetic operators on numeric values</a>.)
                  </p>
               </li>
               <li>
                  <p>The implementation may adopt a different algorithm provided that it is equivalent
                     to
                     this formulation in all cases where <a title="implementation-dependent" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-dependent"><span class="arrow">·</span>implementation-dependent<span class="arrow">·</span></a> or <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> behavior does not affect the outcome, for example,
                     the implementation-defined precision of the result of <code>xs:decimal</code>
                     division.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-numeric-integer-divide">op:numeric-integer-divide</a>.)
                  </p>
               </li>
               <li>
                  <p>XSD 1.1 allows the string <code>+INF</code> as a representation of positive infinity;
                     XSD 1.0 does not. It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether XSD 1.1 is
                     supported.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-number">fn:number</a>.)
                  </p>
               </li>
               <li>
                  <p>Any other format token, which indicates a numbering sequence in which that token
                     represents the number 1 (one) (but see the note below).
                     
                     It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which
                     numbering sequences, additional to those listed above, are supported. If an
                     implementation does not support a numbering sequence represented by the given
                     token, it <span class="verb">must</span> use a format token of <code>1</code>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer">fn:format-integer</a>.)
                  </p>
               </li>
               <li>
                  <p>For all format tokens other than a <var>decimal-digit-pattern</var>, there 
                     <span class="verb">may</span> be <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> lower and upper bounds on the range of numbers that
                     can be formatted using this format token; indeed, for some numbering sequences there
                     may
                     be intrinsic limits. For example, the format token <code>&amp;#x2460;</code> (circled
                     digit one, ①) has a range imposed by the Unicode character repertoire — <span>zero to 20</span>
                     in Unicode versions prior to <span>3.2</span>, or <span>zero to 50</span> in subsequent versions. For the numbering
                     sequences described above any upper bound imposed by the implementation <span class="verb">must
                        not</span> be less than 1000 (one thousand) and any lower bound must not be
                     greater than 1. Numbers that fall outside this range <span class="verb">must</span> be
                     formatted using the format token <code>1</code>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer">fn:format-integer</a>.)
                  </p>
               </li>
               <li>
                  <p>The set of languages for which numbering is supported is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the <code>$lang</code> argument is absent, or is
                     set to an empty sequence, or is invalid, or is not a language supported by the
                     implementation, then the number is formatted using the default language from the dynamic
                     context. 
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer">fn:format-integer</a>.)
                  </p>
               </li>
               <li>
                  <p>...either <code>a</code> or <code>t</code>, to indicate alphabetic or traditional
                     numbering respectively, the default being <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer">fn:format-integer</a>.)
                  </p>
               </li>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> what
                     combinations of values of the format token, the language, and the cardinal/ordinal
                     modifier are supported. If ordinal numbering is not supported for the combination
                     of the
                     format token, the language, and the string appearing in parentheses, the request is
                     ignored and cardinal numbers are generated instead.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer">fn:format-integer</a>.)
                  </p>
               </li>
               <li>
                  <p>The use of the <code>a</code> or <code>t</code> modifier disambiguates between numbering
                     sequences that use letters. In many languages there are two commonly used numbering
                     sequences that use letters. One numbering sequence assigns numeric values to letters
                     in
                     alphabetic sequence, and the other assigns numeric values to each letter in some other
                     manner traditional in that language. In English, these would correspond to the numbering
                     sequences specified by the format tokens <code>a</code> and <code>i</code>. In some
                     languages, the first member of each sequence is the same, and so the format token
                     alone
                     would be ambiguous. In the absence of the <code>a</code> or <code>t</code> modifier, the
                     default is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer">fn:format-integer</a>.)
                  </p>
               </li>
               <li>
                  <p>The static context provides a set of decimal formats. One of the decimal formats is
                     unnamed, the others (if any)
                     are identified by a QName. There is always an unnamed decimal format available, but
                     its contents are 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#defining-decimal-format">Defining a decimal format</a>.)
                  </p>
               </li>
               <li>
                  <p>IEEE states that the preferred quantum is language-defined. In this
                     		       specification, it is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#trigonometry">Trigonometric and exponential functions</a>.)
                  </p>
               </li>
               <li>
                  <p>IEEE defines various rounding algorithms for inexact results, and states
                     		          that the choice of rounding direction, and the mechanisms for influencing
                     this choice,
                     		          are language-defined. In this specification, the rounding direction and
                     any mechanisms for
                     		          influencing it are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#trigonometry">Trigonometric and exponential functions</a>.)
                  </p>
               </li>
               <li>
                  <p>The map returned by the <code>fn:random-number-generator</code> function <span class="verb">may</span> contain additional entries beyond
                     those specified here, but it <span class="verb">must</span> match the type <code>map(xs:string, item())</code>. The meaning of any additional entries
                     is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. To avoid conflict with any future version of this specification, the keys of any
                     such entries <span class="verb">should</span> start with an underscore character.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator">fn:random-number-generator</a>.)
                  </p>
               </li>
               <li>
                  <p>If two query parameters use the same keyword then the last one wins. If a query parameter
                     uses a keyword or value which is not
                     defined in this specification then the meaning is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the implementation recognizes
                     the meaning of the keyword and value then it <span class="verb">should</span> interpret it accordingly; if it does not recognize
                     the keyword or value then if the <code>fallback</code> parameter is present with the value <code>no</code> it should reject
                     the collation as unsupported, otherwise it should ignore the unrecognized parameter.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#uca-collations">The Unicode Collation Algorithm</a>.)
                  </p>
               </li>
               <li>
                  <p>The following query parameters are defined. If any parameter is absent, the default
                     is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                     except where otherwise stated.
                     The meaning given for each parameter is non-normative; the normative specification
                     is found in <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR35">[UTS #35]</a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#uca-collations">The Unicode Collation Algorithm</a>.)
                  </p>
               </li>
               <li>
                  <p>HTML5 defines the semantics of equality matching using this collation; it does not
                     define rules for ordering. If the collation
                     is used for ordering, the results are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. The collation supports collation units and can therefore
                     be used with functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-contains"><code>fn:contains</code></a>; each Unicode codepoint is a single collation unit.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#html-ascii-case-insensitive-collation">The HTML ASCII Case-Insensitive Collation</a>.)
                  </p>
               </li>
               <li>
                  <p>Because the set of collations that are supported is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>,
                     			   an implementation has the option to support all collation URIs, in which case
                     it will never raise this error.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#choosing-a-collation">Choosing a collation</a>.)
                  </p>
               </li>
               <li>
                  <p>It is possible to define collations that do not have the ability to generate collation
                     keys. Supplying such a collation will cause the function to fail. The ability to
                     generate collation keys is an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> property of the
                     collation.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-collation-key">fn:collation-key</a>.)
                  </p>
               </li>
               <li>
                  <p>Conforming implementations <span class="verb">must</span> support normalization form "NFC" and
                     <span class="verb">may</span> support normalization forms "NFD", "NFKC", "NFKD", and
                     "FULLY-NORMALIZED". They <span class="verb">may</span> also support other normalization forms
                     with <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> semantics. 
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode">fn:normalize-unicode</a>.)
                  </p>
               </li>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which
                     version of Unicode (and therefore, of the normalization algorithms and their underlying
                     data) is supported by the implementation. See <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR15">[UAX #15]</a> for
                     details of the stability policy regarding changes to the normalization rules in future
                     versions of Unicode. If the input string contains codepoints that are unassigned in
                     the
                     relevant version of Unicode, or for which no normalization rules are defined, the
                     <code>fn:normalize-unicode</code> function leaves such codepoints unchanged. If the
                     implementation supports the requested normalization form then it <span class="verb">must</span>
                     be able to handle every input string without raising an error.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode">fn:normalize-unicode</a>.)
                  </p>
               </li>
               <li>
                  <p>It is possible to define collations that do not have the ability to decompose a
                     string into units suitable for substring matching. An argument to a function
                     defined in this section may be a URI that identifies a collation that is able to
                     compare two strings, but that does not have the capability to split the string
                     into collation units. Such a collation may cause the function to fail, or to
                     give unexpected results or it may be rejected as an unsuitable argument. The
                     ability to decompose strings into collation units is an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> property of the collation.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#substring.functions">Functions based on substring matching</a>.)
                  </p>
               </li>
               <li>
                  <p>All <em>minimally conforming</em> processors
                     <span class="verb">must</span>  support positive year values with a minimum of 4 digits (i.e.,
                     YYYY) and a minimum fractional second precision of 1 millisecond or three
                     digits (i.e., s.sss). However, <em>conforming</em> processors
                     <span class="verb">may</span>  set larger <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> limits
                     on the maximum number of digits they support in these two situations.  Processors
                     <span class="verb">may</span> also choose to support the year 0000 and 
                     years with negative values.  The results of operations on dates that cross the year
                     
                     0000 are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#date-time-duration-conformance">Limits and precision</a>.)
                  </p>
               </li>
               <li>
                  <p>...the format token <code>n</code>, <code>N</code>,
                     or <code>Nn</code>, indicating that the value of the component is to be output by name,
                     in lower-case, upper-case, or title-case respectively. Components that can be output
                     by name
                     include (but are not limited to) months, days of the week, timezones, and eras. 
                     If the processor cannot output these components by name for the chosen calendar and
                     language 
                     then it must use an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> fallback representation.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#date-picture-string">The picture string</a>.)
                  </p>
               </li>
               <li>
                  <p>...indicates alphabetic or traditional numbering respectively,
                     the default being <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. 
                     This has the same meaning as in the second argument of <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#date-picture-string">The picture string</a>.)
                  </p>
               </li>
               <li>
                  <p>The sequence of characters in the (adjusted) first presentation modifier is reversed
                     (for example, 
                     		                  <code>999'###</code> becomes <code>###'999</code>). 
                     		                  If the result is not a valid <b>decimal digit pattern</b>, then the output is 
                     		                  <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     		               
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#formatting-fractional-seconds">Formatting Fractional Seconds</a>.)
                  </p>
               </li>
               <li>
                  <p>The output for these components is entirely <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     		      The default presentation modifier for these components is <code>n</code>, indicating that they are output as names (or
                     		      conventional abbreviations), and the chosen names will in many cases depend
                     on the chosen language: see <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place"><b>9.8.4.8 The language, calendar, and place arguments</b></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#formatting-other-components">Formatting Other Components</a>.)
                  </p>
               </li>
               <li>
                  <p>The set of languages, calendars, and places that are supported in the 
                     <a title="date formatting function" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#dt-date-formatting-function"><span class="arrow">·</span>date formatting functions<span class="arrow">·</span></a> is
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. When
                     any of these arguments is omitted or is an empty sequence, an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>
                     default value is used.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place">The language, calendar, and place arguments</a>.)
                  </p>
               </li>
               <li>
                  <p>The choice of the names and abbreviations used in any given language is 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. For example,
                     one implementation might abbreviate July as <code>Jul</code> while another uses <code>Jly</code>. In German,
                     one implementation might represent Saturday as <code>Samstag</code> while another
                     uses <code>Sonnabend</code>. Implementations <span class="verb">may</span> provide mechanisms allowing users to
                     control such choices.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place">The language, calendar, and place arguments</a>.)
                  </p>
               </li>
               <li>
                  <p>The choice of the names and abbreviations used in any given language for
                     calendar units such as days of the week and months of the year is 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place">The language, calendar, and place arguments</a>.)
                  </p>
               </li>
               <li>
                  <p>The calendar value if present <span class="verb">must</span> be a valid <code>EQName</code> 
                     (dynamic error: [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]).
                     If it is a lexical <code>QName</code> then it is expanded into an expanded QName 
                     using the statically known namespaces; if it has no prefix then it represents an expanded-QName
                     in no namespace.
                     If the expanded QName is in no namespace, 
                     then it <span class="verb">must</span> identify a calendar with a designator specified below 
                     (dynamic error: [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOFD1340" title="err:FOFD1340">err:FOFD1340</a>]). 
                     If the expanded QName is in a namespace then it identifies the calendar in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place">The language, calendar, and place arguments</a>.)
                  </p>
               </li>
               <li>
                  <p>At least one of the above calendars <span class="verb">must</span> be supported. It is 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which
                     calendars are supported.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#lang-cal-place">The language, calendar, and place arguments</a>.)
                  </p>
               </li>
               <li>
                  <p>Various aspects of this processing are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     Implementations may provide external configuration options that allow any aspect of
                     the
                     processing to be controlled by the user. In particular:...
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc">fn:doc</a>.)
                  </p>
               </li>
               <li>
                  <p>It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> whether DTD validation and/or schema
                     validation is applied to the source document.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc">fn:doc</a>.)
                  </p>
               </li>
               <li>
                  <p>The effect of a fragment identifier in the supplied URI 
                     is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. One possible interpretation
                     is to treat the fragment identifier as an ID attribute value, and to return a document
                     node having the element with the selected ID value as its only child.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc">fn:doc</a>.)
                  </p>
               </li>
               <li>
                  <p>By default, this function is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. This
                     means that repeated calls on the function with the same argument will return the same
                     result. However, for performance reasons, implementations may provide a user option
                     to
                     evaluate the function without a guarantee of determinism. The manner in which any
                     such
                     option is provided is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the user has not
                     selected such an option, a call to this function must either return a deterministic
                     result or must raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0003" title="err:FODC0003">err:FODC0003</a>].
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection">fn:collection</a>.)
                  </p>
               </li>
               <li>
                  <p>By default, this function is <a title="" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#"><span class="arrow">·</span>deterministic<span class="arrow">·</span></a>. This
                     means that repeated calls on the function with the same argument will return the same
                     result. However, for performance reasons, implementations may provide a user option
                     to
                     evaluate the function without a guarantee of determinism. The manner in which any
                     such
                     option is provided is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. If the user has not
                     selected such an option, a call to this function must either return a deterministic
                     result or must raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFODC0003" title="err:FODC0003">err:FODC0003</a>].
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection">fn:uri-collection</a>.)
                  </p>
               </li>
               <li>
                  <p>...the processor <span class="verb">may</span> use <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> heuristics to determine the likely encoding,
                     otherwise...
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text">fn:unparsed-text</a>.)
                  </p>
               </li>
               <li>
                  <p>The fact that the resolution of URIs is defined by a mapping in the dynamic context
                     means that in effect, various aspects of the behavior of this function are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. Implementations may provide external configuration
                     options that allow any aspect of the processing to be controlled by the user. In
                     particular:...
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-unparsed-text">fn:unparsed-text</a>.)
                  </p>
               </li>
               <li>
                  <p>The collation used for matching names is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>, but
                     must be the same as the collation used to ensure that the names of all environment
                     variables are unique.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-environment-variable">fn:environment-variable</a>.)
                  </p>
               </li>
               <li>
                  <p>The precise process used to construct the XDM instance is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. In particular, it is implementation-defined whether
                     DTD and/or schema validation is invoked, and it is implementation-defined whether
                     an XML
                     1.0 or XML 1.1 parser is used.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml">fn:parse-xml</a>.)
                  </p>
               </li>
               <li>
                  <p>The precise process used to construct the XDM instance is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. In particular, it is implementation-defined whether
                     an XML 1.0 or XML 1.1 parser is used.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-xml-fragment">fn:parse-xml-fragment</a>.)
                  </p>
               </li>
               <li>
                  <p>If the second argument is omitted, or is supplied in the form of an <code>output:serialization-parameters</code>
                     element, then the values of any serialization parameters that are not explicitly specified
                     is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>,
                     and may depend on the context.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize">fn:serialize</a>.)
                  </p>
               </li>
               <li>
                  <p>If the arguments to <code>fn:function-lookup</code> identify a function that is present
                     in the static context of the function call, the function will always return the same
                     function that a static reference to this function would bind to. If there is no such
                     function in the static context, then the results depend on what is present in the
                     dynamic context, which is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-function-lookup">fn:function-lookup</a>.)
                  </p>
               </li>
               <li>
                  <p>A sequence of URIs (in the form of <code>xs:string</code> values) which may be used or ignored in an
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way....
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module">fn:load-xquery-module</a>.)
                  </p>
               </li>
               <li>
                  <p>Values for vendor-defined configuration options for the XQuery processor used to process
                     the request. The key is the
                     name of an option, expressed as a QName: the namespace URI of the QName <span class="verb">should</span> be a URI controlled
                     by the vendor of the XQuery processor. The meaning of the associated value is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     Implementations <span class="verb">should</span> ignore options whose names are in an unrecognized namespace. 
                     The <a title="option parameter conventions" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#option-parameter-conventions"><span class="arrow">·</span>option parameter conventions<span class="arrow">·</span></a> do not apply
                     to this contained map....
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module">fn:load-xquery-module</a>.)
                  </p>
               </li>
               <li>
                  <p>If the implementation provides a way of writing or invoking functions 
                     with side-effects, this post-processing function might be used to save 
                     a copy of the result document to persistent storage. For example, if the 
                     implementation provides access to the EXPath File library <a href="https://www.w3.org/TR/xpath-functions-31/#expath">[EXPath]</a>, 
                     then a serialized document might be written to filestore by calling the 
                     <code>file:write</code> function. Similar mechanisms might be used to issue 
                     an HTTP POST request that posts the result to an HTTP server, or to send 
                     the document to an email recipient. The semantics of calling functions 
                     with side-effects are entirely <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform">fn:transform</a>.)
                  </p>
               </li>
               <li>
                  <p>Calls to <code>fn:transform</code> can potentially have side-effects 
                     even in the absence of the post-processing option, because the XSLT 
                     specification allows a stylesheet to invoke extension functions 
                     that have side-effects. The semantics in this case are <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform">fn:transform</a>.)
                  </p>
               </li>
               <li>
                  <p>Values for vendor-defined configuration options for the XSLT processor used to
                     process the request. The key is the name of an option, expressed as a QName: the
                     namespace URI of the QName <span class="verb">should</span> be a URI controlled by the vendor
                     of the XSLT processor. The meaning of the associated value is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. Implementations
                     <span class="verb">should</span> ignore options whose names are in an unrecognized
                     namespace. Default is an empty map....
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform">fn:transform</a>.)
                  </p>
               </li>
               <li>
                  <p>
                     The input <span class="verb">may</span> contain deviations from the grammar of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>,
                     which are handled in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way. (Note: some popular
                     extensions include allowing quotes on keys to be omitted, allowing a comma
                     to appear after the last item in an array, allowing leading zeroes in numbers, and
                     allowing control characters such as
                     tab and newline to be present in unescaped form.) Since the extensions accepted
                     are implementation-defined, an error <span class="verb">may</span> be raised
                     [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOJS0001" title="err:FOJS0001">err:FOJS0001</a>] if the input does not conform to the grammar.
                     
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json">fn:parse-json</a>.)
                  </p>
               </li>
               <li>
                  <p>
                     The input <span class="verb">may</span> contain deviations from the grammar of <a href="https://www.w3.org/TR/xpath-functions-31/#rfc7159">[RFC 7159]</a>,
                     which are handled in an <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> way. (Note: some popular
                     extensions include allowing quotes on keys to be omitted, allowing a comma
                     to appear after the last item in an array, allowing leading zeroes in numbers, and
                     allowing control characters such as
                     tab and newline to be present in unescaped form.) Since the extensions accepted
                     are implementation-defined, an error <span class="verb">may</span> be raised
                     (see below) if the input does not conform to the grammar.
                     
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml">fn:json-to-xml</a>.)
                  </p>
               </li>
               <li>
                  <p>If <em>ST</em> is <code>xs:float</code> or
                     <code>xs:double</code>, then <em>TV</em> is the
                     <code>xs:decimal</code> value, within the set of
                     <code>xs:decimal</code> values that the implementation is
                     capable of representing, that is numerically closest to
                     <em>SV</em>. If two values are equally close, then the one
                     that is closest to zero is chosen. If <em>SV</em> is too
                     large to be accommodated as an <code>xs:decimal</code>, (see
                     <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> for <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> limits on
                     numeric values) a dynamic error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0001" title="err:FOCA0001">err:FOCA0001</a>]. If <em>SV</em> is one of the special
                     <code>xs:float</code> or <code>xs:double</code> values
                     <code>NaN</code>, <code>INF</code>, or <code>-INF</code>, a dynamic
                     error is raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>].
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-decimal">Casting to xs:decimal</a>.)
                  </p>
               </li>
               <li>
                  <p>If <em>ST</em> is
                     <code>xs:decimal</code>, <code>xs:float</code> or
                     <code>xs:double</code>, then <em>TV</em> is <em>SV</em>
                     with the fractional part discarded and the value converted to
                     <code>xs:integer</code>. Thus, casting <code>3.1456</code>
                     returns <code>3</code> and <code>-17.89</code> returns
                     <code>-17</code>. Casting <code>3.124E1</code>
                     returns <code>31</code>. If <em>SV</em> is too large to be
                     accommodated as an integer, (see <a href="https://www.w3.org/TR/xpath-functions-31/#xmlschema-2">[XML Schema Part 2: Datatypes Second Edition]</a> for
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> limits on numeric values) a 
                     dynamic error is
                     raised [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0003" title="err:FOCA0003">err:FOCA0003</a>]. If <em>SV</em> is
                     one of the special <code>xs:float</code> or
                     <code>xs:double</code> values <code>NaN</code>,
                     <code>INF</code>, or <code>-INF</code>, a dynamic error is raised
                     [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0002" title="err:FOCA0002">err:FOCA0002</a>].
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-integer">Casting to xs:integer</a>.)
                  </p>
               </li>
               <li>
                  <p>
                     In casting to <code>xs:decimal</code> or to a type derived from <code>xs:decimal</code>, 
                     if the value is not too large or too small but nevertheless cannot be represented
                     accurately 
                     with the number of decimal digits available to the implementation, the implementation
                     may round 
                     to the nearest representable value or may raise a dynamic error [<a href="https://www.w3.org/TR/xpath-functions-31/#ERRFOCA0006" title="err:FOCA0006">err:FOCA0006</a>]. 
                     The choice of rounding algorithm and the choice between rounding and error behavior
                     and is 
                     <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#casting-from-strings">Casting from xs:string and xs:untypedAtomic</a>.)
                  </p>
               </li>
               <li>
                  <p>
                     The <em>tz</em> timezone database, available at 
                     <a href="http://www.iana.org/time-zones">http://www.iana.org/time-zones</a>.
                     It is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a> which version of the database is used.
                     
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#olson">IANA Timezone Database</a>.)
                  </p>
               </li>
               <li>
                  <p><em>Unicode Standard Annex #15: Unicode Normalization
                        Forms</em>. 
                     Ed. Mark Davis and Ken Whistler, Unicode Consortium.
                     The current version is 9.0.0, dated 2016-02-24.
                     As with <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, the version to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     Available at:
                     <a href="http://www.unicode.org/reports/tr15/">http://www.unicode.org/reports/tr15/</a>.                 
                     
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR15">UAX #15</a>.)
                  </p>
               </li>
               <li>
                  <p>
                     The Unicode Consortium, Reading, MA, Addison-Wesley, 2016. <em>The Unicode Standard</em>
                     as updated from time to time by the publication of new versions. See 
                     <a href="http://www.unicode.org/standard/versions/">http://www.unicode.org/standard/versions/</a>
                     for the latest version and additional information on versions of the standard and
                     of the Unicode Character Database. 
                     The version of Unicode to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>,
                     but implementations are recommended to use the latest Unicode version;
                     currently, Version 9.0.0.
                     
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">The Unicode Standard</a>.)
                  </p>
               </li>
               <li>
                  <p><em>Unicode
                        Technical Standard #10: Unicode Collation Algorithm</em>. 
                     Ed. Mark Davis and Ken Whistler, Unicode Consortium. The current version is 9.0.0,
                     dated 2016-05-18.
                     As with <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, the version to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>. 
                     Available at: <a href="http://www.unicode.org/reports/tr10/">http://www.unicode.org/reports/tr10/</a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR10">UTS #10</a>.)
                  </p>
               </li>
               <li>
                  <p><em>Unicode
                        Technical Standard #35: Unicode Locale Data Markup Language</em>. 
                     Ed Mark Davis <em>et al</em>, Unicode Consortium. The current version is 29, dated 2016-03-15.
                     As with <a href="https://www.w3.org/TR/xpath-functions-31/#Unicode">[The Unicode Standard]</a>, the version to be used is <a title="implementation-defined" class="termref" href="https://www.w3.org/TR/xpath-functions-31/#implementation-defined"><span class="arrow">·</span>implementation-defined<span class="arrow">·</span></a>.
                     Available at: <a href="http://www.unicode.org/reports/tr35/">http://www.unicode.org/reports/tr35/</a>.
                     (See <a href="https://www.w3.org/TR/xpath-functions-31/#UNICODE-TR35">UTS #35</a>.)
                  </p>
               </li>
            </ol>
         </div>
         <div class="div1">
            
            <h2><a id="changelog"></a>F Changes since version 3.0 (Non-Normative)
            </h2>
            <div class="div2">
               
               <h3><a id="substantive-changes"></a>F.1 Substantive changes
               </h3>
               <ol class="enumar">
                  <li>
                     <p>Functions are added to manipulate maps and arrays.</p>
                  </li>
                  <li>
                     <p>Functions are provided to convert data to and from JSON format.</p>
                  </li>
                  <li>
                     <p>The <code>format-number</code> function is enhanced to allow formatting using
                        exponential notation.
                     </p>
                  </li>
                  <li>
                     <p>Some new collation URIs are standardized:</p>
                     <ul>
                        <li>
                           <p>A family of collation URIs corresponding to the Unicode
                              Collation Algorithm
                           </p>
                        </li>
                        <li>
                           <p>A URI corresponding to the HTML matching rules (where ASCII letters are case-blind,
                              but non-ASCII letters are not)
                           </p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>As well as functions for maps and arrays, further new functions are added:</p>
                     <ul>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-apply"><code>fn:apply</code></a> (dynamically applies a function to arguments supplied as an array)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-collation-key"><code>fn:collation-key</code></a> (generates a key that can be used for collation-based matching)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-contains-token"><code>fn:contains-token</code></a> (tests whether a token is present in a whitespace-separated list)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-default-language"><code>fn:default-language</code></a> (returns the default language from the context)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><code>fn:json-doc</code></a> (loads and parses a document in JSON format, producing maps and arrays)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> (converts JSON to XML)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-load-xquery-module"><code>fn:load-xquery-module</code></a> (dynamically loads an XQuery module, providing access to its global variables and
                              functions)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-ietf-date"><code>fn:parse-ietf-date</code></a> (parses a date/time supplied in IETF format)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> (parses a string in JSON format, producing maps and arrays)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator"><code>fn:random-number-generator</code></a> (generates random numbers)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-sort"><code>fn:sort</code></a>(sorts a sequence)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> (runs an XSLT transformation)
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> (converts XML to JSON)
                           </p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>New variants of some existing functions are introduced:</p>
                     <ul>
                        <li>
                           <p>A one-argument form of <a href="https://www.w3.org/TR/xpath-functions-31/#func-tokenize"><code>fn:tokenize</code></a>, to handle whitespace-separated strings
                           </p>
                        </li>
                        <li>
                           <p>A one-argument form of <a href="https://www.w3.org/TR/xpath-functions-31/#func-trace"><code>fn:trace</code></a>, omitting the <code>$label</code> argument
                           </p>
                        </li>
                        <li>
                           <p>The single-argument form of the <a href="https://www.w3.org/TR/xpath-functions-31/#func-error"><code>fn:error</code></a> function, like the other forms, now allows the first argument
                              to be an empty sequence.
                           </p>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <p>Some existing functions are extended to handle maps and arrays: affected functions
                        include
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-boolean"><code>fn:boolean</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-string"><code>fn:string</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-data"><code>fn:data</code></a>, <a href="https://www.w3.org/TR/xpath-functions-31/#func-deep-equal"><code>fn:deep-equal</code></a>,
                        and <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a>.
                     </p>
                  </li>
                  <li>
                     <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> function can now accept serialization parameters supplied in the form of a map.
                     </p>
                  </li>
                  <li>
                     <p>An ordering relation is defined for <code>xs:hexBinary</code> and <code>xs:base64Binary</code>
                        values.
                     </p>
                  </li>
                  <li>
                     <p>Functions and operators on numeric values now make use of the new built-in union type
                        <code>xs:numeric</code>,
                        replacing the previous use of <code>numeric</code> as a label representing a pseudo-type.
                     </p>
                  </li>
                  <li>
                     <p>For the <a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><code>fn:max</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-min"><code>fn:min</code></a> functions, the rules for the dynamic type of the
                        result value are stricter than in previous versions. In the case where the input sequence
                        consists entirely of
                        numeric or <code>xs:anyURI</code> values of the same primitive type, previous versions required only that the returned
                        value be an instance of the least common supertype of the input types; this version
                        requires that the returned value
                        retains its original type, which means that the same rule now applies to numeric and
                        <code>xs:anyURI</code> values
                        as to values of other primitive types.
                     </p>
                  </li>
                  <li>
                     <p>An ambiguity relating to the type of the results of functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-abs"><code>fn:abs</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-round"><code>fn:round</code></a>
                        has been resolved. The specification is now explicit, for example, that when <a href="https://www.w3.org/TR/xpath-functions-31/#func-abs"><code>fn:abs</code></a> is applied to a value
                        of type <code>xs:positiveInteger</code>, it is legitimate to return the supplied value unchanged (any other type derived
                        from <code>xs:integer</code> is also permitted).
                     </p>
                  </li>
                  <li>
                     <p>Many edge cases in the functions for formatting dates, times, and numbers are now
                        specified more prescriptively, and
                        in some cases mandate behavior that was previously implementation-defined. For example,
                        the handling of grouping separators
                        when formatting fractional seconds is now spelled out.
                     </p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="editorial-changes"></a>F.2 Editorial and procedural changes
               </h3>
               <ol class="enumar">
                  <li>
                     <p>The conformance rules have been rewritten to better reflect the relationship with
                        host languages. 
                     </p>
                  </li>
                  <li>
                     <p>The types <code>xs:dayTimeDuration</code> and <code>xs:yearMonthDuration</code> are now defined by
                        		          reference to XSD 1.1.
                     </p>
                  </li>
                  <li>
                     <p>References to ISO 8601 are updated to refer to the 2004 edition.</p>
                  </li>
                  <li>
                     <p>The claim that early normalization is preferred has been removed, as the relevant
                        W3C document has effectively
                        		          withdrawn this recommendation.
                     </p>
                  </li>
                  <li>
                     <p>For functions that depend on the static base URI, the specification describes more
                        clearly what happens when the
                        		          static base URI is absent.
                     </p>
                  </li>
                  <li>
                     <p>The functions underpinning the operators "<code>&lt;&lt;</code>", "<code>&gt;&gt;</code>", <code>is</code>, <code>union</code>, <code>except</code>,
                        		          <code>to</code>, and "<code>,</code>" have been removed from this document. These operators are fully described in the
                        		          XPath and XQuery language specifications, which make no reference to the
                        specifications that previously 
                        		          appeared in this document.
                     </p>
                  </li>
                  <li>
                     <p>Compatibility with versions earlier than 3.0 is now described by reference to the
                        3.0 version of this Recommendation, which
                        		          contains detailed information on the topic.
                     </p>
                  </li>
                  <li>
                     <p>An informative appendix now gives brief details of additional function libraries defined
                        by third parties.
                     </p>
                  </li>
                  <li>
                     <p>Numerous minor editorial errors have been corrected, and numerous clarifications added.</p>
                  </li>
                  <li>
                     <p>The (poorly defined) concept of least common subtype is no longer used.</p>
                  </li>
                  <li>
                     <p>Some minor changes have been made in support of streaming in XSLT 3.0: for example
                        it is recognized that there
                        		       are circumstances in which the <a href="https://www.w3.org/TR/xpath-functions-31/#func-last"><code>fn:last</code></a> function may raise dynamic errors related to streaming.
                     </p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="changes-since-Dec-2014"></a>F.3 Changes since the Candidate Recommendation of 18 December 2014
               </h3>
               <p>Numerous editorial corrections and clarifications have been made. Except for the most
                  trivial, these
                  	        can be found listed in the public Bugzilla database, and can be identified
                  by the highlighting in the
                  	        change-marked version of this document.
               </p>
               <p>The following substantive technical changes have been made:</p>
               <ol class="enumar">
                  <li>
                     <p>The rules for determinism of <a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><code>fn:uri-collection</code></a> are now identical to the rules for 
                        	              <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> (Bug 27750).
                     </p>
                  </li>
                  <li>
                     <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> function can now return items of any type (not only nodes).
                     </p>
                  </li>
                  <li>
                     <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc-available"><code>fn:doc-available</code></a> function now returns false, rather than raising an error, when
                        	              an invalid URI is supplied (Bug 29404).
                     </p>
                  </li>
                  <li>
                     <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-uri-collection"><code>fn:uri-collection</code></a> functions are no longer
                        	              required to report a specific error when the supplied URI is invalid
                        (Bug 29404).
                     </p>
                  </li>
                  <li>
                     <p>The two functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a>, previously
                        	              in the XSLT 3.0 specification, have been transferred to this specification
                        (Bug 27997),
                        	              and minor changes have been made to <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-doc"><code>fn:json-doc</code></a>
                        	              in the interests of alignment.
                     </p>
                  </li>
                  <li>
                     <p>The rules for functions that accept an options parameter as a map have been unified,
                        	              clarified, and moved into a single place (Bug 28196).
                     </p>
                  </li>
                  <li>
                     <p>Added a suggested (optional) way of referencing CLDR numbering schemes in <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a> (Bug 27614).
                     </p>
                  </li>
                  <li>
                     <p>The second argument of <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a> can now be provided in the form of a map, giving serialization
                        	              options (Bug 28140).
                     </p>
                  </li>
                  <li>
                     <p>The new function <a href="https://www.w3.org/TR/xpath-functions-31/#func-default-language"><code>fn:default-language</code></a> has been added. (Bug 28850).
                     </p>
                  </li>
                  <li>
                     <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-ietf-date"><code>fn:parse-ietf-date</code></a> function now accepts a single-digit hours value (Bug 29496).
                     </p>
                  </li>
                  <li>
                     <p>Clarified that <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-join"><code>array:join</code></a> when given an empty sequence as input produces an empty array as its result. (Bug
                        29607).
                     </p>
                  </li>
                  <li>
                     <p>Provided a suggested interpretation for fragment identifiers in the URI passed to
                        <a href="https://www.w3.org/TR/xpath-functions-31/#func-doc"><code>fn:doc</code></a>. (Bug 29608).
                     </p>
                  </li>
                  <li>
                     <p>The new function <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-put"><code>array:put</code></a> has been added. (Bug 29685).
                     </p>
                  </li>
                  <li>
                     <p>The function <a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator"><code>fn:random-number-generator</code></a> now accepts an empty sequence
                        	              as the first argument. (Bug 29671).
                     </p>
                  </li>
                  <li>
                     <p>The functions <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-remove"><code>map:remove</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-remove"><code>array:remove</code></a> can now remove
                        	           multiple entries/members in a single call. (Bug 29660).
                     </p>
                  </li>
                  <li>
                     <p>The rules under which <a href="https://www.w3.org/TR/xpath-functions-31/#func-xml-to-json"><code>fn:xml-to-json</code></a> recognizes map keys as duplicates, especially
                        	           when some characters are escaped, have been clarified. (Bug 29588)
                     </p>
                  </li>
                  <li>
                     <p>The <a href="https://www.w3.org/TR/xpath-functions-31/#func-json-to-xml"><code>fn:json-to-xml</code></a> function now escapes solidus (<code>/</code>) as
                        	              <code>\/</code>. (Bug 29665)
                     </p>
                  </li>
                  <li>
                     <p>A new function <a href="https://www.w3.org/TR/xpath-functions-31/#func-map-find"><code>map:find</code></a> is provided to allow recursive searching of nested maps and arrays. (Bug 29743)
                     </p>
                  </li>
                  <li>
                     <p>The options to the <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> function have been refined. (Bugs 29832 and 29939)
                     </p>
                  </li>
                  <li>
                     <p>The serialization parameters supplied to <a href="https://www.w3.org/TR/xpath-functions-31/#func-transform"><code>fn:transform</code></a> have been brought into line with those supplied
                        	              to <a href="https://www.w3.org/TR/xpath-functions-31/#func-serialize"><code>fn:serialize</code></a>. (Bugs 29940 and 29943)
                     </p>
                  </li>
                  <li>
                     <p>To ensure that collation keys can be compared without ambiguity, the <a href="https://www.w3.org/TR/xpath-functions-31/#func-collation-key"><code>fn:collation-key</code></a> function
                        	           is now defined to return an <code>xs:base64Binary</code> result. (Bug 29853)
                     </p>
                  </li>
                  <li>
                     <p>Collation URIs for UCA collations have a new parameter <code>maxVariable</code> indicating which groups
                        	           of characters (for example whitespace and punctuation) should be ignored,
                        or given reduced significance, when
                        	           comparing strings. In addition, most of the parameters in UCA collation
                        URIs now have interoperable default
                        	           values. (Bug 29865)
                     </p>
                  </li>
               </ol>
               <p>In addition, a number of technical clarifications have been made:</p>
               <ol class="enumar">
                  <li>
                     <p>Clarification of the specialized meaning of the term "primitive type" used throughout
                        
                        	              section <a href="https://www.w3.org/TR/xpath-functions-31/#casting"><b>19 Casting</b></a> (Bug 27737).
                     </p>
                  </li>
                  <li>
                     <p>Error conditions and handling of edge cases such as unpaired surrogates are more clearly
                        defined
                        	              for JSON-related functions such as <a href="https://www.w3.org/TR/xpath-functions-31/#func-parse-json"><code>fn:parse-json</code></a>.
                     </p>
                  </li>
                  <li>
                     <p>The description of <a href="https://www.w3.org/TR/xpath-functions-31/#func-replace"><code>fn:replace</code></a> has been changed to clarify that certain error conditions are not
                        	              applicable when the <code>q</code> flag is present.
                     </p>
                  </li>
                  <li>
                     <p>The properties of the functions returned by <a href="https://www.w3.org/TR/xpath-functions-31/#func-random-number-generator"><code>fn:random-number-generator</code></a>
                        	           have been spelt out in more detail.
                     </p>
                  </li>
                  <li>
                     <p>The rules for the <a href="https://www.w3.org/TR/xpath-functions-31/#func-idref"><code>fn:idref</code></a> function have been clarified in the edge case where a node contains both IDREF
                        	           and non-IDREF items in its typed value (Bug 28238).
                     </p>
                  </li>
                  <li>
                     <p>The specification of regular expressions is now more careful to distinguish capturing
                        parentheses in a
                        	              regex from other (non-capturing) parentheses.
                     </p>
                  </li>
                  <li>
                     <p>The specification of <a href="https://www.w3.org/TR/xpath-functions-31/#func-collation-key"><code>fn:collation-key</code></a> has been clarified to make it explicit that the function
                        	              follows the general rules for collation URI arguments.
                     </p>
                  </li>
                  <li>
                     <p>The rules for handling of grouping separators in <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-integer"><code>fn:format-integer</code></a> have been spelt out in more detail.
                     </p>
                  </li>
                  <li>
                     <p>Some rules have been added to disallow nonsensical picture strings in <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a>. Specifically,
                        	           the mantissa part cannot consist of a decimal separator on its own; a
                        grouping separator cannot appear at the end of the integer part
                        	           of the picture; and adjacent grouping separators are disallowed. (Bug
                        28567)
                     </p>
                  </li>
               </ol>
            </div>
            <div class="div2">
               
               <h3><a id="changes-since-Dec-2016"></a>F.4 Changes since the Candidate Recommendation of 13 December 2016
               </h3>
               <p>The following corrections have been made:</p>
               <ol class="enumar">
                  <li>
                     <p>Bug 30041: removed any ambiguity as to how <a href="https://www.w3.org/TR/xpath-functions-31/#func-year-from-date"><code>fn:year-from-date</code></a> and
                        	              <a href="https://www.w3.org/TR/xpath-functions-31/#func-year-from-dateTime"><code>fn:year-from-dateTime</code></a> should handle negative (BCE) years.
                     </p>
                  </li>
                  <li>
                     <p>Bug 30045: corrected an error in the specification of <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-fold-left"><code>array:fold-left</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-array-fold-right"><code>array:fold-right</code></a>
                        	              which suggested they should wrap the result in an array, contrary to
                        all examples, notes, and test cases.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="div1">
            
            <h2><a id="back-compatibility"></a>G Compatibility with Previous Versions (Non-Normative)
            </h2>
            <p>This section summarizes the extent to which this specification is compatible with
               previous versions.
            </p>
            <p>Version 3.1 of this function library is fully backwards compatible with version 3.0,
               with the following caveats:
            </p>
            <ol class="enumar">
               <li>
                  <p>The return type of the result of <a href="https://www.w3.org/TR/xpath-functions-31/#func-min"><code>fn:min</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-max"><code>fn:max</code></a> is more strictly prescribed
                     than in earlier versions.
                  </p>
               </li>
               <li>
                  <p>The behavior of functions when the static base URI is absent is more strictly prescribed
                     than
                     in earlier versions.
                  </p>
               </li>
               <li>
                  <p>In the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a> function, some picture strings that previously were permitted 
                     but had no defined meaning are now disallowed.
                  </p>
               </li>
               <li>
                  <p>In the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-number"><code>fn:format-number</code></a> function, the rules as given in XPath/XQuery 3.0, and before that in XSLT 2.0,
                     resulted in the number zero being formatted as a zero-length string under certain
                     pictures (for example <code>".#"</code>).
                     This has been deemed a bug rather than a feature, and has been corrected in this version
                     of the specification.
                     
                  </p>
               </li>
               <li>
                  <p>The return type of the result of <a href="https://www.w3.org/TR/xpath-functions-31/#func-collection"><code>fn:collection</code></a> is now broader, which may result in errors
                     when strict static typing is used.
                  </p>
               </li>
               <li>
                  <p>In the <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-time"><code>fn:format-time</code></a> and <a href="https://www.w3.org/TR/xpath-functions-31/#func-format-dateTime"><code>fn:format-dateTime</code></a> functions,
                     fractional seconds are now truncated towards zero rather than being rounded when necessary
                     to fit in the 
                     maximum width (previous versions of the specification prescribed rounding, but did
                     not say what should happen
                     when a fraction such as <code>0.999</code> rounded to <code>1</code>).
                  </p>
               </li>
            </ol>
            <p>For compatibility issues regarding earlier versions, see the 3.0 version of this specification.</p>
         </div>
	 <p role="navigation" id="back-to-top"><a href="https://www.w3.org/TR/xpath-functions-31/#toc"><abbr title="Back to top">↑</abbr></a></p>
      </div><script src="./xquery31_files/fixup.js"></script>

</body><div></div></html>